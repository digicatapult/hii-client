/*! For license information please see bundle.c148a94d051dd3f06185.js.LICENSE.txt */
!function(){var e,t,r={679:function(e,t,r){"use strict";var n=r(864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?a:s[e.$$typeof]||i}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(f){var i=p(r);i&&i!==f&&e(t,i,n)}var a=u(r);h&&(a=a.concat(h(r)));for(var s=l(t),m=l(r),g=0;g<a.length;++g){var y=a[g];if(!(o[y]||n&&n[y]||m&&m[y]||s&&s[y])){var _=d(r,y);try{c(t,y,_)}catch(e){}}}}return t}},158:function(e){e.exports=function(){"use strict";var e,t,r;function n(n,i){if(e)if(t){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",a={};e(a),r=i(a),"undefined"!=typeof window&&window&&window.URL&&window.URL.createObjectURL&&(r.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=i;else e=i}return n(0,(function(e){var t="undefined"!=typeof self?self:{},r="2.11.1";let n;const i={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==n){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{n=null!={MAPBOX_TOKEN:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",MAPBOX_STYLE:void 0,WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0}.API_URL_REGEX?new RegExp({MAPBOX_TOKEN:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",MAPBOX_STYLE:void 0,WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0}.API_URL_REGEX):e}catch(t){n=e}}return n},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},o={supported:!1,testSupport:function(e){!l&&s&&(c?u(e):a=e)}};let a,s,l=!1,c=!1;function u(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s),e.isContextLost())return;o.supported=!0}catch(e){}e.deleteTexture(t),l=!0}t.document&&(s=t.document.createElement("img"),s.onload=function(){a&&u(a),a=null,c=!0},s.onerror=function(){l=!0,a=null},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const h="01";var d=p;function p(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=n}p.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var i=this.sampleCurveX(r)-e;if(Math.abs(i)<t)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r-=i/o}var a=0,s=1;for(r=e,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-e)<t));n++)e>i?a=r:s=r,r=.5*(s-a)+a;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var f=m;function m(e,t){this.x=e,this.y=t}m.prototype={clone:function(){return new m(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=n,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-n*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},m.convert=function(e){return e instanceof m?e:Array.isArray(e)?new m(e[0],e[1]):e};const g=Math.PI/180,y=180/Math.PI;function _(e){return e*g}function v(e){return e*y}const x=[[0,0],[1,0],[1,1],[0,1]];function b(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function w(e,t,r,n){const i=new d(e,t,r,n);return function(e){return i.solve(e)}}const E=w(.25,.1,.25,1);function T(e,t,r){return Math.min(r,Math.max(t,e))}function S(e,t,r){return(r=T((r-e)/(t-e),0,1))*r*(3-2*r)}function A(e,t,r){const n=r-t,i=((e-t)%n+n)%n+t;return i===t?r:i}function P(e,t,r){if(!e.length)return r(null,[]);let n=e.length;const i=new Array(e.length);let o=null;e.forEach(((e,a)=>{t(e,((e,t)=>{e&&(o=e),i[a]=t,0==--n&&r(o,i)}))}))}function I(e){const t=[];for(const r in e)t.push(e[r]);return t}function k(e,...t){for(const r of t)for(const t in r)e[t]=r[t];return e}let C=1;function M(){return C++}function z(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function D(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function L(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function F(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function R(e,t){return-1!==e.indexOf(t,e.length-t.length)}function B(e,t,r){const n={};for(const i in e)n[i]=t.call(r||this,e[i],i,e);return n}function O(e,t,r){const n={};for(const i in e)t.call(r||this,e[i],i,e)&&(n[i]=e[i]);return n}function N(e){return Array.isArray(e)?e.map(N):"object"==typeof e&&e?B(e,N):e}const j={};function U(e){j[e]||("undefined"!=typeof console&&console.warn(e),j[e]=!0)}function V(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function G(e){let t=0;for(let r,n,i=0,o=e.length,a=o-1;i<o;a=i++)r=e[i],n=e[a],t+=(n.x-r.x)*(r.y+n.y);return t}function H(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function q(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,r,n,i)=>{const o=n||i;return t[r]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let W=null;function Z(e){if(null==W){const t=e.navigator?e.navigator.userAgent:null;W=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return W}function X(e){try{const r=t[e];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function Y(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}const K="mapbox-tiles";let J,Q,$=500,ee=50;function te(){try{return t.caches}catch(e){}}function re(){te()&&!J&&(J=t.caches.open(K))}function ne(e){const t=e.indexOf("?");if(t<0)return e;const r=function(e){const t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e),n=r.filter((e=>{const t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return n.length?`${e.slice(0,t)}?${n.join("&")}`:e.slice(0,t)}let ie=1/0;const oe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(oe);class ae extends Error{constructor(e,t,r){401===t&&ye(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=r}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const se=H()?()=>self.worker&&self.worker.referrer:()=>("blob:"===t.location.protocol?t.parent:t).location.href,le=function(e,r){if(!(/^file:/.test(n=e.url)||/^file:/.test(se())&&!/^\w+:/.test(n))){if(t.fetch&&t.Request&&t.AbortController&&t.Request.prototype.hasOwnProperty("signal"))return function(e,r){const n=new t.AbortController,i=new t.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:se(),signal:n.signal});let o=!1,a=!1;const s=(l=i.url).indexOf("sku=")>0&&ye(l);var l;"json"===e.type&&i.headers.set("Accept","application/json");const c=(n,o,l)=>{if(a)return;if(n&&"SecurityError"!==n.message&&U(n),o&&l)return u(o);const c=Date.now();t.fetch(i).then((t=>{if(t.ok){const e=s?t.clone():null;return u(t,e,c)}return r(new ae(t.statusText,t.status,e.url))})).catch((e=>{20!==e.code&&r(new Error(e.message))}))},u=(n,s,l)=>{("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((e=>{a||(s&&l&&function(e,r,n){if(re(),!J)return;const i={status:r.status,statusText:r.statusText,headers:new t.Headers};r.headers.forEach(((e,t)=>i.headers.set(t,e)));const o=q(r.headers.get("Cache-Control")||"");if(o["no-store"])return;o["max-age"]&&i.headers.set("Expires",new Date(n+1e3*o["max-age"]).toUTCString());const a=i.headers.get("Expires");a&&(new Date(a).getTime()-n<42e4||function(e,t){if(void 0===Q)try{new Response(new ReadableStream),Q=!0}catch(e){Q=!1}Q?t(e.body):e.blob().then(t)}(r,(r=>{const n=new t.Response(r,i);re(),J&&J.then((t=>t.put(ne(e.url),n))).catch((e=>U(e.message)))})))}(i,s,l),o=!0,r(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((e=>{a||r(new Error(e.message))}))};return s?function(e,t){if(re(),!J)return t(null);const r=ne(e.url);J.then((e=>{e.match(r).then((n=>{const i=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),r=q(e.headers.get("Cache-Control")||"");return t>Date.now()&&!r["no-cache"]}(n);e.delete(r),i&&e.put(r,n.clone()),t(null,n,i)})).catch(t)})).catch(t)}(i,c):c(null,null),{cancel:()=>{a=!0,o||n.abort()}}}(e,r);if(H()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,r,void 0,!0)}var n;return function(e,r){const n=new t.XMLHttpRequest;n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer");for(const t in e.headers)n.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=()=>{r(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let t=n.response;if("json"===e.type)try{t=JSON.parse(n.response)}catch(e){return r(e)}r(null,t,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else r(new ae(n.statusText,n.status,e.url))},n.send(e.body),{cancel:()=>n.abort()}}(e,r)},ce=function(e,t){return le(k(e,{type:"arrayBuffer"}),t)};function ue(e){const r=t.document.createElement("a");return r.href=e,r.protocol===t.document.location.protocol&&r.host===t.document.location.host}const he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let de,pe;de=[],pe=0;const fe=function(e,r){if(o.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),pe>=i.MAX_PARALLEL_IMAGE_REQUESTS){const t={requestParameters:e,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return de.push(t),t}pe++;let n=!1;const a=()=>{if(!n)for(n=!0,pe--;de.length&&pe<i.MAX_PARALLEL_IMAGE_REQUESTS;){const e=de.shift(),{requestParameters:t,callback:r,cancelled:n}=e;n||(e.cancel=fe(t,r).cancel)}},s=ce(e,((e,n,i,o)=>{a(),e?r(e):n&&(t.createImageBitmap?function(e,r){const n=new t.Blob([new Uint8Array(e)],{type:"image/png"});t.createImageBitmap(n).then((e=>{r(null,e)})).catch((e=>{r(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(n,((e,t)=>r(e,t,i,o))):function(e,r){const n=new t.Image,i=t.URL;n.onload=()=>{r(null,n),i.revokeObjectURL(n.src),n.onload=null,t.requestAnimationFrame((()=>{n.src=he}))},n.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const o=new t.Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?i.createObjectURL(o):he}(n,((e,t)=>r(e,t,i,o))))}));return{cancel:()=>{s.cancel(),a()}}},me="NO_ACCESS_TOKEN";function ge(e){return 0===e.indexOf("mapbox:")}function ye(e){return i.API_URL_REGEX.test(e)}function _e(e){return i.API_STYLE_REGEX.test(e)&&!ve(e)}function ve(e){return i.API_SPRITE_REGEX.test(e)}const xe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function be(e){const t=e.match(xe);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function we(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}function Ee(e){if(!e)return null;const r=e.split(".");if(!r||3!==r.length)return null;try{return JSON.parse(decodeURIComponent(t.atob(r[1]).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(e){return null}}class Te{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const r=Ee(i.ACCESS_TOKEN);let n="";return n=r&&r.u?t.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))):i.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${n}`:`mapbox.eventData:${n}`}fetchEventData(){const e=X("localStorage"),r=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{const e=t.localStorage.getItem(r);e&&(this.eventData=JSON.parse(e));const i=t.localStorage.getItem(n);i&&(this.anonId=i)}catch(e){U("Unable to read from LocalStorage")}}saveEventData(){const e=X("localStorage"),r=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{t.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&t.localStorage.setItem(r,JSON.stringify(this.eventData))}catch(e){U("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,r,n){if(!i.EVENTS_URL)return;const o=be(i.EVENTS_URL);o.params.push(`access_token=${n||i.ACCESS_TOKEN||""}`);const a={event:this.type,created:new Date(e).toISOString()},s=t?k(a,t):a,l={url:we(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(e,t){return le(k(e,{method:"POST"}),t)}(l,(e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(n)}))}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const Se=new class extends Te{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){i.EVENTS_URL&&i.ACCESS_TOKEN&&Array.isArray(e)&&e.some((e=>ge(e)||ye(e)))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Ee(i.ACCESS_TOKEN),n=t?t.u:i.ACCESS_TOKEN;let o=n!==this.eventData.tokenU;L(this.anonId)||(this.anonId=z(),o=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(a),r=(a-this.eventData.lastSuccess)/864e5;o=o||r>=1||r<-1||e.getDate()!==t.getDate()}else o=!0;o?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:r,skuId:h,"enabled.telemetry":!1,userId:this.anonId},(e=>{e||(this.eventData.lastSuccess=a,this.eventData.tokenU=n)}),e):this.processRequests()}},Ae=Se.postTurnstileEvent.bind(Se),Pe=new class extends Te{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,r,n){this.skuToken=t,this.errorCb=n,i.EVENTS_URL&&(r||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(new Error(me)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=z()),this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:r,skuId:h,skuToken:this.skuToken,userId:this.anonId},(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e))}},Ie=Pe.postMapLoadEvent.bind(Pe),ke=new class extends Te{constructor(){super("gljs.performance")}postPerformanceEvent(e,t){i.EVENTS_URL&&(e||i.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:n,performanceData:i}=this.queue.shift(),o=function(e){const n=t.performance.getEntriesByType("resource"),i=t.performance.getEntriesByType("mark"),o=function(e){const t={};if(e)for(const r in e)if("other"!==r)for(const n of e[r]){const e=`${r}RequestCount`,i=`${r}ResolveRangeMin`,o=`${r}ResolveRangeMax`;t[i]=Math.min(t[i]||1/0,n.startTime),t[o]=Math.max(t[o]||-1/0,n.responseEnd),void 0===t[e]&&(t[e]=0),++t[e]}return t}(function(e,t){const r={};if(e)for(const n of e){const e=t(n);void 0===r[e]&&(r[e]=[]),r[e].push(n)}return r}(n,Re)),a=t.devicePixelRatio,s=t.navigator.connection||t.navigator.mozConnection||t.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},c=(e,t,r)=>{null!=r&&e.push({name:t,value:r.toString()})};for(const e in o)c(l.counters,e,o[e]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(c(l.counters,"interactionRangeMin",e.interactionRange[0]),c(l.counters,"interactionRangeMax",e.interactionRange[1])),i)for(const e of Object.keys(Le)){const t=Le[e],r=i.find((e=>e.name===t));r&&c(l.counters,t,r.startTime)}return c(l.counters,"visibilityHidden",e.visibilityHidden),c(l.attributes,"style",function(e){if(e)for(const t of e){const e=t.name.split("?")[0];if(_e(e)){const t=e.split("/").slice(-2);if(2===t.length)return`mapbox://styles/${t[0]}/${t[1]}`}}}(n)),c(l.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),c(l.attributes,"fogEnabled",e.fogEnabled?"true":"false"),c(l.attributes,"projection",e.projection.name),c(l.attributes,"zoom",e.zoom),c(l.metadata,"devicePixelRatio",a),c(l.metadata,"connectionEffectiveType",s?s.effectiveType:void 0),c(l.metadata,"navigatorUserAgent",t.navigator.userAgent),c(l.metadata,"screenWidth",t.screen.width),c(l.metadata,"screenHeight",t.screen.height),c(l.metadata,"windowWidth",t.innerWidth),c(l.metadata,"windowHeight",t.innerHeight),c(l.metadata,"mapWidth",e.width/a),c(l.metadata,"mapHeight",e.height/a),c(l.metadata,"webglRenderer",e.renderer),c(l.metadata,"webglVendor",e.vendor),c(l.metadata,"sdkVersion",r),c(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(i);for(const e of o.metadata);for(const e of o.counters);for(const e of o.attributes);this.postEvent(n,o,(()=>{}),e)}},Ce=ke.postPerformanceEvent.bind(ke),Me=new class extends Te{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,r,n){if(!i.API_URL||!i.SESSION_PATH)return;const o=be(i.API_URL+i.SESSION_PATH);o.params.push(`sku=${t||""}`),o.params.push(`access_token=${n||i.ACCESS_TOKEN||""}`);const a={url:we(o),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return le(k(e,{method:"GET"}),t)}(a,(e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(n)}))}getSessionAPI(e,t,r,n){this.skuToken=t,this.errorCb=n,i.SESSION_PATH&&i.API_URL&&(r||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(new Error(me)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:r}=this.queue.shift();t&&this.success[t]||this.getSession(r,this.skuToken,(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e)}},ze=Me.getSessionAPI.bind(Me),De=new Set,Le={create:"create",load:"load",fullLoad:"fullLoad"},Fe={mark(e){t.performance.mark(e)},measure(e,r,n){t.performance.measure(e,r,n)}};function Re(e){const t=e.name.split("?")[0];return t.includes("mapbox-gl.js")?"javascript":t.includes("mapbox-gl.css")?"css":function(e){return i.API_FONTS_REGEX.test(e)}(t)?"fontRange":ve(t)?"sprite":_e(t)?"style":function(e){return i.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}const Be=t.performance;function Oe(e){const t=e?e.url.toString():void 0;return Be.getEntriesByName(t)}let Ne,je,Ue,Ve;const Ge={now:()=>void 0!==Ue?Ue:t.performance.now(),setNow(e){Ue=e},restoreNow(){Ue=void 0},frame(e){const r=t.requestAnimationFrame(e);return{cancel:()=>t.cancelAnimationFrame(r)}},getImageData(e,r=0){const{width:n,height:i}=e;Ve||(Ve=t.document.createElement("canvas"));const o=Ve.getContext("2d");if(!o)throw new Error("failed to create canvas 2d context");return(n>Ve.width||i>Ve.height)&&(Ve.width=n,Ve.height=i),o.clearRect(-r,-r,n+2*r,i+2*r),o.drawImage(e,0,0,n,i),o.getImageData(-r,-r,n+2*r,i+2*r)},resolveURL:e=>(Ne||(Ne=t.document.createElement("a")),Ne.href=e,Ne.href),get devicePixelRatio(){return t.devicePixelRatio},get prefersReducedMotion(){return!!t.matchMedia&&(null==je&&(je=t.matchMedia("(prefers-reduced-motion: reduce)")),je.matches)}};function He(e,t,r){r[e]&&-1!==r[e].indexOf(t)||(r[e]=r[e]||[],r[e].push(t))}function qe(e,t,r){if(r&&r[e]){const n=r[e].indexOf(t);-1!==n&&r[e].splice(n,1)}}class We{constructor(e,t={}){k(this,t),this.type=e}}class Ze extends We{constructor(e,t={}){super("error",k({error:e},t))}}class Xe{on(e,t){return this._listeners=this._listeners||{},He(e,t,this._listeners),this}off(e,t){return qe(e,t,this._listeners),qe(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},He(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new We(e,t||{}));const r=e.type;if(this.listens(r)){e.target=this;const t=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of t)r.call(this,e);const n=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const t of n)qe(r,t,this._oneTimeListeners),t.call(this,e);const i=this._eventedParent;i&&(k(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof Ze&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var Ye=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Ke(e,...t){for(const r of t)for(const t in r)e[t]=r[t];return e}function Je(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Qe(e){if(Array.isArray(e))return e.map(Qe);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const r in e)t[r]=Qe(e[r]);return t}return Je(e)}class $e extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var et=$e;class tt{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,r]of t)this.bindings[e]=r}concat(e){return new tt(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var rt=tt;const nt={kind:"null"},it={kind:"number"},ot={kind:"string"},at={kind:"boolean"},st={kind:"color"},lt={kind:"object"},ct={kind:"value"},ut={kind:"collator"},ht={kind:"formatted"},dt={kind:"resolvedImage"};function pt(e,t){return{kind:"array",itemType:e,N:t}}function ft(e){if("array"===e.kind){const t=ft(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const mt=[nt,it,ot,at,st,ht,lt,pt(ct),dt];function gt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!gt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of mt)if(!gt(e,t))return null}return`Expected ${ft(e)} but found ${ft(t)} instead.`}function yt(e,t){return t.some((t=>t.kind===e.kind))}function _t(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}var vt,xt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function bt(e){return(e=Math.round(e))<0?0:e>255?255:e}function wt(e){return bt("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Et(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function Tt(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{vt={}.parseCSSColor=function(e){var t,r=e.replace(/ /g,"").toLowerCase();if(r in xt)return xt[r].slice();if("#"===r[0])return 4===r.length?(t=parseInt(r.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===r.length&&(t=parseInt(r.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var n=r.indexOf("("),i=r.indexOf(")");if(-1!==n&&i+1===r.length){var o=r.substr(0,n),a=r.substr(n+1,i-(n+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=Et(a.pop());case"rgb":return 3!==a.length?null:[wt(a[0]),wt(a[1]),wt(a[2]),s];case"hsla":if(4!==a.length)return null;s=Et(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,c=Et(a[1]),u=Et(a[2]),h=u<=.5?u*(c+1):u+c-u*c,d=2*u-h;return[bt(255*Tt(d,h,l+1/3)),bt(255*Tt(d,h,l)),bt(255*Tt(d,h,l-1/3)),s];default:return null}}return null}}catch(e){}class St{constructor(e,t,r,n=1){this.r=e,this.g=t,this.b=r,this.a=n}static parse(e){if(!e)return;if(e instanceof St)return e;if("string"!=typeof e)return;const t=vt(e);return t?new St(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,r,n]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(r)},${n})`}toArray(){const{r:e,g:t,b:r,a:n}=this;return 0===n?[0,0,0,0]:[255*e/n,255*t/n,255*r/n,n]}toArray01(){const{r:e,g:t,b:r,a:n}=this;return 0===n?[0,0,0,0]:[e/n,t/n,r/n,n]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:r,a:n}=this;return[e,t,r,n]}}St.black=new St(0,0,0,1),St.white=new St(1,1,1,1),St.transparent=new St(0,0,0,0),St.red=new St(1,0,0,1),St.blue=new St(0,0,1,1);var At=St;class Pt{constructor(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class It{constructor(e,t,r,n,i){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=r,this.fontStack=n,this.textColor=i}}class kt{constructor(e){this.sections=e}static fromString(e){return new kt([new It(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof kt?e:kt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const r={};t.fontStack&&(r["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(r["font-scale"]=t.scale),t.textColor&&(r["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(r)}return e}}class Ct{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ct({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Mt(e,t,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[e,t,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function zt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof At)return!0;if(e instanceof Pt)return!0;if(e instanceof kt)return!0;if(e instanceof Ct)return!0;if(Array.isArray(e)){for(const t of e)if(!zt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!zt(e[t]))return!1;return!0}return!1}function Dt(e){if(null===e)return nt;if("string"==typeof e)return ot;if("boolean"==typeof e)return at;if("number"==typeof e)return it;if(e instanceof At)return st;if(e instanceof Pt)return ut;if(e instanceof kt)return ht;if(e instanceof Ct)return dt;if(Array.isArray(e)){const t=e.length;let r;for(const t of e){const e=Dt(t);if(r){if(r===e)continue;r=ct;break}r=e}return pt(r||ct,t)}return lt}function Lt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof At||e instanceof kt||e instanceof Ct?e.toString():JSON.stringify(e)}class Ft{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!zt(e[1]))return t.error("invalid value");const r=e[1];let n=Dt(r);const i=t.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new Ft(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof At?["rgba"].concat(this.value.toArray()):this.value instanceof kt?this.value.serialize():this.value}}var Rt=Ft,Bt=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const Ot={string:ot,number:it,boolean:at,object:lt};class Nt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r,n=1;const i=e[0];if("array"===i){let i,o;if(e.length>2){const r=e[1];if("string"!=typeof r||!(r in Ot)||"object"===r)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=Ot[r],n++}else i=ct;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],n++}r=pt(i,o)}else r=Ot[i];const o=[];for(;n<e.length;n++){const r=t.parse(e[n],n,ct);if(!r)return null;o.push(r)}return new Nt(r,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(!gt(this.type,Dt(r)))return r;if(t===this.args.length-1)throw new Bt(`Expected value to be of type ${ft(this.type)}, but found ${ft(Dt(r))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);const n=e.N;("number"==typeof n||this.args.length>1)&&t.push(n)}}return t.concat(this.args.map((e=>e.serialize())))}}var jt=Nt;class Ut{constructor(e){this.type=ht,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");const n=[];let i=!1;for(let r=1;r<=e.length-1;++r){const o=e[r];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let e=null;if(o["font-scale"]&&(e=t.parse(o["font-scale"],1,it),!e))return null;let r=null;if(o["text-font"]&&(r=t.parse(o["text-font"],1,pt(ot)),!r))return null;let a=null;if(o["text-color"]&&(a=t.parse(o["text-color"],1,st),!a))return null;const s=n[n.length-1];s.scale=e,s.font=r,s.textColor=a}else{const o=t.parse(e[r],1,ct);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:o,scale:null,font:null,textColor:null})}}return new Ut(n)}evaluate(e){return new kt(this.sections.map((t=>{const r=t.content.evaluate(e);return Dt(r)===dt?new It("",r,null,null,null):new It(Lt(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const r={};t.scale&&(r["font-scale"]=t.scale.serialize()),t.font&&(r["text-font"]=t.font.serialize()),t.textColor&&(r["text-color"]=t.textColor.serialize()),e.push(r)}return e}}class Vt{constructor(e){this.type=dt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ot);return r?new Vt(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Ct.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Gt={"to-boolean":at,"to-color":st,"to-number":it,"to-string":ot};class Ht{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");const n=Gt[r],i=[];for(let r=1;r<e.length;r++){const n=t.parse(e[r],r,ct);if(!n)return null;i.push(n)}return new Ht(n,i)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,r;for(const n of this.args){if(t=n.evaluate(e),r=null,t instanceof At)return t;if("string"==typeof t){const r=e.parseColor(t);if(r)return r}else if(Array.isArray(t)&&(r=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Mt(t[0],t[1],t[2],t[3]),!r))return new At(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Bt(r||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const r of this.args){if(t=r.evaluate(e),null===t)return 0;const n=Number(t);if(!isNaN(n))return n}throw new Bt(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?kt.fromString(Lt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Ct.fromString(Lt(this.args[0].evaluate(e))):Lt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Ut([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Vt(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild((t=>{e.push(t.serialize())})),e}}var qt=Ht;const Wt=["Unknown","Point","LineString","Polygon"];var Zt=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Wt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:r,y:n}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*t-e[0])+this.featureDistanceData.bearing[1]*(n*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=At.parse(e)),t}};class Xt{constructor(e,t,r,n){this.name=e,this.type=t,this._evaluate=r,this.args=n}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((e=>e.serialize())))}static parse(e,t){const r=e[0],n=Xt.definitions[r];if(!n)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,a=o.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let s=null;for(const[n,o]of a){s=new br(t.registry,t.path,null,t.scope);const a=[];let l=!1;for(let t=1;t<e.length;t++){const r=e[t],i=Array.isArray(n)?n[t-1]:n.type,o=s.parse(r,1+a.length,i);if(!o){l=!0;break}a.push(o)}if(!l)if(Array.isArray(n)&&n.length!==a.length)s.error(`Expected ${n.length} arguments, but found ${a.length} instead.`);else{for(let e=0;e<a.length;e++){const t=Array.isArray(n)?n[e]:n.type,r=a[e];s.concat(e+1).checkSubtype(t,r.type)}if(0===s.errors.length)return new Xt(r,i,o,a)}}if(1===a.length)t.errors.push(...s.errors);else{const r=(a.length?a:o).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(ft).join(", ")})`:`(${ft(t.type)}...)`;var t})).join(" | "),n=[];for(let r=1;r<e.length;r++){const i=t.parse(e[r],1+n.length);if(!i)return null;n.push(ft(i.type))}t.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`)}return null}static register(e,t){Xt.definitions=t;for(const r in t)e[r]=Xt}}var Yt=Xt;class Kt{constructor(e,t,r){this.type=ut,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");const n=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,at);if(!n)return null;const i=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,at);if(!i)return null;let o=null;return r.locale&&(o=t.parse(r.locale,1,ot),!o)?null:new Kt(n,i,o)}evaluate(e){return new Pt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Jt=8192;function Qt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function $t(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function er(e,t){const r=(180+e[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(r*i*Jt),Math.round(n*i*Jt)]}function tr(e,t,r){const n=e[0]-t[0],i=e[1]-t[1],o=e[0]-r[0],a=e[1]-r[1];return n*a-o*i==0&&n*o<=0&&i*a<=0}function rr(e,t){let r=!1;for(let a=0,s=t.length;a<s;a++){const s=t[a];for(let t=0,a=s.length;t<a-1;t++){if(tr(e,s[t],s[t+1]))return!1;(i=s[t])[1]>(n=e)[1]!=(o=s[t+1])[1]>n[1]&&n[0]<(o[0]-i[0])*(n[1]-i[1])/(o[1]-i[1])+i[0]&&(r=!r)}}var n,i,o;return r}function nr(e,t){for(let r=0;r<t.length;r++)if(rr(e,t[r]))return!0;return!1}function ir(e,t,r,n){const i=n[0]-r[0],o=n[1]-r[1],a=(e[0]-r[0])*o-i*(e[1]-r[1]),s=(t[0]-r[0])*o-i*(t[1]-r[1]);return a>0&&s<0||a<0&&s>0}function or(e,t,r){for(const c of r)for(let r=0;r<c.length-1;++r)if(0!=(s=[(a=c[r+1])[0]-(o=c[r])[0],a[1]-o[1]])[0]*(l=[(i=t)[0]-(n=e)[0],i[1]-n[1]])[1]-s[1]*l[0]&&ir(n,i,o,a)&&ir(o,a,n,i))return!0;var n,i,o,a,s,l;return!1}function ar(e,t){for(let r=0;r<e.length;++r)if(!rr(e[r],t))return!1;for(let r=0;r<e.length-1;++r)if(or(e[r],e[r+1],t))return!1;return!0}function sr(e,t){for(let r=0;r<t.length;r++)if(ar(e,t[r]))return!0;return!1}function lr(e,t,r){const n=[];for(let i=0;i<e.length;i++){const o=[];for(let n=0;n<e[i].length;n++){const a=er(e[i][n],r);Qt(t,a),o.push(a)}n.push(o)}return n}function cr(e,t,r){const n=[];for(let i=0;i<e.length;i++){const o=lr(e[i],t,r);n.push(o)}return n}function ur(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){const t=.5*n;let i=e[0]-r[0]>t?-n:r[0]-e[0]>t?n:0;0===i&&(i=e[0]-r[2]>t?-n:r[2]-e[0]>t?n:0),e[0]+=i}Qt(t,e)}function hr(e,t,r,n){const i=Math.pow(2,n.z)*Jt,o=[n.x*Jt,n.y*Jt],a=[];if(!e)return a;for(const n of e)for(const e of n){const n=[e.x+o[0],e.y+o[1]];ur(n,t,r,i),a.push(n)}return a}function dr(e,t,r,n){const i=Math.pow(2,n.z)*Jt,o=[n.x*Jt,n.y*Jt],a=[];if(!e)return a;for(const r of e){const e=[];for(const n of r){const r=[n.x+o[0],n.y+o[1]];Qt(t,r),e.push(r)}a.push(e)}if(t[2]-t[0]<=i/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const n of e)ur(n,t,r,i)}var s;return a}class pr{constructor(e,t){this.type=at,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(zt(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const r=t.features[e].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new pr(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new pr(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new pr(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const o=lr(t.coordinates,n,i),a=hr(e.geometry(),r,n,i);if(!$t(r,n))return!1;for(const e of a)if(!rr(e,o))return!1}if("MultiPolygon"===t.type){const o=cr(t.coordinates,n,i),a=hr(e.geometry(),r,n,i);if(!$t(r,n))return!1;for(const e of a)if(!nr(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const o=lr(t.coordinates,n,i),a=dr(e.geometry(),r,n,i);if(!$t(r,n))return!1;for(const e of a)if(!ar(e,o))return!1}if("MultiPolygon"===t.type){const o=cr(t.coordinates,n,i),a=dr(e.geometry(),r,n,i);if(!$t(r,n))return!1;for(const e of a)if(!sr(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var fr=pr;function mr(e){if(e instanceof Yt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof fr)return!1;let t=!0;return e.eachChild((e=>{t&&!mr(e)&&(t=!1)})),t}function gr(e){if(e instanceof Yt&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!gr(e)&&(t=!1)})),t}function yr(e,t){if(e instanceof Yt&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild((e=>{r&&!yr(e,t)&&(r=!1)})),r}class _r{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new _r(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var vr=_r;class xr{constructor(e,t=[],r,n=new rt,i=[]){this.registry=e,this.path=t,this.key=t.map((e=>`[${e}]`)).join(""),this.scope=n,this.errors=i,this.expectedType=r}parse(e,t,r,n,i={}){return t?this.concat(t,r,n)._parse(e,i):this._parse(e,i)}_parse(e,t){function r(e,t,r){return"assert"===r?new jt(t,[e]):"coerce"===r?new qt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=e[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[n];if(i){let n=i.parse(e,this);if(!n)return null;if(this.expectedType){const e=this.expectedType,i=n.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(e,i))return null}else n=r(n,e,t.typeAnnotation||"coerce");else n=r(n,e,t.typeAnnotation||"assert")}if(!(n instanceof Rt)&&"resolvedImage"!==n.type.kind&&wr(n)){const t=new Zt;try{n=new Rt(n.type,n.evaluate(t))}catch(e){return this.error(e.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const n="number"==typeof e?this.path.concat(e):this.path,i=r?this.scope.concat(r):this.scope;return new xr(this.registry,n,t||null,i,this.errors)}error(e,...t){const r=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new et(r,e))}checkSubtype(e,t){const r=gt(e,t);return r&&this.error(r),r}}var br=xr;function wr(e){if(e instanceof vr)return wr(e.boundExpression);if(e instanceof Yt&&"error"===e.name)return!1;if(e instanceof Kt)return!1;if(e instanceof fr)return!1;const t=e instanceof qt||e instanceof jt;let r=!0;return e.eachChild((e=>{r=t?r&&wr(e):r&&e instanceof Rt})),!!r&&mr(e)&&yr(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Er(e,t){const r=e.length-1;let n,i,o=0,a=r,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),n=e[s],i=e[s+1],n<=t){if(s===r||t<i)return s;o=s+1}else{if(!(n>t))throw new Bt("Input is not a number.");a=s-1}return 0}class Tr{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of r)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,it);if(!r)return null;const n=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let r=1;r<e.length;r+=2){const o=1===r?-1/0:e[r],a=e[r+1],s=r,l=r+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,i);if(!c)return null;i=i||c.type,n.push([o,c])}return new Tr(i,r,n)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);const i=t.length;return n>=t[i-1]?r[i-1].evaluate(e):r[Er(t,n)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Sr=Tr;function Ar(e,t,r){return e*(1-r)+t*r}var Pr=Object.freeze({__proto__:null,number:Ar,color:function(e,t,r){return new At(Ar(e.r,t.r,r),Ar(e.g,t.g,r),Ar(e.b,t.b,r),Ar(e.a,t.a,r))},array:function(e,t,r){return e.map(((e,n)=>Ar(e,t[n],r)))}});const Ir=.95047,kr=1.08883,Cr=4/29,Mr=6/29,zr=3*Mr*Mr,Dr=Math.PI/180,Lr=180/Math.PI;function Fr(e){return e>.008856451679035631?Math.pow(e,1/3):e/zr+Cr}function Rr(e){return e>Mr?e*e*e:zr*(e-Cr)}function Br(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Or(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Nr(e){const t=Or(e.r),r=Or(e.g),n=Or(e.b),i=Fr((.4124564*t+.3575761*r+.1804375*n)/Ir),o=Fr((.2126729*t+.7151522*r+.072175*n)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Fr((.0193339*t+.119192*r+.9503041*n)/kr)),alpha:e.a}}function jr(e){let t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=1*Rr(t),r=Ir*Rr(r),n=kr*Rr(n),new At(Br(3.2404542*r-1.5371385*t-.4985314*n),Br(-.969266*r+1.8760108*t+.041556*n),Br(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}function Ur(e,t,r){const n=t-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}const Vr={forward:Nr,reverse:jr,interpolate:function(e,t,r){return{l:Ar(e.l,t.l,r),a:Ar(e.a,t.a,r),b:Ar(e.b,t.b,r),alpha:Ar(e.alpha,t.alpha,r)}}},Gr={forward:function(e){const{l:t,a:r,b:n}=Nr(e),i=Math.atan2(n,r)*Lr;return{h:i<0?i+360:i,c:Math.sqrt(r*r+n*n),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Dr,r=e.c;return jr({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})},interpolate:function(e,t,r){return{h:Ur(e.h,t.h,r),c:Ar(e.c,t.c,r),l:Ar(e.l,t.l,r),alpha:Ar(e.alpha,t.alpha,r)}}};var Hr=Object.freeze({__proto__:null,lab:Vr,hcl:Gr});class qr{constructor(e,t,r,n,i){this.type=e,this.operator=t,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[e,t]of i)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,r,n){let i=0;if("exponential"===e.name)i=Wr(t,e.base,r,n);else if("linear"===e.name)i=Wr(t,1,r,n);else if("cubic-bezier"===e.name){const o=e.controlPoints;i=new d(o[0],o[1],o[2],o[3]).solve(Wr(t,1,r,n))}return i}static parse(e,t){let[r,n,i,...o]=e;if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const e=n[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:e}}else{if("cubic-bezier"!==n[0])return t.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const e=n.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,it),!i)return null;const a=[];let s=null;"interpolate-hcl"===r||"interpolate-lab"===r?s=st:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let e=0;e<o.length;e+=2){const r=o[e],n=o[e+1],i=e+3,l=e+4;if("number"!=typeof r)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=r)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const c=t.parse(n,l,s);if(!c)return null;s=s||c.type,a.push([r,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new qr(s,r,n,i,a):t.error(`Type ${ft(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);const i=t.length;if(n>=t[i-1])return r[i-1].evaluate(e);const o=Er(t,n),a=qr.interpolationFactor(this.interpolation,n,t[o],t[o+1]),s=r[o].evaluate(e),l=r[o+1].evaluate(e);return"interpolate"===this.operator?Pr[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?Gr.reverse(Gr.interpolate(Gr.forward(s),Gr.forward(l),a)):Vr.reverse(Vr.interpolate(Vr.forward(s),Vr.forward(l),a))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t}}function Wr(e,t,r,n){const i=n-r,o=e-r;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}var Zr=qr;class Xr{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const n=t.expectedType;n&&"value"!==n.kind&&(r=n);const i=[];for(const n of e.slice(1)){const e=t.parse(n,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!e)return null;r=r||e.type,i.push(e)}const o=n&&i.some((e=>gt(n,e.type)));return new Xr(o?ct:r,i)}evaluate(e){let t,r=null,n=0;for(const i of this.args){if(n++,r=i.evaluate(e),r&&r instanceof Ct&&!r.available&&(t||(t=r),r=null,n===this.args.length))return t;if(null!==r)break}return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=["coalesce"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var Yr=Xr;class Kr{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let n=1;n<e.length-1;n+=2){const i=e[n];if("string"!=typeof i)return t.error(`Expected string, but found ${typeof i} instead.`,n);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);const o=t.parse(e[n+1],n+1);if(!o)return null;r.push([i,o])}const n=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return n?new Kr(r,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,r]of this.bindings)e.push(t,r.serialize());return e.push(this.result.serialize()),e}}var Jr=Kr;class Qr{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,it),n=t.parse(e[2],2,pt(t.expectedType||ct));return r&&n?new Qr(n.type.itemType,r,n):null}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new Bt(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new Bt(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new Bt(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var $r=Qr;class en{constructor(e,t){this.type=at,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ct),n=t.parse(e[2],2,ct);return r&&n?yt(r.type,[at,ot,it,nt,ct])?new en(r,n):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${ft(r.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(null==r)return!1;if(!_t(t,["boolean","string","number","null"]))throw new Bt(`Expected first argument to be of type boolean, string, number or null, but found ${ft(Dt(t))} instead.`);if(!_t(r,["string","array"]))throw new Bt(`Expected second argument to be of type array or string, but found ${ft(Dt(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var tn=en;class rn{constructor(e,t,r){this.type=it,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ct),n=t.parse(e[2],2,ct);if(!r||!n)return null;if(!yt(r.type,[at,ot,it,nt,ct]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${ft(r.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,it);return i?new rn(r,n,i):null}return new rn(r,n)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!_t(t,["boolean","string","number","null"]))throw new Bt(`Expected first argument to be of type boolean, string, number or null, but found ${ft(Dt(t))} instead.`);if(!_t(r,["string","array"]))throw new Bt(`Expected second argument to be of type array or string, but found ${ft(Dt(r))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(e);return r.indexOf(t,n)}return r.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var nn=rn;class on{constructor(e,t,r,n,i,o){this.inputType=e,this.type=t,this.input=r,this.cases=n,this.outputs=i,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let r,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const i={},o=[];for(let a=2;a<e.length-1;a+=2){let s=e[a];const l=e[a+1];Array.isArray(s)||(s=[s]);const c=t.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,Dt(e)))return null}else r=Dt(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=o.length}const u=t.parse(l,a,n);if(!u)return null;n=n||u.type,o.push(u)}const a=t.parse(e[1],1,ct);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,n);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(r,a.type)?null:new on(r,n,a,i,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(Dt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),r=[],n={};for(const e of t){const t=n[this.cases[e]];void 0===t?(n[this.cases[e]]=r.length,r.push([this.cases[e],[e]])):r[t][1].push(e)}const i=e=>"number"===this.inputType.kind?Number(e):e;for(const[t,n]of r)e.push(1===n.length?i(n[0]):n.map(i)),e.push(this.outputs[t].serialize());return e.push(this.otherwise.serialize()),e}}var an=on;class sn{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const n=[];for(let i=1;i<e.length-1;i+=2){const o=t.parse(e[i],i,at);if(!o)return null;const a=t.parse(e[i+1],i+1,r);if(!a)return null;n.push([o,a]),r=r||a.type}const i=t.parse(e[e.length-1],e.length-1,r);return i?new sn(r,n,i):null}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var ln=sn;class cn{constructor(e,t,r,n){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ct),n=t.parse(e[2],2,it);if(!r||!n)return null;if(!yt(r.type,[pt(ct),ot,ct]))return t.error(`Expected first argument to be of type array or string, but found ${ft(r.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,it);return i?new cn(r.type,r,n,i):null}return new cn(r.type,r,n)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!_t(t,["string","array"]))throw new Bt(`Expected first argument to be of type array or string, but found ${ft(Dt(t))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(e);return t.slice(r,n)}return t.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var un=cn;function hn(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function dn(e,t,r,n){return 0===n.compare(t,r)}function pn(e,t,r){const n="=="!==e&&"!="!==e;return class i{constructor(e,t,r){this.type=at,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const r=e[0];let o=t.parse(e[1],1,ct);if(!o)return null;if(!hn(r,o.type))return t.concat(1).error(`"${r}" comparisons are not supported for type '${ft(o.type)}'.`);let a=t.parse(e[2],2,ct);if(!a)return null;if(!hn(r,a.type))return t.concat(2).error(`"${r}" comparisons are not supported for type '${ft(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error(`Cannot compare types '${ft(o.type)}' and '${ft(a.type)}'.`);n&&("value"===o.type.kind&&"value"!==a.type.kind?o=new jt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new jt(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,ut),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){const t=Dt(o),r=Dt(a);if(t.kind!==r.kind||"string"!==t.kind&&"number"!==t.kind)throw new Bt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const e=Dt(o),r=Dt(a);if("string"!==e.kind||"string"!==r.kind)return t(i,o,a)}return this.collator?r(i,o,a,this.collator.evaluate(i)):t(i,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild((e=>{t.push(e.serialize())})),t}}}const fn=pn("==",(function(e,t,r){return t===r}),dn),mn=pn("!=",(function(e,t,r){return t!==r}),(function(e,t,r,n){return!dn(0,t,r,n)})),gn=pn("<",(function(e,t,r){return t<r}),(function(e,t,r,n){return n.compare(t,r)<0})),yn=pn(">",(function(e,t,r){return t>r}),(function(e,t,r,n){return n.compare(t,r)>0})),_n=pn("<=",(function(e,t,r){return t<=r}),(function(e,t,r,n){return n.compare(t,r)<=0})),vn=pn(">=",(function(e,t,r){return t>=r}),(function(e,t,r,n){return n.compare(t,r)>=0}));class xn{constructor(e,t,r,n,i,o){this.type=ot,this.number=e,this.locale=t,this.currency=r,this.unit=n,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,it);if(!r)return null;const n=e[2];if("object"!=typeof n||Array.isArray(n))return t.error("NumberFormat options argument must be an object.");let i=null;if(n.locale&&(i=t.parse(n.locale,1,ot),!i))return null;let o=null;if(n.currency&&(o=t.parse(n.currency,1,ot),!o))return null;let a=null;if(n.unit&&(a=t.parse(n.unit,1,ot),!a))return null;let s=null;if(n["min-fraction-digits"]&&(s=t.parse(n["min-fraction-digits"],1,it),!s))return null;let l=null;return n["max-fraction-digits"]&&(l=t.parse(n["max-fraction-digits"],1,it),!l)?null:new xn(r,i,o,a,s,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class bn{constructor(e){this.type=it,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error(`Expected argument of type string or array, but found ${ft(r.type)} instead.`):new bn(r):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Bt(`Expected value to be of type string or array, but found ${ft(Dt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild((t=>{e.push(t.serialize())})),e}}const wn={"==":fn,"!=":mn,">":yn,"<":gn,">=":vn,"<=":_n,array:jt,at:$r,boolean:jt,case:ln,coalesce:Yr,collator:Kt,format:Ut,image:Vt,in:tn,"index-of":nn,interpolate:Zr,"interpolate-hcl":Zr,"interpolate-lab":Zr,length:bn,let:Jr,literal:Rt,match:an,number:jt,"number-format":xn,object:jt,slice:un,step:Sr,string:jt,"to-boolean":qt,"to-color":qt,"to-number":qt,"to-string":qt,var:vr,within:fr};function En(e,[t,r,n,i]){t=t.evaluate(e),r=r.evaluate(e),n=n.evaluate(e);const o=i?i.evaluate(e):1,a=Mt(t,r,n,o);if(a)throw new Bt(a);return new At(t/255*o,r/255*o,n/255*o,o)}function Tn(e,t){return e in t}function Sn(e,t){const r=t[e];return void 0===r?null:r}function An(e){return{type:e}}Yt.register(wn,{error:[{kind:"error"},[ot],(e,[t])=>{throw new Bt(t.evaluate(e))}],typeof:[ot,[ct],(e,[t])=>ft(Dt(t.evaluate(e)))],"to-rgba":[pt(it,4),[st],(e,[t])=>t.evaluate(e).toArray()],rgb:[st,[it,it,it],En],rgba:[st,[it,it,it,it],En],has:{type:at,overloads:[[[ot],(e,[t])=>Tn(t.evaluate(e),e.properties())],[[ot,lt],(e,[t,r])=>Tn(t.evaluate(e),r.evaluate(e))]]},get:{type:ct,overloads:[[[ot],(e,[t])=>Sn(t.evaluate(e),e.properties())],[[ot,lt],(e,[t,r])=>Sn(t.evaluate(e),r.evaluate(e))]]},"feature-state":[ct,[ot],(e,[t])=>Sn(t.evaluate(e),e.featureState||{})],properties:[lt,[],e=>e.properties()],"geometry-type":[ot,[],e=>e.geometryType()],id:[ct,[],e=>e.id()],zoom:[it,[],e=>e.globals.zoom],pitch:[it,[],e=>e.globals.pitch||0],"distance-from-center":[it,[],e=>e.distanceFromCenter()],"heatmap-density":[it,[],e=>e.globals.heatmapDensity||0],"line-progress":[it,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[it,[],e=>e.globals.skyRadialProgress||0],accumulated:[ct,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[it,An(it),(e,t)=>{let r=0;for(const n of t)r+=n.evaluate(e);return r}],"*":[it,An(it),(e,t)=>{let r=1;for(const n of t)r*=n.evaluate(e);return r}],"-":{type:it,overloads:[[[it,it],(e,[t,r])=>t.evaluate(e)-r.evaluate(e)],[[it],(e,[t])=>-t.evaluate(e)]]},"/":[it,[it,it],(e,[t,r])=>t.evaluate(e)/r.evaluate(e)],"%":[it,[it,it],(e,[t,r])=>t.evaluate(e)%r.evaluate(e)],ln2:[it,[],()=>Math.LN2],pi:[it,[],()=>Math.PI],e:[it,[],()=>Math.E],"^":[it,[it,it],(e,[t,r])=>Math.pow(t.evaluate(e),r.evaluate(e))],sqrt:[it,[it],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[it,[it],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[it,[it],(e,[t])=>Math.log(t.evaluate(e))],log2:[it,[it],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[it,[it],(e,[t])=>Math.sin(t.evaluate(e))],cos:[it,[it],(e,[t])=>Math.cos(t.evaluate(e))],tan:[it,[it],(e,[t])=>Math.tan(t.evaluate(e))],asin:[it,[it],(e,[t])=>Math.asin(t.evaluate(e))],acos:[it,[it],(e,[t])=>Math.acos(t.evaluate(e))],atan:[it,[it],(e,[t])=>Math.atan(t.evaluate(e))],min:[it,An(it),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[it,An(it),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[it,[it],(e,[t])=>Math.abs(t.evaluate(e))],round:[it,[it],(e,[t])=>{const r=t.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[it,[it],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[it,[it],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[at,[ot,ct],(e,[t,r])=>e.properties()[t.value]===r.value],"filter-id-==":[at,[ct],(e,[t])=>e.id()===t.value],"filter-type-==":[at,[ot],(e,[t])=>e.geometryType()===t.value],"filter-<":[at,[ot,ct],(e,[t,r])=>{const n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[at,[ct],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r<n}],"filter->":[at,[ot,ct],(e,[t,r])=>{const n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[at,[ct],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r>n}],"filter-<=":[at,[ot,ct],(e,[t,r])=>{const n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[at,[ct],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r<=n}],"filter->=":[at,[ot,ct],(e,[t,r])=>{const n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[at,[ct],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r>=n}],"filter-has":[at,[ct],(e,[t])=>t.value in e.properties()],"filter-has-id":[at,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[at,[pt(ot)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[at,[pt(ct)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[at,[ot,pt(ct)],(e,[t,r])=>r.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[at,[ot,pt(ct)],(e,[t,r])=>function(e,t,r,n){for(;r<=n;){const i=r+n>>1;if(t[i]===e)return!0;t[i]>e?n=i-1:r=i+1}return!1}(e.properties()[t.value],r.value,0,r.value.length-1)],all:{type:at,overloads:[[[at,at],(e,[t,r])=>t.evaluate(e)&&r.evaluate(e)],[An(at),(e,t)=>{for(const r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:at,overloads:[[[at,at],(e,[t,r])=>t.evaluate(e)||r.evaluate(e)],[An(at),(e,t)=>{for(const r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[at,[at],(e,[t])=>!t.evaluate(e)],"is-supported-script":[at,[ot],(e,[t])=>{const r=e.globals&&e.globals.isSupportedScript;return!r||r(t.evaluate(e))}],upcase:[ot,[ot],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[ot,[ot],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[ot,An(ct),(e,t)=>t.map((t=>Lt(t.evaluate(e)))).join("")],"resolved-locale":[ot,[ut],(e,[t])=>t.evaluate(e).resolvedLocale()]});var Pn=wn;function In(e){return{result:"success",value:e}}function kn(e){return{result:"error",value:e}}function Cn(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Mn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function zn(e){return!!e.expression&&e.expression.interpolated}function Dn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Ln(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Fn(e){return e}function Rn(e,t){const r="color"===t.type,n=e.stops&&"object"==typeof e.stops[0][0],i=n||!(n||void 0!==e.property),o=e.type||(zn(t)?"exponential":"interval");if(r&&((e=Ke({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],At.parse(e[1])]))),e.default=At.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Hr[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let a,s,l;if("exponential"===o)a=jn;else if("interval"===o)a=Nn;else if("categorical"===o){a=On,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=Un}if(n){const r={},n=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],o=i[0].zoom;void 0===r[o]&&(r[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},n.push(o)),r[o].stops.push([i[0].value,i[1]])}const i=[];for(const e of n)i.push([r[e].zoom,Rn(r[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Zr.interpolationFactor.bind(void 0,o),zoomStops:i.map((e=>e[0])),evaluate:({zoom:r},n)=>jn({stops:i,base:e.base},t,r).evaluate(r,n)}}if(i){const r="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:Zr.interpolationFactor.bind(void 0,r),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:r})=>a(e,t,r,s,l)}}return{kind:"source",evaluate(r,n){const i=n&&n.properties?n.properties[e.property]:void 0;return void 0===i?Bn(e.default,t.default):a(e,t,i,s,l)}}}function Bn(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function On(e,t,r,n,i){return Bn(typeof r===i?n[r]:void 0,e.default,t.default)}function Nn(e,t,r){if("number"!==Dn(r))return Bn(e.default,t.default);const n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];const i=Er(e.stops.map((e=>e[0])),r);return e.stops[i][1]}function jn(e,t,r){const n=void 0!==e.base?e.base:1;if("number"!==Dn(r))return Bn(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[i-1][0])return e.stops[i-1][1];const o=Er(e.stops.map((e=>e[0])),r),a=function(e,t,r,n){const i=n-r,o=e-r;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(r,n,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1];let c=Pr[t.type]||Fn;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Hr[e.colorSpace];c=(e,r)=>t.reverse(t.interpolate(t.forward(e),t.forward(r),a))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),r=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==r)return c(t,r,a)}}:c(s,l,a)}function Un(e,t,r){return"color"===t.type?r=At.parse(r):"formatted"===t.type?r=kt.fromString(r.toString()):"resolvedImage"===t.type?r=Ct.fromString(r.toString()):Dn(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0),Bn(r,e.default,t.default)}class Vn{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Zt,this._defaultValue=t?function(e){return"color"===e.type&&(Ln(e.default)||Array.isArray(e.default))?new At(0,0,0,0):"color"===e.type?At.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,r,n,i,o,a,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,n,i,o,a,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Bt(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Gn(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Pn}function Hn(e,t){const r=new br(Pn,[],t?function(e){const t={color:st,string:ot,number:it,enum:ot,boolean:at,formatted:ht,resolvedImage:dt};return"array"===e.type?pt(t[e.value]||ct,e.length):t[e.type]}(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?In(new Vn(n,t)):kn(r.errors)}class qn{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!gr(t.expression)}evaluateWithoutErrorHandling(e,t,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,i,o)}evaluate(e,t,r,n,i,o){return this._styleExpression.evaluate(e,t,r,n,i,o)}}class Wn{constructor(e,t,r,n){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!gr(t.expression),this.interpolationType=n}evaluateWithoutErrorHandling(e,t,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,i,o)}evaluate(e,t,r,n,i,o){return this._styleExpression.evaluate(e,t,r,n,i,o)}interpolationFactor(e,t,r){return this.interpolationType?Zr.interpolationFactor(this.interpolationType,e,t,r):0}}function Zn(e,t){if("error"===(e=Hn(e,t)).result)return e;const r=e.value.expression,n=mr(r);if(!n&&!Cn(t))return kn([new et("","data expressions not supported")]);const i=yr(r,["zoom","pitch","distance-from-center"]);if(!i&&!Mn(t))return kn([new et("","zoom expressions not supported")]);const o=Yn(r);return o||i?o instanceof et?kn([o]):o instanceof Zr&&!zn(t)?kn([new et("",'"interpolate" expressions cannot be used with this property')]):In(o?new Wn(n?"camera":"composite",e.value,o.labels,o instanceof Zr?o.interpolation:void 0):new qn(n?"constant":"source",e.value)):kn([new et("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Xn{constructor(e,t){this._parameters=e,this._specification=t,Ke(this,Rn(this._parameters,this._specification))}static deserialize(e){return new Xn(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Yn(e){let t=null;if(e instanceof Jr)t=Yn(e.result);else if(e instanceof Yr){for(const r of e.args)if(t=Yn(r),t)break}else(e instanceof Sr||e instanceof Zr)&&e.input instanceof Yt&&"zoom"===e.input.name&&(t=e);return t instanceof et||e.eachChild((e=>{const r=Yn(e);r instanceof et?t=r:!t&&r?t=new et("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new et("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}class Kn{constructor(e,t,r,n){this.message=(e?`${e}: `:"")+r,n&&(this.identifier=n),null!=t&&t.__line__&&(this.line=t.__line__)}}function Jn(e){const t=e.key,r=e.value,n=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec;let s=[];const l=Dn(r);if("object"!==l)return[new Kn(t,r,`object expected, ${l} found`)];for(const e in r){const l=e.split(".")[0],c=n[l]||n["*"];let u;i[l]?u=i[l]:n[l]?u=Ci:i["*"]?u=i["*"]:n["*"]&&(u=Ci),u?s=s.concat(u({key:(t?`${t}.`:t)+e,value:r[e],valueSpec:c,style:o,styleSpec:a,object:r,objectKey:e},r)):s.push(new Kn(t,r[e],`unknown property "${e}"`))}for(const e in n)i[e]||n[e].required&&void 0===n[e].default&&void 0===r[e]&&s.push(new Kn(t,r,`missing required property "${e}"`));return s}function Qn(e){const t=e.value,r=e.valueSpec,n=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||Ci;if("array"!==Dn(t))return[new Kn(o,t,`array expected, ${Dn(t)} found`)];if(r.length&&t.length!==r.length)return[new Kn(o,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new Kn(o,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let s={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};i.$version<7&&(s.function=r.function),"object"===Dn(r.value)&&(s=r.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(a({array:t,arrayIndex:e,value:t[e],valueSpec:s,style:n,styleSpec:i,key:`${o}[${e}]`}));return l}function $n(e){const t=e.key,r=e.value,n=e.valueSpec;let i=Dn(r);if("number"===i&&r!=r&&(i="NaN"),"number"!==i)return[new Kn(t,r,`number expected, ${i} found`)];if("minimum"in n){let i=n.minimum;if("array"===Dn(n.minimum)&&(i=n.minimum[e.arrayIndex]),r<i)return[new Kn(t,r,`${r} is less than the minimum value ${i}`)]}if("maximum"in n){let i=n.maximum;if("array"===Dn(n.maximum)&&(i=n.maximum[e.arrayIndex]),r>i)return[new Kn(t,r,`${r} is greater than the maximum value ${i}`)]}return[]}function ei(e){const t=e.valueSpec,r=Je(e.value.type);let n,i,o,a={};const s="categorical"!==r&&void 0===e.value.property,l=!s,c="array"===Dn(e.value.stops)&&"array"===Dn(e.value.stops[0])&&"object"===Dn(e.value.stops[0][0]),u=Jn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===r)return[new Kn(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const n=e.value;return t=t.concat(Qn({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Dn(n)&&0===n.length&&t.push(new Kn(e.key,n,"array must have at least one stop")),t},default:function(e){return Ci({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&s&&u.push(new Kn(e.key,e.value,'missing required property "property"')),"identity"===r||e.value.stops||u.push(new Kn(e.key,e.value,'missing required property "stops"')),"exponential"===r&&e.valueSpec.expression&&!zn(e.valueSpec)&&u.push(new Kn(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Cn(e.valueSpec)?u.push(new Kn(e.key,e.value,"property functions not supported")):s&&!Mn(e.valueSpec)&&u.push(new Kn(e.key,e.value,"zoom functions not supported"))),"categorical"!==r&&!c||void 0!==e.value.property||u.push(new Kn(e.key,e.value,'"property" property is required')),u;function h(e){let r=[];const n=e.value,s=e.key;if("array"!==Dn(n))return[new Kn(s,n,`array expected, ${Dn(n)} found`)];if(2!==n.length)return[new Kn(s,n,`array length 2 expected, length ${n.length} found`)];if(c){if("object"!==Dn(n[0]))return[new Kn(s,n,`object expected, ${Dn(n[0])} found`)];if(void 0===n[0].zoom)return[new Kn(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new Kn(s,n,"object stop key must have value")];const t=Je(n[0].zoom);if("number"!=typeof t)return[new Kn(s,n[0].zoom,"stop zoom values must be numbers")];if(o&&o>t)return[new Kn(s,n[0].zoom,"stop zoom values must appear in ascending order")];t!==o&&(o=t,i=void 0,a={}),r=r.concat(Jn({key:`${s}[0]`,value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:$n,value:d}}))}else r=r.concat(d({key:`${s}[0]`,value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return Gn(Qe(n[1]))?r.concat([new Kn(`${s}[1]`,n[1],"expressions are not allowed in function stops.")]):r.concat(Ci({key:`${s}[1]`,value:n[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function d(e,o){const s=Dn(e.value),l=Je(e.value),c=null!==e.value?e.value:o;if(n){if(s!==n)return[new Kn(e.key,c,`${s} stop domain type must match previous stop domain type ${n}`)]}else n=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new Kn(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==r){let n=`number expected, ${s} found`;return Cn(t)&&void 0===r&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Kn(e.key,c,n)]}return"categorical"!==r||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===s&&"number"==typeof l&&"number"==typeof i&&void 0!==i&&l<i?[new Kn(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===r&&l in a?[new Kn(e.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new Kn(e.key,c,`integer expected, found ${String(l)}`)]}}function ti(e){const t=("property"===e.expressionContext?Zn:Hn)(Qe(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new Kn(`${e.key}${t.key}`,e.value,t.message)));const r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new Kn(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!gr(r))return[new Kn(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return ri(r,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!yr(r,["zoom","feature-state"]))return[new Kn(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!mr(r))return[new Kn(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ri(e,t){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const e of t.valueSpec.expression.parameters)r.delete(e);if(0===r.size)return[];const n=[];return e instanceof Yt&&r.has(e.name)?[new Kn(t.key,t.value,`["${e.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(e.eachChild((e=>{n.push(...ri(e,t))})),n)}function ni(e){const t=e.key,r=e.value,n=e.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(Je(r))&&i.push(new Kn(t,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(n.values).indexOf(Je(r))&&i.push(new Kn(t,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),i}function ii(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ii(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function oi(e,t="fill"){if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ii(e)||(e=di(e));const r=e;let n=!0;try{n=function(e){if(!li(e))return e;let t=Qe(e);return si(t),t=ai(t),t}(r)}catch(e){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(r,null,2)}\n        `)}const i=Ye[`filter_${t}`],o=Hn(n,i);let a=null;if("error"===o.result)throw new Error(o.value.map((e=>`${e.key}: ${e.message}`)).join(", "));a=(e,t,r)=>o.value.evaluate(e,t,{},r);let s=null,l=null;if(n!==r){const e=Hn(r,i);if("error"===e.result)throw new Error(e.value.map((e=>`${e.key}: ${e.message}`)).join(", "));s=(t,r,n,i,o)=>e.value.evaluate(t,r,{},n,void 0,void 0,i,o),l=!mr(e.value.expression)}return{filter:a,dynamicFilter:s||void 0,needGeometry:hi(n),needFeature:!!l}}function ai(e){if(!Array.isArray(e))return e;const t=function(e){if(ci.has(e[0]))for(let t=1;t<e.length;t++)if(li(e[t]))return!0;return e}(e);return!0===t?t:t.map((e=>ai(e)))}function si(e){let t=!1;const r=[];if("case"===e[0]){for(let n=1;n<e.length-1;n+=2)t=t||li(e[n]),r.push(e[n+1]);r.push(e[e.length-1])}else if("match"===e[0]){t=t||li(e[1]);for(let t=2;t<e.length-1;t+=2)r.push(e[t+1]);r.push(e[e.length-1])}else if("step"===e[0]){t=t||li(e[1]);for(let t=1;t<e.length-1;t+=2)r.push(e[t+1])}t&&(e.length=0,e.push("any",...r));for(let t=1;t<e.length;t++)si(e[t])}function li(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let t=1;t<e.length;t++)if(li(e[t]))return!0;return!1}const ci=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function ui(e,t){return e<t?-1:e>t?1:0}function hi(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(hi(e[t]))return!0;return!1}function di(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?pi(e[1],e[2],"=="):"!="===t?gi(pi(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?pi(e[1],e[2],t):"any"===t?(r=e.slice(1),["any"].concat(r.map(di))):"all"===t?["all"].concat(e.slice(1).map(di)):"none"===t?["all"].concat(e.slice(1).map(di).map(gi)):"in"===t?fi(e[1],e.slice(2)):"!in"===t?gi(fi(e[1],e.slice(2))):"has"===t?mi(e[1]):"!has"===t?gi(mi(e[1])):"within"!==t||e;var r}function pi(e,t,r){switch(e){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,e,t]}}function fi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(ui)]]:["filter-in-small",e,["literal",t]]}}function mi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function gi(e){return["!",e]}function yi(e){return ii(Qe(e.value))?ti(Ke({},e,{expressionContext:"filter",valueSpec:e.styleSpec[`filter_${e.layerType||"fill"}`]})):_i(e)}function _i(e){const t=e.value,r=e.key;if("array"!==Dn(t))return[new Kn(r,t,`array expected, ${Dn(t)} found`)];const n=e.styleSpec;let i,o=[];if(t.length<1)return[new Kn(r,t,"filter array must have at least 1 element")];switch(o=o.concat(ni({key:`${r}[0]`,value:t[0],valueSpec:n.filter_operator,style:e.style,styleSpec:e.styleSpec})),Je(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Je(t[1])&&o.push(new Kn(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new Kn(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Dn(t[1]),"string"!==i&&o.push(new Kn(`${r}[1]`,t[1],`string expected, ${i} found`)));for(let a=2;a<t.length;a++)i=Dn(t[a]),"$type"===Je(t[1])?o=o.concat(ni({key:`${r}[${a}]`,value:t[a],valueSpec:n.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new Kn(`${r}[${a}]`,t[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let n=1;n<t.length;n++)o=o.concat(_i({key:`${r}[${n}]`,value:t[n],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Dn(t[1]),2!==t.length?o.push(new Kn(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new Kn(`${r}[1]`,t[1],`string expected, ${i} found`));break;case"within":i=Dn(t[1]),2!==t.length?o.push(new Kn(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new Kn(`${r}[1]`,t[1],`object expected, ${i} found`))}return o}function vi(e,t){const r=e.key,n=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[`${t}_${e.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Ci({key:r,value:o,valueSpec:i.transition,style:n,styleSpec:i});const c=e.valueSpec||s[a];if(!c)return[new Kn(r,o,`unknown property "${a}"`)];let u;if("string"===Dn(o)&&Cn(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new Kn(r,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===e.layerType&&("text-field"===a&&n&&!n.glyphs&&h.push(new Kn(r,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Ln(Qe(o))&&"identity"===Je(o.type)&&h.push(new Kn(r,o,'"text-font" does not support identity functions'))),h.concat(Ci({key:e.key,value:o,valueSpec:c,style:n,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function xi(e){return vi(e,"paint")}function bi(e){return vi(e,"layout")}function wi(e){let t=[];const r=e.value,n=e.key,i=e.style,o=e.styleSpec;r.type||r.ref||t.push(new Kn(n,r,'either "type" or "ref" is required'));let a=Je(r.type);const s=Je(r.ref);if(r.id){const o=Je(r.id);for(let a=0;a<e.arrayIndex;a++){const e=i.layers[a];Je(e.id)===o&&t.push(new Kn(n,r.id,`duplicate layer id "${r.id}", previously used at line ${e.id.__line__}`))}}if("ref"in r){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in r&&t.push(new Kn(n,r[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{Je(t.id)===s&&(e=t)})),e?e.ref?t.push(new Kn(n,r.ref,"ref cannot reference another ref layer")):a=Je(e.type):"string"==typeof s&&t.push(new Kn(n,r.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(r.source){const e=i.sources&&i.sources[r.source],o=e&&Je(e.type);e?"vector"===o&&"raster"===a?t.push(new Kn(n,r.source,`layer "${r.id}" requires a raster source`)):"raster"===o&&"raster"!==a?t.push(new Kn(n,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==o||r["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new Kn(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||"geojson"===o&&e.lineMetrics||t.push(new Kn(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Kn(n,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new Kn(n,r.source,`source "${r.source}" not found`))}else t.push(new Kn(n,r,'missing required property "source"'));return t=t.concat(Jn({key:n,value:r,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ci({key:`${n}.type`,value:r.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"}),filter:e=>yi(Ke({layerType:a},e)),layout:e=>Jn({layer:r,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>bi(Ke({layerType:a},e))}}),paint:e=>Jn({layer:r,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>xi(Ke({layerType:a},e))}})}})),t}function Ei(e){const t=e.value,r=e.key,n=Dn(t);return"string"!==n?[new Kn(r,t,`string expected, ${n} found`)]:[]}const Ti={promoteId:function({key:e,value:t}){if("string"===Dn(t))return Ei({key:e,value:t});{const r=[];for(const n in t)r.push(...Ei({key:`${e}.${n}`,value:t[n]}));return r}}};function Si(e){const t=e.value,r=e.key,n=e.styleSpec,i=e.style;if(!t.type)return[new Kn(r,t,'"type" is required')];const o=Je(t.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=Jn({key:r,value:t,valueSpec:n[`source_${o.replace("-","_")}`],style:e.style,styleSpec:n,objectElementValidators:Ti}),a;case"geojson":if(a=Jn({key:r,value:t,valueSpec:n.source_geojson,style:i,styleSpec:n,objectElementValidators:Ti}),t.cluster)for(const e in t.clusterProperties){const[n,i]=t.clusterProperties[e],o="string"==typeof n?[n,["accumulated"],["get",e]]:n;a.push(...ti({key:`${r}.${e}.map`,value:i,expressionContext:"cluster-map"})),a.push(...ti({key:`${r}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Jn({key:r,value:t,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return Jn({key:r,value:t,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new Kn(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ni({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function Ai(e){const t=e.value,r=e.styleSpec,n=r.light,i=e.style;let o=[];const a=Dn(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new Kn("light",t,`object expected, ${a} found`)]),o;for(const e in t){const a=e.match(/^(.*)-transition$/);o=o.concat(a&&n[a[1]]&&n[a[1]].transition?Ci({key:e,value:t[e],valueSpec:r.transition,style:i,styleSpec:r}):n[e]?Ci({key:e,value:t[e],valueSpec:n[e],style:i,styleSpec:r}):[new Kn(e,t[e],`unknown property "${e}"`)])}return o}function Pi(e){const t=e.value,r=e.key,n=e.style,i=e.styleSpec,o=i.terrain;let a=[];const s=Dn(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new Kn("terrain",t,`object expected, ${s} found`)]),a;for(const e in t){const r=e.match(/^(.*)-transition$/);a=a.concat(r&&o[r[1]]&&o[r[1]].transition?Ci({key:e,value:t[e],valueSpec:i.transition,style:n,styleSpec:i}):o[e]?Ci({key:e,value:t[e],valueSpec:o[e],style:n,styleSpec:i}):[new Kn(e,t[e],`unknown property "${e}"`)])}if(t.source){const e=n.sources&&n.sources[t.source],i=e&&Je(e.type);e?"raster-dem"!==i&&a.push(new Kn(r,t.source,`terrain cannot be used with a source of type ${String(i)}, it only be used with a "raster-dem" source type`)):a.push(new Kn(r,t.source,`source "${t.source}" not found`))}else a.push(new Kn(r,t,'terrain is missing required property "source"'));return a}function Ii(e){const t=e.value,r=e.style,n=e.styleSpec,i=n.fog;let o=[];const a=Dn(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new Kn("fog",t,`object expected, ${a} found`)]),o;for(const e in t){const a=e.match(/^(.*)-transition$/);o=o.concat(a&&i[a[1]]&&i[a[1]].transition?Ci({key:e,value:t[e],valueSpec:n.transition,style:r,styleSpec:n}):i[e]?Ci({key:e,value:t[e],valueSpec:i[e],style:r,styleSpec:n}):[new Kn(e,t[e],`unknown property "${e}"`)])}return o}const ki={"*":()=>[],array:Qn,boolean:function(e){const t=e.value,r=e.key,n=Dn(t);return"boolean"!==n?[new Kn(r,t,`boolean expected, ${n} found`)]:[]},number:$n,color:function(e){const t=e.key,r=e.value,n=Dn(r);return"string"!==n?[new Kn(t,r,`color expected, ${n} found`)]:null===vt(r)?[new Kn(t,r,`color expected, "${r}" found`)]:[]},enum:ni,filter:yi,function:ei,layer:wi,object:Jn,source:Si,light:Ai,terrain:Pi,fog:Ii,string:Ei,formatted:function(e){return 0===Ei(e).length?[]:ti(e)},resolvedImage:function(e){return 0===Ei(e).length?[]:ti(e)},projection:function(e){const t=e.value,r=e.styleSpec,n=r.projection,i=e.style;let o=[];const a=Dn(t);if("object"===a)for(const e in t)o=o.concat(Ci({key:e,value:t[e],valueSpec:n[e],style:i,styleSpec:r}));else"string"!==a&&(o=o.concat([new Kn("projection",t,`object or string expected, ${a} found`)]));return o}};function Ci(e){const t=e.value,r=e.valueSpec,n=e.styleSpec;return r.expression&&Ln(Je(t))?ei(e):r.expression&&Gn(Qe(t))?ti(e):r.type&&ki[r.type]?ki[r.type](e):Jn(Ke({},e,{valueSpec:r.type?n[r.type]:r}))}function Mi(e){const t=e.value,r=e.key,n=Ei(e);return n.length||(-1===t.indexOf("{fontstack}")&&n.push(new Kn(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&n.push(new Kn(r,t,'"glyphs" url must include a "{range}" token'))),n}function zi(e,t=Ye){return Fi(Ci({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Mi,"*":()=>[]}}))}const Di=e=>Fi(xi(e)),Li=e=>Fi(bi(e));function Fi(e){return e.slice().sort(((e,t)=>e.line&&t.line?e.line-t.line:0))}function Ri(e,t){let r=!1;if(t&&t.length)for(const n of t)e.fire(new Ze(new Error(n.message))),r=!0;return r}var Bi=Oi;function Oi(e,t,r){var n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(r=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];n.push(a===s?null:i.subarray(a,s))}var l=i[3+n.length+1];this.keys=i.subarray(i[3+n.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*r;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;var u=r/t*e;this.min=-u,this.max=e+u}Oi.prototype.insert=function(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},Oi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Oi.prototype._insertCell=function(e,t,r,n,i,o){this.cells[i].push(o)},Oi.prototype.query=function(e,t,r,n,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=r&&a<=n&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,r,n,this._queryCell,s,{},i),s},Oi.prototype._queryCell=function(e,t,r,n,i,o,a,s){var l=this.cells[i];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===a[d]){var p=4*d;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):e<=u[p+2]&&t<=u[p+3]&&r>=u[p+0]&&n>=u[p+1])?(a[d]=!0,o.push(c[d])):a[d]=!1}}},Oi.prototype._forEachCell=function(e,t,r,n,i,o,a,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(r),h=this._convertToCellCoord(n),d=l;d<=u;d++)for(var p=c;p<=h;p++){var f=this.d*p+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&i.call(this,e,t,r,n,f,o,a,s))return}},Oi.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Oi.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Oi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(t+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+e.length]=o,i.set(this.keys,o),i[3+e.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};const Ni={};function ji(e,t,r={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Ni[t]={klass:e,omit:r.omit||[]}}ji(Object,"Object"),Bi.serialize=function(e,t){const r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}},Bi.deserialize=function(e){return new Bi(e.buffer)},Object.defineProperty(Bi,"name",{value:"Grid"}),ji(Bi,"Grid"),ji(At,"Color"),ji(Error,"Error"),ji(ae,"AJAXError"),ji(Ct,"ResolvedImage"),ji(Xn,"StylePropertyFunction"),ji(Vn,"StyleExpression",{omit:["_evaluator"]}),ji(Wn,"ZoomDependentExpression"),ji(qn,"ZoomConstantExpression"),ji(Yt,"CompoundExpression",{omit:["_evaluate"]});for(const e in Pn)Ni[Pn[e]._classRegistryKey]||ji(Pn[e],`Expression${e}`);function Ui(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Vi(e){return t.ImageBitmap&&e instanceof t.ImageBitmap}function Gi(e,r){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Ui(e)||Vi(e))return r&&r.push(e),e;if(ArrayBuffer.isView(e)){const t=e;return r&&r.push(t.buffer),t}if(e instanceof t.ImageData)return r&&r.push(e.data.buffer),e;if(Array.isArray(e)){const t=[];for(const n of e)t.push(Gi(n,r));return t}if("object"==typeof e){const t=e.constructor,n=t._classRegistryKey;if(!n)throw new Error(`can't serialize object of unregistered class ${n}`);const i=t.serialize?t.serialize(e,r):{};if(!t.serialize){for(const t in e)e.hasOwnProperty(t)&&(Ni[n].omit.indexOf(t)>=0||(i[t]=Gi(e[t],r)));e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(i.$name=n),i}throw new Error("can't serialize object of type "+typeof e)}function Hi(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Ui(e)||Vi(e)||ArrayBuffer.isView(e)||e instanceof t.ImageData)return e;if(Array.isArray(e))return e.map(Hi);if("object"==typeof e){const t=e.$name||"Object",{klass:r}=Ni[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(e);const n=Object.create(r.prototype);for(const t of Object.keys(e))"$name"!==t&&(n[t]=Hi(e[t]));return n}throw new Error("can't deserialize object of type "+typeof e)}class qi{constructor(){this.first=!0}update(e,t){const r=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=r,!0))}}const Wi=e=>e>=1536&&e<=1791,Zi=e=>e>=1872&&e<=1919,Xi=e=>e>=2208&&e<=2303,Yi=e=>e>=11904&&e<=12031,Ki=e=>e>=12032&&e<=12255,Ji=e=>e>=12272&&e<=12287,Qi=e=>e>=12288&&e<=12351,$i=e=>e>=12352&&e<=12447,eo=e=>e>=12448&&e<=12543,to=e=>e>=12544&&e<=12591,ro=e=>e>=12704&&e<=12735,no=e=>e>=12736&&e<=12783,io=e=>e>=12784&&e<=12799,oo=e=>e>=12800&&e<=13055,ao=e=>e>=13056&&e<=13311,so=e=>e>=13312&&e<=19903,lo=e=>e>=19968&&e<=40959,co=e=>e>=40960&&e<=42127,uo=e=>e>=42128&&e<=42191,ho=e=>e>=44032&&e<=55215,po=e=>e>=63744&&e<=64255,fo=e=>e>=64336&&e<=65023,mo=e=>e>=65040&&e<=65055,go=e=>e>=65072&&e<=65103,yo=e=>e>=65104&&e<=65135,_o=e=>e>=65136&&e<=65279,vo=e=>e>=65280&&e<=65519;function xo(e){for(const t of e)if(Eo(t.charCodeAt(0)))return!0;return!1}function bo(e){for(const t of e)if(!wo(t.charCodeAt(0)))return!1;return!0}function wo(e){return!(Wi(e)||Zi(e)||Xi(e)||fo(e)||_o(e))}function Eo(e){return!(746!==e&&747!==e&&(e<4352||!(ro(e)||to(e)||go(e)&&!(e>=65097&&e<=65103)||po(e)||ao(e)||Yi(e)||no(e)||!(!Qi(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||so(e)||lo(e)||oo(e)||(e=>e>=12592&&e<=12687)(e)||(e=>e>=43360&&e<=43391)(e)||(e=>e>=55216&&e<=55295)(e)||(e=>e>=4352&&e<=4607)(e)||ho(e)||$i(e)||Ji(e)||(e=>e>=12688&&e<=12703)(e)||Ki(e)||io(e)||eo(e)&&12540!==e||!(!vo(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!yo(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||(e=>e>=5120&&e<=5759)(e)||(e=>e>=6320&&e<=6399)(e)||mo(e)||(e=>e>=19904&&e<=19967)(e)||co(e)||uo(e))))}function To(e){return!(Eo(e)||function(e){return!!((e=>e>=128&&e<=255)(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||(e=>e>=8192&&e<=8303)(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||(e=>e>=8448&&e<=8527)(e)||(e=>e>=8528&&e<=8591)(e)||(e=>e>=8960&&e<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||(e=>e>=9216&&e<=9279)(e)&&9251!==e||(e=>e>=9280&&e<=9311)(e)||(e=>e>=9312&&e<=9471)(e)||(e=>e>=9632&&e<=9727)(e)||(e=>e>=9728&&e<=9983)(e)&&!(e>=9754&&e<=9759)||(e=>e>=11008&&e<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Qi(e)||eo(e)||(e=>e>=57344&&e<=63743)(e)||go(e)||yo(e)||vo(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function So(e){return e>=1424&&e<=2303||fo(e)||_o(e)}function Ao(e,t){return!(!t&&So(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||(e=>e>=6016&&e<=6143)(e))}function Po(e){for(const t of e)if(So(t.charCodeAt(0)))return!0;return!1}const Io="deferred",ko="loading",Co="loaded";let Mo=null,zo="unavailable",Do=null;const Lo=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(zo="error"),Mo&&Mo(e)};function Fo(){Ro.fire(new We("pluginStateChange",{pluginStatus:zo,pluginURL:Do}))}const Ro=new Xe,Bo=function(){return zo},Oo=function(){if(zo!==Io||!Do)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");zo=ko,Fo(),Do&&ce({url:Do},(e=>{e?Lo(e):(zo=Co,Fo())}))},No={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>zo===Co||null!=No.applyArabicShaping,isLoading:()=>zo===ko,setState(e){zo=e.pluginStatus,Do=e.pluginURL},isParsed:()=>null!=No.applyArabicShaping&&null!=No.processBidirectionalText&&null!=No.processStyledBidirectionalText,getPluginURL:()=>Do};class jo{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition,this.pitch=t.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qi,this.transition={},this.pitch=0)}isSupportedScript(e){return function(e,t){for(const r of e)if(!Ao(r.charCodeAt(0),t))return!1;return!0}(e,No.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),r=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*t}}}class Uo{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Ln(e))return new Xn(e,t);if(Gn(e)){const r=Zn(e,t);if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return r.value}{let r=e;return"string"==typeof e&&"color"===t.type&&(r=At.parse(e)),{kind:"constant",evaluate:()=>r}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,r){return this.property.possiblyEvaluate(this,e,t,r)}}class Vo{constructor(e){this.property=e,this.value=new Uo(e,void 0)}transitioned(e,t){return new Ho(this.property,this.value,t,k({},e.transition,this.transition),e.now)}untransitioned(){return new Ho(this.property,this.value,null,{},0)}}class Go{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return N(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Vo(this._values[e].property)),this._values[e].value=new Uo(this._values[e].property,null===t?void 0:N(t))}getTransition(e){return N(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Vo(this._values[e].property)),this._values[e].transition=N(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r);const n=this.getTransition(t);void 0!==n&&(e[`${t}-transition`]=n)}return e}transitioned(e,t){const r=new qo(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].transitioned(e,t._values[n]);return r}untransitioned(){const e=new qo(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Ho{constructor(e,t,r,n,i){const o=n.delay||0,a=n.duration||0;i=i||0,this.property=e,this.value=t,this.begin=i+o,this.end=this.begin+a,e.specification.transition&&(n.delay||n.duration)&&(this.prior=r)}possiblyEvaluate(e,t,r){const n=e.now||0,i=this.value.possiblyEvaluate(e,t,r),o=this.prior;if(o){if(n>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return o.possiblyEvaluate(e,t,r);{const a=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,r),i,b(a))}}return i}}class qo{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,r){const n=new Xo(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(e,t,r);return n}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Wo{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return N(this._values[e].value)}setValue(e,t){this._values[e]=new Uo(this._values[e].property,null===t?void 0:N(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r)}return e}possiblyEvaluate(e,t,r){const n=new Xo(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(e,t,r);return n}}class Zo{constructor(e,t,r){this.property=e,this.value=t,this.parameters=r}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,r,n){return this.property.evaluate(this.value,this.parameters,e,t,r,n)}}class Xo{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Yo{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,r){const n=Pr[this.specification.type];return n?n(e,t,r):e}}class Ko{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,r,n){return new Zo(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},r,n)}:e.expression,t)}interpolate(e,t,r){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Zo(this,{kind:"constant",value:void 0},e.parameters);const n=Pr[this.specification.type];return n?new Zo(this,{kind:"constant",value:n(e.value.value,t.value.value,r)},e.parameters):e}evaluate(e,t,r,n,i,o){return"constant"===e.kind?e.value:e.evaluate(t,r,n,i,o)}}class Jo extends Ko{possiblyEvaluate(e,t,r,n){if(void 0===e.value)return new Zo(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},r,n),o="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,t);return new Zo(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){const r=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Zo(this,{kind:"constant",value:r},t)}return new Zo(this,e.expression,t)}evaluate(e,t,r,n,i,o){if("source"===e.kind){const a=e.evaluate(t,r,n,i,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},r,n),e.evaluate({zoom:Math.floor(t.zoom)},r,n),e.evaluate({zoom:Math.floor(t.zoom)+1},r,n),t):e.value}_calculate(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t,other:r}:{from:r,to:t,other:e}}interpolate(e){return e}}class Qo{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,n){if(void 0!==e.value){if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},r,n);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new jo(Math.floor(t.zoom-1),t)),e.expression.evaluate(new jo(Math.floor(t.zoom),t)),e.expression.evaluate(new jo(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}}interpolate(e){return e}}class $o{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,n){return!!e.expression.evaluate(t,null,{},r,n)}interpolate(){return!1}}class ea{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const t=new jo(0,{});for(const r in e){const n=e[r];n.specification.overridable&&this.overridableProperties.push(r);const i=this.defaultPropertyValues[r]=new Uo(n,void 0),o=this.defaultTransitionablePropertyValues[r]=new Vo(n);this.defaultTransitioningPropertyValues[r]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=i.possiblyEvaluate(t)}}}function ta(e,t){return 256*(e=T(Math.floor(e),0,255))+T(Math.floor(t),0,255)}ji(Ko,"DataDrivenProperty"),ji(Yo,"DataConstantProperty"),ji(Jo,"CrossFadedDataDrivenProperty"),ji(Qo,"CrossFadedProperty"),ji($o,"ColorRampProperty");const ra={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class na{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ia{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function oa(e,t=1){let r=0,n=0;return{members:e.map((e=>{const i=ra[e.type].BYTES_PER_ELEMENT,o=r=aa(r,Math.max(t,i)),a=e.components||1;return n=Math.max(n,i),r+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:aa(r,Math.max(n,t)),alignment:t}}function aa(e,t){return Math.ceil(e/t)*t}class sa extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.int16[n+0]=t,this.int16[n+1]=r,e}}sa.prototype.bytesPerElement=4,ji(sa,"StructArrayLayout2i4");class la extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=r,this.int16[i+2]=n,e}}la.prototype.bytesPerElement=6,ji(la,"StructArrayLayout3i6");class ca extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=i,e}}ca.prototype.bytesPerElement=8,ji(ca,"StructArrayLayout4i8");class ua extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,i,o,a)}emplace(e,t,r,n,i,o,a,s){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.uint8[c+4]=n,this.uint8[c+5]=i,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,e}}ua.prototype.bytesPerElement=12,ji(ua,"StructArrayLayout2i4ub1f12");class ha extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=r,this.float32[o+2]=n,this.float32[o+3]=i,e}}ha.prototype.bytesPerElement=16,ji(ha,"StructArrayLayout4f16");class da extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,r,n,i,o,a,s,l,c)}emplace(e,t,r,n,i,o,a,s,l,c,u){const h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=r,this.uint16[h+2]=n,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}da.prototype.bytesPerElement=20,ji(da,"StructArrayLayout10ui20");class pa extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a,s){const l=this.length;return this.resize(l+1),this.emplace(l,e,t,r,n,i,o,a,s)}emplace(e,t,r,n,i,o,a,s,l){const c=8*e;return this.uint16[c+0]=t,this.uint16[c+1]=r,this.uint16[c+2]=n,this.uint16[c+3]=i,this.uint16[c+4]=o,this.uint16[c+5]=a,this.uint16[c+6]=s,this.uint16[c+7]=l,e}}pa.prototype.bytesPerElement=16,ji(pa,"StructArrayLayout8ui16");class fa extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i,o)}emplace(e,t,r,n,i,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e}}fa.prototype.bytesPerElement=12,ji(fa,"StructArrayLayout6i12");class ma extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a,s,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,r,n,i,o,a,s,l,c,u,h)}emplace(e,t,r,n,i,o,a,s,l,c,u,h,d){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=r,this.int16[p+2]=n,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,e}}ma.prototype.bytesPerElement=24,ji(ma,"StructArrayLayout4i4ui4i24");class ga extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i,o)}emplace(e,t,r,n,i,o,a){const s=10*e,l=5*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.float32[l+2]=i,this.float32[l+3]=o,this.float32[l+4]=a,e}}ga.prototype.bytesPerElement=20,ji(ga,"StructArrayLayout3i3f20");class ya extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}ya.prototype.bytesPerElement=4,ji(ya,"StructArrayLayout1ul4");class _a extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a,s,l,c,u,h,d){const p=this.length;return this.resize(p+1),this.emplace(p,e,t,r,n,i,o,a,s,l,c,u,h,d)}emplace(e,t,r,n,i,o,a,s,l,c,u,h,d,p){const f=20*e,m=10*e;return this.int16[f+0]=t,this.int16[f+1]=r,this.int16[f+2]=n,this.int16[f+3]=i,this.int16[f+4]=o,this.float32[m+3]=a,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=c,this.int16[f+14]=u,this.uint32[m+8]=h,this.uint16[f+18]=d,this.uint16[f+19]=p,e}}_a.prototype.bytesPerElement=40,ji(_a,"StructArrayLayout5i4f1i1ul2ui40");class va extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,i,o,a)}emplace(e,t,r,n,i,o,a,s){const l=8*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+4]=i,this.int16[l+5]=o,this.int16[l+6]=a,this.int16[l+7]=s,e}}va.prototype.bytesPerElement=16,ji(va,"StructArrayLayout3i2i2i16");class xa extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n,i)}emplace(e,t,r,n,i,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=r,this.float32[a+2]=n,this.int16[s+6]=i,this.int16[s+7]=o,e}}xa.prototype.bytesPerElement=16,ji(xa,"StructArrayLayout2f1f2i16");class ba extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=r,this.float32[a+1]=n,this.float32[a+2]=i,e}}ba.prototype.bytesPerElement=12,ji(ba,"StructArrayLayout2ub2f12");class wa extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=r,this.float32[i+2]=n,e}}wa.prototype.bytesPerElement=12,ji(wa,"StructArrayLayout3f12");class Ea extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=r,this.uint16[i+2]=n,e}}Ea.prototype.bytesPerElement=6,ji(Ea,"StructArrayLayout3ui6");class Ta extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,e,t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x)}emplace(e,t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b){const w=30*e,E=15*e,T=60*e;return this.int16[w+0]=t,this.int16[w+1]=r,this.int16[w+2]=n,this.float32[E+2]=i,this.float32[E+3]=o,this.uint16[w+8]=a,this.uint16[w+9]=s,this.uint32[E+5]=l,this.uint32[E+6]=c,this.uint32[E+7]=u,this.uint16[w+16]=h,this.uint16[w+17]=d,this.uint16[w+18]=p,this.float32[E+10]=f,this.float32[E+11]=m,this.uint8[T+48]=g,this.uint8[T+49]=y,this.uint8[T+50]=_,this.uint32[E+13]=v,this.int16[w+28]=x,this.uint8[T+58]=b,e}}Ta.prototype.bytesPerElement=60,ji(Ta,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Sa extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b,w,E,T,S,A,P,I,k){const C=this.length;return this.resize(C+1),this.emplace(C,e,t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b,w,E,T,S,A,P,I,k)}emplace(e,t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b,w,E,T,S,A,P,I,k,C){const M=38*e,z=19*e;return this.int16[M+0]=t,this.int16[M+1]=r,this.int16[M+2]=n,this.float32[z+2]=i,this.float32[z+3]=o,this.int16[M+8]=a,this.int16[M+9]=s,this.int16[M+10]=l,this.int16[M+11]=c,this.int16[M+12]=u,this.int16[M+13]=h,this.uint16[M+14]=d,this.uint16[M+15]=p,this.uint16[M+16]=f,this.uint16[M+17]=m,this.uint16[M+18]=g,this.uint16[M+19]=y,this.uint16[M+20]=_,this.uint16[M+21]=v,this.uint16[M+22]=x,this.uint16[M+23]=b,this.uint16[M+24]=w,this.uint16[M+25]=E,this.uint16[M+26]=T,this.uint16[M+27]=S,this.uint16[M+28]=A,this.uint32[z+15]=P,this.float32[z+16]=I,this.float32[z+17]=k,this.float32[z+18]=C,e}}Sa.prototype.bytesPerElement=76,ji(Sa,"StructArrayLayout3i2f6i15ui1ul3f76");class Aa extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Aa.prototype.bytesPerElement=4,ji(Aa,"StructArrayLayout1f4");class Pa extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n,i)}emplace(e,t,r,n,i,o){const a=5*e;return this.float32[a+0]=t,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,this.float32[a+4]=o,e}}Pa.prototype.bytesPerElement=20,ji(Pa,"StructArrayLayout5f20");class Ia extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const o=6*e;return this.uint32[3*e+0]=t,this.uint16[o+2]=r,this.uint16[o+3]=n,this.uint16[o+4]=i,e}}Ia.prototype.bytesPerElement=12,ji(Ia,"StructArrayLayout1ul3ui12");class ka extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.uint16[n+0]=t,this.uint16[n+1]=r,e}}ka.prototype.bytesPerElement=4,ji(ka,"StructArrayLayout2ui4");class Ca extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Ca.prototype.bytesPerElement=2,ji(Ca,"StructArrayLayout1ui2");class Ma extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.float32[n+0]=t,this.float32[n+1]=r,e}}Ma.prototype.bytesPerElement=8,ji(Ma,"StructArrayLayout2f8");class za extends na{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}za.prototype.size=12;class Da extends fa{get(e){return new za(this,e)}}ji(Da,"FillExtrusionExtArray");class La extends na{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}La.prototype.size=40;class Fa extends _a{get(e){return new La(this,e)}}ji(Fa,"CollisionBoxArray");class Ra extends na{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Ra.prototype.size=60;class Ba extends Ta{get(e){return new Ra(this,e)}}ji(Ba,"PlacedSymbolArray");class Oa extends na{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Oa.prototype.size=76;class Na extends Sa{get(e){return new Oa(this,e)}}ji(Na,"SymbolInstanceArray");class ja extends Aa{getoffsetX(e){return this.float32[1*e+0]}}ji(ja,"GlyphOffsetArray");class Ua extends la{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}ji(Ua,"SymbolLineVertexArray");class Va extends na{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Va.prototype.size=12;class Ga extends Ia{get(e){return new Va(this,e)}}ji(Ga,"FeatureIndexArray");class Ha extends na{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Ha.prototype.size=4;class qa extends ka{get(e){return new Ha(this,e)}}ji(qa,"FillExtrusionCentroidArray");class Wa extends na{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Wa.prototype.size=12;class Za extends fa{get(e){return new Wa(this,e)}}ji(Za,"CircleGlobeExtArray");const Xa=oa([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Ya=oa([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var Ka={exports:{}},Ja={exports:{}};Ja.exports=function(e,t){var r,n,i,o,a,s,l,c;for(n=e.length-(r=3&e.length),i=t,a=3432918353,s=461845907,c=0;c<n;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var Qa={exports:{}};Qa.exports=function(e,t){for(var r,n=e.length,i=t^n,o=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var $a=Ja.exports,es=Qa.exports;Ka.exports=$a,Ka.exports.murmur3=$a,Ka.exports.murmur2=es;class ts{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,r,n){this.ids.push(rs(e)),this.positions.push(t,r,n)}getPositions(e){const t=rs(e);let r=0,n=this.ids.length-1;for(;r<n;){const e=r+n>>1;this.ids[e]>=t?n=e:r=e+1}const i=[];for(;this.ids[r]===t;)i.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return i}static serialize(e,t){const r=new Float64Array(e.ids),n=new Uint32Array(e.positions);return ns(r,n,0,r.length-1),t&&t.push(r.buffer,n.buffer),{ids:r,positions:n}}static deserialize(e){const t=new ts;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function rs(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Ka.exports(String(e))}function ns(e,t,r,n){for(;r<n;){const i=e[r+n>>1];let o=r-1,a=n+1;for(;;){do{o++}while(e[o]<i);do{a--}while(e[a]>i);if(o>=a)break;is(e,o,a),is(t,3*o,3*a),is(t,3*o+1,3*a+1),is(t,3*o+2,3*a+2)}a-r<n-a?(ns(e,t,r,a),r=a+1):(ns(e,t,a+1,n),n=a)}}function is(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}ji(ts,"FeaturePositionMap");class os{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}class as extends os{constructor(e){super(e),this.current=0}set(e,t,r){this.fetchUniformLocation(e,t)&&this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class ss extends os{constructor(e){super(e),this.current=[0,0,0,0]}set(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3])))}}class ls extends os{constructor(e){super(e),this.current=At.transparent}set(e,t,r){this.fetchUniformLocation(e,t)&&(r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a)))}}const cs=new Float32Array(16),us=new Float32Array(9),hs=new Float32Array(4);function ds(e){return[ta(255*e.r,255*e.g),ta(255*e.b,255*e.a)]}class ps{constructor(e,t,r){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=r}setUniform(e,t,r,n,i){t.set(e,i,n.constantOr(this.value))}getBinding(e,t){return"color"===this.type?new ls(e):new as(e)}}class fs{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio||1,this.pixelRatioTo=e.pixelRatio||1,this.patternFrom=t.tl.concat(t.br),this.patternTo=e.tl.concat(e.br)}setUniform(e,t,r,n,i){const o="u_pattern_to"===i||"u_dash_to"===i?this.patternTo:"u_pattern_from"===i||"u_dash_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;o&&t.set(e,i,o)}getBinding(e,t){return"u_pattern_from"===t||"u_pattern_to"===t||"u_dash_from"===t||"u_dash_to"===t?new ss(e):new as(e)}}class ms{constructor(e,t,r,n){this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?2:1,offset:0}))),this.paintVertexArray=new n}populatePaintArray(e,t,r,n,i,o){const a=this.paintVertexArray.length,s=this.expression.evaluate(new jo(0),t,{},i,n,o);this.paintVertexArray.resize(e),this._setPaintValue(a,e,s)}updatePaintArray(e,t,r,n,i){const o=this.expression.evaluate({zoom:0},r,n,void 0,i);this._setPaintValue(e,t,o)}_setPaintValue(e,t,r){if("color"===this.type){const n=ds(r);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n[0],n[1])}else{for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class gs{constructor(e,t,r,n,i,o){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,r,n,i,o){const a=this.expression.evaluate(new jo(this.zoom),t,{},i,n,o),s=this.expression.evaluate(new jo(this.zoom+1),t,{},i,n,o),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,a,s)}updatePaintArray(e,t,r,n,i){const o=this.expression.evaluate({zoom:this.zoom},r,n,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},r,n,void 0,i);this._setPaintValue(e,t,o,a)}_setPaintValue(e,t,r,n){if("color"===this.type){const i=ds(r),o=ds(n);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,i[0],i[1],o[0],o[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t,r,n,i){const o=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,a=T(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);t.set(e,i,a)}getBinding(e,t){return new as(e)}}class ys{constructor(e,t,r,n,i,o,a){this.expression=e,this.type=r,this.useIntegerZoom=n,this.zoom=i,this.layerId=a,this.paintVertexAttributes=("array"===r?Ya:Xa).members;for(let e=0;e<t.length;++e);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}populatePaintArray(e,t,r){const n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(n,e,t.patterns&&t.patterns[this.layerId],r)}updatePaintArray(e,t,r,n,i,o){this._setPaintValues(e,t,r.patterns&&r.patterns[this.layerId],o)}_setPaintValues(e,t,r,n){if(!n||!r)return;const{min:i,mid:o,max:a}=r,s=n[i],l=n[o],c=n[a];if(s&&l&&c)for(let r=e;r<t;r++)this._setPaintValue(this.zoomInPaintVertexArray,r,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,r,l,c)}_setPaintValue(e,t,r,n){e.emplace(t,r.tl[0],r.tl[1],r.br[0],r.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],r.pixelRatio,n.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class _s{constructor(e,t,r=(()=>!0)){this.binders={},this._buffers=[];const n=[];for(const i in e.paint._values){if(!r(i))continue;const o=e.paint.get(i);if(!(o instanceof Zo&&Cn(o.property.specification)))continue;const a=bs(i,e.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u,d="line-dasharray"===String(i)&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||h){const r=Ts(i,l,"source");this.binders[i]=h?new ys(s,a,l,c,t,r,e.id):new ms(s,a,l,r),n.push(`/a_${i}`)}else{const e=Ts(i,l,"composite");this.binders[i]=new gs(s,a,l,c,t,e),n.push(`/z_${i}`)}else this.binders[i]=h?new fs(s.value,a):new ps(s.value,a,l),n.push(`/u_${i}`)}this.cacheKey=n.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof ms||t instanceof gs?t.maxValue:0}populatePaintArrays(e,t,r,n,i,o){for(const a in this.binders){const s=this.binders[a];(s instanceof ms||s instanceof gs||s instanceof ys)&&s.populatePaintArray(e,t,r,n,i,o)}}setConstantPatternPositions(e,t){for(const r in this.binders){const n=this.binders[r];n instanceof fs&&n.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,r,n,i,o){let a=!1;for(const s in e){const l=t.getPositions(s);for(const t of l){const l=r.feature(t.index);for(const r in this.binders){const c=this.binders[r];if((c instanceof ms||c instanceof gs||c instanceof ys)&&!0===c.expression.isStateDependent){const u=n.paint.get(r);c.expression=u.value,c.updatePaintArray(t.start,t.end,l,e[s],i,o),a=!0}}}}return a}defines(){const e=[];for(const t in this.binders){const r=this.binders[t];(r instanceof ps||r instanceof fs)&&e.push(...r.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof ms||r instanceof gs||r instanceof ys)for(let t=0;t<r.paintVertexAttributes.length;t++)e.push(r.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof ps||r instanceof fs||r instanceof gs)for(const t of r.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const t=[];for(const r in this.binders){const n=this.binders[r];if(n instanceof ps||n instanceof fs||n instanceof gs)for(const i of n.uniformNames)t.push({name:i,property:r,binding:n.getBinding(e,i)})}return t}setUniforms(e,t,r,n,i){for(const{name:t,property:o,binding:a}of r)this.binders[o].setUniform(e,a,i,n.get(o),t)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const r=this.binders[t];if(e&&r instanceof ys){const t=2===e.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(r instanceof ms||r instanceof gs)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const t in this.binders){const r=this.binders[t];(r instanceof ms||r instanceof gs||r instanceof ys)&&r.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof ms||t instanceof gs||t instanceof ys)&&t.destroy()}}}class vs{constructor(e,t,r=(()=>!0)){this.programConfigurations={};for(const n of e)this.programConfigurations[n.id]=new _s(n,t,r);this.needsUpload=!1,this._featureMap=new ts,this._bufferOffset=0}populatePaintArrays(e,t,r,n,i,o,a){for(const r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(e,t,n,i,o,a);void 0!==t.id&&this._featureMap.add(t.id,r,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,r,n,i){for(const o of r)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,n,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const xs={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function bs(e,t){return xs[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}const ws={"line-pattern":{source:da,composite:da},"fill-pattern":{source:da,composite:da},"fill-extrusion-pattern":{source:da,composite:da},"line-dasharray":{source:pa,composite:pa}},Es={color:{source:Ma,composite:ha},number:{source:Aa,composite:Ma}};function Ts(e,t,r){const n=ws[e];return n&&n[r]||Es[t][r]}ji(ps,"ConstantBinder"),ji(fs,"CrossFadedConstantBinder"),ji(ms,"SourceExpressionBinder"),ji(ys,"CrossFadedCompositeBinder"),ji(gs,"CompositeExpressionBinder"),ji(_s,"ProgramConfiguration",{omit:["_buffers"]}),ji(vs,"ProgramConfigurationSet");const Ss="-transition";class As extends Xe{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Wo(t.layout)),t.paint)){this._transitionablePaint=new Go(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Xo(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,r={}){null!=t&&this._validate(Li,`layers.${this.id}.layout.${e}`,e,t,r)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return R(e,Ss)?this._transitionablePaint.getTransition(e.slice(0,-Ss.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,r={}){if(null!=t&&this._validate(Di,`layers.${this.id}.paint.${e}`,e,t,r))return!1;if(R(e,Ss))return this._transitionablePaint.setTransition(e.slice(0,-Ss.length),t||void 0),!1;{const r=this._transitionablePaint._values[e],n="cross-faded-data-driven"===r.property.specification["property-type"],i=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value;return a.isDataDriven()||i||n||this._handleOverridablePaintPropertyUpdate(e,o,a)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,r){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),O(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,r,n,i={}){return(!i||!1!==i.validate)&&Ri(this,e.call(zi,{key:t,layerType:this.type,objectKey:r,value:n,styleSpec:Ye,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Zo&&Cn(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=oi(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Ps=oa([{name:"a_pos",components:2,type:"Int16"}],4),Is=oa([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ks{constructor(e=[]){this.segments=e}prepareSegment(e,t,r,n){let i=this.segments[this.segments.length-1];return e>ks.MAX_VERTEX_ARRAY_LENGTH&&U(`Max vertices per segment is ${ks.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!i||i.vertexLength+e>ks.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,r,n){return new ks([{vertexOffset:e,primitiveOffset:t,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])}}ks.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ji(ks,"SegmentVector");var Cs=8192;class Ms{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Ds?new Ds(e.lng,e.lat):Ds.convert(e),this}setSouthWest(e){return this._sw=e instanceof Ds?new Ds(e.lng,e.lat):Ds.convert(e),this}extend(e){const t=this._sw,r=this._ne;let n,i;if(e instanceof Ds)n=e,i=e;else{if(!(e instanceof Ms))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Ms.convert(e)):this.extend(Ds.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&e.hasOwnProperty("lon")?this.extend(Ds.convert(e)):this;if(n=e._sw,i=e._ne,!n||!i)return this}return t||r?(t.lng=Math.min(n.lng,t.lng),t.lat=Math.min(n.lat,t.lat),r.lng=Math.max(i.lng,r.lng),r.lat=Math.max(i.lat,r.lat)):(this._sw=new Ds(n.lng,n.lat),this._ne=new Ds(i.lng,i.lat)),this}getCenter(){return new Ds((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ds(this.getWest(),this.getNorth())}getSouthEast(){return new Ds(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:r}=Ds.convert(e);let n=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n}static convert(e){return!e||e instanceof Ms?e:new Ms(e)}}const zs=6371008.8;class Ds{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ds(A(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,r=this.lat*t,n=e.lat*t,i=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((e.lng-this.lng)*t);return zs*Math.acos(Math.min(i,1))}toBounds(e=0){const t=360*e/40075017,r=t/Math.cos(Math.PI/180*this.lat);return new Ms(new Ds(this.lng-r,this.lat-t),new Ds(this.lng+r,this.lat+t))}static convert(e){if(e instanceof Ds)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Ds(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Ds(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ls=2*Math.PI*zs;function Fs(e){return Ls*Math.cos(e*Math.PI/180)}function Rs(e){return(180+e)/360}function Bs(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Os(e,t){return e/Fs(t)}function Ns(e){return 360*e-180}function js(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Us(e,t){return e*Fs(js(t))}const Vs=85.051129;function Gs(e){return 1/Math.cos(e*Math.PI/180)}class Hs{constructor(e,t,r=0){this.x=+e,this.y=+t,this.z=+r}static fromLngLat(e,t=0){const r=Ds.convert(e);return new Hs(Rs(r.lng),Bs(r.lat),Os(t,r.lat))}toLngLat(){return new Ds(Ns(this.x),js(this.y))}toAltitude(){return Us(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ls*Gs(js(this.y))}}function qs(e,t,r,n,i,o,a,s,l){const c=(t+n)/2,u=(r+i)/2,h=new f(c,u);s(h),function(e,t,r,n,i,o){const a=r-i,s=n-o;return Math.abs((n-t)*a-(r-e)*s)/Math.hypot(a,s)}(h.x,h.y,o.x,o.y,a.x,a.y)>=l?(qs(e,t,r,c,u,o,h,s,l),qs(e,c,u,n,i,h,a,s,l)):e.push(a)}function Ws(e,t,r){let n=e[0],i=n.x,o=n.y;t(n);const a=[n];for(let s=1;s<e.length;s++){const l=e[s],{x:c,y:u}=l;t(l),qs(a,i,o,c,u,n,l,t,r),i=c,o=u,n=l}return a}function Zs(e,t,r,n){if(n(t,r)){const i=t.add(r)._mult(.5);Zs(e,t,i,n),Zs(e,i,r,n)}else e.push(r)}function Xs(e,t){let r=e[0];const n=[r];for(let i=1;i<e.length;i++){const o=e[i];Zs(n,r,o,t),r=o}return n}const Ys=Math.pow(2,14)-1,Ks=-Ys-1;function Js(e,t){const r=Math.round(e.x*t),n=Math.round(e.y*t);return e.x=T(r,Ks,Ys),e.y=T(n,Ks,Ys),(r<e.x||r>e.x+1||n<e.y||n>e.y+1)&&U("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function Qs(e,t,r){const n=e.loadGeometry(),i=e.extent,o=Cs/i;if(t&&r&&r.projection.isReprojectedInTileSpace){const o=1<<t.z,{scale:a,x:s,y:l,projection:c}=r,u=e=>{const r=Ns((t.x+e.x/i)/o),n=js((t.y+e.y/i)/o),u=c.project(r,n);e.x=(u.x*a-s)*i,e.y=(u.y*a-l)*i};for(let t=0;t<n.length;t++)if(1!==e.type)n[t]=Ws(n[t],u,1);else{const e=[];for(const r of n[t])r.x<0||r.x>=i||r.y<0||r.y>=i||(u(r),e.push(r));n[t]=e}}for(const e of n)for(const t of e)Js(t,o);return n}function $s(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Qs(e):[]}}function el(e,t,r,n,i){e.emplaceBack(2*t+(n+1)/2,2*r+(i+1)/2)}function tl(e,t,r){const n=16384;e.emplaceBack(t.x,t.y,t.z,r[0]*n,r[1]*n,r[2]*n)}class rl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new sa,this.indexArray=new Ea,this.segments=new ks,this.programConfigurations=new vs(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r,n){const i=this.layers[0],o=[];let a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));for(const{feature:t,id:i,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=$s(t,e);if(!this.layers[0]._featureFilter.filter(new jo(this.zoom),c,r))continue;const u=a?a.evaluate(c,{},r):void 0,h={id:i,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Qs(t,r,n),patterns:{},sortKey:u};o.push(h)}a&&o.sort(((e,t)=>e.sortKey-t.sortKey));let s=null;"globe"===n.projection.name&&(this.globeExtVertexArray=new Za,s=n.projection);for(const n of o){const{geometry:i,index:o,sourceLayerIndex:a}=n,l=e[o].feature;this.addFeature(n,i,o,t.availableImages,r,s),t.featureIndex.insert(l,i,o,a,this.index)}}update(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ps.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Is.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,t,r,n,i,o){for(const r of t)for(const t of r){const r=t.x,n=t.y;if(r<0||r>=Cs||n<0||n>=Cs)continue;if(o){const e=o.projectTilePoint(r,n,i),t=o.upVector(i,r,n),a=this.globeExtVertexArray;tl(a,e,t),tl(a,e,t),tl(a,e,t),tl(a,e,t)}const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),s=a.vertexLength;el(this.layoutVertexArray,r,n,-1,-1),el(this.layoutVertexArray,r,n,1,-1),el(this.layoutVertexArray,r,n,1,1),el(this.layoutVertexArray,r,n,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+2,s+3),a.vertexLength+=4,a.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{},n,i)}}function nl(e,t){for(let r=0;r<e.length;r++)if(dl(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(dl(e,t[r]))return!0;return!!sl(e,t)}function il(e,t,r){return!!dl(e,t)||!!cl(t,e,r)}function ol(e,t){if(1===e.length)return hl(t,e[0]);for(let r=0;r<t.length;r++){const n=t[r];for(let t=0;t<n.length;t++)if(dl(e,n[t]))return!0}for(let r=0;r<e.length;r++)if(hl(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(sl(e,t[r]))return!0;return!1}function al(e,t,r){if(e.length>1){if(sl(e,t))return!0;for(let n=0;n<t.length;n++)if(cl(t[n],e,r))return!0}for(let n=0;n<e.length;n++)if(cl(e[n],t,r))return!0;return!1}function sl(e,t){if(0===e.length||0===t.length)return!1;for(let r=0;r<e.length-1;r++){const n=e[r],i=e[r+1];for(let e=0;e<t.length-1;e++)if(ll(n,i,t[e],t[e+1]))return!0}return!1}function ll(e,t,r,n){return V(e,r,n)!==V(t,r,n)&&V(e,t,r)!==V(e,t,n)}function cl(e,t,r){const n=r*r;if(1===t.length)return e.distSqr(t[0])<n;for(let r=1;r<t.length;r++)if(ul(e,t[r-1],t[r])<n)return!0;return!1}function ul(e,t,r){const n=t.distSqr(r);if(0===n)return e.distSqr(t);const i=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/n;return e.distSqr(i<0?t:i>1?r:r.sub(t)._mult(i)._add(t))}function hl(e,t){let r,n,i,o=!1;for(let a=0;a<e.length;a++){r=e[a];for(let e=0,a=r.length-1;e<r.length;a=e++)n=r[e],i=r[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(o=!o)}return o}function dl(e,t){let r=!1;for(let n=0,i=e.length-1;n<e.length;i=n++){const o=e[n],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function pl(e,t,r,n,i){for(const o of e)if(t<=o.x&&r<=o.y&&n>=o.x&&i>=o.y)return!0;const o=[new f(t,r),new f(t,i),new f(n,i),new f(n,r)];if(e.length>2)for(const t of o)if(dl(e,t))return!0;for(let t=0;t<e.length-1;t++)if(fl(e[t],e[t+1],o))return!0;return!1}function fl(e,t,r){const n=r[0],i=r[2];if(e.x<n.x&&t.x<n.x||e.x>i.x&&t.x>i.x||e.y<n.y&&t.y<n.y||e.y>i.y&&t.y>i.y)return!1;const o=V(e,t,r[0]);return o!==V(e,t,r[1])||o!==V(e,t,r[2])||o!==V(e,t,r[3])}function ml(e,t,r){const n=t.paint.get(e).value;return"constant"===n.kind?n.value:r.programConfigurations.get(t.id).getMaxValue(e)}function gl(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function yl(e,t,r,n,i){if(!t[0]&&!t[1])return e;const o=f.convert(t)._mult(i);"viewport"===r&&o._rotate(-n);const a=[];for(let t=0;t<e.length;t++)a.push(e[t].sub(o));return a}function _l(e,t,r,n){const i=f.convert(e)._mult(n);return"viewport"===t&&i._rotate(-r),i}ji(rl,"CircleBucket",{omit:["layers"]});const vl=new ea({"circle-sort-key":new Ko(Ye.layout_circle["circle-sort-key"])});var xl={paint:new ea({"circle-radius":new Ko(Ye.paint_circle["circle-radius"]),"circle-color":new Ko(Ye.paint_circle["circle-color"]),"circle-blur":new Ko(Ye.paint_circle["circle-blur"]),"circle-opacity":new Ko(Ye.paint_circle["circle-opacity"]),"circle-translate":new Yo(Ye.paint_circle["circle-translate"]),"circle-translate-anchor":new Yo(Ye.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Yo(Ye.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Yo(Ye.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ko(Ye.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ko(Ye.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ko(Ye.paint_circle["circle-stroke-opacity"])}),layout:vl},bl=1e-6,wl="undefined"!=typeof Float32Array?Float32Array:Array;function El(){var e=new wl(9);return wl!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Tl(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=r[0],p=r[1],f=r[2],m=r[3],g=r[4],y=r[5],_=r[6],v=r[7],x=r[8];return e[0]=d*n+p*a+f*c,e[1]=d*i+p*s+f*u,e[2]=d*o+p*l+f*h,e[3]=m*n+g*a+y*c,e[4]=m*i+g*s+y*u,e[5]=m*o+g*l+y*h,e[6]=_*n+v*a+x*c,e[7]=_*i+v*s+x*u,e[8]=_*o+v*l+x*h,e}function Sl(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Al(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],_=r*s-n*a,v=r*l-i*a,x=r*c-o*a,b=n*l-i*s,w=n*c-o*s,E=i*c-o*l,T=u*m-h*f,S=u*g-d*f,A=u*y-p*f,P=h*g-d*m,I=h*y-p*m,k=d*y-p*g,C=_*k-v*I+x*P+b*A-w*S+E*T;return C?(e[0]=(s*k-l*I+c*P)*(C=1/C),e[1]=(i*I-n*k-o*P)*C,e[2]=(m*E-g*w+y*b)*C,e[3]=(d*w-h*E-p*b)*C,e[4]=(l*A-a*k-c*S)*C,e[5]=(r*k-i*A+o*S)*C,e[6]=(g*x-f*E-y*v)*C,e[7]=(u*E-d*x+p*v)*C,e[8]=(a*I-s*A+c*T)*C,e[9]=(n*A-r*I-o*T)*C,e[10]=(f*w-m*x+y*_)*C,e[11]=(h*x-u*w-p*_)*C,e[12]=(s*S-a*P-l*T)*C,e[13]=(r*P-n*S+i*T)*C,e[14]=(m*v-f*b-g*_)*C,e[15]=(u*b-h*v+d*_)*C,e):null}function Pl(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],_=t[15],v=r[0],x=r[1],b=r[2],w=r[3];return e[0]=v*n+x*s+b*h+w*m,e[1]=v*i+x*l+b*d+w*g,e[2]=v*o+x*c+b*p+w*y,e[3]=v*a+x*u+b*f+w*_,e[4]=(v=r[4])*n+(x=r[5])*s+(b=r[6])*h+(w=r[7])*m,e[5]=v*i+x*l+b*d+w*g,e[6]=v*o+x*c+b*p+w*y,e[7]=v*a+x*u+b*f+w*_,e[8]=(v=r[8])*n+(x=r[9])*s+(b=r[10])*h+(w=r[11])*m,e[9]=v*i+x*l+b*d+w*g,e[10]=v*o+x*c+b*p+w*y,e[11]=v*a+x*u+b*f+w*_,e[12]=(v=r[12])*n+(x=r[13])*s+(b=r[14])*h+(w=r[15])*m,e[13]=v*i+x*l+b*d+w*g,e[14]=v*o+x*c+b*p+w*y,e[15]=v*a+x*u+b*f+w*_,e}function Il(e,t,r){var n,i,o,a,s,l,c,u,h,d,p,f,m=r[0],g=r[1],y=r[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=n=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=n*m+s*g+h*y+t[12],e[13]=i*m+l*g+d*y+t[13],e[14]=o*m+c*g+p*y+t[14],e[15]=a*m+u*g+f*y+t[15]),e}function kl(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Cl(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*n,e[5]=a*i+u*n,e[6]=s*i+h*n,e[7]=l*i+d*n,e[8]=c*i-o*n,e[9]=u*i-a*n,e[10]=h*i-s*n,e[11]=d*i-l*n,e}function Ml(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*n,e[1]=a*i-u*n,e[2]=s*i-h*n,e[3]=l*i-d*n,e[8]=o*n+c*i,e[9]=a*n+u*i,e[10]=s*n+h*i,e[11]=l*n+d*i,e}function zl(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Dl(e,t,r){var n,i,o,a=r[0],s=r[1],l=r[2],c=Math.hypot(a,s,l);return c<bl?null:(a*=c=1/c,s*=c,l*=c,n=Math.sin(t),i=Math.cos(t),e[0]=a*a*(o=1-i)+i,e[1]=s*a*o+l*n,e[2]=l*a*o-s*n,e[3]=0,e[4]=a*s*o-l*n,e[5]=s*s*o+i,e[6]=l*s*o+a*n,e[7]=0,e[8]=a*l*o+s*n,e[9]=s*l*o-a*n,e[10]=l*l*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Ll=Pl;function Fl(){var e=new wl(3);return wl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Rl(e){var t=new wl(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Bl(e){return Math.hypot(e[0],e[1],e[2])}function Ol(e,t,r){var n=new wl(3);return n[0]=e,n[1]=t,n[2]=r,n}function Nl(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function jl(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function Ul(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function Vl(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function Gl(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function Hl(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function ql(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function Wl(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Zl(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Xl(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=i*l-o*s,e[1]=o*a-n*l,e[2]=n*s-i*a,e}function Yl(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/(a=a||1),e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}function Kl(e,t,r){var n=r[0],i=r[1],o=r[2],a=t[0],s=t[1],l=t[2],c=i*l-o*s,u=o*a-n*l,h=n*s-i*a,d=i*h-o*u,p=o*c-n*h,f=n*u-i*c,m=2*r[3];return u*=m,h*=m,p*=2,f*=2,e[0]=a+(c*=m)+(d*=2),e[1]=s+u+p,e[2]=l+h+f,e}var Jl,Ql=jl,$l=Ul,ec=Bl;function tc(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function rc(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a,e}function nc(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}function ic(){var e=new wl(4);return wl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function oc(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function ac(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-n*s,e}function sc(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-o*s,e[1]=i*l+a*s,e[2]=o*l+n*s,e[3]=a*l-i*s,e}Fl(),Jl=new wl(4),wl!=Float32Array&&(Jl[0]=0,Jl[1]=0,Jl[2]=0,Jl[3]=0);var lc=rc;Fl(),Ol(1,0,0),Ol(0,1,0),ic(),ic(),El();class cc{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,r){const n=Zl(t,this.dir);if(Math.abs(n)<1e-6)return!1;const i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/n;return r[0]=this.pos[0]+this.dir[0]*i,r[1]=this.pos[1]+this.dir[1]*i,r[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(e,t,r){if(function(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return Math.abs(r-o)<=bl*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=bl*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=bl*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,e)||0===t)return r[0]=r[1]=r[2]=0,!1;const[n,i,o]=this.dir,a=this.pos[0]-e[0],s=this.pos[1]-e[1],l=this.pos[2]-e[2],c=n*n+i*i+o*o,u=2*(a*n+s*i+l*o),h=u*u-4*c*(a*a+s*s+l*l-t*t);if(h<0){const e=Math.max(-u/2,0),c=a+n*e,h=s+i*e,d=l+o*e,p=Math.hypot(c,h,d);return r[0]=c*t/p,r[1]=h*t/p,r[2]=d*t/p,!1}{const e=(-u-Math.sqrt(h))/(2*c);if(e<0){const e=Math.hypot(a,s,l);return r[0]=a*t/e,r[1]=s*t/e,r[2]=l*t/e,!1}return r[0]=a+n*e,r[1]=s+i*e,r[2]=l+o*e,!0}}}class uc{constructor(e,t,r,n,i){this.TL=e,this.TR=t,this.BR=r,this.BL=n,this.horizon=i}static fromInvProjectionMatrix(e,t,r){const n=[-1,1,1],i=[1,1,1],o=[1,-1,1],a=[-1,-1,1],s=Yl(n,n,e),l=Yl(i,i,e),c=Yl(o,o,e),u=Yl(a,a,e);return new uc(s,l,c,u,t/r)}}class hc{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,r,n){const i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const o=nc([],r,e),a=1/o[3]/t*i;return function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}(o,o,[a,a,n?1/o[3]:a,a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=Wl([],Xl([],Ql([],o[e[0]],o[e[1]]),Ql([],o[e[2]],o[e[1]]))),r=-Zl(t,o[e[1]]);return t.concat(r)}));return new hc(o,a)}}class dc{static fromPoints(e){const t=[1/0,1/0,1/0],r=[-1/0,-1/0,-1/0];for(const n of e)Vl(t,t,n),Gl(r,r,n);return new dc(t,r)}static applyTransform(e,t){const r=e.getCorners();for(let e=0;e<r.length;++e)Yl(r[e],r[e],t);return dc.fromPoints(r)}constructor(e,t){this.min=e,this.max=t,this.center=Hl([],Nl([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],r=Rl(this.min),n=Rl(this.max);for(let e=0;e<t.length;e++)r[e]=t[e]?this.min[e]:this.center[e],n[e]=t[e]?this.center[e]:this.max[e];return n[2]=this.max[2],new dc(r,n)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){const t=this.getCorners();let r=!0;for(let n=0;n<e.planes.length;n++){const i=e.planes[n];let o=0;for(let e=0;e<t.length;e++)o+=Zl(i,t[e])+i[3]>=0;if(0===o)return 0;o!==t.length&&(r=!1)}if(r)return 2;for(let t=0;t<3;t++){let r=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const o=e.points[i][t]-this.min[t];r=Math.min(r,o),n=Math.max(n,o)}if(n<0||r>this.max[t]-this.min[t])return 0}return 1}}function pc(e,t,r,n,i,o,a,s,l){if(o&&e.queryGeometry.isAboveHorizon)return!1;o&&(l*=e.pixelToTileUnitsFactor);const c=e.tileID.canonical,u=r.projection.upVectorScale(c,r.center.lat,r.worldSize).metersToTile;for(const h of t)for(const t of h){const h=t.add(s),d=i&&r.elevation?r.elevation.exaggeration()*i.getElevationAt(h.x,h.y,!0):0,p=r.projection.projectTilePoint(h.x,h.y,c);if(d>0){const e=r.projection.upVector(c,h.x,h.y);p.x+=e[0]*u*d,p.y+=e[1]*u*d,p.z+=e[2]*u*d}const f=o?h:fc(p.x,p.y,p.z,n),m=o?e.tilespaceRays.map((e=>yc(e,d))):e.queryGeometry.screenGeometry,g=nc([],[p.x,p.y,p.z,1],n);if(!a&&o?l*=g[3]/r.cameraToCenterDistance:a&&!o&&(l*=r.cameraToCenterDistance/g[3]),o){const e=js((t.y/Cs+c.y)/(1<<c.z));l/=r.projection.pixelsPerMeter(e,1)/Os(1,e)}if(il(m,f,l))return!0}return!1}function fc(e,t,r,n){const i=nc([],[e,t,r,1],n);return new f(i[0]/i[3],i[1]/i[3])}const mc=Ol(0,0,0),gc=Ol(0,0,1);function yc(e,t){const r=Fl();return mc[2]=t,e.intersectsPlane(mc,gc,r),new f(r[0],r[1])}class _c extends rl{}function vc(e,{width:t,height:r},n,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*r*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(t*r*n);return e.width=t,e.height=r,e.data=i,e}function xc(e,t,r){const{width:n,height:i}=t;n===e.width&&i===e.height||(bc(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,n),height:Math.min(e.height,i)},r),e.width=n,e.height=i,e.data=t.data)}function bc(e,t,r,n,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;for(let l=0;l<i.height;l++){const c=((r.y+l)*e.width+r.x)*o,u=((n.y+l)*t.width+n.x)*o;for(let e=0;e<i.width*o;e++)s[u+e]=a[c+e]}return t}ji(_c,"HeatmapBucket",{omit:["layers"]});class wc{constructor(e,t){vc(this,e,1,t)}resize(e){xc(this,new wc(e),1)}clone(){return new wc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,i){bc(e,t,r,n,i,1)}}class Ec{constructor(e,t){vc(this,e,4,t)}resize(e){xc(this,new Ec(e),4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ec({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,i){bc(e,t,r,n,i,4)}}ji(wc,"AlphaImage"),ji(Ec,"RGBAImage");var Tc={paint:new ea({"heatmap-radius":new Ko(Ye.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ko(Ye.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Yo(Ye.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $o(Ye.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Yo(Ye.paint_heatmap["heatmap-opacity"])})};function Sc(e){const t={},r=e.resolution||256,n=e.clips?e.clips.length:1,i=e.image||new Ec({width:r,height:n}),o=(r,n,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);i.data[r+n+0]=Math.floor(255*a.r/a.a),i.data[r+n+1]=Math.floor(255*a.g/a.a),i.data[r+n+2]=Math.floor(255*a.b/a.a),i.data[r+n+3]=Math.floor(255*a.a)};if(e.clips)for(let t=0,i=0;t<n;++t,i+=4*r)for(let n=0,a=0;n<r;n++,a+=4){const s=n/(r-1),{start:l,end:c}=e.clips[t];o(i,a,l*(1-s)+c*s)}else for(let e=0,t=0;e<r;e++,t+=4)o(0,t,e/(r-1));return i}var Ac={paint:new ea({"hillshade-illumination-direction":new Yo(Ye.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Yo(Ye.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Yo(Ye.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Yo(Ye.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Yo(Ye.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Yo(Ye.paint_hillshade["hillshade-accent-color"])})};const Pc=oa([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ic}=Pc;var kc={exports:{}};function Cc(e,t,r){r=r||2;var n,i,o,a,s,l,c,u=t&&t.length,h=u?t[0]*r:e.length,d=Mc(e,0,h,r,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(e,t,r,n){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Mc(e,t[i]*n,i<o-1?t[i+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),s.push(Vc(a));for(s.sort(Oc),i=0;i<s.length;i++)r=Nc(s[i],r);return r}(e,t,d,r)),e.length>80*r){n=o=e[0],i=a=e[1];for(var f=r;f<h;f+=r)(s=e[f])<n&&(n=s),(l=e[f+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-n,a-i))?32767/c:0}return Dc(d,p,r,n,i,c,0),p}function Mc(e,t,r,n,i){var o,a;if(i===tu(e,t,r,n)>0)for(o=t;o<r;o+=n)a=Qc(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=Qc(o,e[o],e[o+1],a);return a&&Wc(a,a.next)&&($c(a),a=a.next),a}function zc(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!Wc(n,n.next)&&0!==qc(n.prev,n,n.next))n=n.next;else{if($c(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function Dc(e,t,r,n,i,o,a){if(e){!a&&o&&function(e,t,r,n){var i=e;do{0===i.z&&(i.z=Uc(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,o,a,s,l,c=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<c&&(s++,n=n.nextZ);t++);for(l=c;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,c*=2}while(a>1)}(i)}(e,n,i,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Fc(e,n,i,o):Lc(e))t.push(s.i/r|0),t.push(e.i/r|0),t.push(l.i/r|0),$c(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Dc(e=Rc(zc(e),t,r),t,r,n,i,o,2):2===a&&Bc(e,t,r,n,i,o):Dc(zc(e),t,r,n,i,o,1);break}}}function Lc(e){var t=e.prev,r=e,n=e.next;if(qc(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,c=n.y,u=i<o?i<a?i:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,d=i>o?i>a?i:a:o>a?o:a,p=s>l?s>c?s:c:l>c?l:c,f=n.next;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&Gc(i,s,o,l,a,c,f.x,f.y)&&qc(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Fc(e,t,r,n){var i=e.prev,o=e,a=e.next;if(qc(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,c=a.x,u=i.y,h=o.y,d=a.y,p=s<l?s<c?s:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,m=s>l?s>c?s:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,y=Uc(p,f,t,r,n),_=Uc(m,g,t,r,n),v=e.prevZ,x=e.nextZ;v&&v.z>=y&&x&&x.z<=_;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==i&&v!==a&&Gc(s,u,l,h,c,d,v.x,v.y)&&qc(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==a&&Gc(s,u,l,h,c,d,x.x,x.y)&&qc(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;v&&v.z>=y;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==i&&v!==a&&Gc(s,u,l,h,c,d,v.x,v.y)&&qc(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;x&&x.z<=_;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==a&&Gc(s,u,l,h,c,d,x.x,x.y)&&qc(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Rc(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!Wc(i,o)&&Zc(i,n,n.next,o)&&Kc(i,o)&&Kc(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),$c(n),$c(n.next),n=e=o),n=n.next}while(n!==e);return zc(n)}function Bc(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Hc(a,s)){var l=Jc(a,s);return a=zc(a,a.next),l=zc(l,l.next),Dc(a,t,r,n,i,o,0),void Dc(l,t,r,n,i,o,0)}s=s.next}a=a.next}while(a!==e)}function Oc(e,t){return e.x-t.x}function Nc(e,t){var r=function(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a&&(a=s,r=n.x<n.next.x?n:n.next,s===i))return r}n=n.next}while(n!==t);if(!r)return null;var l,c=r,u=r.x,h=r.y,d=1/0;n=r;do{i>=n.x&&n.x>=u&&i!==n.x&&Gc(o<h?i:a,o,u,h,o<h?a:i,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(i-n.x),Kc(n,e)&&(l<d||l===d&&(n.x>r.x||n.x===r.x&&jc(r,n)))&&(r=n,d=l)),n=n.next}while(n!==c);return r}(e,t);if(!r)return t;var n=Jc(r,e);return zc(n,n.next),zc(r,r.next)}function jc(e,t){return qc(e.prev,e,t.prev)<0&&qc(t.next,e,e.next)<0}function Uc(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Vc(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function Gc(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function Hc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Zc(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(Kc(e,t)&&Kc(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(qc(e.prev,e,t.prev)||qc(e,t.prev,t))||Wc(e,t)&&qc(e.prev,e,e.next)>0&&qc(t.prev,t,t.next)>0)}function qc(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Wc(e,t){return e.x===t.x&&e.y===t.y}function Zc(e,t,r,n){var i=Yc(qc(e,t,r)),o=Yc(qc(e,t,n)),a=Yc(qc(r,n,e)),s=Yc(qc(r,n,t));return i!==o&&a!==s||!(0!==i||!Xc(e,r,t))||!(0!==o||!Xc(e,n,t))||!(0!==a||!Xc(r,e,n))||!(0!==s||!Xc(r,t,n))}function Xc(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Yc(e){return e>0?1:e<0?-1:0}function Kc(e,t){return qc(e.prev,e,e.next)<0?qc(e,t,e.next)>=0&&qc(e,e.prev,t)>=0:qc(e,t,e.prev)<0||qc(e,e.next,t)<0}function Jc(e,t){var r=new eu(e.i,e.x,e.y),n=new eu(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Qc(e,t,r,n){var i=new eu(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function $c(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function eu(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tu(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function ru(e,t,r,n,i){nu(e,t,r||0,n||e.length-1,i||ou)}function nu(e,t,r,n,i){for(;n>r;){if(n-r>600){var o=n-r+1,a=t-r+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);nu(e,t,Math.max(r,Math.floor(t-a*l/o+c)),Math.min(n,Math.floor(t+(o-a)*l/o+c)),i)}var u=e[t],h=r,d=n;for(iu(e,r,t),i(e[n],u)>0&&iu(e,r,n);h<d;){for(iu(e,h,d),h++,d--;i(e[h],u)<0;)h++;for(;i(e[d],u)>0;)d--}0===i(e[r],u)?iu(e,r,d):iu(e,++d,n),d<=t&&(r=d+1),t<=d&&(n=d-1)}}function iu(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function ou(e,t){return e<t?-1:e>t?1:0}function au(e,t){const r=e.length;if(r<=1)return[e];const n=[];let i,o;for(let t=0;t<r;t++){const r=G(e[t]);0!==r&&(e[t].area=Math.abs(r),void 0===o&&(o=r<0),o===r<0?(i&&n.push(i),i=[e[t]]):i.push(e[t]))}if(i&&n.push(i),t>1)for(let e=0;e<n.length;e++)n[e].length<=t||(ru(n[e],t,1,n[e].length-1,su),n[e]=n[e].slice(0,t));return n}function su(e,t){return t.area-e.area}function lu(e,t,r){const n=r.patternDependencies;let i=!1;for(const r of t){const t=r.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const o=t.constantOr(null);o&&(i=!0,n[o.to]=!0,n[o.from]=!0)}return i}function cu(e,t,r,n,i){const o=i.patternDependencies;for(const a of t){const t=a.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:n-1},r,{},i.availableImages),s=t.evaluate({zoom:n},r,{},i.availableImages),l=t.evaluate({zoom:n+1},r,{},i.availableImages);e=e&&e.name?e.name:e,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[e]=!0,o[s]=!0,o[l]=!0,r.patterns[a.id]={min:e,mid:s,max:l}}}return r}kc.exports=Cc,kc.exports.default=Cc,Cc.deviation=function(e,t,r,n){var i=t&&t.length,o=Math.abs(tu(e,0,i?t[0]*r:e.length,r));if(i)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(tu(e,t[a]*r,a<s-1?t[a+1]*r:e.length,r));var l=0;for(a=0;a<n.length;a+=3){var c=n[a]*r,u=n[a+1]*r,h=n[a+2]*r;l+=Math.abs((e[c]-e[h])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[h+1]-e[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Cc.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&r.holes.push(n+=e[i-1].length)}return r};class uu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new sa,this.indexArray=new Ea,this.indexArray2=new ka,this.programConfigurations=new vs(e.layers,e.zoom),this.segments=new ks,this.segments2=new ks,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.projection=e.projection}populate(e,t,r,n){this.hasPattern=lu("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=$s(a,e);if(!this.layers[0]._featureFilter.filter(new jo(this.zoom),u,r))continue;const h=i?i.evaluate(u,{},r,t.availableImages):void 0,d={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:Qs(a,r,n),patterns:{},sortKey:h};o.push(d)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const n of o){const{geometry:i,index:o,sourceLayerIndex:a}=n;if(this.hasPattern){const e=cu("fill",this.layers,n,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(n,i,o,r,{},t.availableImages);t.featureIndex.insert(e[o].feature,i,o,a,this.index)}}update(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}addFeatures(e,t,r,n,i){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ic),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,r,n,i,o=[]){for(const e of au(t,500)){let t=0;for(const r of e)t+=r.length;const r=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),n=r.vertexLength,i=[],o=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&o.push(i.length/2);const r=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),n=r.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(n+t.length-1,n),i.push(t[0].x),i.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(n+e-1,n+e),i.push(t[e].x),i.push(t[e].y);r.vertexLength+=t.length,r.primitiveLength+=t.length}const a=kc.exports(i,o);for(let e=0;e<a.length;e+=3)this.indexArray.emplaceBack(n+a[e],n+a[e+1],n+a[e+2]);r.vertexLength+=t,r.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,o,n)}}ji(uu,"FillBucket",{omit:["layers","patternFeatures"]});const hu=new ea({"fill-sort-key":new Ko(Ye.layout_fill["fill-sort-key"])});var du={paint:new ea({"fill-antialias":new Yo(Ye.paint_fill["fill-antialias"]),"fill-opacity":new Ko(Ye.paint_fill["fill-opacity"]),"fill-color":new Ko(Ye.paint_fill["fill-color"]),"fill-outline-color":new Ko(Ye.paint_fill["fill-outline-color"]),"fill-translate":new Yo(Ye.paint_fill["fill-translate"]),"fill-translate-anchor":new Yo(Ye.paint_fill["fill-translate-anchor"]),"fill-pattern":new Jo(Ye.paint_fill["fill-pattern"])}),layout:hu};const pu=oa([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),fu=oa([{name:"a_centroid_pos",components:2,type:"Uint16"}]),mu=oa([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:gu}=pu;var yu={},_u=f,vu=xu;function xu(e,t,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=i,e.readFields(bu,this,t)}function bu(e,t,r){1==e?t.id=r.readVarint():2==e?function(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[n]=i}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function wu(e){for(var t,r,n=0,i=0,o=e.length,a=o-1;i<o;a=i++)n+=((r=e[a]).x-(t=e[i]).x)*(t.y+r.y);return n}xu.types=["Unknown","Point","LineString","Polygon"],xu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,n=1,i=0,o=0,a=0,s=[];e.pos<r;){if(i<=0){var l=e.readVarint();n=7&l,i=l>>3}if(i--,1===n||2===n)o+=e.readSVarint(),a+=e.readSVarint(),1===n&&(t&&s.push(t),t=[]),t.push(new _u(o,a));else{if(7!==n)throw new Error("unknown command "+n);t&&t.push(t[0].clone())}}return t&&s.push(t),s},xu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(n<=0){var u=e.readVarint();r=7&u,n=u>>3}if(n--,1===r||2===r)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,l,s,c]},xu.prototype.toGeoJSON=function(e,t,r){var n,i,o=this.extent*Math.pow(2,r),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=xu.types[this.type];function u(e){for(var t=0;t<e.length;t++){var r=e[t];e[t]=[360*(r.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(n=0;n<l.length;n++)h[n]=l[n][0];u(l=h);break;case 2:for(n=0;n<l.length;n++)u(l[n]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var r,n,i=[],o=0;o<t;o++){var a=wu(e[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(r&&i.push(r),r=[e[o]]):r.push(e[o]))}return r&&i.push(r),i}(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)u(l[n][i])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Eu=vu,Tu=Su;function Su(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Au,this,t),this.length=this._features.length}function Au(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}(r))}Su.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Eu(this._pbf,t,this.extent,this._keys,this._values)};var Pu=Tu;function Iu(e,t,r){if(3===e){var n=new Pu(r,r.readVarint()+r.pos);n.length&&(t[n.name]=n)}}var ku=yu.VectorTile=function(e,t){this.layers=e.readFields(Iu,{},t)},Cu=yu.VectorTileFeature=vu;function Mu(e,t,r,n){const i=[],o=0===n?(e,t,r,n,i,o)=>{e.push(new f(o,r+(o-t)/(n-t)*(i-r)))}:(e,t,r,n,i,o)=>{e.push(new f(t+(o-r)/(i-r)*(n-t),o))};for(const a of e){const e=[];for(const i of a){if(i.length<=2)continue;const a=[];for(let e=0;e<i.length-1;e++){const s=i[e].x,l=i[e].y,c=i[e+1].x,u=i[e+1].y,h=0===n?s:l,d=0===n?c:u;h<t?d>t&&o(a,s,l,c,u,t):h>r?d<r&&o(a,s,l,c,u,r):a.push(i[e]),d<t&&h>=t&&o(a,s,l,c,u,t),d>r&&h<=r&&o(a,s,l,c,u,r)}let s=i[i.length-1];const l=0===n?s.x:s.y;l>=t&&l<=r&&a.push(s),a.length&&(s=a[a.length-1],a[0].x===s.x&&a[0].y===s.y||a.push(a[0]),e.push(a))}e.length&&i.push(e)}return i}yu.VectorTileLayer=Tu;const zu=Cu.types,Du=Math.pow(2,13);function Lu(e,t,r,n,i,o,a,s){e.emplaceBack((t<<1)+a,(r<<1)+o,(Math.floor(n*Du)<<1)+i,Math.round(s))}function Fu(e,t,r){const n=16384;e.emplaceBack(t.x,t.y,t.z,r[0]*n,r[1]*n,r[2]*n)}class Ru{constructor(){this.acc=new f(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new f(e.x,e.y),this.max=new f(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);const r=this.min,n=this.max;e.x<r.x?r.x=e.x:e.x>n.x&&(n.x=e.x),e.y<r.y?r.y=e.y:e.y>n.y&&(n.y=e.y),((0===e.x||e.x===Cs)&&e.x===t.x)!=((0===e.y||e.y===Cs)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,Ar(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Cs!=e.x>Cs&&this.addBorderIntersection(1,Ar(t.y,e.y,(Cs-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Ar(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Cs!=e.y>Cs&&this.addBorderIntersection(3,Ar(t.x,e.x,(Cs-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const r=this.borders[e];t<r[0]&&(r[0]=t),t>r[1]&&(r[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const r=0===e.x?0:1;this.addBorderIntersection(r,t.y),this.addBorderIntersection(r,e.y)}else{const r=0===e.y?2:3;this.addBorderIntersection(r,t.x),this.addBorderIntersection(r,e.x)}}centroid(){const e=this.polyCount.reduce(((e,t)=>e+t.edges),0);return 0!==e?this.acc.div(e)._round():new f(0,0)}span(){return new f(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((e,t)=>e+ +(t[0]!==Number.MAX_VALUE)),0)}}class Bu{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new ca,this.centroidVertexArray=new qa,this.indexArray=new Ea,this.programConfigurations=new vs(e.layers,e.zoom),this.segments=new ks,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.enableTerrain=e.enableTerrain}populate(e,t,r,n){this.features=[],this.hasPattern=lu("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Cs/(1<<e.z)}(r),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:o,index:a,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=$s(i,e);if(!this.layers[0]._featureFilter.filter(new jo(this.zoom),l,r))continue;const c={id:o,sourceLayerIndex:s,index:a,geometry:e?l.geometry:Qs(i,r,n),properties:i.properties,type:i.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(cu("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,a,r,{},t.availableImages,n),t.featureIndex.insert(i,c.geometry,a,s,this.index,u)}this.sortBorders()}addFeatures(e,t,r,n,i){for(const e of this.features){const{geometry:o}=e;this.addFeature(e,o,e.index,t,r,n,i)}this.sortBorders()}update(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,gu),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,mu.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,fu.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,r,n,i,o,a){const s=[new f(0,0),new f(Cs,Cs)],l=a.projection,c="globe"===l.name,u=this.enableTerrain&&!c?new Ru:null,h="Polygon"===zu[e.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Da);const d=au(t,500);for(let e=d.length-1;e>=0;e--){const t=d[e];(0===t.length||(p=t[0]).every((e=>e.x<=0))||p.every((e=>e.x>=Cs))||p.every((e=>e.y<=0))||p.every((e=>e.y>=Cs)))&&d.splice(e,1)}var p;let m;if(c)m=qu(d,s,n);else{m=[];for(const e of d)m.push({polygon:e,bounds:s})}const g=h?this.edgeRadius:0;for(const{polygon:e,bounds:t}of m){let r=0,i=0;for(const t of e)h&&!t[0].equals(t[t.length-1])&&t.push(t[0]),i+=h?t.length-1:t.length;const o=this.segments.prepareSegment((h?5:4)*i,this.layoutVertexArray,this.indexArray);if(h){const t=[],i=[];r=o.vertexLength;for(const r of e){let a,s;r.length&&r!==e[0]&&i.push(t.length/2),a=r[1].sub(r[0])._perp()._unit();for(let e=1;e<r.length;e++){const i=r[e],u=r[e===r.length-1?1:e+1];let{x:h,y:d}=i;if(g){s=u.sub(i)._perp()._unit();const e=a.add(s)._unit(),t=g*Math.min(4,1/(a.x*e.x+a.y*e.y));h+=t*e.x,d+=t*e.y,a=s}Lu(this.layoutVertexArray,h,d,0,0,1,1,0),o.vertexLength++,t.push(i.x,i.y),c&&Fu(this.layoutVertexExtArray,l.projectTilePoint(h,d,n),l.upVector(n,h,d))}}const a=kc.exports(t,i);for(let e=0;e<a.length;e+=3)this.indexArray.emplaceBack(r+a[e],r+a[e+2],r+a[e+1]),o.primitiveLength++}for(const i of e){u&&i.length&&u.startRing(i[0]);let e,a,s,d=i.length>4&&Vu(i[i.length-2],i[0],i[1]),p=g?Nu(i[i.length-2],i[0],i[1],g):0;a=i[1].sub(i[0])._perp()._unit();let f=!0;for(let m=1,y=0;m<i.length;m++){let _=i[m-1],v=i[m];const x=i[m===i.length-1?1:m+1];if(u&&h&&u.currentPolyCount.top++,Uu(v,_,t)){g&&(a=x.sub(v)._perp()._unit(),f=!f);continue}u&&u.append(v,_);const b=v.sub(_)._perp(),w=b.x/(Math.abs(b.x)+Math.abs(b.y)),E=b.y>0?1:0,T=_.dist(v);if(y+T>32768&&(y=0),g){s=x.sub(v)._perp()._unit();let e=ju(_,v,x,Ou(a,s),g);isNaN(e)&&(e=0);const t=v.sub(_)._unit();_=_.add(t.mult(p))._round(),v=v.add(t.mult(-e))._round(),p=e,a=s}const S=o.vertexLength,A=i.length>4&&Vu(_,v,x);let P=Gu(y,d,f);if(Lu(this.layoutVertexArray,_.x,_.y,w,E,0,0,P),Lu(this.layoutVertexArray,_.x,_.y,w,E,0,1,P),y+=T,P=Gu(y,A,!f),d=A,Lu(this.layoutVertexArray,v.x,v.y,w,E,0,0,P),Lu(this.layoutVertexArray,v.x,v.y,w,E,0,1,P),o.vertexLength+=4,this.indexArray.emplaceBack(S+0,S+1,S+2),this.indexArray.emplaceBack(S+1,S+3,S+2),o.primitiveLength+=2,g){const n=r+(1===m?i.length-2:m-2),a=1===m?r:n+1;if(this.indexArray.emplaceBack(S+1,n,S+3),this.indexArray.emplaceBack(n,a,S+3),o.primitiveLength+=2,void 0===e&&(e=S),!Uu(x,i[m],t)){const t=m===i.length-1?e:o.vertexLength;this.indexArray.emplaceBack(S+2,S+3,t),this.indexArray.emplaceBack(S+3,t+1,t),this.indexArray.emplaceBack(S+3,a,t+1),o.primitiveLength+=3}f=!f}if(c){const e=this.layoutVertexExtArray,t=l.projectTilePoint(_.x,_.y,n),r=l.projectTilePoint(v.x,v.y,n),i=l.upVector(n,_.x,_.y),o=l.upVector(n,v.x,v.y);Fu(e,t,i),Fu(e,t,i),Fu(e,r,o),Fu(e,r,o)}}h&&(r+=i.length-1)}}if(u&&u.polyCount.length>0){if(u.borders){u.vertexArrayOffset=this.centroidVertexArray.length;const e=u.borders,t=this.featuresOnBorder.push(u)-1;for(let r=0;r<4;r++)e[r][0]!==Number.MAX_VALUE&&this.borders[r].push(t)}this.encodeCentroid(u.borders?void 0:u.centroid(),u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,o,n)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort(((t,r)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[r].borders[e][0]))}encodeCentroid(e,t,r=!0){let n,i;if(e)if(0!==e.y){const r=t.span()._mult(this.tileToMeter);n=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(r.x/10)),i=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(r.y/10))}else n=Math.ceil(7*(e.x+450)),i=0;else n=0,i=+r;let o=r?this.centroidVertexArray.length:t.vertexArrayOffset;for(const e of t.polyCount){r&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*e.edges+e.top);for(let t=0;t<e.top;t++)this.centroidVertexArray.emplace(o++,n,i);for(let t=0;t<2*e.edges;t++)this.centroidVertexArray.emplace(o++,0,i),this.centroidVertexArray.emplace(o++,n,i)}}}function Ou(e,t){const r=e.add(t)._unit();return e.x*r.x+e.y*r.y}function Nu(e,t,r,n){const i=t.sub(e)._perp()._unit(),o=r.sub(t)._perp()._unit();return ju(e,t,r,Ou(i,o),n)}function ju(e,t,r,n,i){const o=Math.sqrt(1-n*n);return Math.min(e.dist(t)/3,t.dist(r)/3,i*o/n)}function Uu(e,t,r){return e.x<r[0].x&&t.x<r[0].x||e.x>r[1].x&&t.x>r[1].x||e.y<r[0].y&&t.y<r[0].y||e.y>r[1].y&&t.y>r[1].y}function Vu(e,t,r){if(e.x<0||e.x>=Cs||t.x<0||t.x>=Cs||r.x<0||r.x>=Cs)return!1;const n=r.sub(t),i=n.perp(),o=e.sub(t);return(n.x*o.x+n.y*o.y)/Math.sqrt((n.x*n.x+n.y*n.y)*(o.x*o.x+o.y*o.y))>-.866&&i.x*o.x+i.y*o.y<0}function Gu(e,t,r){const n=t?2|e:-3&e;return r?1|n:-2&n}function Hu(){const e=Math.PI/32,t=Math.tan(e),r=zs;return r*Math.sqrt(1+2*t*t)-r}function qu(e,t,r){const n=1<<r.z,i=Ns(r.x/n),o=Ns((r.x+1)/n),a=js(r.y/n),s=js((r.y+1)/n);return function(e,t,r,n,i=0,o){const a=[];if(!e.length||!r||!n)return a;const s=(e,t)=>{for(const r of e)a.push({polygon:r,bounds:t})},l=Math.ceil(Math.log2(r)),c=Math.ceil(Math.log2(n)),u=l-c,h=[];for(let e=0;e<Math.abs(u);e++)h.push(u>0?0:1);for(let e=0;e<Math.min(l,c);e++)h.push(0),h.push(1);let d=e;if(d=Mu(d,t[0].y-i,t[1].y+i,1),d=Mu(d,t[0].x-i,t[1].x+i,0),!d.length)return a;const p=[];for(h.length?p.push({polygons:d,bounds:t,depth:0}):s(d,t);p.length;){const e=p.pop(),t=e.depth,r=h[t],n=e.bounds[0],a=e.bounds[1],l=0===r?n.x:n.y,c=0===r?a.x:a.y,u=o?o(r,l,c):.5*(l+c),d=Mu(e.polygons,l-i,u+i,r),m=Mu(e.polygons,u-i,c+i,r);if(d.length){const e=[n,new f(0===r?u:a.x,1===r?u:a.y)];h.length>t+1?p.push({polygons:d,bounds:e,depth:t+1}):s(d,e)}if(m.length){const e=[new f(0===r?u:n.x,1===r?u:n.y),a];h.length>t+1?p.push({polygons:m,bounds:e,depth:t+1}):s(m,e)}}return a}(e,t,Math.ceil((o-i)/11.25),Math.ceil((a-s)/11.25),1,((e,t,i)=>{if(0===e)return.5*(t+i);{const e=js((r.y+t/Cs)/n);return(Bs(.5*(js((r.y+i/Cs)/n)+e))*n-r.y)*Cs}}))}ji(Bu,"FillExtrusionBucket",{omit:["layers","features"]}),ji(Ru,"PartMetadata");const Wu=new ea({"fill-extrusion-edge-radius":new Yo(Ye["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Zu={paint:new ea({"fill-extrusion-opacity":new Yo(Ye["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ko(Ye["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Yo(Ye["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Yo(Ye["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Jo(Ye["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ko(Ye["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ko(Ye["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Yo(Ye["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Yo(Ye["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Yo(Ye["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:Wu};function Xu(e,t,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[e*n-2*Math.PI*6378137/2,t*n-2*Math.PI*6378137/2]}class Yu{constructor(e,t,r){this.z=e,this.x=t,this.y=r,this.key=Qu(0,e,e,t,r)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const r=function(e,t,r){var n=Xu(256*e,256*(t=Math.pow(2,r)-t-1),r),i=Xu(256*(e+1),256*(t+1),r);return n[0]+","+n[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),n=function(e,t,r){let n,i="";for(let o=e;o>0;o--)n=1<<o-1,i+=(t&n?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",n).replace("{bbox-epsg-3857}",r)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ku{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Qu(e,t.z,t.z,t.x,t.y)}}class Ju{constructor(e,t,r,n,i){this.overscaledZ=e,this.wrap=t,this.canonical=new Yu(r,+n,+i),this.key=0===t&&e===r?this.canonical.key:Qu(t,e,r,n,i)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new Ju(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ju(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return Qu(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const r=this.canonical.z-e;return Qu(this.wrap*+t,e,e,this.canonical.x>>r,this.canonical.y>>r)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Ju(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new Ju(t,this.wrap,t,r,n),new Ju(t,this.wrap,t,r+1,n),new Ju(t,this.wrap,t,r,n+1),new Ju(t,this.wrap,t,r+1,n+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Ju(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Ju(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ku(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Qu(e,t,r,n,i){const o=1<<Math.min(r,22);let a=o*(i%o)+n%o;return e&&r<22&&(a+=o*o*((e<0?-2*e-1:2*e)%(1<<2*(22-r)))),16*(32*a+r)+(t-r)}ji(Yu,"CanonicalTileID"),ji(Ju,"OverscaledTileID",{omit:["projMatrix"]});class $u extends f{constructor(e,t,r){super(e,t),this.z=r}}function eh(e,t){return e.x*t.x+e.y*t.y}function th(e,t){if(1===e.length){let r=0;const n=t[r++];let i;for(;!i||n.equals(i);)if(i=t[r++],!i)return 1/0;for(;r<t.length;r++){const o=t[r],a=e[0],s=i.sub(n),l=o.sub(n),c=a.sub(n),u=eh(s,s),h=eh(s,l),d=eh(l,l),p=eh(c,s),f=eh(c,l),m=u*d-h*h,g=(d*p-h*f)/m,y=(u*f-h*p)/m,_=n.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(_))return _}return 1/0}{let e=1/0;for(const r of t)e=Math.min(e,r.z);return e}}function rh(e,t,r,n,i,o,a,s){const l=a*i.getElevationAt(e,t,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7-450):a*function(e,t,r){const n=Math.floor(t[0]/8),i=Math.floor(t[1]/8),o=10*(t[0]-8*n),a=10*(t[1]-8*i),s=e.getElevationAt(n,i,!0,!0),l=e.getMeterToDEM(r),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),h=e.tileCoordToPixel(n,i),d=2*c+1,p=2*u+1,f=function(e,t,r,n,i){return[e.getElevationAtPixel(t,r,!0),e.getElevationAtPixel(t+i,r,!0),e.getElevationAtPixel(t,r+i,!0),e.getElevationAtPixel(t+n,r+i,!0)]}(e,h.x-c,h.y-u,d,p),m=Math.abs(f[0]-f[1]),g=Math.abs(f[2]-f[3]),y=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),_=Math.min(.25,.5*l*(m+g)/d),v=Math.min(.25,.5*l*y/p);return s+Math.max(_*o,v*a)}(i,o,s):l;return{base:l+(0===r)?-1:r,top:c?Math.max(u+n,l+r+2):l+n}}const nh=oa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:ih}=nh,oh=oa([{name:"a_packed",components:4,type:"Float32"}]),{members:ah}=oh,sh=Cu.types,lh=Math.cos(Math.PI/180*37.5);class ch{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new ua,this.layoutVertexArray2=new ha,this.indexArray=new Ea,this.programConfigurations=new vs(e.layers,e.zoom),this.segments=new ks,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r,n){this.hasPattern=lu("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:t,id:a,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=$s(t,e);if(!this.layers[0]._featureFilter.filter(new jo(this.zoom),c,r))continue;const u=i?i.evaluate(c,{},r):void 0,h={id:a,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Qs(t,r,n),patterns:{},sortKey:u};o.push(h)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));const{lineAtlas:a,featureIndex:s}=t,l=this.addConstantDashes(a);for(const n of o){const{geometry:i,index:o,sourceLayerIndex:c}=n;if(l&&this.addFeatureDashes(n,a),this.hasPattern){const e=cu("line",this.layers,n,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(n,i,o,r,a.positions,t.availableImages);s.insert(e[o].feature,i,o,c,this.index)}}addConstantDashes(e){let t=!1;for(const r of this.layers){const n=r.paint.get("line-dasharray").value,i=r.layout.get("line-cap").value;if("constant"!==n.kind||"constant"!==i.kind)t=!0;else{const t=i.value,r=n.value;if(!r)continue;e.addDash(r.from,t),e.addDash(r.to,t),r.other&&e.addDash(r.other,t)}}return t}addFeatureDashes(e,t){const r=this.zoom;for(const n of this.layers){const i=n.paint.get("line-dasharray").value,o=n.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let a,s,l,c,u,h;if("constant"===i.kind){const e=i.value;if(!e)continue;a=e.other||e.to,s=e.to,l=e.from}else a=i.evaluate({zoom:r-1},e),s=i.evaluate({zoom:r},e),l=i.evaluate({zoom:r+1},e);"constant"===o.kind?c=u=h=o.value:(c=o.evaluate({zoom:r-1},e),u=o.evaluate({zoom:r},e),h=o.evaluate({zoom:r+1},e)),t.addDash(a,c),t.addDash(s,u),t.addDash(l,h);const d=t.getKey(a,c),p=t.getKey(s,u),f=t.getKey(l,h);e.patterns[n.id]={min:d,mid:p,max:f}}}update(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}addFeatures(e,t,r,n,i){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,ah)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ih),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,r,n,i,o){const a=this.layers[0].layout,s=a.get("line-join").evaluate(e,{}),l=a.get("line-cap").evaluate(e,{}),c=a.get("line-miter-limit"),u=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const r of t)this.addLine(r,e,s,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,o,n)}addLine(e,t,r,n,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===sh[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===r&&(i=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,a&&(h=e[s-2],m=e[l].sub(h)._unit()._perp());for(let t=l;t<s;t++){if(p=t===s-1?a?e[l+1]:void 0:e[t+1],p&&e[t].equals(p))continue;m&&(f=m),h&&(d=h),h=e[t],m=p?p.sub(h)._unit()._perp():f,f=f||m;let g=f.add(m);0===g.x&&0===g.y||g._unit();const y=f.x*m.x+f.y*m.y,_=g.x*m.x+g.y*m.y,v=0!==_?1/_:1/0,x=2*Math.sqrt(2-2*_),b=_<lh&&d&&p,w=f.x*m.y-f.y*m.x>0;if(b&&t>l){const e=h.dist(d);if(e>2*c){const t=h.sub(h.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,f,0,0,u),d=t}}const E=d&&p;let T=E?r:a?"butt":n;if(E&&"round"===T&&(v<o?T="miter":v<=2&&(T="fakeround")),"miter"===T&&v>i&&(T="bevel"),"bevel"===T&&(v>2&&(T="flipbevel"),v<i&&(T="miter")),d&&this.updateDistance(d,h),"miter"===T)g._mult(v),this.addCurrentVertex(h,g,0,0,u);else if("flipbevel"===T){if(v>100)g=m.mult(-1);else{const e=v*f.add(m).mag()/f.sub(m).mag();g._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(h,g,0,0,u),this.addCurrentVertex(h,g.mult(-1),0,0,u)}else if("bevel"===T||"fakeround"===T){const e=-Math.sqrt(v*v-1),t=w?e:0,r=w?0:e;if(d&&this.addCurrentVertex(h,f,t,r,u),"fakeround"===T){const e=Math.round(180*x/Math.PI/20);for(let t=1;t<e;t++){let r=t/e;if(.5!==r){const e=r-.5;r+=r*e*(r-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const n=m.sub(f)._mult(r)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,n.x,n.y,!1,w,0,u)}}p&&this.addCurrentVertex(h,m,-t,-r,u)}else if("butt"===T)this.addCurrentVertex(h,g,0,0,u);else if("square"===T){const e=d?1:-1;d||this.addCurrentVertex(h,g,e,e,u),this.addCurrentVertex(h,g,0,0,u),d&&this.addCurrentVertex(h,g,e,e,u)}else"round"===T&&(d&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(b&&t<s-1){const e=h.dist(p);if(e>2*c){const t=h.add(p.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,m,0,0,u),h=t}}}}addCurrentVertex(e,t,r,n,i,o=!1){const a=t.y*n-t.x,s=-t.y-t.x*n;this.addHalfVertex(e,t.x+t.y*r,t.y-t.x*r,o,!1,r,i),this.addHalfVertex(e,a,s,o,!0,-n,i)}addHalfVertex({x:e,y:t},r,n,i,o,a,s){this.layoutVertexArray.emplaceBack((e<<1)+(i?1:0),(t<<1)+(o?1:0),Math.round(63*r)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}ji(ch,"LineBucket",{omit:["layers","patternFeatures"]});const uh=new ea({"line-cap":new Ko(Ye.layout_line["line-cap"]),"line-join":new Ko(Ye.layout_line["line-join"]),"line-miter-limit":new Yo(Ye.layout_line["line-miter-limit"]),"line-round-limit":new Yo(Ye.layout_line["line-round-limit"]),"line-sort-key":new Ko(Ye.layout_line["line-sort-key"])});var hh={paint:new ea({"line-opacity":new Ko(Ye.paint_line["line-opacity"]),"line-color":new Ko(Ye.paint_line["line-color"]),"line-translate":new Yo(Ye.paint_line["line-translate"]),"line-translate-anchor":new Yo(Ye.paint_line["line-translate-anchor"]),"line-width":new Ko(Ye.paint_line["line-width"]),"line-gap-width":new Ko(Ye.paint_line["line-gap-width"]),"line-offset":new Ko(Ye.paint_line["line-offset"]),"line-blur":new Ko(Ye.paint_line["line-blur"]),"line-dasharray":new Jo(Ye.paint_line["line-dasharray"]),"line-pattern":new Jo(Ye.paint_line["line-pattern"]),"line-gradient":new $o(Ye.paint_line["line-gradient"]),"line-trim-offset":new Yo(Ye.paint_line["line-trim-offset"])}),layout:uh};const dh=new class extends Ko{possiblyEvaluate(e,t){return t=new jo(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,r,n){return t=k({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,r,n)}}(hh.paint.properties["line-width"].specification);function ph(e,t){return t>0?t+2*e:e}dh.useIntegerZoom=!0;const fh=oa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mh=oa([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),gh=oa([{name:"a_projected_pos",components:4,type:"Float32"}],4);oa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const yh=oa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),_h=oa([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);oa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const vh=oa([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),xh=oa([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);oa([{name:"triangle",components:3,type:"Uint16"}]),oa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),oa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),oa([{type:"Float32",name:"offsetX"}]),oa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var bh=24;const wh=128;function Eh(e,t){const{expression:r}=t;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new jo(e+1))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:n}=r;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let o=i;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[i],s=t[o];return"composite"===r.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:n}:{kind:"camera",minZoom:a,maxZoom:s,minSize:r.evaluate(new jo(a)),maxSize:r.evaluate(new jo(s)),interpolationType:n}}}function Th(e,{uSize:t,uSizeT:r},{lowerSize:n,upperSize:i}){return"source"===e.kind?n/wh:"composite"===e.kind?Ar(n/wh,i/wh,r):t}function Sh(e,t){let r=0,n=0;if("constant"===e.kind)n=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:o,maxZoom:a}=e,s=i?T(Zr.interpolationFactor(i,t,o,a),0,1):0;"camera"===e.kind?n=Ar(e.minSize,e.maxSize,s):r=s}return{uSizeT:r,uSize:n}}var Ah=Object.freeze({__proto__:null,getSizeData:Eh,evaluateSizeForFeature:Th,evaluateSizeForZoom:Sh,SIZE_PACK_FACTOR:wh});function Ph(e,t,r){return e.sections.forEach((e=>{e.text=function(e,t,r){const n=t.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?e=e.toLocaleUpperCase():"lowercase"===n&&(e=e.toLocaleLowerCase()),No.applyArabicShaping&&(e=No.applyArabicShaping(e)),e}(e.text,t,r)})),e}const Ih={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function kh(e){return""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e}function Ch(e){return""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e}var Mh=Lh,zh=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,c=l>>1,u=-7,h=r?i-1:0,d=r?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},Dh=function(e,t,r,n,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+p]=255&a,p+=f,a/=256,c-=8);e[r+p-f]|=128*m};function Lh(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Lh.Varint=0,Lh.Fixed64=1,Lh.Bytes=2,Lh.Fixed32=5;var Fh=4294967296,Rh=1/Fh,Bh="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Oh(e){return e.type===Lh.Bytes?e.readVarint()+e.pos:e.pos+1}function Nh(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function jh(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=e;i--)r.buf[i+n]=r.buf[i]}function Uh(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function Vh(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function Gh(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function Hh(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function qh(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function Wh(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function Zh(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function Xh(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function Yh(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function Kh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Jh(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function Qh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function $h(e,t,r){t.glyphs=[],1===e&&r.readMessage(ed,t)}function ed(e,t,r){if(3===e){const{id:e,bitmap:n,width:i,height:o,left:a,top:s,advance:l}=r.readMessage(td,{});t.glyphs.push({id:e,bitmap:new wc({width:i+6,height:o+6},n),metrics:{width:i,height:o,left:a,top:s,advance:l}})}else 4===e?t.ascender=r.readSVarint():5===e&&(t.descender=r.readSVarint())}function td(e,t,r){1===e?t.id=r.readVarint():2===e?t.bitmap=r.readBytes():3===e?t.width=r.readVarint():4===e?t.height=r.readVarint():5===e?t.left=r.readSVarint():6===e?t.top=r.readSVarint():7===e&&(t.advance=r.readVarint())}function rd(e){let t=0,r=0;for(const n of e)t+=n.w*n.h,r=Math.max(r,n.w);e.sort(((e,t)=>t.h-e.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let i=0,o=0;for(const t of e)for(let e=n.length-1;e>=0;e--){const r=n[e];if(!(t.w>r.w||t.h>r.h)){if(t.x=r.x,t.y=r.y,o=Math.max(o,t.y+t.h),i=Math.max(i,t.x+t.w),t.w===r.w&&t.h===r.h){const t=n.pop();e<n.length&&(n[e]=t)}else t.h===r.h?(r.x+=t.w,r.w-=t.w):t.w===r.w?(r.y+=t.h,r.h-=t.h):(n.push({x:r.x+t.w,y:r.y,w:r.w-t.w,h:t.h}),r.y+=t.h,r.h-=t.h);break}}return{w:i,h:o,fill:t/(i*o)||0}}Lh.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,e(i,t,this),this.pos===o&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Kh(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Qh(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Kh(this.buf,this.pos)+Kh(this.buf,this.pos+4)*Fh;return this.pos+=8,e},readSFixed64:function(){var e=Kh(this.buf,this.pos)+Qh(this.buf,this.pos+4)*Fh;return this.pos+=8,e},readFloat:function(){var e=zh(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=zh(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:function(e,t,r){var n,i,o=r.buf;if(n=(112&(i=o[r.pos++]))>>4,i<128)return Nh(e,n,t);if(n|=(127&(i=o[r.pos++]))<<3,i<128)return Nh(e,n,t);if(n|=(127&(i=o[r.pos++]))<<10,i<128)return Nh(e,n,t);if(n|=(127&(i=o[r.pos++]))<<17,i<128)return Nh(e,n,t);if(n|=(127&(i=o[r.pos++]))<<24,i<128)return Nh(e,n,t);if(n|=(1&(i=o[r.pos++]))<<31,i<128)return Nh(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Bh?function(e,t,r){return Bh.decode(e.subarray(t,r))}(this.buf,t,e):function(e,t,r){for(var n="",i=t;i<r;){var o,a,s,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>r)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),i+=u}return n}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Lh.Bytes)return e.push(this.readVarint(t));var r=Oh(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Lh.Bytes)return e.push(this.readSVarint());var t=Oh(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Lh.Bytes)return e.push(this.readBoolean());var t=Oh(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Lh.Bytes)return e.push(this.readFloat());var t=Oh(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Lh.Bytes)return e.push(this.readDouble());var t=Oh(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Lh.Bytes)return e.push(this.readFixed32());var t=Oh(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Lh.Bytes)return e.push(this.readSFixed32());var t=Oh(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Lh.Bytes)return e.push(this.readFixed64());var t=Oh(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Lh.Bytes)return e.push(this.readSFixed64());var t=Oh(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Lh.Varint)for(;this.buf[this.pos++]>127;);else if(t===Lh.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Lh.Fixed32)this.pos+=4;else{if(t!==Lh.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Jh(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Jh(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Jh(this.buf,-1&e,this.pos),Jh(this.buf,Math.floor(e*Rh),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Jh(this.buf,-1&e,this.pos),Jh(this.buf,Math.floor(e*Rh),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,n;if(e>=0?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,n=n+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,r.buf[r.pos]=127&(e>>>=7)}(r,0,t),function(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var n,i,o=0;o<t.length;o++){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):i=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(e[r++]=239,e[r++]=191,e[r++]=189,i=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&jh(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),Dh(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Dh(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&jh(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,Lh.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Uh,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Vh,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,qh,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Gh,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Hh,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Wh,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Zh,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Xh,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Yh,t)},writeBytesField:function(e,t){this.writeTag(e,Lh.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Lh.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Lh.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Lh.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Lh.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Lh.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Lh.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Lh.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Lh.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Lh.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};class nd{constructor(e,{pixelRatio:t,version:r,stretchX:n,stretchY:i,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=n,this.stretchY=i,this.content=o,this.version=r}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class id{constructor(e,t){const r={},n={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,r,i),this.addImages(t,n,i);const{w:o,h:a}=rd(i),s=new Ec({width:o||1,height:a||1});for(const t in e){const n=e[t],i=r[t].paddedRect;Ec.copy(n.data,s,{x:0,y:0},{x:i.x+1,y:i.y+1},n.data)}for(const e in t){const r=t[e],i=n[e].paddedRect,o=i.x+1,a=i.y+1,l=r.data.width,c=r.data.height;Ec.copy(r.data,s,{x:0,y:0},{x:o,y:a},r.data),Ec.copy(r.data,s,{x:0,y:c-1},{x:o,y:a-1},{width:l,height:1}),Ec.copy(r.data,s,{x:0,y:0},{x:o,y:a+c},{width:l,height:1}),Ec.copy(r.data,s,{x:l-1,y:0},{x:o-1,y:a},{width:1,height:c}),Ec.copy(r.data,s,{x:0,y:0},{x:o+l,y:a},{width:1,height:c})}this.image=s,this.iconPositions=r,this.patternPositions=n}addImages(e,t,r){for(const n in e){const i=e[n],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};r.push(o),t[n]=new nd(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(e,t){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((t=>e.hasImage(t))),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in e.updatedImages)this.patchUpdatedImage(this.iconPositions[r],e.getImage(r),t),this.patchUpdatedImage(this.patternPositions[r],e.getImage(r),t)}patchUpdatedImage(e,t,r){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[n,i]=e.tl;r.update(t.data,void 0,{x:n,y:i})}}ji(nd,"ImagePosition"),ji(id,"ImageAtlas");const od={horizontal:1,vertical:2,horizontalOnly:3};class ad{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const r=new ad;return r.scale=e||1,r.fontStack=t,r}static forImage(e){const t=new ad;return t.imageName=e,t}}class sd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const r=new sd;for(let n=0;n<e.sections.length;n++){const i=e.sections[n];i.image?r.addImageSection(i):r.addTextSection(i,t)}return r}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let r="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n+1)||null,o=e.charCodeAt(n-1)||null;r+=!t&&(i&&To(i)&&!Ih[e[n+1]]||o&&To(o)&&!Ih[e[n-1]])||!Ih[e[n]]?e[n]:Ih[e[n]]}return r}(this.text,e)}trim(){let e=0;for(let t=0;t<this.text.length&&cd[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let r=this.text.length-1;r>=0&&r>=e&&cd[this.text.charCodeAt(r)];r--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const r=new sd;return r.text=this.text.substring(e,t),r.sectionIndex=this.sectionIndex.slice(e,t),r.sections=this.sections,r}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(ad.forText(e.scale,e.fontStack||t));const r=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(r)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void U("Can't add FormattedSection with an empty image.");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(ad.forImage(t)),this.sectionIndex.push(this.sections.length-1)):U("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ld(e,t,r,n,i,o,a,s,l,c,u,h,d,p,f){const m=sd.fromFeature(e,i);h===od.vertical&&m.verticalizePunctuation(d);let g=[];const y=function(e,t,r,n,i,o){if(!e)return[];const a=[],s=function(e,t,r,n,i,o){let a=0;for(let r=0;r<e.length();r++){const s=e.getSection(r);a+=hd(e.getCharCode(r),s,n,i,t,o)}return a/Math.max(1,Math.ceil(a/r))}(e,t,r,n,i,o),l=e.text.indexOf("")>=0;let c=0;for(let r=0;r<e.length();r++){const h=e.getSection(r),d=e.getCharCode(r);if(cd[d]||(c+=hd(d,h,n,i,t,o)),r<e.length()-1){const t=!((u=d)<11904||!(ro(u)||to(u)||go(u)||po(u)||ao(u)||Yi(u)||no(u)||Qi(u)||so(u)||lo(u)||oo(u)||vo(u)||$i(u)||Ji(u)||Ki(u)||io(u)||eo(u)||mo(u)||uo(u)||co(u)));(ud[d]||t||h.imageName)&&a.push(fd(r+1,c,s,a,pd(d,e.getCharCode(r+1),t&&l),!1))}}var u;return md(fd(e.length(),c,s,a,0,!0))}(m,c,o,t,n,p),{processBidirectionalText:_,processStyledBidirectionalText:v}=No;if(_&&1===m.sections.length){const e=_(m.toString(),y);for(const t of e){const e=new sd;e.text=t,e.sections=m.sections;for(let r=0;r<t.length;r++)e.sectionIndex.push(0);g.push(e)}}else if(v){const e=v(m.text,m.sectionIndex,y);for(const t of e){const e=new sd;e.text=t[0],e.sectionIndex=t[1],e.sections=m.sections,g.push(e)}}else g=function(e,t){const r=[],n=e.text;let i=0;for(const n of t)r.push(e.substring(i,n)),i=n;return i<n.length&&r.push(e.substring(i,n.length)),r}(m,y);const x=[],b={positionedLines:x,text:m.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,r,n,i,o,a,s,l,c,u,h){let d=0,p=0,f=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const e of i){const r=e.getSections();for(const e of r){if(e.imageName)continue;const r=t[e.fontStack];if(r&&(g=void 0!==r.ascender&&void 0!==r.descender,!g))break}if(!g)break}let y=0;for(const a of i){a.trim();const i=a.getMaxScale(),s=(i-1)*bh,v={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=v;const x=v.positionedGlyphs;let b=0;if(!a.length()){p+=o,++y;continue}let w=0,E=0;for(let o=0;o<a.length();o++){const s=a.getSection(o),f=a.getSectionIndex(o),m=a.getCharCode(o);let y=s.scale,v=null,T=null,S=null,A=bh,P=0;const I=!(l===od.horizontal||!u&&!Eo(m)||u&&(cd[m]||(_=m,Wi(_)||Zi(_)||Xi(_)||fo(_)||_o(_))));if(s.imageName){const t=n[s.imageName];if(!t)continue;S=s.imageName,e.iconsInText=e.iconsInText||!0,T=t.paddedRect;const r=t.displaySize;y=y*bh/h,v={width:r[0],height:r[1],left:1,top:-3,advance:I?r[1]:r[0],localGlyph:!1},P=g?-v.height*y:i*bh-17-r[1]*y,A=v.advance;const o=(I?r[0]:r[1])*y-bh*i;o>0&&o>b&&(b=o)}else{const e=r[s.fontStack];if(!e)continue;e[m]&&(T=e[m]);const n=t[s.fontStack];if(!n)continue;const o=n.glyphs[m];if(!o)continue;if(v=o.metrics,A=8203!==m?bh:0,g){const e=void 0!==n.ascender?Math.abs(n.ascender):0,t=void 0!==n.descender?Math.abs(n.descender):0,r=(e+t)*y;w<r&&(w=r,E=(e-t)/2*y),P=-e*y}else P=(i-y)*bh-17}I?(e.verticalizable=!0,x.push({glyph:m,imageName:S,x:d,y:p+P,vertical:I,scale:y,localGlyph:v.localGlyph,fontStack:s.fontStack,sectionIndex:f,metrics:v,rect:T}),d+=A*y+c):(x.push({glyph:m,imageName:S,x:d,y:p+P,vertical:I,scale:y,localGlyph:v.localGlyph,fontStack:s.fontStack,sectionIndex:f,metrics:v,rect:T}),d+=v.advance*y+c)}0!==x.length&&(f=Math.max(d-c,f),g?yd(x,m,b,E,o*i/2):yd(x,m,b,0,o/2)),d=0;const T=o*i+b;v.lineOffset=Math.max(b,s),p+=T,++y}var _;const v=p,{horizontalAlign:x,verticalAlign:b}=gd(a);(function(e,t,r,n,i,o){const a=(t-r)*i,s=-o*n;for(const t of e)for(const e of t.positionedGlyphs)e.x+=a,e.y+=s})(e.positionedLines,m,x,b,f,v),e.top+=-b*v,e.bottom=e.top+v,e.left+=-x*f,e.right=e.left+f,e.hasBaseline=g}(b,t,r,n,g,a,s,l,h,c,d,f),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(x)&&b}const cd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ud={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function hd(e,t,r,n,i,o){if(t.imageName){const e=n[t.imageName];return e?e.displaySize[0]*t.scale*bh/o+i:0}{const n=r[t.fontStack],o=n&&n.glyphs[e];return o?o.metrics.advance*t.scale+i:0}}function dd(e,t,r,n){const i=Math.pow(e-t,2);return n?e<t?i/2:2*i:i+Math.abs(r)*r}function pd(e,t,r){let n=0;return 10===e&&(n-=1e4),r&&(n+=150),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function fd(e,t,r,n,i,o){let a=null,s=dd(t,r,i,o);for(const e of n){const n=dd(t-e.x,r,i,o)+e.badness;n<=s&&(a=e,s=n)}return{index:e,x:t,priorBreak:a,badness:s}}function md(e){return e?md(e.priorBreak).concat(e.index):[]}function gd(e){let t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function yd(e,t,r,n,i){if(!(t||r||n||i))return;const o=e.length-1,a=e[o],s=(a.x+a.metrics.advance*a.scale)*t;for(let t=0;t<=o;t++)e[t].x-=s,e[t].y+=r+n+i}function _d(e,t,r){const{horizontalAlign:n,verticalAlign:i}=gd(r),o=t[0]-e.displaySize[0]*n,a=t[1]-e.displaySize[1]*i;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function vd(e,t,r,n,i,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,h,d,p;"width"===r||"both"===r?(p=i[0]+l-n[3],h=i[0]+c+n[1]):(p=i[0]+(l+c-a.displaySize[0])/2,h=p+a.displaySize[0]);const f=t.top*o,m=t.bottom*o;return"height"===r||"both"===r?(u=i[1]+f-n[0],d=i[1]+m+n[2]):(u=i[1]+(f+m-a.displaySize[1])/2,d=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:d,left:p,collisionPadding:s}}class xd extends f{constructor(e,t,r,n,i){super(e,t),this.angle=n,this.z=r,void 0!==i&&(this.segment=i)}clone(){return new xd(this.x,this.y,this.z,this.angle,this.segment)}}function bd(e,t,r,n,i){if(void 0===t.segment)return!0;let o=t,a=t.segment+1,s=0;for(;s>-r/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<r/2;){const t=e[a],r=e[a+1];if(!r)return!1;let o=e[a-1].angleTo(t)-t.angleTo(r);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>n;)c-=l.shift().angleDelta;if(c>i)return!1;a++,s+=t.dist(r)}return!0}function wd(e){let t=0;for(let r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function Ed(e,t,r){return e?.6*t*r:0}function Td(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Sd(e,t,r,n,i,o){const a=Ed(r,i,o),s=Td(r,n)*o;let l=0;const c=wd(e)/2;for(let r=0;r<e.length-1;r++){const n=e[r],i=e[r+1],o=n.dist(i);if(l+o>c){const u=(c-l)/o,h=Ar(n.x,i.x,u),d=Ar(n.y,i.y,u),p=new xd(h,d,0,i.angleTo(n),r);return!a||bd(e,p,s,a,t)?p:void 0}l+=o}}function Ad(e,t,r,n,i,o,a,s,l){const c=Ed(n,o,a),u=Td(n,i),h=u*a,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),Pd(e,d?t/2*s%t:(u/2+2*o)*a*s%t,t,c,r,h,d,!1,l)}function Pd(e,t,r,n,i,o,a,s,l){const c=o/2,u=wd(e);let h=0,d=t-r,p=[];for(let t=0;t<e.length-1;t++){const a=e[t],s=e[t+1],f=a.dist(s),m=s.angleTo(a);for(;d+r<h+f;){d+=r;const g=(d-h)/f,y=Ar(a.x,s.x,g),_=Ar(a.y,s.y,g);if(y>=0&&y<l&&_>=0&&_<l&&d-c>=0&&d+c<=u){const r=new xd(y,_,0,m,t);r._round(),n&&!bd(e,r,o,n,i)||p.push(r)}}h+=f}return s||p.length||a||(p=Pd(e,h/2,r,n,i,o,a,!0,l)),p}function Id(e,t,r,n,i){const o=[];for(let a=0;a<e.length;a++){const s=e[a];let l;for(let e=0;e<s.length-1;e++){let a=s[e],c=s[e+1];a.x<t&&c.x<t||(a.x<t?a=new f(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x<t&&(c=new f(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y<r&&c.y<r||(a.y<r?a=new f(a.x+(r-a.y)/(c.y-a.y)*(c.x-a.x),r)._round():c.y<r&&(c=new f(a.x+(r-a.y)/(c.y-a.y)*(c.x-a.x),r)._round()),a.x>=n&&c.x>=n||(a.x>=n?a=new f(n,a.y+(n-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x>=n&&(c=new f(n,a.y+(n-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y>=i&&c.y>=i||(a.y>=i?a=new f(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round():c.y>=i&&(c=new f(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round()),l&&a.equals(l[l.length-1])||(l=[a],o.push(l)),l.push(c)))))}}return o}ji(xd,"Anchor");const kd=1e20;function Cd(e,t,r,n,i,o,a,s,l){for(let c=t;c<t+n;c++)Md(e,r*o+c,o,i,a,s,l);for(let c=r;c<r+i;c++)Md(e,c*o+t,1,n,a,s,l)}function Md(e,t,r,n,i,o,a){o[0]=0,a[0]=-kd,a[1]=kd,i[0]=e[t];for(let s=1,l=0,c=0;s<n;s++){i[s]=e[t+s*r];const n=s*s;do{const e=o[l];c=(i[s]-i[e]+n-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=kd}for(let s=0,l=0;s<n;s++){for(;a[l+1]<s;)l++;const n=o[l],c=s-n;e[t+s*r]=i[n]+c*c}}const zd={none:0,ideographs:1,all:2};class Dd{constructor(e,t,r){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const r=[];for(const t in e)for(const n of e[t])r.push({stack:t,id:n});P(r,(({stack:e,id:t},r)=>{let n=this.entries[e];n||(n=this.entries[e]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=n.glyphs[t];if(void 0!==i)return void r(null,{stack:e,id:t,glyph:i});if(i=this._tinySDF(n,e,t),i)return n.glyphs[t]=i,void r(null,{stack:e,id:t,glyph:i});const o=Math.floor(t/256);if(256*o>65535)return void r(new Error("glyphs > 65535 not supported"));if(n.ranges[o])return void r(null,{stack:e,id:t,glyph:i});let a=n.requests[o];a||(a=n.requests[o]=[],Dd.loadGlyphRange(e,o,this.url,this.requestManager,((e,t)=>{if(t){n.ascender=t.ascender,n.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(n.glyphs[+e]=t.glyphs[+e]);n.ranges[o]=!0}for(const r of a)r(e,t);delete n.requests[o]}))),a.push(((n,i)=>{n?r(n):i&&r(null,{stack:e,id:t,glyph:i.glyphs[t]||null})}))}),((e,r)=>{if(e)t(e);else if(r){const e={};for(const{stack:t,id:n,glyph:i}of r)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[n]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}}))}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==zd.none&&(this.localGlyphMode===zd.all?!!this.localFontFamily:!!this.localFontFamily&&(lo(e)||ho(e)||$i(e)||eo(e)||Qi(e)))}_tinySDF(e,t,r){const n=this.localFontFamily;if(!n||!this._doesCharSupportLocalGlyph(r))return;let i=e.tinySDF;if(!i){let r="400";/bold/i.test(t)?r="900":/medium/i.test(t)?r="500":/light/i.test(t)&&(r="200"),i=e.tinySDF=new Dd.TinySDF({fontFamily:n,fontWeight:r,fontSize:48,buffer:6,radius:16}),i.fontWeight=r}if(this.localGlyphs[i.fontWeight][r])return this.localGlyphs[i.fontWeight][r];const o=String.fromCharCode(r),{data:a,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:h,glyphTop:d,glyphAdvance:p}=i.draw(o);return this.localGlyphs[i.fontWeight][r]={id:r,bitmap:new wc({width:s,height:l},a),metrics:{width:c/2,height:u/2,left:h/2,top:d/2-27,advance:p/2,localGlyph:!0}}}}function Ld(e,t,r,n){const i=[],o=e.image,a=o.pixelRatio,s=o.paddedRect.w-2,l=o.paddedRect.h-2,c=e.right-e.left,u=e.bottom-e.top,h=o.stretchX||[[0,s]],d=o.stretchY||[[0,l]],p=(e,t)=>e+t[1]-t[0],m=h.reduce(p,0),g=d.reduce(p,0),y=s-m,_=l-g;let v=0,x=m,b=0,w=g,E=0,T=y,S=0,A=_;if(o.content&&n){const e=o.content;v=Fd(h,0,e[0]),b=Fd(d,0,e[1]),x=Fd(h,e[0],e[2]),w=Fd(d,e[1],e[3]),E=e[0]-v,S=e[1]-b,T=e[2]-e[0]-x,A=e[3]-e[1]-w}const P=(n,i,s,l)=>{const h=Bd(n.stretch-v,x,c,e.left),d=Od(n.fixed-E,T,n.stretch,m),p=Bd(i.stretch-b,w,u,e.top),y=Od(i.fixed-S,A,i.stretch,g),_=Bd(s.stretch-v,x,c,e.left),P=Od(s.fixed-E,T,s.stretch,m),I=Bd(l.stretch-b,w,u,e.top),k=Od(l.fixed-S,A,l.stretch,g),C=new f(h,p),M=new f(_,p),z=new f(_,I),D=new f(h,I),L=new f(d/a,y/a),F=new f(P/a,k/a),R=t*Math.PI/180;if(R){const e=Math.sin(R),t=Math.cos(R),r=[t,-e,e,t];C._matMult(r),M._matMult(r),D._matMult(r),z._matMult(r)}const B=n.stretch+n.fixed,O=i.stretch+i.fixed;return{tl:C,tr:M,bl:D,br:z,tex:{x:o.paddedRect.x+1+B,y:o.paddedRect.y+1+O,w:s.stretch+s.fixed-B,h:l.stretch+l.fixed-O},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:L,pixelOffsetBR:F,minFontScaleX:T/a/c,minFontScaleY:A/a/u,isSDF:r}};if(n&&(o.stretchX||o.stretchY)){const e=Rd(h,y,m),t=Rd(d,_,g);for(let r=0;r<e.length-1;r++){const n=e[r],o=e[r+1];for(let e=0;e<t.length-1;e++)i.push(P(n,t[e],o,t[e+1]))}}else i.push(P({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function Fd(e,t,r){let n=0;for(const i of e)n+=Math.max(t,Math.min(r,i[1]))-Math.max(t,Math.min(r,i[0]));return n}function Rd(e,t,r){const n=[{fixed:-1,stretch:0}];for(const[t,r]of e){const e=n[n.length-1];n.push({fixed:t-e.stretch,stretch:e.stretch}),n.push({fixed:t-e.stretch,stretch:e.stretch+(r-t)})}return n.push({fixed:t+1,stretch:r}),n}function Bd(e,t,r,n){return e/t*r+n}function Od(e,t,r,n){return e-t*r/n}function Nd(e,t,r,n){const i=t+e.positionedLines[n].lineOffset;return 0===n?r+i/2:r+(i+(t+e.positionedLines[n-1].lineOffset))/2}Dd.loadGlyphRange=function(e,t,r,n,i){const o=256*t,a=o+255,s=n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",`${o}-${a}`),oe.Glyphs);ce(s,((e,t)=>{if(e)i(e);else if(t){const e={},r=function(e){return new Mh(e).readFields($h,{})}(t);for(const t of r.glyphs)e[t.id]=t;i(null,{glyphs:e,ascender:r.ascender,descender:r.descender})}}))},Dd.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:r=8,cutoff:n=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=t,this.cutoff=n,this.radius=r;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${a} ${o} ${e}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:r,actualBoundingBoxDescent:n,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(r),s=Math.min(this.size-this.buffer,Math.ceil(o-i)),l=Math.min(this.size-this.buffer,a+Math.ceil(n)),c=s+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,s,l),f.fillText(e,m,m+a);const _=f.getImageData(m,m,s,l);y.fill(kd,0,h),g.fill(0,0,h);for(let e=0;e<l;e++)for(let t=0;t<s;t++){const r=_.data[4*(e*s+t)+3]/255;if(0===r)continue;const n=(e+m)*c+t+m;if(1===r)y[n]=0,g[n]=kd;else{const e=.5-r;y[n]=e>0?e*e:0,g[n]=e<0?e*e:0}}Cd(y,0,0,c,u,c,this.f,this.v,this.z),Cd(g,m,m,s,l,c,this.f,this.v,this.z);for(let e=0;e<h;e++){const t=Math.sqrt(y[e])-Math.sqrt(g[e]);d[e]=Math.round(255-255*(t/this.radius+this.cutoff))}return p}};class jd{constructor(e=[],t=Ud){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,n=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(r(n,o)>=0)break;t[e]=o,e=i}t[e]=n}_down(e){const{data:t,compare:r}=this,n=this.length>>1,i=t[e];for(;e<n;){let n=1+(e<<1),o=t[n];const a=n+1;if(a<this.length&&r(t[a],o)<0&&(n=a,o=t[a]),r(o,i)>=0)break;t[e]=o,e=n}t[e]=i}}function Ud(e,t){return e<t?-1:e>t?1:0}function Vd(e,t=1,r=!1){let n=1/0,i=1/0,o=-1/0,a=-1/0;const s=e[0];for(let e=0;e<s.length;e++){const t=s[e];(!e||t.x<n)&&(n=t.x),(!e||t.y<i)&&(i=t.y),(!e||t.x>o)&&(o=t.x),(!e||t.y>a)&&(a=t.y)}const l=Math.min(o-n,a-i);let c=l/2;const u=new jd([],Gd);if(0===l)return new f(n,i);for(let t=n;t<o;t+=l)for(let r=i;r<a;r+=l)u.push(new Hd(t+c,r+c,c,e));let h=function(e){let t=0,r=0,n=0;const i=e[0];for(let e=0,o=i.length,a=o-1;e<o;a=e++){const o=i[e],s=i[a],l=o.x*s.y-s.x*o.y;r+=(o.x+s.x)*l,n+=(o.y+s.y)*l,t+=3*l}return new Hd(r/t,n/t,0,e)}(e),d=u.length;for(;u.length;){const n=u.pop();(n.d>h.d||!h.d)&&(h=n,r&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,d)),n.max-h.d<=t||(c=n.h/2,u.push(new Hd(n.p.x-c,n.p.y-c,c,e)),u.push(new Hd(n.p.x+c,n.p.y-c,c,e)),u.push(new Hd(n.p.x-c,n.p.y+c,c,e)),u.push(new Hd(n.p.x+c,n.p.y+c,c,e)),d+=4)}return r&&(console.log(`num probes: ${d}`),console.log(`best distance: ${h.d}`)),h.p}function Gd(e,t){return t.max-e.max}function Hd(e,t,r,n){this.p=new f(e,t),this.h=r,this.d=function(e,t){let r=!1,n=1/0;for(let i=0;i<t.length;i++){const o=t[i];for(let t=0,i=o.length,a=i-1;t<i;a=t++){const i=o[t],s=o[a];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(r=!r),n=Math.min(n,ul(e,i,s))}}return(r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}const qd=Number.POSITIVE_INFINITY,Wd=Math.sqrt(2);function Zd(e,t){return t[1]!==qd?function(e,t,r){let n=0,i=0;switch(t=Math.abs(t),r=Math.abs(r),e){case"top-right":case"top-left":case"top":i=r-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-r}switch(e){case"top-right":case"bottom-right":case"right":n=-t;break;case"top-left":case"bottom-left":case"left":n=t}return[n,i]}(e,t[0],t[1]):function(e,t){let r=0,n=0;t<0&&(t=0);const i=t/Wd;switch(e){case"top-right":case"top-left":n=i-7;break;case"bottom-right":case"bottom-left":n=7-i;break;case"bottom":n=7-t;break;case"top":n=t-7}switch(e){case"top-right":case"bottom-right":r=-i;break;case"top-left":case"bottom-left":r=i;break;case"left":r=t;break;case"right":r=-t}return[r,n]}(e,t[0])}function Xd(e,t,r,n,i,o,a,s,l,c){e.createArrays(),e.tilePixelRatio=Cs/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const u=e.layers[0].layout,h=e.layers[0]._unevaluatedLayout._values,d={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:r}=e.textSizeData;d.compositeTextSizes=[h["text-size"].possiblyEvaluate(new jo(t),s),h["text-size"].possiblyEvaluate(new jo(r),s)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:r}=e.iconSizeData;d.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new jo(t),s),h["icon-size"].possiblyEvaluate(new jo(r),s)]}d.layoutTextSize=h["text-size"].possiblyEvaluate(new jo(l+1),s),d.layoutIconSize=h["icon-size"].possiblyEvaluate(new jo(l+1),s),d.textMaxSize=h["text-size"].possiblyEvaluate(new jo(18),s);const p="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),f=u.get("text-size");for(const o of e.features){const l=u.get("text-font").evaluate(o,{},s).join(","),h=f.evaluate(o,{},s),m=d.layoutTextSize.evaluate(o,{},s),g=(d.layoutIconSize.evaluate(o,{},s),{horizontal:{},vertical:void 0}),y=o.text;let _,v=[0,0];if(y){const n=y.toString(),a=u.get("text-letter-spacing").evaluate(o,{},s)*bh,c=u.get("text-line-height").evaluate(o,{},s)*bh,d=bo(n)?a:0,f=u.get("text-anchor").evaluate(o,{},s),_=u.get("text-variable-anchor");if(!_){const e=u.get("text-radial-offset").evaluate(o,{},s);v=e?Zd(f,[e*bh,qd]):u.get("text-offset").evaluate(o,{},s).map((e=>e*bh))}let x=p?"center":u.get("text-justify").evaluate(o,{},s);const b="point"===u.get("symbol-placement"),w=b?u.get("text-max-width").evaluate(o,{},s)*bh:1/0,E=o=>{e.allowVerticalPlacement&&xo(n)&&(g.vertical=ld(y,t,r,i,l,w,c,f,o,d,v,od.vertical,!0,m,h))};if(!p&&_){const e="auto"===x?_.map((e=>Yd(e))):[x];let n=!1;for(let o=0;o<e.length;o++){const a=e[o];if(!g.horizontal[a])if(n)g.horizontal[a]=g.horizontal[0];else{const e=ld(y,t,r,i,l,w,c,"center",a,d,v,od.horizontal,!1,m,h);e&&(g.horizontal[a]=e,n=1===e.positionedLines.length)}}E("left")}else{if("auto"===x&&(x=Yd(f)),b||u.get("text-writing-mode").indexOf("horizontal")>=0||!xo(n)){const e=ld(y,t,r,i,l,w,c,f,x,d,v,od.horizontal,!1,m,h);e&&(g.horizontal[x]=e)}E(b?"left":x)}}let x=!1;if(o.icon&&o.icon.name){const t=n[o.icon.name];t&&(_=_d(i[o.icon.name],u.get("icon-offset").evaluate(o,{},s),u.get("icon-anchor").evaluate(o,{},s)),x=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&U("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const b=$d(g.horizontal)||g.vertical;e.iconsInText||(e.iconsInText=!!b&&b.iconsInText),(b||_)&&Kd(e,o,g,_,n,d,m,0,v,x,a,s,c)}o&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function Yd(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Kd(e,t,r,n,i,o,a,s,l,c,u,h,d){let p=o.textMaxSize.evaluate(t,{},h);void 0===p&&(p=a);const f=e.layers[0].layout,m=f.get("icon-offset").evaluate(t,{},h),g=$d(r.horizontal)||r.vertical,y="globe"===d.name,v=a/24,x=e.tilePixelRatio*p/24,b=(k=e.overscaling,e.zoom>18&&k>2&&(k>>=1),Math.max(Cs/(512*k),1)*f.get("symbol-spacing")),w=f.get("text-padding")*e.tilePixelRatio,E=f.get("icon-padding")*e.tilePixelRatio,T=_(f.get("text-max-angle")),S="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),A="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),P=f.get("symbol-placement"),I=b/2;var k;const C=f.get("icon-text-fit");let M;n&&"none"!==C&&(e.allowVerticalPlacement&&r.vertical&&(M=vd(n,r.vertical,C,f.get("icon-text-fit-padding"),m,v)),g&&(n=vd(n,g,C,f.get("icon-text-fit-padding"),m,v)));const z=(a,s,p)=>{if(s.x<0||s.x>=Cs||s.y<0||s.y>=Cs)return;let f=null;if(y){const{x:e,y:t,z:r}=d.projectTilePoint(s.x,s.y,p);f={anchor:new xd(e,t,r,0,void 0),up:d.upVector(p,s.x,s.y)}}!function(e,t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,b,w,E,T){const S=e.addToLineVertexArray(t,n);let A,P,I,k,C,M,z,D=0,L=0,F=0,R=0,B=-1,O=-1;const N={};let j=Ka.exports("");const V=r?r.anchor:t;let G=0,H=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[G,H]=l.layout.get("text-offset").evaluate(x,{},T).map((e=>e*bh)):(G=l.layout.get("text-radial-offset").evaluate(x,{},T)*bh,H=qd),e.allowVerticalPlacement&&i.vertical){const e=i.vertical;if(f)M=tp(e),s&&(z=tp(s));else{const r=l.layout.get("text-rotate").evaluate(x,{},T)+90;I=ep(c,V,t,u,h,d,e,p,r,m),s&&(k=ep(c,V,t,u,h,d,s,y,r))}}if(o){const n=l.layout.get("icon-rotate").evaluate(x,{},T),i="none"!==l.layout.get("icon-text-fit"),a=Ld(o,n,w,i),p=s?Ld(s,n,w,i):void 0;P=ep(c,V,t,u,h,d,o,y,n),D=4*a.length;const f=e.iconSizeData;let m=null;"source"===f.kind?(m=[wh*l.layout.get("icon-size").evaluate(x,{},T)],m[0]>Jd&&U(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===f.kind&&(m=[wh*b.compositeIconSizes[0].evaluate(x,{},T),wh*b.compositeIconSizes[1].evaluate(x,{},T)],(m[0]>Jd||m[1]>Jd)&&U(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,a,m,v,_,x,!1,r,t,S.lineStartIndex,S.lineLength,-1,E,T),B=e.icon.placedSymbolArray.length-1,p&&(L=4*p.length,e.addSymbols(e.icon,p,m,v,_,x,od.vertical,r,t,S.lineStartIndex,S.lineLength,-1,E,T),O=e.icon.placedSymbolArray.length-1)}for(const n in i.horizontal){const o=i.horizontal[n];A||(j=Ka.exports(o.text),f?C=tp(o):A=ep(c,V,t,u,h,d,o,p,l.layout.get("text-rotate").evaluate(x,{},T),m));const s=1===o.positionedLines.length;if(F+=Qd(e,r,t,o,a,l,f,x,m,S,i.vertical?od.horizontal:od.horizontalOnly,s?Object.keys(i.horizontal):[n],N,B,b,E,T),s)break}i.vertical&&(R+=Qd(e,r,t,i.vertical,a,l,f,x,m,S,od.vertical,["vertical"],N,O,b,E,T));let q=-1;const W=(e,t)=>e?Math.max(e,t):t;q=W(C,q),q=W(M,q),q=W(z,q);const Z=q>-1?1:0;e.glyphOffsetArray.length>=ff.MAX_GLYPHS&&U("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,x.sortKey),e.symbolInstances.emplaceBack(V.x,V.y,V.z,t.x,t.y,N.right>=0?N.right:-1,N.center>=0?N.center:-1,N.left>=0?N.left:-1,N.vertical>=0?N.vertical:-1,B,O,j,void 0!==A?A:e.collisionBoxArray.length,void 0!==A?A+1:e.collisionBoxArray.length,void 0!==I?I:e.collisionBoxArray.length,void 0!==I?I+1:e.collisionBoxArray.length,void 0!==P?P:e.collisionBoxArray.length,void 0!==P?P+1:e.collisionBoxArray.length,k||e.collisionBoxArray.length,k?k+1:e.collisionBoxArray.length,u,F,R,D,L,Z,0,G,H,q)}(e,s,f,a,r,n,i,M,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,w,S,l,0,E,A,m,t,o,c,u,h)};if("line"===P)for(const i of Id(t.geometry,0,0,Cs,Cs)){const t=Ad(i,b,T,r.vertical||g,n,24,x,e.overscaling,Cs);for(const r of t)g&&rp(e,g.text,I,r)||z(i,r,h)}else if("line-center"===P){for(const e of t.geometry)if(e.length>1){const t=Sd(e,T,r.vertical||g,n,24,x);t&&z(e,t,h)}}else if("Polygon"===t.type)for(const e of au(t.geometry,0)){const t=Vd(e,16);z(e[0],new xd(t.x,t.y,0,0,void 0),h)}else if("LineString"===t.type)for(const e of t.geometry)z(e,new xd(e[0].x,e[0].y,0,0,void 0),h);else if("Point"===t.type)for(const e of t.geometry)for(const t of e)z([t],new xd(t.x,t.y,0,0,void 0),h)}const Jd=32640;function Qd(e,t,r,n,i,o,a,s,l,c,u,h,d,p,m,g,y){const _=function(e,t,r,n,i,o,a,s){const l=[];if(0===t.positionedLines.length)return l;const c=n.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=function(e){const t=e[0],r=e[1],n=t*r;return n>0?[t,-r]:n<0?[-t,r]:0===t?[r,t]:[r,-t]}(r);let h=Math.abs(t.top-t.bottom);for(const e of t.positionedLines)h-=e.lineOffset;const d=t.positionedLines.length,p=h/d;let m=t.top-r[1];for(let e=0;e<d;++e){const n=t.positionedLines[e];m=Nd(t,p,m,e);for(const e of n.positionedGlyphs){if(!e.rect)continue;const n=e.rect||{};let o=4,h=!0,d=1,p=0;if(e.imageName){const t=a[e.imageName];if(!t)continue;if(t.sdf){U("SDF images are not supported in formatted text and will be ignored.");continue}h=!1,d=t.pixelRatio,o=1/d}const g=(i||s)&&e.vertical,y=e.metrics.advance*e.scale/2,_=e.metrics,v=e.rect;if(null===v)continue;s&&t.verticalizable&&(p=e.imageName?y-e.metrics.width*e.scale/2:0);const x=i?[e.x+y,e.y]:[0,0];let b=[0,0],w=[0,0],E=!1;i||(g?(w=[e.x+y+u[0],e.y+u[1]-p],E=!0):b=[e.x+y+r[0],e.y+r[1]-p]);const T=v.w*e.scale/(d*(e.localGlyph?2:1)),S=v.h*e.scale/(d*(e.localGlyph?2:1));let A,P,I,k;if(g){const t=e.y-m,r=new f(-y,y-t),n=-Math.PI/2,i=new f(...w);A=new f(-y+b[0],b[1]),A._rotateAround(n,r)._add(i),A.x+=-t+y,A.y-=(_.left-o)*e.scale;const a=e.imageName?_.advance*e.scale:bh*e.scale,s=String.fromCharCode(e.glyph);kh(s)?A.x+=(1-o)*e.scale:Ch(s)?A.x+=a-_.height*e.scale+(-o-1)*e.scale:A.x+=e.imageName||_.width+2*o===v.w&&_.height+2*o===v.h?(a-S)/2:(a-(_.height+2*o)*e.scale)/2,P=new f(A.x,A.y-T),I=new f(A.x+S,A.y),k=new f(A.x+S,A.y-T)}else{const t=(_.left-o)*e.scale-y+b[0],r=(-_.top-o)*e.scale+b[1],n=t+T,i=r+S;A=new f(t,r),P=new f(n,r),I=new f(t,i),k=new f(n,i)}if(c){let e;e=i?new f(0,0):E?new f(u[0],u[1]):new f(r[0],r[1]),A._rotateAround(c,e),P._rotateAround(c,e),I._rotateAround(c,e),k._rotateAround(c,e)}const C=new f(0,0),M=new f(0,0);l.push({tl:A,tr:P,bl:I,br:k,tex:n,writingMode:t.writingMode,glyphOffset:x,sectionIndex:e.sectionIndex,isSDF:h,pixelOffsetTL:C,pixelOffsetBR:M,minFontScaleX:0,minFontScaleY:0})}}return l}(0,n,l,o,a,s,i,e.allowVerticalPlacement),v=e.textSizeData;let x=null;"source"===v.kind?(x=[wh*o.layout.get("text-size").evaluate(s,{},y)],x[0]>Jd&&U(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===v.kind&&(x=[wh*m.compositeTextSizes[0].evaluate(s,{},y),wh*m.compositeTextSizes[1].evaluate(s,{},y)],(x[0]>Jd||x[1]>Jd)&&U(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),e.addSymbols(e.text,_,x,l,a,s,u,t,r,c.lineStartIndex,c.lineLength,p,g,y);for(const t of h)d[t]=e.text.placedSymbolArray.length-1;return 4*_.length}function $d(e){for(const t in e)return e[t];return null}function ep(e,t,r,n,i,o,a,s,l,c){let u=a.top,h=a.bottom,d=a.left,p=a.right;const m=a.collisionPadding;if(m&&(d-=m[0],u-=m[1],p+=m[2],h+=m[3]),l){const e=new f(d,u),t=new f(p,u),r=new f(d,h),n=new f(p,h),i=_(l);let o=new f(0,0);c&&(o=new f(c[0],c[1])),e._rotateAround(i,o),t._rotateAround(i,o),r._rotateAround(i,o),n._rotateAround(i,o),d=Math.min(e.x,t.x,r.x,n.x),p=Math.max(e.x,t.x,r.x,n.x),u=Math.min(e.y,t.y,r.y,n.y),h=Math.max(e.y,t.y,r.y,n.y)}return e.emplaceBack(t.x,t.y,t.z,r.x,r.y,d,u,p,h,s,n,i,o),e.length-1}function tp(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function rp(e,t,r,n){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(n.dist(e[t])<r)return!0}else i[t]=[];return i[t].push(n),!1}const np=oa([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:ip}=np,op=oa([{name:"a_pos_3",components:3,type:"Int16"}]);var ap=oa([{name:"a_pos",type:"Int16",components:2}]);const sp=Cs/Math.PI/2,lp=2*Os(1,0)*sp*Math.PI,cp=64,up=[cp,32,16],hp=-sp,dp=sp,pp=[new dc([hp,hp,hp],[dp,dp,dp]),new dc([hp,hp,hp],[0,0,dp]),new dc([0,hp,hp],[dp,0,dp]),new dc([hp,0,hp],[0,dp,dp]),new dc([0,0,hp],[dp,dp,dp])];function fp(e,t,r,n=!0){const i=Hl([],e._camera.position,e.worldSize),o=[t,r,1,1];nc(o,o,e.pixelMatrixInverse),tc(o,o,1/o[3]);const a=Wl([],Ql([],o,i)),s=e.globeMatrix,l=[s[12],s[13],s[14]],c=Ql([],l,i),u=Bl(c),h=Wl([],c),d=e.worldSize/(2*Math.PI),p=Zl(h,a),f=Math.asin(d/u);if(f<Math.acos(p)){if(!n)return null;const e=[],t=[];Hl(e,a,u/p),Wl(t,Ql(t,e,c)),Wl(a,Nl(a,c,Hl(a,t,Math.tan(f)*u)))}const m=[];new cc(i,a).closestPointOnSphere(l,d,m);const g=Wl([],Y(s,0)),y=Wl([],Y(s,1)),_=Wl([],Y(s,2)),x=Zl(g,m),b=Zl(y,m),w=Zl(_,m),E=v(Math.asin(-b/d));let S=v(Math.atan2(x,w));S=e.center.lng+function(e,t){const r=(t-e+180)%360-180;return r<-180?r+360:r}(e.center.lng,S);const A=Rs(S),P=T(Bs(E),0,1);return new Hs(A,P)}class mp{constructor(e,t,r){this.a=Ql([],e,r),this.b=Ql([],t,r),this.center=r;const n=Wl([],this.a),i=Wl([],this.b);this.angle=Math.acos(Zl(n,i))}}function gp(e,t){if(0===e.angle)return null;let r;return r=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),r<0||r>1?null:function(e,t,r,n){const i=Math.sin(r);return e*(Math.sin((1-n)*r)/i)+t*(Math.sin(n*r)/i)}(e.a[t],e.b[t],e.angle,T(r,0,1))+e.center[t]}function yp(e){if(e.z<=1)return pp[e.z+2*e.y+e.x];const t=wp(bp(e));return dc.fromPoints(t)}function _p(e,t,r){return Hl(e,e,1-r),ql(e,e,t,r)}function vp(e,t){const r=Mp(t.zoom);if(0===r)return yp(e);const n=bp(e),i=wp(n),o=Rs(n.getWest())*t.worldSize,a=Rs(n.getEast())*t.worldSize,s=Bs(n.getNorth())*t.worldSize,l=Bs(n.getSouth())*t.worldSize,c=[o,s,0],u=[a,s,0],h=[o,l,0],d=[a,l,0],p=Al([],t.globeMatrix);return Yl(c,c,p),Yl(u,u,p),Yl(h,h,p),Yl(d,d,p),i[0]=_p(i[0],h,r),i[1]=_p(i[1],d,r),i[2]=_p(i[2],u,r),i[3]=_p(i[3],c,r),dc.fromPoints(i)}function xp(e,t,r){for(const n of e)Yl(n,n,t),Hl(n,n,r)}function bp({x:e,y:t,z:r}){const n=1/(1<<r),i=new Ds(Ns(e*n),js((t+1)*n)),o=new Ds(Ns((e+1)*n),js(t*n));return new Ms(i,o)}function wp(e){const t=_(e.getNorth()),r=_(e.getSouth()),n=Math.cos(t),i=Math.cos(r),o=Math.sin(t),a=Math.sin(r),s=e.getWest(),l=e.getEast();return[Ep(i,a,s),Ep(i,a,l),Ep(n,o,l),Ep(n,o,s)]}function Ep(e,t,r,n=sp){return r=_(r),[e*Math.sin(r)*n,-t*n,e*Math.cos(r)*n]}function Tp(e,t,r){return Ep(Math.cos(_(e)),Math.sin(_(e)),t,r)}function Sp(e,t,r,n){const i=1<<r.z,o=(e/Cs+r.x)/i;return Tp(js((t/Cs+r.y)/i),Ns(o),n)}function Ap({min:e,max:t}){return 16383/Math.max(t[0]-e[0],t[1]-e[1],t[2]-e[2])}const Pp=new Float64Array(16);function Ip(e){const t=Ap(e),r=zl(Pp,[t,t,t]);return Il(r,r,((n=[])[0]=-(i=e.min)[0],n[1]=-i[1],n[2]=-i[2],n));var n,i}function kp(e){const t=(n=e.min,(r=Pp)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r);var r,n;const i=1/Ap(e);return kl(t,t,[i,i,i])}function Cp(e,t,r,n,i){const o=function(e){const t=Cs/(2*Math.PI);return e/(2*Math.PI)/t}(r),a=[e,t,-r/(2*Math.PI)],s=Sl(new Float64Array(16));return Il(s,s,a),kl(s,s,[o,o,o]),Cl(s,s,_(-i)),Ml(s,s,_(-n)),s}function Mp(e){return S(5,6,e)}function zp(e,t){const r=Tp(t.lat,t.lng),n=function(e){const t=Tp(e._center.lat,e._center.lng);let r=Xl([],Ol(0,1,0),t);const n=Dl([],-e.angle,t);r=Yl(r,r,n),Dl(n,-e._pitch,r);const i=Wl([],t);return Hl(i,i,e.cameraToCenterDistance/e.pixelsPerMeter*lp),Yl(i,i,n),Nl([],t,i)}(e);return a=(i=jl([],n,r))[0],s=i[1],l=i[2],c=(o=r)[0],u=o[1],h=o[2],p=(d=Math.sqrt(a*a+s*s+l*l)*Math.sqrt(c*c+u*u+h*h))&&Zl(i,o)/d,Math.acos(Math.min(Math.max(p,-1),1));var i,o,a,s,l,c,u,h,d,p}const Dp=_(85),Lp=Math.cos(Dp),Fp=Math.sin(Dp);function Rp(e,t){const r=e.fovAboveCenter,n=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-n)/Math.cos(e._pitch),o=Math.sin(r)*i/Math.sin(Math.max(Math.PI/2-e._pitch-r,.01)),a=Math.sin(e._pitch)*o+i;return Math.min(1.01*a,i*(1/e._horizonShift))}function Bp(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const r=Math.pow(2,-e.z),n=e.x*r,i=(e.x+1)*r,o=e.y*r,a=(e.y+1)*r,s=Ns(n),l=Ns(i),c=js(o),u=js(a),h=t.project(s,c),d=t.project(l,c),p=t.project(l,u),f=t.project(s,u);let m=Math.min(h.x,d.x,p.x,f.x),g=Math.min(h.y,d.y,p.y,f.y),y=Math.max(h.x,d.x,p.x,f.x),_=Math.max(h.y,d.y,p.y,f.y);const v=r/16;function x(e,r,n,i,o,a){const s=(n+o)/2,l=(i+a)/2,c=t.project(Ns(s),js(l)),u=Math.max(0,m-c.x,g-c.y,c.x-y,c.y-_);m=Math.min(m,c.x),y=Math.max(y,c.x),g=Math.min(g,c.y),_=Math.max(_,c.y),u>v&&(x(e,c,n,i,s,l),x(c,r,s,l,o,a))}x(h,d,n,o,i,o),x(d,p,i,o,i,a),x(p,f,i,a,n,a),x(f,h,n,a,n,o),m-=v,g-=v,y+=v,_+=v;const b=1/Math.max(y-m,_-g);return{scale:b,x:m*b,y:g*b,x2:y*b,y2:_*b,projection:t}}const Op=Sl(new Float32Array(16));class Np{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,t){return{x:0,y:0,z:0}}unproject(e,t){return new Ds(0,0)}projectTilePoint(e,t,r){return{x:e,y:t,z:0}}locationPoint(e,t,r=!0){return e._coordinatePoint(e.locationCoordinate(t),r)}pixelsPerMeter(e,t){return Os(1,e)*t}pixelSpaceConversion(e,t,r){return 1}farthestPixelDistance(e){return Rp(e,e.pixelsPerMeter)}pointCoordinate(e,t,r,n){const i=e.horizonLineFromTop(!1),o=new f(t,Math.max(i,r));return e.rayIntersectionCoordinate(e.pointRayIntersection(o,n))}pointCoordinate3D(e,t,r){const n=new f(t,r);if(e.elevation)return e.elevation.pointCoordinate(n);{const t=this.pointCoordinate(e,n.x,n.y,0);return[t.x,t.y,t.z]}}isPointAboveHorizon(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);const r=e.horizonLineFromTop();return t.y<r}createInversionMatrix(e,t){return Op}createTileMatrix(e,t,r){let n,i,o;const a=r.canonical,s=Sl(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Bp(a,this);n=1,i=l.x+r.wrap*l.scale,o=l.y,kl(s,s,[n/l.scale,n/l.scale,e.pixelsPerMeter/t])}else n=t/e.zoomScale(a.z),i=(a.x+Math.pow(2,a.z)*r.wrap)*n,o=a.y*n;return Il(s,s,[i,o,0]),kl(s,s,[n/Cs,n/Cs,1]),s}upVector(e,t,r){return[0,0,1]}upVectorScale(e,t,r){return{metersToTile:1}}}class jp extends Np{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[t,r]=this.parallels=e.parallels||[29.5,45.5],n=Math.sin(_(t));this.n=(n+Math.sin(_(r)))/2,this.c=1+n*(2*this.n-n),this.r0=Math.sqrt(this.c)/this.n}project(e,t){const{n:r,c:n,r0:i}=this,o=_(e-this.center[0]),a=_(t),s=Math.sqrt(n-2*r*Math.sin(a))/r;return{x:s*Math.sin(o*r),y:s*Math.cos(o*r)-i,z:0}}unproject(e,t){const{n:r,c:n,r0:i}=this,o=i+t;let a=Math.atan2(e,Math.abs(o))*Math.sign(o);o*r<0&&(a-=Math.PI*Math.sign(e)*Math.sign(o));const s=_(this.center[0])*r;a=A(a,-Math.PI-s,Math.PI-s);const l=T(v(a/r)+this.center[0],-180,180),c=Math.asin(T((n-(e*e+o*o)*r*r)/(2*r),-1,1)),u=T(v(c),-85.051129,Vs);return new Ds(l,u)}}const Up=1.340264,Vp=-.081106,Gp=893e-6,Hp=.003796,qp=Math.sqrt(3)/2;class Wp extends Np{project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const r=Math.asin(qp*Math.sin(t)),n=r*r,i=n*n*n;return{x:.5*(e*Math.cos(r)/(qp*(Up+3*Vp*n+i*(7*Gp+9*Hp*n)))/Math.PI+.5),y:1-.5*(r*(Up+Vp*n+i*(Gp+Hp*n))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let r=t=(2*(1-t)-1)*Math.PI,n=r*r,i=n*n*n;for(let e,o,a,s=0;s<12&&(o=r*(Up+Vp*n+i*(Gp+Hp*n))-t,a=Up+3*Vp*n+i*(7*Gp+9*Hp*n),e=o/a,r=T(r-e,-Math.PI/3,Math.PI/3),n=r*r,i=n*n*n,!(Math.abs(e)<1e-12));++s);const o=qp*e*(Up+3*Vp*n+i*(7*Gp+9*Hp*n))/Math.cos(r),a=Math.asin(Math.sin(r)/qp),s=T(180*o/Math.PI,-180,180),l=T(180*a/Math.PI,-85.051129,Vs);return new Ds(s,l)}}class Zp extends Np{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}unproject(e,t){const r=360*(e-.5),n=T(360*(.5-t),-85.051129,Vs);return new Ds(r,n)}}const Xp=Math.PI/2;function Yp(e){return Math.tan((Xp+e)/2)}class Kp extends Np{constructor(e){super(e),this.center=e.center||[0,30];const[t,r]=this.parallels=e.parallels||[30,30];let n=_(t),i=_(r);this.southernCenter=n+i<0,this.southernCenter&&(n=-n,i=-i);const o=Math.cos(n),a=Yp(n);this.n=n===i?Math.sin(n):Math.log(o/Math.cos(i))/Math.log(Yp(i)/a),this.f=o*Math.pow(Yp(n),this.n)/this.n}project(e,t){t=_(t),this.southernCenter&&(t=-t),e=_(e-this.center[0]);const r=1e-6,{n:n,f:i}=this;i>0?t<-Xp+r&&(t=-Xp+r):t>Xp-r&&(t=Xp-r);const o=i/Math.pow(Yp(t),n);let a=o*Math.sin(n*e),s=i-o*Math.cos(n*e);return a=.5*(a/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:a,y:this.southernCenter?s:1-s,z:0}}unproject(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;const{n:r,f:n}=this,i=n-t,o=Math.sign(i),a=Math.sign(r)*Math.sqrt(e*e+i*i);let s=Math.atan2(e,Math.abs(i))*o;i*r<0&&(s-=Math.PI*Math.sign(e)*o);const l=T(v(s/r)+this.center[0],-180,180),c=T(v(2*Math.atan(Math.pow(n/a,1/r))-Xp),-85.051129,Vs);return new Ds(l,this.southernCenter?-c:c)}}class Jp extends Np{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,t){return{x:Rs(e),y:Bs(t),z:0}}unproject(e,t){const r=Ns(e),n=js(t);return new Ds(r,n)}}const Qp=_(Vs);class $p extends Np{project(e,t){const r=(t=_(t))*t,n=r*r;return{x:.5*((e=_(e))*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let r=t=(2*(1-t)-1)*Math.PI,n=25,i=0,o=r*r;do{o=r*r;const e=o*o;i=(r*(1.007226+o*(.015085+e*(.028874*o-.044475-.005916*e)))-t)/(1.007226+o*(.045255+e*(.259866*o-.311325-.005916*11*e))),r=T(r-i,-Qp,Qp)}while(Math.abs(i)>1e-6&&--n>0);o=r*r;const a=T(v(e/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),s=v(r);return new Ds(a,s)}}const ef=_(Vs);class tf extends Np{project(e,t){t=_(t),e=_(e);const r=Math.cos(t),n=2/Math.PI,i=Math.acos(r*Math.cos(e/2)),o=Math.sin(i)/i,a=.5*(e*n+2*r*Math.sin(e/2)/o)||0,s=.5*(t+Math.sin(t)/o)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(e,t){let r=e=(2*e-.5)*Math.PI,n=t=(2*(1-t)-1)*Math.PI,i=25;const o=1e-6;let a=0,s=0;do{const i=Math.cos(n),o=Math.sin(n),l=2*o*i,c=o*o,u=i*i,h=Math.cos(r/2),d=Math.sin(r/2),p=2*h*d,f=d*d,m=1-u*h*h,g=m?1/m:0,y=m?Math.acos(i*h)*Math.sqrt(1/m):0,_=.5*(2*y*i*d+2*r/Math.PI)-e,v=.5*(y*o+n)-t,x=.5*g*(u*f+y*i*h*c)+1/Math.PI,b=g*(p*l/4-y*o*d),w=.125*g*(l*d-y*o*u*p),E=.5*g*(c*h+y*f*i)+.5,S=b*w-E*x;a=(v*b-_*E)/S,s=(_*w-v*x)/S,r=T(r-a,-Math.PI,Math.PI),n=T(n-s,-ef,ef)}while((Math.abs(a)>o||Math.abs(s)>o)&&--i>0);return new Ds(v(r),v(n))}}class rf extends Np{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(_(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){const{scale:r,cosPhi:n}=this;return{x:_(e)*n*r+.5,y:-Math.sin(_(t))/n*r+.5,z:0}}unproject(e,t){const{scale:r,cosPhi:n}=this,i=-(t-.5)/r,o=T(v((e-.5)/r)/n,-180,180),a=Math.asin(T(i*n,-1,1)),s=T(v(a),-85.051129,Vs);return new Ds(o,s)}}class nf extends Jp{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(e,t,r){const n=Sp(e,t,r);return Yl(n,n,Ip(yp(r))),{x:n[0],y:n[1],z:n[2]}}locationPoint(e,t){const r=Tp(t.lat,t.lng),n=Wl([],r),i=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;ql(r,r,n,Os(1,0)*Cs*i);const o=Sl(new Float64Array(16));return Pl(o,e.pixelMatrix,e.globeMatrix),Yl(r,r,o),new f(r[0],r[1])}pixelsPerMeter(e,t){return Os(1,0)*t}pixelSpaceConversion(e,t,r){const n=Os(1,e)*t,i=Ar(Os(1,45)*t,n,r);return this.pixelsPerMeter(e,t)/i}createTileMatrix(e,t,r){const n=kp(yp(r.canonical));return Pl(new Float64Array(16),e.globeMatrix,n)}createInversionMatrix(e,t){const{center:r}=e,n=Ip(yp(t));return Ml(n,n,_(r.lng)),Cl(n,n,_(r.lat)),kl(n,n,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(n)}pointCoordinate(e,t,r,n){return fp(e,t,r,!0)||new Hs(0,0)}pointCoordinate3D(e,t,r){const n=this.pointCoordinate(e,t,r,0);return[n.x,n.y,n.z]}isPointAboveHorizon(e,t){return!fp(e,t.x,t.y,!1)}farthestPixelDistance(e){const t=function(e,t){const r=e.cameraToCenterDistance,n=e._centerAltitude*t,i=e._camera,o=e._camera.forward(),a=Nl([],Hl([],o,-r),[0,0,n]),s=e.worldSize/(2*Math.PI),l=[0,0,-s],c=e.width/e.height,u=Math.tan(e.fovAboveCenter),h=Hl([],i.up(),u),d=Hl([],i.right(),u*c),p=Wl([],Nl([],Nl([],o,h),d)),f=[];let m;if(new cc(a,p).closestPointOnSphere(l,s,f)){const t=Nl([],f,l),r=Ql([],t,a);m=Math.cos(e.fovAboveCenter)*Bl(r)}else{const e=Ql([],a,l),t=Ql([],l,a);Wl(t,t);const r=Bl(e)-s;m=Math.sqrt(r*(r+2*s));const n=Math.acos(m/(s+r))-Math.acos(Zl(o,t));m*=Math.cos(n)}return 1.01*m}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),r=Mp(e.zoom);if(r>0){const n=Rp(e,Os(1,e.center.lat)*e.worldSize),i=e.worldSize/(2*Math.PI),o=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Ar(t,n+i*(1-Math.cos(o)),Math.pow(r,10))}return t}upVector(e,t,r){return Sp(t,r,e,1)}upVectorScale(e){return{metersToTile:lp*Ap(yp(e))}}}function of(e){const t=e.parallels,r=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new Jp(e);case"equirectangular":return new Zp(e);case"naturalEarth":return new $p(e);case"equalEarth":return new Wp(e);case"winkelTripel":return new tf(e);case"albers":return r?new rf(e):new jp(e);case"lambertConformalConic":return r?new rf(e):new Kp(e);case"globe":return new nf(e)}throw new Error(`Invalid projection name: ${e.name}`)}const af=Cu.types,sf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lf(e,t,r,n,i,o,a,s,l,c,u,h,d){const p=s?Math.min(Jd,Math.round(s[0])):0,f=s?Math.min(Jd,Math.round(s[1])):0;e.emplaceBack(t,r,Math.round(32*n),Math.round(32*i),o,a,(p<<1)+(l?1:0),f,16*c,16*u,256*h,256*d)}function cf(e,t,r,n,i,o,a){e.emplaceBack(t,r,n,i,o,a)}function uf(e,t,r,n,i){e.emplaceBack(t,r,n,i),e.emplaceBack(t,r,n,i),e.emplaceBack(t,r,n,i),e.emplaceBack(t,r,n,i)}function hf(e){for(const t of e.sections)if(Po(t.text))return!0;return!1}class df{constructor(e){this.layoutVertexArray=new ma,this.indexArray=new Ea,this.programConfigurations=e,this.segments=new ks,this.dynamicLayoutVertexArray=new ha,this.opacityVertexArray=new ya,this.placedSymbolArray=new Ba,this.globeExtVertexArray=new ga}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,fh.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,gh.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,sf,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,mh.members,!0)),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}ji(df,"SymbolBuffers");class pf{constructor(e,t,r){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new r,this.segments=new ks,this.collisionVertexArray=new ba,this.collisionVertexArrayExt=new wa}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,yh.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,_h.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}ji(pf,"CollisionBuffers");class ff{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Sl([]),this.placementViewportMatrix=Sl([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Eh(this.zoom,t["text-size"]),this.iconSizeData=Eh(this.zoom,t["icon-size"]);const r=this.layers[0].layout,n=r.get("symbol-sort-key"),i=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get("text-writing-mode").map((e=>od[e])),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new df(new vs(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new df(new vs(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new ja,this.lineVertexArray=new Ua,this.symbolInstances=new Na}calculateGlyphDependencies(e,t,r,n,i){for(let r=0;r<e.length;r++)if(t[e.charCodeAt(r)]=!0,n&&i){const n=Ih[e.charAt(r)];n&&(t[n.charCodeAt(0)]=!0)}}populate(e,t,r,n){const i=this.layers[0],o=i.layout,a="globe"===this.projection.name,s=o.get("text-font"),l=o.get("text-field"),c=o.get("icon-image"),u=("constant"!==l.value.kind||l.value.value instanceof kt&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),h="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,d=o.get("symbol-sort-key");if(this.features=[],!u&&!h)return;const p=t.iconDependencies,f=t.glyphDependencies,m=t.availableImages,g=new jo(this.zoom);for(const{feature:t,id:l,index:c,sourceLayerIndex:y}of e){const e=i._featureFilter.needGeometry,_=$s(t,e);if(!i._featureFilter.filter(g,_,r))continue;if(e||(_.geometry=Qs(t,r,n)),a&&1!==t.type&&r.z<=5){const e=_.geometry,t=.98078528056,n=(e,n)=>Zl(Sp(e.x,e.y,r,1),Sp(n.x,n.y,r,1))<t;for(let t=0;t<e.length;t++)e[t]=Xs(e[t],n)}let v,x;if(u){const e=i.getValueAndResolveTokens("text-field",_,r,m),t=kt.factory(e);hf(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Bo()||this.hasRTLText&&No.isParsed())&&(v=Ph(t,i,_))}if(h){const e=i.getValueAndResolveTokens("icon-image",_,r,m);x=e instanceof Ct?e:Ct.fromString(e)}if(!v&&!x)continue;const b=this.sortFeaturesByKey?d.evaluate(_,{},r):void 0;if(this.features.push({id:l,text:v,icon:x,index:c,sourceLayerIndex:y,geometry:_.geometry,properties:t.properties,type:af[t.type],sortKey:b}),x&&(p[x.name]=!0),v){const e=s.evaluate(_,{},r).join(","),t="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(od.vertical)>=0;for(const r of v.sections)if(r.image)p[r.image.name]=!0;else{const n=xo(v.toString()),i=r.fontStack||e,o=f[i]=f[i]||{};this.calculateGlyphDependencies(r.text,o,t,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},r={},n=[];let i=0;function o(t){n.push(e[t]),i++}function a(e,t,i){const o=r[e];return delete r[e],r[t]=o,n[o].geometry[0].pop(),n[o].geometry[0]=n[o].geometry[0].concat(i[0]),o}function s(e,r,i){const o=t[r];return delete t[r],t[e]=o,n[o].geometry[0].shift(),n[o].geometry[0]=i[0].concat(n[o].geometry[0]),o}function l(e,t,r){const n=r?t[0][t[0].length-1]:t[0][0];return`${e}:${n.x}:${n.y}`}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in r&&f in t&&r[p]!==t[f]){const e=s(p,f,h),i=a(p,f,n[e].geometry);delete t[p],delete r[f],r[l(d,n[i].geometry,!0)]=i,n[e].geometry=null}else p in r?a(p,f,h):f in t?s(p,f,h):(o(c),t[p]=i-1,r[f]=i-1)}return n.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,r,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=of(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const r=this.lineVertexArray.length,n=e.segment;if(void 0!==n){let r=e.dist(t[n+1]),i=e.dist(t[n]);const o={};for(let e=n+1;e<t.length;e++)o[e]={x:t[e].x,y:t[e].y,tileUnitDistanceFromAnchor:r},e<t.length-1&&(r+=t[e+1].dist(t[e]));for(let e=n||0;e>=0;e--)o[e]={x:t[e].x,y:t[e].y,tileUnitDistanceFromAnchor:i},e>0&&(i+=t[e-1].dist(t[e]));for(let e=0;e<t.length;e++){const t=o[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(e,t,r,n,i,o,a,s,l,c,u,h,d,p){const f=e.indexArray,m=e.layoutVertexArray,g=e.globeExtVertexArray,y=e.segments.prepareSegment(4*t.length,m,f,this.canOverlap?o.sortKey:void 0),_=this.glyphOffsetArray.length,v=y.vertexLength,x=this.allowVerticalPlacement&&a===od.vertical?Math.PI/2:0,b=o.text&&o.text.sections;for(let n=0;n<t.length;n++){const{tl:i,tr:a,bl:c,br:u,tex:h,pixelOffsetTL:_,pixelOffsetBR:v,minFontScaleX:w,minFontScaleY:E,glyphOffset:T,isSDF:S,sectionIndex:A}=t[n],P=y.vertexLength,I=T[1];if(lf(m,l.x,l.y,i.x,I+i.y,h.x,h.y,r,S,_.x,_.y,w,E),lf(m,l.x,l.y,a.x,I+a.y,h.x+h.w,h.y,r,S,v.x,_.y,w,E),lf(m,l.x,l.y,c.x,I+c.y,h.x,h.y+h.h,r,S,_.x,v.y,w,E),lf(m,l.x,l.y,u.x,I+u.y,h.x+h.w,h.y+h.h,r,S,v.x,v.y,w,E),s){const t=s.anchor,r=s.up;cf(g,t.x,t.y,t.z,r[0],r[1],r[2]),cf(g,t.x,t.y,t.z,r[0],r[1],r[2]),cf(g,t.x,t.y,t.z,r[0],r[1],r[2]),cf(g,t.x,t.y,t.z,r[0],r[1],r[2]),uf(e.dynamicLayoutVertexArray,t.x,t.y,t.z,x)}else uf(e.dynamicLayoutVertexArray,l.x,l.y,l.z,x);f.emplaceBack(P,P+1,P+2),f.emplaceBack(P+1,P+2,P+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(T[0]),n!==t.length-1&&A===t[n+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,o,o.index,{},d,p,b&&b[A])}const w=s?s.anchor:l;e.placedSymbolArray.emplaceBack(w.x,w.y,w.z,l.x,l.y,_,this.glyphOffsetArray.length-_,v,c,u,l.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],a,0,!1,0,h,0)}_commitLayoutVertex(e,t,r,n,i,o,a){e.emplaceBack(t,r,n,i,o,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(e,t,r,n,i,o,a){const s=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),l=s.vertexLength,c=a.tileAnchorX,u=a.tileAnchorY;for(let e=0;e<4;e++)r.collisionVertexArray.emplaceBack(0,0,0,0);r.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),r.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),r.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),r.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(r.layoutVertexArray,n,i,o,c,u,new f(e.x1,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,i,o,c,u,new f(e.x2,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,i,o,c,u,new f(e.x2,e.y2)),this._commitLayoutVertex(r.layoutVertexArray,n,i,o,c,u,new f(e.x1,e.y2)),s.vertexLength+=4;const h=r.indexArray;h.emplaceBack(l,l+1),h.emplaceBack(l+1,l+2),h.emplaceBack(l+2,l+3),h.emplaceBack(l+3,l),s.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,r,n,i,o){for(let a=n;a<i;a++){const n=r.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._addCollisionDebugVertices(n,i,this.textCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(e,t,r,n,i,o){for(let a=n;a<i;a++){const n=r.get(a),i=this.getSymbolInstanceIconSize(e,t,o.placedIconSymbolIndex);this._addCollisionDebugVertices(n,i,this.iconCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,o)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pf(va,vh.members,ka),this.iconCollisionBox=new pf(va,vh.members,ka);const r=Sh(this.iconSizeData,e),n=Sh(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(n,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(n,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(r,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(r,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(e,t,r,n){const i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:n),o=Th(this.textSizeData,e,i)/bh;return this.tilePixelRatio*o}getSymbolInstanceIconSize(e,t,r){const n=this.icon.placedSymbolArray.get(r),i=Th(this.iconSizeData,e,n);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(e,t,r){e.emplaceBack(t,-r,-r),e.emplaceBack(t,r,-r),e.emplaceBack(t,r,r),e.emplaceBack(t,-r,r)}_updateTextDebugCollisionBoxes(e,t,r,n,i,o){for(let a=n;a<i;a++){const n=r.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,n.padding)}}_updateIconDebugCollisionBoxes(e,t,r,n,i,o){for(let a=n;a<i;a++){const n=r.get(a),i=this.getSymbolInstanceIconSize(e,t,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,n.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const r=Sh(this.iconSizeData,e),n=Sh(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(n,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(n,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(r,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(r,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,r,n,i,o,a,s,l){const c={};for(let n=t;n<r;n++){const t=e.get(n);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,padding:t.padding,projectedAnchorX:t.projectedAnchorX,projectedAnchorY:t.projectedAnchorY,projectedAnchorZ:t.projectedAnchorZ,tileAnchorX:t.tileAnchorX,tileAnchorY:t.tileAnchorY},c.textFeatureIndex=t.featureIndex;break}for(let t=n;t<i;t++){const r=e.get(t);c.verticalTextBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,padding:r.padding,projectedAnchorX:r.projectedAnchorX,projectedAnchorY:r.projectedAnchorY,projectedAnchorZ:r.projectedAnchorZ,tileAnchorX:r.tileAnchorX,tileAnchorY:r.tileAnchorY},c.verticalTextFeatureIndex=r.featureIndex;break}for(let t=o;t<a;t++){const r=e.get(t);c.iconBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,padding:r.padding,projectedAnchorX:r.projectedAnchorX,projectedAnchorY:r.projectedAnchorY,projectedAnchorZ:r.projectedAnchorZ,tileAnchorX:r.tileAnchorX,tileAnchorY:r.tileAnchorY},c.iconFeatureIndex=r.featureIndex;break}for(let t=s;t<l;t++){const r=e.get(t);c.verticalIconBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,padding:r.padding,projectedAnchorX:r.projectedAnchorX,projectedAnchorY:r.projectedAnchorY,projectedAnchorZ:r.projectedAnchorZ,tileAnchorX:r.tileAnchorX,tileAnchorY:r.tileAnchorY},c.verticalIconFeatureIndex=r.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const r=e.placedSymbolArray.get(t),n=r.vertexStartIndex+4*r.numGlyphs;for(let t=r.vertexStartIndex;t<n;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),r=Math.cos(e),n=[],i=[],o=[];for(let e=0;e<this.symbolInstances.length;++e){o.push(e);const a=this.symbolInstances.get(e);n.push(0|Math.round(t*a.tileAnchorX+r*a.tileAnchorY)),i.push(a.featureIndex)}return o.sort(((e,t)=>n[e]-n[t]||i[t]-i[e])),o}addToSortKeyRanges(e,t){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===t?r.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,r)=>{e>=0&&r.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ji(ff,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),ff.MAX_GLYPHS=65535,ff.addDynamicAttributes=uf;const mf=new ea({"symbol-placement":new Yo(Ye.layout_symbol["symbol-placement"]),"symbol-spacing":new Yo(Ye.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Yo(Ye.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ko(Ye.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Yo(Ye.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Yo(Ye.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Yo(Ye.layout_symbol["icon-ignore-placement"]),"icon-optional":new Yo(Ye.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Yo(Ye.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ko(Ye.layout_symbol["icon-size"]),"icon-text-fit":new Yo(Ye.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yo(Ye.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ko(Ye.layout_symbol["icon-image"]),"icon-rotate":new Ko(Ye.layout_symbol["icon-rotate"]),"icon-padding":new Yo(Ye.layout_symbol["icon-padding"]),"icon-keep-upright":new Yo(Ye.layout_symbol["icon-keep-upright"]),"icon-offset":new Ko(Ye.layout_symbol["icon-offset"]),"icon-anchor":new Ko(Ye.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Yo(Ye.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Yo(Ye.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Yo(Ye.layout_symbol["text-rotation-alignment"]),"text-field":new Ko(Ye.layout_symbol["text-field"]),"text-font":new Ko(Ye.layout_symbol["text-font"]),"text-size":new Ko(Ye.layout_symbol["text-size"]),"text-max-width":new Ko(Ye.layout_symbol["text-max-width"]),"text-line-height":new Ko(Ye.layout_symbol["text-line-height"]),"text-letter-spacing":new Ko(Ye.layout_symbol["text-letter-spacing"]),"text-justify":new Ko(Ye.layout_symbol["text-justify"]),"text-radial-offset":new Ko(Ye.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Yo(Ye.layout_symbol["text-variable-anchor"]),"text-anchor":new Ko(Ye.layout_symbol["text-anchor"]),"text-max-angle":new Yo(Ye.layout_symbol["text-max-angle"]),"text-writing-mode":new Yo(Ye.layout_symbol["text-writing-mode"]),"text-rotate":new Ko(Ye.layout_symbol["text-rotate"]),"text-padding":new Yo(Ye.layout_symbol["text-padding"]),"text-keep-upright":new Yo(Ye.layout_symbol["text-keep-upright"]),"text-transform":new Ko(Ye.layout_symbol["text-transform"]),"text-offset":new Ko(Ye.layout_symbol["text-offset"]),"text-allow-overlap":new Yo(Ye.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Yo(Ye.layout_symbol["text-ignore-placement"]),"text-optional":new Yo(Ye.layout_symbol["text-optional"])});var gf={paint:new ea({"icon-opacity":new Ko(Ye.paint_symbol["icon-opacity"]),"icon-color":new Ko(Ye.paint_symbol["icon-color"]),"icon-halo-color":new Ko(Ye.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ko(Ye.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ko(Ye.paint_symbol["icon-halo-blur"]),"icon-translate":new Yo(Ye.paint_symbol["icon-translate"]),"icon-translate-anchor":new Yo(Ye.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ko(Ye.paint_symbol["text-opacity"]),"text-color":new Ko(Ye.paint_symbol["text-color"],{runtimeType:st,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Ko(Ye.paint_symbol["text-halo-color"]),"text-halo-width":new Ko(Ye.paint_symbol["text-halo-width"]),"text-halo-blur":new Ko(Ye.paint_symbol["text-halo-blur"]),"text-translate":new Yo(Ye.paint_symbol["text-translate"]),"text-translate-anchor":new Yo(Ye.paint_symbol["text-translate-anchor"])}),layout:mf};class yf{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:nt,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ji(yf,"FormatSectionOverride",{omit:["defaultValue"]});class _f extends As{constructor(e){super(e,gf)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const r=this.layout.get("text-writing-mode");if(r){const e=[];for(const t of r)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,r,n){const i=this.layout.get(e).evaluate(t,{},r,n),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||Gn(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,r)=>r in e?String(e[r]):""))}(t.properties,i)}createBucket(e){return new ff(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of gf.paint.overridableProperties){if(!_f.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),r=new yf(t),n=new Vn(r,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new qn("source",n):new Wn("composite",n,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new Zo(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&_f.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const r=e.get("text-field"),n=gf.paint.properties[t];let i=!1;const o=e=>{for(const t of e)if(n.overrides&&n.overrides.hasOverride(t))return void(i=!0)};if("constant"===r.value.kind&&r.value.value instanceof kt)o(r.value.value.sections);else if("source"===r.value.kind){const e=t=>{i||(t instanceof Rt&&Dt(t.value)===ht?o(t.value.sections):t instanceof Ut?o(t.sections):t.eachChild(e))},t=r.value;t._styleExpression&&e(t._styleExpression.expression)}return i}getProgramConfiguration(e){return new _s(this,e)}}var vf={paint:new ea({"background-color":new Yo(Ye.paint_background["background-color"]),"background-pattern":new Qo(Ye.paint_background["background-pattern"]),"background-opacity":new Yo(Ye.paint_background["background-opacity"])})},xf={paint:new ea({"raster-opacity":new Yo(Ye.paint_raster["raster-opacity"]),"raster-hue-rotate":new Yo(Ye.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Yo(Ye.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Yo(Ye.paint_raster["raster-brightness-max"]),"raster-saturation":new Yo(Ye.paint_raster["raster-saturation"]),"raster-contrast":new Yo(Ye.paint_raster["raster-contrast"]),"raster-resampling":new Yo(Ye.paint_raster["raster-resampling"]),"raster-fade-duration":new Yo(Ye.paint_raster["raster-fade-duration"])})};class bf extends As{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var wf={paint:new ea({"sky-type":new Yo(Ye.paint_sky["sky-type"]),"sky-atmosphere-sun":new Yo(Ye.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Yo(Ye.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Yo(Ye.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Yo(Ye.paint_sky["sky-gradient-radius"]),"sky-gradient":new $o(Ye.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Yo(Ye.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Yo(Ye.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Yo(Ye.paint_sky["sky-opacity"])})};function Ef(e,t,r){const n=[0,0,1],i=oc([]);return sc(i,i,r?-_(e)+Math.PI:_(e)),ac(i,i,-_(t)),Kl(n,n,i),Wl(n,n)}const Tf={circle:class extends As{constructor(e){super(e,xl)}createBucket(e){return new rl(e)}queryRadius(e){const t=e;return ml("circle-radius",this,t)+ml("circle-stroke-width",this,t)+gl(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,r,n,i,o,a,s){const l=_l(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,r)+this.paint.get("circle-stroke-width").evaluate(t,r);return pc(e,n,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new _s(this,e)}},heatmap:class extends As{createBucket(e){return new _c(e)}constructor(e){super(e,Tc),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Sc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return ml("heatmap-radius",this,e)}queryIntersectsFeature(e,t,r,n,i,o,a,s){const l=this.paint.get("heatmap-radius").evaluate(t,r);return pc(e,n,o,a,s,!0,!0,new f(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new _s(this,e)}},hillshade:class extends As{constructor(e){super(e,Ac)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends As{constructor(e){super(e,du)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),r=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(e){return new _s(this,e)}recalculate(e,t){super.recalculate(e,t);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new uu(e)}queryRadius(){return gl(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,r,n,i,o){return!e.queryGeometry.isAboveHorizon&&ol(yl(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),n)}isTileClipped(){return!0}},"fill-extrusion":class extends As{constructor(e){super(e,Zu)}createBucket(e){return new Bu(e)}queryRadius(){return gl(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new _s(this,e)}queryIntersectsFeature(e,t,r,n,i,o,a,s,l){const c=_l(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(t,r),h=this.paint.get("fill-extrusion-base").evaluate(t,r),d=[0,0],p=s&&o.elevation,m=o.elevation?o.elevation.exaggeration():1,g=e.tile.getBucket(this);if(p&&g instanceof Bu){const e=g.centroidVertexArray,t=l+1;if(t<e.length){const r=e.get(t);d[0]=r.a_centroid_pos0,d[1]=r.a_centroid_pos1}}if(0===d[0]&&1===d[1])return!1;"globe"===o.projection.name&&(n=qu([n],[new f(0,0),new f(Cs,Cs)],e.tileID.canonical).map((e=>e.polygon)).flat());const y=p?s:null,[_,v]=function(e,t,r,n,i,o,a,s,l,c,u){return"globe"===e.projection.name?function(e,t,r,n,i,o,a,s,l,c,u){const h=[],d=[],p=e.projection.upVectorScale(u,e.center.lat,e.worldSize).metersToTile,f=[0,0,0,1],m=[0,0,0,1],g=(e,t,r,n)=>{e[0]=t,e[1]=r,e[2]=n,e[3]=1},y=Hu();r>0&&(r+=y),n+=y;for(const y of t){const t=[],_=[];for(const h of y){const d=h.x+i.x,y=h.y+i.y,v=e.projection.projectTilePoint(d,y,u),x=e.projection.upVector(u,h.x,h.y);let b=r,w=n;if(a){const e=rh(d,y,r,n,a,s,l,c);b+=e.base,w+=e.top}0!==r?g(f,v.x+x[0]*p*b,v.y+x[1]*p*b,v.z+x[2]*p*b):g(f,v.x,v.y,v.z),g(m,v.x+x[0]*p*w,v.y+x[1]*p*w,v.z+x[2]*p*w),Yl(f,f,o),Yl(m,m,o),t.push(new $u(f[0],f[1],f[2])),_.push(new $u(m[0],m[1],m[2]))}h.push(t),d.push(_)}return[h,d]}(e,t,r,n,i,o,a,s,l,c,u):a?function(e,t,r,n,i,o,a,s,l){const c=[],u=[],h=[0,0,0,1];for(const d of e){const e=[],p=[];for(const c of d){const u=c.x+n.x,d=c.y+n.y,f=rh(u,d,t,r,o,a,s,l);h[0]=u,h[1]=d,h[2]=f.base,h[3]=1,nc(h,h,i),h[3]=Math.max(h[3],1e-5);const m=new $u(h[0]/h[3],h[1]/h[3],h[2]/h[3]);h[0]=u,h[1]=d,h[2]=f.top,h[3]=1,nc(h,h,i),h[3]=Math.max(h[3],1e-5);const g=new $u(h[0]/h[3],h[1]/h[3],h[2]/h[3]);e.push(m),p.push(g)}c.push(e),u.push(p)}return[c,u]}(t,r,n,i,o,a,s,l,c):function(e,t,r,n,i){const o=[],a=[],s=i[8]*t,l=i[9]*t,c=i[10]*t,u=i[11]*t,h=i[8]*r,d=i[9]*r,p=i[10]*r,f=i[11]*r;for(const t of e){const e=[],r=[];for(const o of t){const t=o.x+n.x,a=o.y+n.y,m=i[0]*t+i[4]*a+i[12],g=i[1]*t+i[5]*a+i[13],y=i[2]*t+i[6]*a+i[14],_=i[3]*t+i[7]*a+i[15],v=m+s,x=g+l,b=y+c,w=Math.max(_+u,1e-5),E=m+h,T=g+d,S=y+p,A=Math.max(_+f,1e-5);e.push(new $u(v/w,x/w,b/w)),r.push(new $u(E/A,T/A,S/A))}o.push(e),a.push(r)}return[o,a]}(t,r,n,i,o)}(o,n,h,u,c,a,y,d,m,o.center.lat,e.tileID.canonical),x=e.queryGeometry;return function(e,t,r){let n=1/0;ol(r,t)&&(n=th(r,t[0]));for(let i=0;i<t.length;i++){const o=t[i],a=e[i];for(let e=0;e<o.length-1;e++){const t=o[e],i=[t,o[e+1],a[e+1],a[e],t];nl(r,i)&&(n=Math.min(n,th(r,i)))}}return n!==1/0&&n}(_,v,x.isPointQuery()?x.screenBounds:x.screenGeometry)}},line:class extends As{constructor(e){super(e,hh),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Sr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=dh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new ch(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(e){return new _s(this,e)}queryRadius(e){const t=e,r=ph(ml("line-width",this,t),ml("line-gap-width",this,t)),n=ml("line-offset",this,t);return r/2+Math.abs(n)+gl(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,r,n,i,o){if(e.queryGeometry.isAboveHorizon)return!1;const a=yl(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*ph(this.paint.get("line-width").evaluate(t,r),this.paint.get("line-gap-width").evaluate(t,r)),l=this.paint.get("line-offset").evaluate(t,r);return l&&(n=function(e,t){const r=[],n=new f(0,0);for(let i=0;i<e.length;i++){const o=e[i],a=[];for(let e=0;e<o.length;e++){const r=o[e-1],i=o[e],s=o[e+1],l=0===e?n:i.sub(r)._unit()._perp(),c=e===o.length-1?n:s.sub(i)._unit()._perp(),u=l._add(c)._unit();u._mult(1/(u.x*c.x+u.y*c.y)),a.push(u._mult(t)._add(i))}r.push(a)}return r}(n,l*e.pixelToTileUnitsFactor)),function(e,t,r){for(let n=0;n<t.length;n++){const i=t[n];if(e.length>=3)for(let t=0;t<i.length;t++)if(dl(e,i[t]))return!0;if(al(e,i,r))return!0}return!1}(a,n,s)}isTileClipped(){return!0}},symbol:_f,background:class extends As{constructor(e){super(e,vf)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends As{constructor(e){super(e,xf)}getProgramIds(){return["raster"]}},sky:class extends As{constructor(e){super(e,wf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Sc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if("atmosphere"===this.paint.get("sky-type")){const r=this.paint.get("sky-atmosphere-sun"),n=!r,i=e.style.light,o=i.properties.get("position");return n&&"viewport"===i.properties.get("anchor")&&U("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),n?Ef(o.azimuthal,90-o.polar,t):Ef(r[0],90-r[1],t)}const r=this.paint.get("sky-gradient-center");return Ef(r[0],90-r[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}};class Sf{constructor(e,t,r,n){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(t,n)}update(e,r,n){const{width:i,height:o}=e,{context:a}=this,{gl:s}=a,{HTMLImageElement:l,HTMLCanvasElement:c,HTMLVideoElement:u,ImageData:h,ImageBitmap:d}=t;if(s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!r||!1!==r.premultiply)),n||this.size&&this.size[0]===i&&this.size[1]===o){const{x:t,y:r}=n||{x:0,y:0};e instanceof l||e instanceof c||e instanceof u||e instanceof h||d&&e instanceof d?s.texSubImage2D(s.TEXTURE_2D,0,t,r,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,r,i,o,s.RGBA,s.UNSIGNED_BYTE,e.data)}else this.size=[i,o],e instanceof l||e instanceof c||e instanceof u||e instanceof h||d&&e instanceof d?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,i,o,0,this.format,s.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t){const{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap?e===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Af{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Pf{constructor(){this.tasks={},this.taskQueue=[],F(["process"],this),this.invoker=new Af(this.process),this.nextId=0}add(e,t){const r=this.nextId++,n=function({type:e,isSymbolTile:t,zoom:r}){return r=r||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-r:"maybePrepare"===e&&t?400-r:500:200-r:100-r}(t);if(0===n){H();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[r]={fn:e,metadata:t,priority:n,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:()=>{delete this.tasks[r]}}}process(){H();try{if(this.taskQueue=this.taskQueue.filter((e=>!!this.tasks[e])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let r=0;r<this.taskQueue.length;r++){const n=this.tasks[this.taskQueue[r]];n.priority<t&&(t=n.priority,e=r)}if(null===e)return null;const r=this.taskQueue[e];return this.taskQueue.splice(e,1),r}remove(){this.invoker.remove()}}class If{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const r=e[t];this._stringToNumber[r]=t,this._numberToString[t]=r}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const kf=["tile","layer","source","sourceLayer","state"];class Cf{constructor(e,t,r,n,i){this.type="Feature",this._vectorTileFeature=e,this._z=t,this._x=r,this._y=n,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const t of kf)void 0!==this[t]&&(e[t]=this[t]);return e}}const Mf=32,zf=33,Df=new Uint16Array(8184);for(let e=0;e<2046;e++){let t=e+2,r=0,n=0,i=0,o=0,a=0,s=0;for(1&t?i=o=a=Mf:r=n=s=Mf;(t>>=1)>1;){const e=r+i>>1,l=n+o>>1;1&t?(i=r,o=n,r=a,n=s):(r=i,n=o,i=a,o=s),a=e,s=l}const l=4*e;Df[l+0]=r,Df[l+1]=n,Df[l+2]=i,Df[l+3]=o}const Lf=new Uint16Array(2178),Ff=new Uint8Array(1089),Rf=new Uint16Array(1089);function Bf(e){return 0===e?-.03125:32===e?.03125:0}var Of=oa([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Nf={type:2,extent:Cs,loadGeometry:()=>[[new f(0,0),new f(8193,0),new f(8193,8193),new f(0,8193),new f(0,0)]]};class jf{constructor(e,t,r,n,i){this.tileID=e,this.uid=M(),this.uses=0,this.tileSize=t,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",n&&n.transform&&(this.projection=n.transform.projection)}registerFadeDuration(e){const t=e+this.timeAdded;t<Ge.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Bp(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,t,r){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const r={};if(!t)return r;for(const n of e){const e=n.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){n.layers=e,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)r[t.id]=n}}return r}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof ff){if(this.hasSymbolBuckets=!0,!r)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof ff&&t.hasRTLText){this.hasRTLText=!0,No.isLoading()||No.isLoaded()||"deferred"!==Bo()||Oo();break}}this.queryPadding=0;for(const e in this.buckets){const r=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(r))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Fa}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const r=this.buckets[t];r.uploadPending()&&r.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Sf(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Sf(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Sf(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,r,n,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:n,pixelPosMatrix:a,transform:o,params:i,tileTransform:this.tileTransform},e,t,r):{}}querySourceFeatures(e,t){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const n=r.loadVTLayers(),i=t?t.sourceLayer:"",o=n._geojsonTileLayer||n[i];if(!o)return;const a=oi(t&&t.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let t=0;t<o.length;t++){const n=o.feature(t);if(a.needGeometry){const e=$s(n,!0);if(!a.filter(new jo(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new jo(this.tileID.overscaledZ),n))continue;const h=r.getId(n,i),d=new Cf(n,s,l,c,h);d.tile=u,e.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=q(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let r=!1;if(this.expirationTime>e)r=!1;else if(t)if(this.expirationTime<t)r=!0;else{const n=this.expirationTime-t;n?this.expirationTime=e+Math.max(n,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!t)return;const r=this.latestFeatureIndex.loadVTLayers(),n=t.style.listImages();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const o=this.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=r[a],l=e[a];if(!s||!l||0===Object.keys(l).length)continue;if(o.update(l,s,n,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof ch||o instanceof uu){const e=t.style._getSourceCache(o.layers[0].source);t._terrain&&t._terrain.enabled&&e&&o.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(e.id,this.tileID)}const c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ge.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Ge.now()+e}setTexture(e,t){const r=t.context,n=r.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Sf(r,e,n.RGBA,{useMipmap:!0}),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),r.extTextureFilterAnisotropic&&n.texParameterf(n.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax))}setDependencies(e,t){const r={};for(const e of t)r[e]=!0;this.dependencies[e]=r}hasDependency(e,t){for(const r of e){const e=this.dependencies[r];if(e)for(const r of t)if(e[r])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,t){if(!t||"mercator"===t.name||this._tileDebugBuffer)return;const r=Qs(Nf,this.tileID.canonical,this.tileTransform)[0],n=new sa,i=new Ca;for(let e=0;e<r.length;e++){const{x:t,y:o}=r[e];n.emplaceBack(t,o),i.emplaceBack(e)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(n,ap.members),this._tileDebugSegments=ks.simpleSegment(0,0,n.length,i.length)}_makeTileBoundsBuffers(e,t){if(this._tileBoundsBuffer||!t||"mercator"===t.name)return;const r=Qs(Nf,this.tileID.canonical,this.tileTransform)[0];let n,i;if(this.isRaster){const e=function(e,t){const r=Bp(e,t),n=Math.pow(2,e.z);for(let i=0;i<zf;i++)for(let o=0;o<zf;o++){const a=Ns((e.x+(o+Bf(o))/Mf)/n),s=js((e.y+(i+Bf(i))/Mf)/n),l=t.project(a,s),c=i*zf+o;Lf[2*c+0]=Math.round((l.x*r.scale-r.x)*Cs),Lf[2*c+1]=Math.round((l.y*r.scale-r.y)*Cs)}Ff.fill(0),Rf.fill(0);for(let e=2045;e>=0;e--){const t=4*e,r=Df[t+0],n=Df[t+1],i=Df[t+2],o=Df[t+3],a=r+i>>1,s=n+o>>1,l=a+s-n,c=s+r-a,u=n*zf+r,h=o*zf+i,d=s*zf+a,p=Math.hypot((Lf[2*u+0]+Lf[2*h+0])/2-Lf[2*d+0],(Lf[2*u+1]+Lf[2*h+1])/2-Lf[2*d+1])>=16;if(Ff[d]=Ff[d]||(p?1:0),e<1022){const e=(n+c>>1)*zf+(r+l>>1),t=(o+c>>1)*zf+(i+l>>1);Ff[d]=Ff[d]||Ff[e]||Ff[t]}}const i=new ca,o=new Ea;let a=0;function s(e,t){const r=t*zf+e;return 0===Rf[r]&&(i.emplaceBack(Lf[2*r+0],Lf[2*r+1],e*Cs/Mf,t*Cs/Mf),Rf[r]=++a),Rf[r]-1}function l(e,t,r,n,i,a){const c=e+r>>1,u=t+n>>1;if(Math.abs(e-i)+Math.abs(t-a)>1&&Ff[u*zf+c])l(i,a,e,t,c,u),l(r,n,i,a,c,u);else{const l=s(e,t),c=s(r,n),u=s(i,a);o.emplaceBack(l,c,u)}}return l(0,0,Mf,Mf,Mf,0),l(Mf,Mf,0,0,0,Mf),{vertices:i,indices:o}}(this.tileID.canonical,t);n=e.vertices,i=e.indices}else{n=new ca,i=new Ea;for(const{x:e,y:t}of r)n.emplaceBack(e,t,0,0);const e=kc.exports(n.int16,void 0,4);for(let t=0;t<e.length;t+=3)i.emplaceBack(e[t],e[t+1],e[t+2])}this._tileBoundsBuffer=e.createVertexBuffer(n,Of.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(i),this._tileBoundsSegments=ks.simpleSegment(0,0,n.length,i.length)}_makeGlobeTileDebugBuffers(e,t){const r=t.projection;if(!r||"globe"!==r.name||t.freezeTileCoverage)return;const n=this.tileID.canonical,i=Ip(vp(n,t)),o=Mp(t.zoom);let a;o>0&&(a=Al(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,n,t,i,a,o),this._makeGlobeTileDebugTextBuffer(e,n,t,i,a,o)}_globePoint(e,t,r,n,i,o,a){let s=Sp(e,t,r);if(o){const i=1<<r.z,l=Rs(n.center.lng),c=Bs(n.center.lat),u=(r.x+.5)/i-l;let h=0;u>.5?h=-1:u<-.5&&(h=1);let d=(e/Cs+r.x)/i+h,p=(t/Cs+r.y)/i;d=(d-l)*n._pixelsPerMercatorPixel+l,p=(p-c)*n._pixelsPerMercatorPixel+c;const f=[d*n.worldSize,p*n.worldSize,0];Yl(f,f,o),s=_p(s,f,a)}return Yl(s,s,i)}_makeGlobeTileDebugBorderBuffer(e,t,r,n,i,o){const a=new sa,s=new Ca,l=new la,c=(e,c,u,h,d)=>{const p=(u-e)/(d-1),f=(h-c)/(d-1),m=a.length;for(let u=0;u<d;u++){const h=e+u*p,d=c+u*f;a.emplaceBack(h,d);const g=this._globePoint(h,d,t,r,n,i,o);l.emplaceBack(g[0],g[1],g[2]),s.emplaceBack(m+u)}},u=Cs;c(0,0,u,0,16),c(u,0,u,u,16),c(u,u,0,u,16),c(0,u,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(s),this._tileDebugBuffer=e.createVertexBuffer(a,ap.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(l,op.members),this._tileDebugSegments=ks.simpleSegment(0,0,a.length,s.length)}_makeGlobeTileDebugTextBuffer(e,t,r,n,i,o){const a=new sa,s=new Ea,l=new la,c=25;s.reserve(32),a.reserve(c),l.reserve(c);const u=(e,t)=>c*e+t;for(let e=0;e<c;e++){const s=2048*e;for(let e=0;e<c;e++){const c=2048*e;a.emplaceBack(c,s);const u=this._globePoint(c,s,t,r,n,i,o);l.emplaceBack(u[0],u[1],u[2])}}for(let e=0;e<4;e++)for(let t=0;t<4;t++){const r=u(e,t),n=u(e,t+1),i=u(e+1,t),o=u(e+1,t+1);s.emplaceBack(r,n,i),s.emplaceBack(i,n,o)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(s),this._tileDebugTextBuffer=e.createVertexBuffer(a,ap.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(l,op.members),this._tileDebugTextSegments=ks.simpleSegment(0,0,c,32)}}class Uf{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,r){const n=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][n]=this.stateChanges[e][n]||{},k(this.stateChanges[e][n],r),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==n&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][n]){this.deletedStates[e][n]={};for(const t in this.state[e][n])r[t]||(this.deletedStates[e][n][t]=null)}else for(const t in r)this.deletedStates[e]&&this.deletedStates[e][n]&&null===this.deletedStates[e][n][t]&&delete this.deletedStates[e][n][t]}removeFeatureState(e,t,r){if(null===this.deletedStates[e])return;const n=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&void 0!==t)null!==this.deletedStates[e][n]&&(this.deletedStates[e][n]=this.deletedStates[e][n]||{},this.deletedStates[e][n][r]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][n])for(r in this.deletedStates[e][n]={},this.stateChanges[e][n])this.deletedStates[e][n][r]=null;else this.deletedStates[e][n]=null;else this.deletedStates[e]=null}getState(e,t){const r=String(t),n=k({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const r=this.deletedStates[e][t];if(null===r)return{};for(const e in r)delete n[e]}return n}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const r={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const t={};for(const r in this.stateChanges[e])this.state[e][r]||(this.state[e][r]={}),k(this.state[e][r],this.stateChanges[e][r]),t[r]=this.state[e][r];r[e]=t}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const t={};if(null===this.deletedStates[e])for(const r in this.state[e])t[r]={},this.state[e][r]={};else for(const r in this.deletedStates[e]){if(null===this.deletedStates[e][r])this.state[e][r]={};else for(const t of Object.keys(this.deletedStates[e][r]))delete this.state[e][r][t];t[r]=this.state[e][r]}r[e]=r[e]||{},k(r[e],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const n in e)e[n].setFeatureState(r,t)}}class Vf{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const r=this.toIdx(e,t);return{min:this.minimums[r],max:this.maximums[r]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Gf(e,t,r,n){let i=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(n[a])<1e-15){if(r[a]<e[a]||r[a]>t[a])return null}else{const s=1/n[a];let l=(e[a]-r[a])*s,c=(t[a]-r[a])*s;if(l>c){const e=l;l=c,c=e}if(l>i&&(i=l),c<o&&(o=c),i>o)return null}return i}function Hf(e,t,r,n,i,o,a,s,l,c,u){const h=n-e,d=i-t,p=o-r,f=a-e,m=s-t,g=l-r,y=u[1]*g-u[2]*m,_=u[2]*f-u[0]*g,v=u[0]*m-u[1]*f,x=h*y+d*_+p*v;if(Math.abs(x)<1e-15)return null;const b=1/x,w=c[0]-e,E=c[1]-t,T=c[2]-r,S=(w*y+E*_+T*v)*b;if(S<0||S>1)return null;const A=E*p-T*d,P=T*h-w*p,I=w*d-E*h,k=(u[0]*A+u[1]*P+u[2]*I)*b;return k<0||S+k>1?null:(f*A+m*P+g*I)*b}function qf(e,t,r){return(e-t)/(r-t)}function Wf(e,t,r,n,i,o,a,s,l){const c=1<<r,u=o-n,h=a-i,d=(e+1)/c*u+n,p=(t+0)/c*h+i,f=(t+1)/c*h+i;s[0]=(e+0)/c*u+n,s[1]=p,l[0]=d,l[1]=f}class Zf{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),r=[];let n=Math.ceil(Math.pow(2,t));const i=1/n,o=(e,t,r,n,i)=>{const o=n?1:0,a=(e+1)*r-o,s=t*r,l=(t+1)*r-o;i[0]=e*r,i[1]=s,i[2]=a,i[3]=l};let a=new Vf(n);const s=[];for(let t=0;t<n*n;t++){o(t%n,Math.floor(t/n),i,!1,s);const r=Yf(s[0],s[1],e),l=Yf(s[2],s[1],e),c=Yf(s[2],s[3],e),u=Yf(s[0],s[3],e);a.minimums.push(Math.min(r,l,c,u)),a.maximums.push(Math.max(r,l,c,u)),a.leaves.push(1)}for(r.push(a),n/=2;n>=1;n/=2){const e=r[r.length-1];a=new Vf(n);for(let t=0;t<n*n;t++){o(t%n,Math.floor(t/n),2,!0,s);const r=e.getElevation(s[0],s[1]),i=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),u=e.isLeaf(s[0],s[1]),h=e.isLeaf(s[2],s[1]),d=e.isLeaf(s[2],s[3]),p=e.isLeaf(s[0],s[3]),f=Math.min(r.min,i.min,l.min,c.min),m=Math.max(r.max,i.max,l.max,c.max),g=u&&h&&d&&p;a.maximums.push(m),a.minimums.push(f),a.leaves.push(m-f<=5&&g?1:0)}r.push(a)}return r}(this.dem),r=t.length-1,n=t[r];this._addNode(n.minimums[0],n.maximums[0],n.leaves[0]),this._construct(t,0,0,r,0)}raycastRoot(e,t,r,n,i,o,a=1){return Gf([e,t,-100],[r,n,this.maximums[0]*a],i,o)}raycast(e,t,r,n,i,o,a=1){if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,r,n,i,o,a);if(null==s)return null;const l=[],c=[],u=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:s,t:p,nodex:f,nodey:m,depth:g}=d.pop();if(this.leaves[s]){Wf(f,m,g,e,t,r,n,u,h);const s=1<<g,l=(f+0)/s,c=(f+1)/s,d=(m+0)/s,y=(m+1)/s,_=Yf(l,d,this.dem)*a,v=Yf(c,d,this.dem)*a,x=Yf(c,y,this.dem)*a,b=Yf(l,y,this.dem)*a,w=Hf(u[0],u[1],_,h[0],u[1],v,h[0],h[1],x,i,o),E=Hf(h[0],h[1],x,u[0],h[1],b,u[0],u[1],_,i,o),T=Math.min(null!==w?w:Number.MAX_VALUE,null!==E?E:Number.MAX_VALUE);if(T!==Number.MAX_VALUE)return T;{const e=ql([],i,o,p);if(Xf(_,v,b,x,qf(e[0],u[0],h[0]),qf(e[1],u[1],h[1]))>=e[2])return p}continue}let y=0;for(let d=0;d<this._siblingOffset.length;d++){Wf((f<<1)+this._siblingOffset[d][0],(m<<1)+this._siblingOffset[d][1],g+1,e,t,r,n,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[s]+d]*a;const p=Gf(u,h,i,o);if(null!=p){const e=p;l[d]=e;let t=!1;for(let r=0;r<y&&!t;r++)e>=l[c[r]]&&(c.splice(r,0,d),t=!0);t||(c[y]=d),y++}}for(let e=0;e<y;e++){const t=c[e];d.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(f<<1)+this._siblingOffset[t][0],nodey:(m<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,r){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(r),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,r,n,i){if(1===e[n].isLeaf(t,r))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=n-1,a=e[o];let s=0,l=0;for(let e=0;e<this._siblingOffset.length;e++){const n=2*t+this._siblingOffset[e][0],i=2*r+this._siblingOffset[e][1],o=a.getElevation(n,i),c=a.isLeaf(n,i),u=this._addNode(o.min,o.max,c);c&&(s|=1<<e),l||(l=u)}for(let n=0;n<this._siblingOffset.length;n++)s&1<<n||this._construct(e,2*t+this._siblingOffset[n][0],2*r+this._siblingOffset[n][1],o,l+n)}}function Xf(e,t,r,n,i,o){return Ar(Ar(e,r,o),Ar(t,n,o),i)}function Yf(e,t,r){const n=r.dim,i=T(e*n-.5,0,n-1),o=T(t*n-.5,0,n-1),a=Math.floor(i),s=Math.floor(o),l=Math.min(a+1,n-1),c=Math.min(s+1,n-1);return Xf(r.get(a,s),r.get(l,s),r.get(a,c),r.get(l,c),i-a,o-s)}const Kf={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Jf{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,r,n=!1,i=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return U(`"${r}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const o=this.dim=t.height-2,a=new Uint32Array(t.data.buffer);if(this.pixels=new Uint8Array(t.data.buffer),this.encoding=r||"mapbox",this.borderReady=n,!n){for(let e=0;e<o;e++)a[this._idx(-1,e)]=a[this._idx(0,e)],a[this._idx(o,e)]=a[this._idx(o-1,e)],a[this._idx(e,-1)]=a[this._idx(e,0)],a[this._idx(e,o)]=a[this._idx(e,o-1)];a[this._idx(-1,-1)]=a[this._idx(0,0)],a[this._idx(o,-1)]=a[this._idx(o-1,0)],a[this._idx(-1,o)]=a[this._idx(0,o-1)],a[this._idx(o,o)]=a[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Zf(this)}get(e,t,r=!1){r&&(e=T(e,-1,this.dim),t=T(t,-1,this.dim));const n=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}static getUnpackVector(e){return Kf[e]}get unpackVector(){return Kf[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}_unpackMapbox(e,t,r){return(256*e*256+256*t+r)/10-1e4}_unpackTerrarium(e,t,r){return 256*e+t+r/256-32768}static pack(e,t){const r=[0,0,0,0],n=Jf.getUnpackVector(t);let i=Math.floor((e+n[3])/n[2]);return r[2]=i%256,i=Math.floor(i/256),r[1]=i%256,i=Math.floor(i/256),r[0]=i,r}getPixels(){return new Ec({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let n=t*this.dim,i=t*this.dim+this.dim,o=r*this.dim,a=r*this.dim+this.dim;switch(t){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-r*this.dim;for(let t=o;t<a;t++)for(let r=n;r<i;r++){const n=4*this._idx(r,t),i=4*this._idx(r+s,t+l);this.pixels[n+0]=e.pixels[i+0],this.pixels[n+1]=e.pixels[i+1],this.pixels[n+2]=e.pixels[i+2],this.pixels[n+3]=e.pixels[i+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}ji(Jf,"DEMData"),ji(Zf,"DemMinMaxQuadTree",{omit:["dem"]});class Qf{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,r){const n=e.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const i={value:t,timeout:void 0};if(void 0!==r&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),r)),this.data[n].push(i),this.order.push(n),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const r=e.wrapped().key,n=void 0===t?0:this.data[r].indexOf(t),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const r in this.data)for(const n of this.data[r])e(n.value)||t.push(n);for(const e of t)this.remove(e.value.tileID,e)}}class $f{constructor(e,t,r){this.func=e,this.mask=t,this.range=r}}$f.ReadOnly=!1,$f.ReadWrite=!0,$f.disabled=new $f(519,$f.ReadOnly,[0,1]);const em=7680;class tm{constructor(e,t,r,n,i,o){this.test=e,this.ref=t,this.mask=r,this.fail=n,this.depthFail=i,this.pass=o}}tm.disabled=new tm({func:519,mask:0},0,0,em,em,em);class rm{constructor(e,t,r){this.blendFunction=e,this.blendColor=t,this.mask=r}}rm.Replace=[1,0],rm.disabled=new rm(rm.Replace,At.transparent,[!1,!1,!1,!1]),rm.unblended=new rm(rm.Replace,At.transparent,[!0,!0,!0,!0]),rm.alphaBlended=new rm([1,771],At.transparent,[!0,!0,!0,!0]);const nm=1029,im=2305;class om{constructor(e,t,r){this.enable=e,this.mode=t,this.frontFace=r}}om.disabled=new om(!1,nm,im),om.backCCW=new om(!0,nm,im),om.backCW=new om(!0,nm,2304),om.frontCW=new om(!0,1028,2304),om.frontCCW=new om(!0,1028,im);class am extends Xe{constructor(e,t,r){super(),this.id=e,this._onlySymbols=r,t.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),t.on("error",(()=>{this._sourceErrored=!0})),this._source=t,this._tiles={},this._cache=new Qf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Uf,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,(()=>{}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const r=this._tiles[t];r.upload(e),r.prepare(this.map.style.imageManager)}}getIds(){return I(this._tiles).map((e=>e.tileID)).sort(sm).map((e=>e.key))}getRenderableIds(e){const t=[];for(const r in this._tiles)this._isIdRenderable(+r,e)&&t.push(this._tiles[r]);return e?t.sort(((e,t)=>{const r=e.tileID,n=t.tileID,i=new f(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),o=new f(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||o.y-i.y||o.x-i.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(sm).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const r=this._tiles[e];r&&("loading"!==r.state&&(r.state=t),this._loadTile(r,this._tileLoaded.bind(this,r,e,t)))}_tileLoaded(e,t,r,n){if(n)if(e.state="errored",404!==n.status)this._source.fire(new Ze(n,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Ge.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new We("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let n=0;n<t.length;n++){const i=t[n];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);r(e,t),r(t,e)}}function r(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let r=t.tileID.canonical.x-e.tileID.canonical.x;const n=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,r,n),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,r,n){for(const i in this._tiles){let o=this._tiles[i];if(n[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>r)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){n[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const r=this._loadedParentTiles[e.key];return r&&r.tileID.overscaledZ>=t?r:null}for(let r=e.overscaledZ-1;r>=t;r--){const t=e.scaledTo(r),n=this._getLoadedTile(t);if(n)return n}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const r=Math.ceil(e.width/t)+1,n=Math.ceil(e.height/t)+1,i=Math.floor(r*n*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(a)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const r in this._tiles){const n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+t),e[n.tileID.key]=n}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(e,t,r){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!r)return;let n;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new Ju(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(n=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(n=n.filter((e=>this._source.hasTile(e))))):n=[];const i=this._updateRetainedTiles(n);if(lm(this._source.type)&&0!==n.length){const e={},t={},r=Object.keys(i);for(const n of r){const r=i[n],o=this._tiles[n];if(!o||o.fadeEndTime&&o.fadeEndTime<=Ge.now())continue;const a=this.findLoadedParent(r,Math.max(r.overscaledZ-am.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),e[a.tileID.key]=a.tileID),t[n]=r}const o=n[n.length-1].overscaledZ;for(const e in this._tiles){const r=this._tiles[e];if(i[e]||!r.hasData())continue;let n=r.tileID;for(;n.overscaledZ>o;){n=n.scaledTo(n.overscaledZ-1);const o=this._tiles[n.key];if(o&&o.hasData()&&t[n.key]){i[e]=r.tileID;break}}}for(const t in e)i[t]||(this._coveredTiles[t]=!0,i[t]=e[t])}for(const e in i)this._tiles[e].clearFadeHold();const o=function(e,t){const r=[];for(const n in e)n in t||r.push(n);return r}(this._tiles,i);for(const e of o){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+e)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const r={},n=e.reduce(((e,t)=>Math.min(e,t.overscaledZ)),1/0),i=e[0].overscaledZ,o=Math.max(i-am.maxOverzooming,this._source.minzoom),a=Math.max(i+am.maxUnderzooming,this._source.minzoom),s={};for(const r of e){const e=this._addTile(r);t[r.key]=r,e.hasData()||n<this._source.maxzoom&&(s[r.key]=r)}this._retainLoadedChildren(s,n,a,t);for(const n of e){let e=this._tiles[n.key];if(e.hasData())continue;if(n.canonical.z>=this._source.maxzoom){const e=n.children(this._source.maxzoom)[0],r=this.getTile(e);if(r&&r.hasData()){t[e.key]=e;continue}}else{const e=n.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let i=e.wasRequested();for(let a=n.overscaledZ-1;a>=o;--a){const o=n.scaledTo(a);if(r[o.key])break;if(r[o.key]=!0,e=this.getTile(o),!e&&i&&(e=this._addTile(o)),e&&(t[o.key]=o,i=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let r,n=this._tiles[e].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){r=this._loadedParentTiles[n.key];break}t.push(n.key);const e=n.scaledTo(n.overscaledZ-1);if(r=this._getLoadedTile(e),r)break;n=e}for(const e of t)this._loadedParentTiles[e]=r}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const r=Boolean(t);if(!r){const r=this.map?this.map.painter:null;t=new jf(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,r||this._source.fire(new We("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),r))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,t,r){const n=[],i=this.transform;if(!i)return n;const o="globe"===i.projection.name,a=Rs(i.center.lng);for(const s in this._tiles){const l=this._tiles[s];if(r&&l.clearQueryDebugViz(),l.holdingForFade())continue;let c;if(o){const e=l.tileID.canonical;if(0===e.z){const t=[Math.abs(T(a,...cm(e,-1))-a),Math.abs(T(a,...cm(e,1))-a)];c=[0,2*t.indexOf(Math.min(...t))-1]}else{const t=[Math.abs(T(a,...cm(e,-1))-a),Math.abs(T(a,...cm(e,0))-a),Math.abs(T(a,...cm(e,1))-a)];c=[t.indexOf(Math.min(...t))-1]}}else c=[0];for(const r of c){const o=e.containsTile(l,i,t,r);o&&n.push(o)}}return n}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const e of t)e.projMatrix=this.transform.calculateProjMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(lm(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=Ge.now())return!0}return!1}setFeatureState(e,t,r){this._state.updateState(e=e||"_geojsonTileLayer",t,r)}removeFeatureState(e,t,r){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,r)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,r){const n=this._tiles[e];n&&n.setDependencies(t,r)}reloadTilesForDependencies(e,t){for(const r in this._tiles)this._tiles[r].hasDependency(e,t)&&this._reloadTile(+r,"reloading");this._cache.filter((r=>!r.hasDependency(e,t)))}_preloadTiles(e,t){const r=new Map,n=Array.isArray(e)?e:[e],i=this.map.painter.terrain,o=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const e of n){const t=e.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const e of t)r.set(e.key,e);this.usedForTerrain&&e.updateElevation(!1)}P(Array.from(r.values()),((e,t)=>{const r=new jf(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(r,(e=>{"raster-dem"===this._source.type&&r.dem&&this._backfillDEM(r),t(e,r)}))}),t)}}function sm(e,t){const r=Math.abs(2*e.wrap)-+(e.wrap<0),n=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||n-r||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function lm(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function cm(e,t){const r=1<<e.z;return[e.x/r+t,(e.x+1)/r+t]}am.maxOverzooming=10,am.maxUnderzooming=3;class um{constructor(e,t,r){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=r}static create(e,t,r){const n=r||e.findDEMTileFor(t);if(!n||!n.dem)return;const i=n.dem,o=n.tileID,a=1<<t.canonical.z-o.canonical.z;return new um(n,n.tileSize/Cs/a,[(t.canonical.x/a-o.canonical.x)*i.dim,(t.canonical.y/a-o.canonical.y)*i.dim])}tileCoordToPixel(e,t){const r=t*this._scale+this._offset[1],n=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(r);return new f(n,i)}getElevationAt(e,t,r,n){const i=e*this._scale+this._offset[0],o=t*this._scale+this._offset[1],a=Math.floor(i),s=Math.floor(o),l=this._dem;return n=!!n,r?Ar(Ar(l.get(a,s,n),l.get(a,s+1,n),o-s),Ar(l.get(a+1,s,n),l.get(a+1,s+1,n),o-s),i-a):l.get(a,s,n)}getElevationAtPixel(e,t,r){return this._dem.get(e,t,!!r)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Os(1,e)*this._dem.stride}}class hm{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Bi(Cs,16,0),this.featureIndexArray=new Ga,this.promoteId=t}insert(e,t,r,n,i,o=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i,o);const s=this.grid;for(let e=0;e<t.length;e++){const r=t[e],n=[1/0,1/0,-1/0,-1/0];for(let e=0;e<r.length;e++){const t=r[e];n[0]=Math.min(n[0],t.x),n[1]=Math.min(n[1],t.y),n[2]=Math.max(n[2],t.x),n[3]=Math.max(n[3],t.y)}n[0]<Cs&&n[1]<Cs&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new ku(new Mh(this.rawTileData)).layers,this.sourceLayerCoder=new If(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t,r,n){this.loadVTLayers();const i=e.params||{},o=oi(i.filter),a=e.tileResult,s=e.transform,l=a.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((e,t,r,n)=>pl(a.bufferedTilespaceGeometry,e,t,r,n)));c.sort(pm);let u=null;s.elevation&&c.length>0&&(u=um.create(s.elevation,this.tileID));const h={};let d;for(let s=0;s<c.length;s++){const l=c[s];if(l===d)continue;d=l;const p=this.featureIndexArray.get(l);let f=null;this.loadMatchingFeature(h,p,o,i.layers,i.availableImages,t,r,n,((t,r,n,i=0)=>(f||(f=Qs(t,this.tileID.canonical,e.tileTransform)),r.queryIntersectsFeature(a,t,n,f,this.z,e.transform,e.pixelPosMatrix,u,i))))}return h}loadMatchingFeature(e,t,r,n,i,o,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:h,layoutVertexArrayOffset:d}=t,p=this.bucketLayerIDs[u];if(n&&!function(e,t){for(let r=0;r<e.length;r++)if(t.indexOf(e[r])>=0)return!0;return!1}(n,p))return;const f=this.sourceLayerCoder.decode(h),m=this.vtLayers[f].feature(c);if(r.needGeometry){const e=$s(m,!0);if(!r.filter(new jo(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!r.filter(new jo(this.tileID.overscaledZ),m))return;const g=this.getId(m,f);for(let t=0;t<p.length;t++){const r=p[t];if(n&&n.indexOf(r)<0)continue;const u=o[r];if(!u)continue;let h={};void 0!==g&&s&&(h=s.getState(u.sourceLayer||"_geojsonTileLayer",g));const f=k({},a[r]);f.paint=dm(f.paint,u.paint,m,h,i),f.layout=dm(f.layout,u.layout,m,h,i);const y=!l||l(m,u,h,d);if(!y)continue;const _=new Cf(m,this.z,this.x,this.y,g);_.layer=f;let v=e[r];void 0===v&&(v=e[r]=[]),v.push({featureIndex:c,feature:_,intersectionZ:y})}}lookupSymbolFeatures(e,t,r,n,i,o,a,s){const l={};this.loadVTLayers();const c=oi(i);for(const i of e)this.loadMatchingFeature(l,{bucketIndex:r,sourceLayerIndex:n,featureIndex:i,layoutVertexArrayOffset:0},c,o,a,s,t);return l}loadFeature(e){const{featureIndex:t,sourceLayerIndex:r}=e;this.loadVTLayers();const n=this.sourceLayerCoder.decode(r),i=this.vtFeatures[n];if(i[t])return i[t];const o=this.vtLayers[n].feature(t);return i[t]=o,o}hasLayer(e){for(const t of this.bucketLayerIDs)for(const r of t)if(e===r)return!0;return!1}getId(e,t){let r=e.id;if(this.promoteId){const n="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=n&&(r=e.properties[n]),"boolean"==typeof r&&(r=Number(r))}return r}}function dm(e,t,r,n,i){return B(e,((e,o)=>{const a=t instanceof Xo?t.get(o):null;return a&&a.evaluate?a.evaluate(r,n,i):a}))}function pm(e,t){return t-e}ji(hm,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class fm{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new wc({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const r=this.getKey(e,t);return this.positions[r]}trim(){const e=this.width,t=this.height=D(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,r){const n=[];let i=e.length%2==1?-e[e.length-1]*r:0,o=e[0]*r,a=!0;n.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let t=1;t<e.length;t++){a=!a;const l=e[t];i=s*r,s+=l,o=s*r,n.push({left:i,right:o,isDash:a,zeroLength:0===l})}return n}addRoundDash(e,t,r){const n=t/2;for(let t=-r;t<=r;t++){const i=this.width*(this.nextRow+r+t);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const d=t/r*(n+1);if(a.isDash){const e=n-Math.abs(d);h=Math.sqrt(u*u+e*e)}else h=n-Math.sqrt(u*u+d*d);this.image.data[i+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e,t){for(let t=e.length-1;t>=0;--t){const r=e[t],n=e[t+1];r.zeroLength?e.splice(t,1):n&&n.isDash===r.isDash&&(n.left=r.left,e.splice(t,1))}const r=e[0],n=e[e.length-1];r.isDash===n.isDash&&(r.left=n.left-this.width,n.right=r.right+this.width);const i=this.width*this.nextRow;let o=0,a=e[o];for(let r=0;r<this.width;r++){r/a.right>1&&(a=e[++o]);const n=Math.abs(r-a.left),s=Math.abs(r-a.right),l=Math.min(n,s);this.image.data[i+r]=Math.max(0,Math.min(255,(a.isDash?l:-l)+t+128))}}addDash(e,t){const r=this.getKey(e,t);if(this.positions[r])return this.positions[r];const n="round"===t,i=n?7:0,o=2*i+1;if(this.nextRow+o>this.height)return U("LineAtlas out of space"),null;0===e.length&&e.push(1);let a=0;for(let t=0;t<e.length;t++)e[t]<0&&(U("Negative value is found in line dasharray, replacing values with 0"),e[t]=0),a+=e[t];if(0!==a){const r=this.width/a,o=this.getDashRanges(e,this.width,r);n?this.addRoundDash(o,r,i):this.addRegularDash(o,"square"===t?.5*r:0)}const s=this.nextRow+i;this.nextRow+=o;const l={tl:[s,i],br:[a,0]};return this.positions[r]=l,l}}ji(fm,"LineAtlas");class mm{constructor(e){const t={},r=[];for(const n in e){const i=e[n],o=t[n]={};for(const e in i.glyphs){const t=i.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const n=t.metrics.localGlyph?2:1,a={x:0,y:0,w:t.bitmap.width+2*n,h:t.bitmap.height+2*n};r.push(a),o[e]=a}}const{w:n,h:i}=rd(r),o=new wc({width:n||1,height:i||1});for(const r in e){const n=e[r];for(const e in n.glyphs){const i=n.glyphs[+e];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const a=t[r][e],s=i.metrics.localGlyph?2:1;wc.copy(i.bitmap,o,{x:0,y:0},{x:a.x+s,y:a.y+s},i.bitmap)}}this.image=o,this.positions=t}}ji(mm,"GlyphAtlas");class gm{constructor(e){this.tileID=new Ju(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Bp(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,t,r,n,i){this.status="parsing",this.data=e,this.collisionBoxArray=new Fa;const o=new If(Object.keys(e.layers).sort()),a=new hm(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l=new fm(256,256),c={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:r},u=t.familiesBySource[this.source];for(const t in u){const n=e.layers[t];if(!n)continue;let i=!1,l=!1;for(const e of u[t])"symbol"===e[0].type?i=!0:l=!0;if(!0===this.isSymbolTile&&!i)continue;if(!1===this.isSymbolTile&&!l)continue;1===n.version&&U(`Vector tile source "${this.source}" layer "${t}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const h=o.encode(t),d=[];for(let e=0;e<n.length;e++){const r=n.feature(e),i=a.getId(r,t);d.push({feature:r,id:i,index:e,sourceLayerIndex:h})}for(const e of u[t]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(ym(e,this.zoom,r),(s[t.id]=t.createBucket({index:a.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:h,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:r})).populate(d,c,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(e.map((e=>e.id))))}}let h,d,p,f;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=B(c.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(g).length?n.send("getGlyphs",{uid:this.uid,stacks:g},((e,t)=>{h||(h=e,d=t,v.call(this))}),void 0,!1,m):d={};const y=Object.keys(c.iconDependencies);y.length?n.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{h||(h=e,p=t,v.call(this))}),void 0,!1,m):p={};const _=Object.keys(c.patternDependencies);function v(){if(h)return i(h);if(d&&p&&f){const e=new mm(d),t=new id(p,f);for(const n in s){const i=s[n];i instanceof ff?(ym(i.layers,this.zoom,r),Xd(i,d,e.positions,p,t.iconPositions,this.showCollisionBoxes,r,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof ch||i instanceof uu||i instanceof Bu)&&(ym(i.layers,this.zoom,r),i.addFeatures(c,this.tileID.canonical,t.patternPositions,r,this.tileTransform))}this.status="done",i(null,{buckets:I(s).filter((e=>!e.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:l,imageAtlas:t,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}}_.length?n.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{h||(h=e,f=t,v.call(this))}),void 0,!1,m):f={},v.call(this)}}function ym(e,t,r){const n=new jo(t);for(const t of e)t.recalculate(n,r)}class _m{constructor(e){this.entries={},this.scheduler=e}request(e,t,r,n){const i=this.entries[e]=this.entries[e]||{callbacks:[]};if(i.result){const[e,r]=i.result;return this.scheduler?this.scheduler.add((()=>{n(e,r)}),t):n(e,r),()=>{}}return i.callbacks.push(n),i.cancel||(i.cancel=r(((r,n)=>{i.result=[r,n];for(const e of i.callbacks)this.scheduler?this.scheduler.add((()=>{e(r,n)}),t):e(r,n);setTimeout((()=>delete this.entries[e]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((e=>e!==n)),i.callbacks.length||(i.cancel(),delete this.entries[e]))}}}function vm(e,t,r){const n=JSON.stringify(e.request);return e.data&&(this.deduped.entries[n]={result:[null,e.data]}),this.deduped.request(n,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(t=>{const n=ce(e.request,((e,n,i,o)=>{e?t(e):n&&t(null,{vectorTile:r?void 0:new ku(new Mh(n)),rawData:n,cacheControl:i,expires:o})}));return()=>{n.cancel(),t()}}),t)}e.ARRAY_TYPE=wl,e.AUTH_ERR_MSG=me,e.Aabb=dc,e.Actor=class{constructor(e,r,n){this.target=e,this.parent=r,this.mapId=n,this.callbacks={},this.cancelCallbacks={},F(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=H()?e:t,this.scheduler=new Pf}send(e,t,r,n,i=!1,o){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=o,this.callbacks[a]=r);const s=Z(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:e,hasCallback:!!r,targetMapId:n,mustQueue:i,sourceMapId:this.mapId,data:Gi(t,s)},s),{cancel:()=>{r&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId})}}}receive(e){const t=e.data,r=t.id;if(r&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[r];delete this.cancelCallbacks[r],e&&e.cancel()}else if(t.mustQueue||H()){const e=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((()=>this.processTask(r,t)),e&&e.metadata||{type:"message"})}else this.processTask(r,t)}processTask(e,t){if("<response>"===t.type){const r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(Hi(t.error)):r(null,Hi(t.data)))}else{const r=Z(this.globalScope)?void 0:[],n=t.hasCallback?(t,n)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Gi(t):null,data:Gi(n,r)},r)}:e=>{},i=Hi(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,i,n);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],i.source)[e[1]](i,n)}else n(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=Yu,e.Color=At,e.ColorMode=rm,e.CullFaceMode=om,e.DEMData=Jf,e.DataConstantProperty=Yo,e.DedupedRequest=_m,e.DepthMode=$f,e.EXTENT=Cs,e.Elevation=class{isDataAvailableAtPoint(e){const t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;const r=t.getSource().maxzoom,n=1<<r,i=Math.floor(e.x),o=Math.floor((e.x-i)*n),a=Math.floor(e.y*n),s=this.findDEMTileFor(new Ju(r,i,r,o,a));return!(!s||!s.dem)}getAtPointOrZero(e,t=0){return this.getAtPoint(e,t)||0}getAtPoint(e,t,r=!0){if(this.isUsingMockSource())return null;null==t&&(t=null);const n=this._source();if(!n)return t;if(e.y<0||e.y>1)return t;const i=n.getSource().maxzoom,o=1<<i,a=Math.floor(e.x),s=e.x-a,l=new Ju(i,a,i,Math.floor(s*o),Math.floor(e.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;const u=c.dem,h=1<<c.tileID.canonical.z,d=(s*h-c.tileID.canonical.x)*u.dim,p=(e.y*h-c.tileID.canonical.y)*u.dim,f=Math.floor(d),m=Math.floor(p);return(r?this.exaggeration():1)*Ar(Ar(u.get(f,m),u.get(f,m+1),p-m),Ar(u.get(f+1,m),u.get(f+1,m+1),p-m),d-f)}getAtTileOffset(e,t,r){const n=1<<e.canonical.z;return this.getAtPointOrZero(new Hs(e.wrap+(e.canonical.x+t/Cs)/n,(e.canonical.y+r/Cs)/n))}getAtTileOffsetFunc(e,t,r,n){return i=>{const o=this.getAtTileOffset(e,i.x,i.y),a=n.upVector(e.canonical,i.x,i.y);return Hl(a,a,o*n.upVectorScale(e.canonical,t,r).metersToTile),a}}getForTilePoints(e,t,r,n){if(this.isUsingMockSource())return!1;const i=um.create(this,e,n);return!!i&&(t.forEach((e=>{e[2]=this.exaggeration()*i.getElevationAt(e[0],e[1],r)})),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const r=t.dem.tree,n=t.tileID,i=1<<e.canonical.z-n.canonical.z;let o=e.canonical.x/i-n.canonical.x,a=e.canonical.y/i-n.canonical.y,s=0;for(let t=0;t<e.canonical.z-n.canonical.z&&!r.leaves[s];t++){o*=2,a*=2;const e=2*Math.floor(a)+Math.floor(o);s=r.childOffsets[s]+e,o%=1,a%=1}return{min:this.exaggeration()*r.minimums[s],max:this.exaggeration()*r.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,r){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=Ze,e.EvaluationParameters=jo,e.Event=We,e.Evented=Xe,e.FillExtrusionBucket=Bu,e.Frustum=hc,e.FrustumCorners=uc,e.GLOBE_METERS_TO_ECEF=lp,e.GLOBE_RADIUS=sp,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=6,e.GLOBE_ZOOM_THRESHOLD_MIN=5,e.GlobeSharedBuffers=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const e of this._wireframeSegments)e.destroy()}}_createGrid(e){const t=new sa,r=new Ea,n=65;for(let e=0;e<n;e++)for(let r=0;r<n;r++)t.emplaceBack(r,e);this._gridSegments=[];for(let e=0,t=0;e<up.length;e++){const i=up[e];for(let e=0;e<i;e++)for(let t=0;t<64;t++){const i=e*n+t;r.emplaceBack(i+1,i,i+n),r.emplaceBack(i+n,i+n+1,i+1)}const o=64*i*2;this._gridSegments.push(ks.simpleSegment(0,t,(i+1)*n,o)),t+=o}this._gridBuffer=e.createVertexBuffer(t,ap.members),this._gridIndexBuffer=e.createIndexBuffer(r,!0)}_createPoles(e){const t=new Ea;for(let e=0;e<=cp;e++)t.emplaceBack(0,e+1,e+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const r=new Pa,n=new Pa;this._poleSegments=[];for(let e=0,t=0;e<5;e++){const i=360/(1<<e);r.emplaceBack(0,-sp,0,.5,0),n.emplaceBack(0,-sp,0,.5,1);for(let e=0;e<=cp;e++){const t=e/cp,o=Ar(0,i,t),[a,s,l]=Ep(Lp,Fp,o,sp);r.emplaceBack(a,s,l,t,0),n.emplaceBack(a,s,l,t,1)}this._poleSegments.push(ks.simpleSegment(t,0,66,64)),t+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(r,ip,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(n,ip,!1)}getGridBuffers(e){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[e]]}getPoleBuffers(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}getWirefameBuffers(e,t){if(!this._wireframeSegments){const t=new ka,r=cp,n=r+1;this._wireframeSegments=[];for(let e=0,i=0;e<up.length;e++){const o=up[e];for(let e=0;e<o;e++)for(let i=0;i<r;i++){const r=e*n+i;t.emplaceBack(r,r+1),t.emplaceBack(r,r+n),t.emplaceBack(r,r+n+1)}const a=o*r*3;this._wireframeSegments.push(ks.simpleSegment(0,i,(o+1)*n,a)),i+=a}this._wireframeIndexBuffer=e.createIndexBuffer(t)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},e.GlyphManager=Dd,e.ImagePosition=nd,e.LivePerformanceUtils=Fe,e.LngLat=Ds,e.LngLatBounds=Ms,e.LocalGlyphMode=zd,e.MAX_MERCATOR_LATITUDE=Vs,e.MercatorCoordinate=Hs,e.ONE_EM=bh,e.OverscaledTileID=Ju,e.PerformanceMarkers=Le,e.Properties=ea,e.RGBAImage=Ec,e.Ray=cc,e.RequestManager=class{constructor(e,t,r){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",h,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!ge(e))return e;const r=be(e);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!ge(e))return e;const r=be(e);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||t)}normalizeSourceURL(e,t,r,n){if(!ge(e))return e;const i=be(e);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),r&&i.params.push(`language=${r}`),n&&i.params.push(`worldview=${n}`),this._makeAPIURL(i,this._customAccessToken||t)}normalizeSpriteURL(e,t,r,n){const i=be(e);return ge(e)?(i.path=`/styles/v1${i.path}/sprite${t}${r}`,this._makeAPIURL(i,this._customAccessToken||n)):(i.path+=`${t}${r}`,we(i))}normalizeTileURL(e,t,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!ge(e))return e;const n=be(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||r&&"raster"!==n.authority&&512===r?"@2x":""}${o.supported?".webp":"$1"}`),"raster"===n.authority?n.path=`/${i.RASTER_URL_PREFIX}${n.path}`:(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path=`/${i.TILE_URL_VERSION}${n.path}`);const a=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(n.params)||i.ACCESS_TOKEN;return i.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&n.params.push(`sku=${this._skuToken}`),this._makeAPIURL(n,a)}canonicalizeTileURL(e,t){const r=be(e);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return e;let n="mapbox://";r.path.match(/^\/raster\/v1\//)?n+=`raster/${r.path.replace(`/${i.RASTER_URL_PREFIX}/`,"")}`:n+=`tiles/${r.path.replace(`/${i.TILE_URL_VERSION}/`,"")}`;let o=r.params;return t&&(o=o.filter((e=>!e.match(/^access_token=/)))),o.length&&(n+=`?${o.join("&")}`),n}canonicalizeTileset(e,t){const r=!!t&&ge(t),n=[];for(const t of e.tiles||[])ye(t)?n.push(this.canonicalizeTileURL(t,r)):n.push(t);return n}_makeAPIURL(e,t){const r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=be(i.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==n.path&&(e.path=`${n.path}${e.path}`),!i.REQUIRE_ACCESS_TOKEN)return we(e);if(t=t||i.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return e.params=e.params.filter((e=>-1===e.indexOf("access_token"))),e.params.push(`access_token=${t||""}`),we(e)}},e.ResourceType=oe,e.SegmentVector=ks,e.SourceCache=am,e.StencilMode=tm,e.StructArrayLayout1ui2=Ca,e.StructArrayLayout2f1f2i16=xa,e.StructArrayLayout2i4=sa,e.StructArrayLayout2ui4=ka,e.StructArrayLayout3f12=wa,e.StructArrayLayout3ui6=Ea,e.StructArrayLayout4i8=ca,e.StructArrayLayout5f20=Pa,e.Texture=Sf,e.Tile=jf,e.Transitionable=Go,e.Uniform1f=as,e.Uniform1i=class extends os{constructor(e){super(e),this.current=0}set(e,t,r){this.fetchUniformLocation(e,t)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},e.Uniform2f=class extends os{constructor(e){super(e),this.current=[0,0]}set(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}},e.Uniform3f=class extends os{constructor(e){super(e),this.current=[0,0,0]}set(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}},e.Uniform4f=ss,e.UniformColor=ls,e.UniformMatrix2f=class extends os{constructor(e){super(e),this.current=hs}set(e,t,r){if(this.fetchUniformLocation(e,t))for(let e=0;e<4;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},e.UniformMatrix3f=class extends os{constructor(e){super(e),this.current=us}set(e,t,r){if(this.fetchUniformLocation(e,t))for(let e=0;e<9;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},e.UniformMatrix4f=class extends os{constructor(e){super(e),this.current=cs}set(e,t,r){if(this.fetchUniformLocation(e,t)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},e.UnwrappedTileID=Ku,e.ValidationError=Kn,e.VectorTileFeature=Cu,e.VectorTileWorkerSource=class extends Xe{constructor(e,t,r,n,i){super(),this.actor=e,this.layerIndex=t,this.availableImages=r,this.loadVectorData=i||vm,this.loading={},this.loaded={},this.deduped=new _m(e.scheduler),this.isSpriteLoaded=n,this.scheduler=e.scheduler}loadTile(e,t){const r=e.uid,n=e&&e.request,i=n&&n.collectResourceTiming,o=this.loading[r]=new gm(e);o.abort=this.loadVectorData(e,((a,s)=>{const l=!this.loading[r];if(delete this.loading[r],l||a||!s)return o.status="done",l||(this.loaded[r]=o),t(a);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new ku(new Mh(c));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,r)=>{if(e||!r)return t(e);const o={};if(i){const e=Oe(n);e.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,k({rawTileData:c.slice(0)},r,u,o))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):h()})),this.loaded=this.loaded||{},this.loaded[r]=o}))}reloadTile(e,t){const r=this.loaded,n=e.uid,i=this;if(r&&r[n]){const o=r[n];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection,o.tileTransform=Bp(e.tileID.canonical,e.projection);const a=(e,r)=>{const n=o.reloadCallback;n&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,n)),t(e,r)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(e,t){const r=e.uid,n=this.loading[r];n&&(n.abort&&n.abort(),delete this.loading[r]),t()}removeTile(e,t){const r=this.loaded,n=e.uid;r&&r[n]&&delete r[n],t()}},e.WritingMode=od,e.ZoomHistory=qi,e.add=Nl,e.addDynamicAttributes=uf,e.adjoint=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=i*c-n*u,e[2]=n*s-i*a,e[3]=s*l-o*u,e[4]=r*u-i*l,e[5]=i*o-r*s,e[6]=o*c-a*l,e[7]=n*l-r*c,e[8]=r*a-n*o,e},e.asyncAll=P,e.bezier=w,e.bindAll=F,e.boundsAttributes=Of,e.bufferConvexPolygon=function(e,t){const r=[];for(let n=0;n<e.length;n++){const i=A(n-1,-1,e.length-1),o=A(n+1,-1,e.length-1),a=e[n],s=e[o],l=e[i].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*t/Math.sin(u/2));r.push(a.add(h))}return r},e.cacheEntryPossiblyAdded=function(e){ie++,ie>ee&&(e.getActor().send("enforceCacheSizeLimit",$),ie=0)},e.calculateGlobeLabelMatrix=function(e,t){const{x:r,y:n}=e.point,i=Cp(r,n,e.worldSize/e._pixelsPerMercatorPixel,0,0);return Pl(i,i,kp(yp(t)))},e.calculateGlobeMatrix=function(e){const{x:t,y:r}=e.point,{lng:n,lat:i}=e._center;return Cp(t,r,e.worldSize,n,i)},e.calculateGlobeMercatorMatrix=function(e){const t=e.pixelsPerMeter,r=t/Os(1,e.center.lat),n=Sl(new Float64Array(16));return Il(n,n,[e.point.x,e.point.y,0]),kl(n,n,[r,r,t]),Float32Array.from(n)},e.circumferenceAtLatitude=Fs,e.clamp=T,e.clearTileCache=function(e){if(!te())return;const r=t.caches.delete(K);e&&r.catch(e).then((()=>e()))},e.clipLine=Id,e.clone=function(e){var t=new wl(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=N,e.collisionCircleLayout=xh,e.config=i,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new wl(16);return wl!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=El,e.createExpression=Hn,e.createLayout=oa,e.createStyleLayer=function(e){return"custom"===e.type?new bf(e):new Tf[e.type](e)},e.cross=Xl,e.degToRad=_,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},e.dot=Zl,e.earthRadius=zs,e.ease=E,e.easeCubicInOut=b,e.ecefToLatLng=function([e,t,r]){const n=Math.hypot(e,t,r),i=Math.atan2(e,r),o=.5*Math.PI-Math.acos(-t/n);return new Ds(v(i),v(o))},e.emitValidationErrors=Ri,e.endsWith=R,e.enforceCacheSizeLimit=function(e){re(),J&&J.then((t=>{t.keys().then((r=>{for(let n=0;n<r.length-e;n++)t.delete(r[n])}))}))},e.evaluateSizeForFeature=Th,e.evaluateSizeForZoom=Sh,e.evaluateVariableOffset=Zd,e.evented=Ro,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=Ge,e.exported$1=o,e.extend=k,e.extend$1=Ke,e.fillExtrusionHeightLift=Hu,e.filterObject=O,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,c=r*a,u=n*a,h=n*s,d=i*a,p=i*s,f=i*l,m=o*a,g=o*s,y=o*l;return e[0]=1-h-f,e[1]=u+y,e[2]=d-g,e[3]=0,e[4]=u-y,e[5]=1-c-f,e[6]=p+m,e[7]=0,e[8]=d+g,e[9]=p-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=zl,e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return x[t]},e.getAABBPointSquareDist=function(e,t,r){let n=0;for(let i=0;i<2;++i){const o=r?r[i]:0;e[i]>o&&(n+=(e[i]-o)*(e[i]-o)),t[i]<o&&(n+=(o-t[i])*(o-t[i]))}return n},e.getAnchorAlignment=gd,e.getAnchorJustification=Yd,e.getBounds=function(e){let t=1/0,r=1/0,n=-1/0,i=-1/0;for(const o of e)t=Math.min(t,o.x),r=Math.min(r,o.y),n=Math.max(n,o.x),i=Math.max(i,o.y);return{min:new f(t,r),max:new f(n,i)}},e.getColumn=Y,e.getGridMatrix=function(e,t,r,n){const i=t.getNorth(),o=t.getSouth(),a=t.getWest(),s=t.getEast(),l=1<<e.z,c=s-a,u=i-o,h=c/cp,d=-u/up[r],p=[0,h,0,d,0,0,i,a,0];if(e.z>0){const e=180/n;Tl(p,p,[e/c+1,0,0,0,e/u+1,0,-.5*e/h,.5*e/d,1])}return p[2]=l,p[5]=e.x,p[8]=e.y,p},e.getImage=fe,e.getJSON=function(e,t){return le(k(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){const t=80.051129;e=T(e,-80.051129,t)/t*90;const r=Math.pow(Math.abs(Math.sin(_(e))),3);return Math.round(r*(up.length-1))},e.getMapSessionAPI=ze,e.getPerformanceMeasurement=Oe,e.getProjection=of,e.getRTLTextPluginStatus=Bo,e.getReferrer=se,e.getTilePoint=function(e,{x:t,y:r},n=0){return new f(((t-n)*e.scale-e.x)*Cs,(r*e.scale-e.y)*Cs)},e.getTileVec3=function(e,t,r=0){return Ol(((t.x-r)*e.scale-e.x)*Cs,(t.y*e.scale-e.y)*Cs,Us(t.z,t.y))},e.getVideo=function(e,r){const n=t.document.createElement("video");n.muted=!0,n.onloadstart=function(){r(null,n)};for(let r=0;r<e.length;r++){const i=t.document.createElement("source");ue(e[r])||(n.crossOrigin="Anonymous"),i.src=e[r],n.appendChild(i)}return{cancel:()=>{}}},e.globeCenterToScreenPoint=function(e){const t=[0,0,0],r=Sl(new Float64Array(16));return Pl(r,e.pixelMatrix,e.globeMatrix),Yl(t,t,r),new f(t[0],t[1])},e.globeDenormalizeECEF=kp,e.globeECEFOrigin=function(e,t){const r=[0,0,0];return Yl(r,r,Ip(yp(t.canonical))),Yl(r,r,e),r},e.globeNormalizeECEF=Ip,e.globePixelsToTileUnits=function(e,t){return Cs/(512*Math.pow(2,e))*Ap(yp(t))},e.globePoleMatrixForTile=function(e,t,r){const n=Sl(new Float64Array(16)),i=(t/(1<<e)-.5)*Math.PI*2;return Ml(n,r.globeMatrix,i),Float32Array.from(n)},e.globeTileBounds=yp,e.globeTiltAtLngLat=zp,e.globeToMercatorTransition=Mp,e.globeUseCustomAntiAliasing=function(e,t,r){const n=Mp(r.zoom),i=e.style.map._antialias,o=!!t.extStandardDerivatives,a=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===n&&!i&&!a&&o},e.identity=Sl,e.identity$1=oc,e.invert=Al,e.isFullscreen=function(){return!!t.document.fullscreenElement||!!t.document.webkitFullscreenElement},e.isLngLatBehindGlobe=function(e,t){return zp(e,t)>Math.PI/2*1.01},e.isMapAuthenticated=function(e){return De.has(e)},e.isMapboxURL=ge,e.isSafariWithAntialiasingBug=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!Z(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=js,e.latLngToECEF=Tp,e.len=ec,e.length=Bl,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=Ns,e.loadVectorTile=vm,e.makeRequest=le,e.mapValue=function(e,t,r,n,i){return T((e-t)/(r-t)*(i-n)+n,n,i)},e.mercatorScale=Gs,e.mercatorXfromLng=Rs,e.mercatorYfromLat=Bs,e.mercatorZfromAltitude=Os,e.mul=Ll,e.mul$1=$l,e.multiply=Pl,e.multiply$1=Tl,e.multiply$2=Ul,e.nextPowerOfTwo=D,e.normalize=Wl,e.normalize$1=lc,e.normalize$2=rc,e.number=Ar,e.ortho=function(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*c,e[15]=1,e},e.pbf=Mh,e.perspective=function(e,t,r,n,i){var o,a=1/Math.tan(t/2);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+n)*(o=1/(n-i)),e[14]=2*i*n*o):(e[10]=-1,e[14]=-2*n),e},e.pick=function(e,t){const r={};for(let n=0;n<t.length;n++){const i=t[n];i in e&&(r[i]=e[i])}return r},e.plugin=No,e.pointGeometry=f,e.polygonContainsPoint=dl,e.polygonIntersectsBox=pl,e.polygonIntersectsPolygon=nl,e.polygonizeBounds=function(e,t,r=0,n=!0){const i=new f(r,r),o=e.sub(i),a=t.add(i),s=[o,new f(a.x,o.y),a,new f(o.x,a.y)];return n&&s.push(o.clone()),s},e.posAttributes=ap,e.postMapLoadEvent=Ie,e.postPerformanceEvent=Ce,e.postTurnstileEvent=Ae,e.potpack=rd,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=v,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:zo,pluginURL:Do}),Ro.on("pluginStateChange",e),e},e.removeAuthState=function(e){De.delete(e)},e.renderColorRamp=Sc,e.resample=Ws,e.rotateX=Cl,e.rotateX$1=ac,e.rotateY=Ml,e.rotateY$1=sc,e.rotateZ=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*n,e[1]=a*i+u*n,e[2]=s*i+h*n,e[3]=l*i+d*n,e[4]=c*i-o*n,e[5]=u*i-a*n,e[6]=h*i-s*n,e[7]=d*i-l*n,e},e.rotateZ$1=function(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*s,e[1]=i*l-n*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},e.scale=kl,e.scale$1=tc,e.scale$2=Hl,e.scaleAndAdd=ql,e.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},e.setCacheLimits=function(e,t){$=e,ee=t},e.setColumn=function(e,t,r){e[4*t+0]=r[0],e[4*t+1]=r[1],e[4*t+2]=r[2],e[4*t+3]=r[3]},e.setRTLTextPlugin=function(e,t,r=!1){if(zo===Io||zo===ko||zo===Co)throw new Error("setRTLTextPlugin cannot be called multiple times.");Do=Ge.resolveURL(e),zo=Io,Mo=t,Fo(),r||Oo()},e.smoothstep=S,e.spec=Ye,e.squaredLength=function(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n},e.storeAuthState=function(e,t){t?De.add(e):De.delete(e)},e.sub=Ql,e.subtract=jl,e.symbolSize=Ah,e.tileAABB=function(e,t,r,n,i,o,a,s,l){if("globe"===l.name)return function(e,t,r){const n=t/e.worldSize,i=e.globeMatrix;if(r.z<=1){const e=yp(r).getCorners();return xp(e,i,n),dc.fromPoints(e)}const o=bp(r),a=wp(o);xp(a,i,n);const s=Number.MAX_VALUE,l=[-s,-s,-s],c=[s,s,s];if(o.contains(e.center)){for(const e of a)Vl(c,c,e),Gl(l,l,e);l[2]=0;const t=e.point,r=[t.x*n,t.y*n,0];return Vl(c,c,r),Gl(l,l,r),new dc(c,l)}const u=[i[12]*n,i[13]*n,i[14]*n],h=o.getCenter(),d=T(e.center.lat,-85.051129,Vs),p=T(h.lat,-85.051129,Vs),f=Rs(e.center.lng),m=Bs(d);let g=f-Rs(h.lng);const y=m-Bs(p);g>.5?g-=1:g<-.5&&(g+=1);let v=0;Math.abs(g)>Math.abs(y)?v=g>=0?1:3:(v=y>=0?0:2,ql(u,u,[i[4]*n,i[5]*n,i[6]*n],-Math.sin(_(y>=0?o.getSouth():o.getNorth()))*sp));const x=a[v],b=a[(v+1)%4],w=new mp(x,b,u),E=[gp(w,0)||x[0],gp(w,1)||x[1],gp(w,2)||x[2]],S=Mp(e.zoom);if(S>0){const n=function({x:e,y:t,z:r},n,i,o,a){const s=1/(1<<r);let l=e*s,c=l+s,u=t*s,h=u+s,d=0;const p=(l+c)/2-o;return p>.5?d=-1:p<-.5&&(d=1),l=((l+d)*n-(o*=n))*i+o,c=((c+d)*n-o)*i+o,u=(u*n-(a*=n))*i+a,h=(h*n-a)*i+a,[[l,h,0],[c,h,0],[c,u,0],[l,u,0]]}(r,t,e._pixelsPerMercatorPixel,f,m);for(let e=0;e<a.length;e++)_p(a[e],n[e],S);const i=Nl([],n[v],n[(v+1)%4]);Hl(i,i,.5),_p(E,i,S)}for(const e of a)Vl(c,c,e),Gl(l,l,e);return c[2]=Math.min(x[2],b[2]),Vl(c,c,E),Gl(l,l,E),new dc(c,l)}(e,t,new Yu(r,n,i));const c=Bp({z:r,x:n,y:i},l);return new dc([(o+c.x/c.scale)*t,t*(c.y/c.scale),a],[(o+c.x2/c.scale)*t,t*(c.y2/c.scale),s])},e.tileCornersToBounds=bp,e.tileTransform=Bp,e.transformMat3=function(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e},e.transformMat4=Yl,e.transformMat4$1=nc,e.transformQuat=Kl,e.transitionTileAABBinECEF=vp,e.translate=Il,e.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=Lo,e.uniqueId=M,e.updateGlobeVertexNormal=function(e,t,r,n,i){const o=5*t+2;e.float32[o+0]=r,e.float32[o+1]=n,e.float32[o+2]=i},e.validateCustomStyleLayer=function(e){const t=[],r=e.id;return void 0===r&&t.push({message:`layers.${r}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${r}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateFilter=e=>Fi(yi(e)),e.validateFog=e=>Fi(Ii(e)),e.validateLayer=e=>Fi(wi(e)),e.validateLight=e=>Fi(Ai(e)),e.validateSource=e=>Fi(Si(e)),e.validateStyle=zi,e.validateTerrain=e=>Fi(Pi(e)),e.values=I,e.vectorTile=yu,e.version=r,e.warnOnce=U,e.window=t,e.wrap=A})),n(0,(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let r="[";for(const n of e)r+=`${t(n)},`;return`${r}]`}let r="{";for(const n of Object.keys(e).sort())r+=`${n}:${t(e[n])},`;return`${r}}`}function r(r){let n="";for(const i of e.refProperties)n+=`/${t(r[i])}`;return n}class n{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,n){for(const r of t)this._layerConfigs[r.id]=r,(this._layers[r.id]=e.createStyleLayer(r)).compileFilter(),this.keyCache[r.id]&&delete this.keyCache[r.id];for(const e of n)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=function(e,t){const n={};for(let i=0;i<e.length;i++){const o=t&&t[e[i].id]||r(e[i]);t&&(t[e[i].id]=o);let a=n[o];a||(a=n[o]=[]),a.push(e[i])}const i=[];for(const e in n)i.push(n[e]);return i}(e.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),r=t[0];if("none"===r.visibility)continue;const n=r.source||"";let i=this.familiesBySource[n];i||(i=this.familiesBySource[n]={});const o=r.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(t)}}}class i{loadTile(t,r){const{uid:n,encoding:i,rawImageData:o,padding:a,buildQuadTree:s}=t,l=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap?this.getImageData(o,a):o;r(null,new e.DEMData(n,l,i,a<1,s))}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const r=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),r}}var o=function e(t,r){var n,i=t&&t.type;if("FeatureCollection"===i)for(n=0;n<t.features.length;n++)e(t.features[n],r);else if("GeometryCollection"===i)for(n=0;n<t.geometries.length;n++)e(t.geometries[n],r);else if("Feature"===i)e(t.geometry,r);else if("Polygon"===i)a(t.coordinates,r);else if("MultiPolygon"===i)for(n=0;n<t.coordinates.length;n++)a(t.coordinates[n],r);return t};function a(e,t){if(0!==e.length){s(e[0],t);for(var r=1;r<e.length;r++)s(e[r],!t)}}function s(e,t){for(var r=0,n=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),l=r+s;n+=Math.abs(r)>=Math.abs(s)?r-l+s:s-l+r,r=l}r+n>=0!=!!t&&e.reverse()}const l=e.VectorTileFeature.prototype.toGeoJSON;class c{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const r of this._feature.geometry)t.push([new e.pointGeometry(r[0],r[1])]);return t}{const t=[];for(const r of this._feature.geometry){const n=[];for(const t of r)n.push(new e.pointGeometry(t[0],t[1]));t.push(n)}return t}}toGeoJSON(e,t,r){return l.call(this,e,t,r)}}class u{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(e){return new c(this._features[e])}}var h={exports:{}},d=e.pointGeometry,p=e.vectorTile.VectorTileFeature,f=m;function m(e,t){this.options=t||{},this.features=e,this.length=e.length}function g(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}m.prototype.feature=function(e){return new g(this.features[e],this.options.extent)},g.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var r=e[t],n=[],i=0;i<r.length;i++)n.push(new d(r[i][0],r[i][1]));this.geometry.push(n)}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,n=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),i=Math.max(i,l.y)}return[t,n,r,i]},g.prototype.toGeoJSON=p.prototype.toGeoJSON;var y=e.pbf,_=f;function v(e){var t=new y;return function(e,t){for(var r in e.layers)t.writeMessage(3,x,e.layers[r])}(e,t),t.finish()}function x(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)n.feature=e.feature(r),t.writeMessage(2,b,n);var i=n.keys;for(r=0;r<i.length;r++)t.writeStringField(3,i[r]);var o=n.values;for(r=0;r<o.length;r++)t.writeMessage(4,A,o[r])}function b(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,w,e),t.writeVarintField(3,r.type),t.writeMessage(4,S,r)}function w(e,t){var r=e.feature,n=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in r.properties){var l=r.properties[s],c=o[s];if(null!==l){void 0===c&&(n.push(s),o[s]=c=n.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=a[h];void 0===d&&(i.push(l),a[h]=d=i.length-1),t.writeVarint(d)}}}function E(e,t){return(t<<3)+(7&e)}function T(e){return e<<1^e>>31}function S(e,t){for(var r=e.loadGeometry(),n=e.type,i=0,o=0,a=r.length,s=0;s<a;s++){var l=r[s],c=1;1===n&&(c=l.length),t.writeVarint(E(1,c));for(var u=3===n?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==n&&t.writeVarint(E(2,u-1));var d=l[h].x-i,p=l[h].y-o;t.writeVarint(T(d)),t.writeVarint(T(p)),i+=d,o+=p}3===n&&t.writeVarint(E(7,1))}}function A(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function P(e,t,r,n,i,o){if(i-n<=r)return;const a=n+i>>1;I(e,t,a,n,i,o%2),P(e,t,r,n,a-1,o+1),P(e,t,r,a+1,i,o+1)}function I(e,t,r,n,i,o){for(;i>n;){if(i-n>600){const a=i-n+1,s=r-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);I(e,t,r,Math.max(n,Math.floor(r-s*c/a+u)),Math.min(i,Math.floor(r+(a-s)*c/a+u)),o)}const a=t[2*r+o];let s=n,l=i;for(k(e,t,n,r),t[2*i+o]>a&&k(e,t,n,i);s<l;){for(k(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*n+o]===a?k(e,t,n,l):(l++,k(e,t,l,i)),l<=r&&(n=l+1),r<=l&&(i=l-1)}}function k(e,t,r,n){C(e,r,n),C(t,2*r,2*n),C(t,2*r+1,2*n+1)}function C(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function M(e,t,r,n){const i=e-r,o=t-n;return i*i+o*o}h.exports=v,h.exports.fromVectorTileJs=v,h.exports.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var n in e)r[n]=new _(e[n].features,t),r[n].name=n,r[n].version=t.version,r[n].extent=t.extent;return v({layers:r})},h.exports.GeoJSONWrapper=_;const z=e=>e[0],D=e=>e[1];class L{constructor(e,t=z,r=D,n=64,i=Float64Array){this.nodeSize=n,this.points=e;const o=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new i(2*e.length);for(let n=0;n<e.length;n++)a[n]=n,s[2*n]=t(e[n]),s[2*n+1]=r(e[n]);P(a,s,n,0,a.length-1,0)}range(e,t,r,n){return function(e,t,r,n,i,o,a){const s=[0,e.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),d=s.pop(),p=s.pop();if(d-p<=a){for(let a=p;a<=d;a++)c=t[2*a],u=t[2*a+1],c>=r&&c<=i&&u>=n&&u<=o&&l.push(e[a]);continue}const f=Math.floor((p+d)/2);c=t[2*f],u=t[2*f+1],c>=r&&c<=i&&u>=n&&u<=o&&l.push(e[f]);const m=(h+1)%2;(0===h?r<=c:n<=u)&&(s.push(p),s.push(f-1),s.push(m)),(0===h?i>=c:o>=u)&&(s.push(f+1),s.push(d),s.push(m))}return l}(this.ids,this.coords,e,t,r,n,this.nodeSize)}within(e,t,r){return function(e,t,r,n,i,o){const a=[0,e.length-1,0],s=[],l=i*i;for(;a.length;){const c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o){for(let i=h;i<=u;i++)M(t[2*i],t[2*i+1],r,n)<=l&&s.push(e[i]);continue}const d=Math.floor((h+u)/2),p=t[2*d],f=t[2*d+1];M(p,f,r,n)<=l&&s.push(e[d]);const m=(c+1)%2;(0===c?r-i<=p:n-i<=f)&&(a.push(h),a.push(d-1),a.push(m)),(0===c?r+i>=p:n+i>=f)&&(a.push(d+1),a.push(u),a.push(m))}return s}(this.ids,this.coords,e,t,r,this.nodeSize)}}const F={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},R=Math.fround||(B=new Float32Array(1),e=>(B[0]=+e,B[0]));var B;class O{constructor(e){this.options=W(Object.create(F),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:r,maxZoom:n,nodeSize:i}=this.options;t&&console.time("total time");const o=`prepare ${e.length} points`;t&&console.time(o),this.points=e;let a=[];for(let t=0;t<e.length;t++)e[t].geometry&&a.push(j(e[t],t));this.trees[n+1]=new L(a,Z,X,i,Float32Array),t&&console.timeEnd(o);for(let e=n;e>=r;e--){const r=+Date.now();a=this._cluster(a,e),this.trees[e]=new L(a,Z,X,i,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,a.length,+Date.now()-r)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){const e=this.getClusters([r,n,180,o],t),a=this.getClusters([-180,n,i,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(G(r),H(o),G(i),H(n)),l=[];for(const e of s){const t=a.points[e];l.push(t.numPoints?U(t):this.points[t.index])}return l}getChildren(e){const t=this._getOriginId(e),r=this._getOriginZoom(e),n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);const o=i.points[t];if(!o)throw new Error(n);const a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=i.within(o.x,o.y,a),l=[];for(const t of s){const r=i.points[t];r.parentId===e&&l.push(r.numPoints?U(r):this.points[r.index])}if(0===l.length)throw new Error(n);return l}getLeaves(e,t,r){const n=[];return this._appendLeaves(n,e,t=t||10,r=r||0,0),n}getTile(e,t,r){const n=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(r-s)/i,c=(r+1+s)/i,u={features:[]};return this._addTileFeatures(n.range((t-s)/i,l,(t+1+s)/i,c),n.points,t,r,i,u),0===t&&this._addTileFeatures(n.range(1-s/i,l,1,c),n.points,i,r,i,u),t===i-1&&this._addTileFeatures(n.range(0,l,s/i,c),n.points,-1,r,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,n,i){const o=this.getChildren(t);for(const t of o){const o=t.properties;if(o&&o.cluster?i+o.point_count<=n?i+=o.point_count:i=this._appendLeaves(e,o.cluster_id,r,n,i):i<n?i++:e.push(t),e.length===r)break}return i}_addTileFeatures(e,t,r,n,i,o){for(const a of e){const e=t[a],s=e.numPoints;let l,c,u;if(s)l=V(e),c=e.x,u=e.y;else{const t=this.points[e.index];l=t.properties,c=G(t.geometry.coordinates[0]),u=H(t.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-r)),Math.round(this.options.extent*(u*i-n))]],tags:l};let d;s?d=e.id:this.options.generateId?d=e.index:this.points[e.index].id&&(d=this.points[e.index].id),void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const r=[],{radius:n,extent:i,reduce:o,minPoints:a}=this.options,s=n/(i*Math.pow(2,t));for(let n=0;n<e.length;n++){const i=e[n];if(i.zoom<=t)continue;i.zoom=t;const l=this.trees[t+1],c=l.within(i.x,i.y,s),u=i.numPoints||1;let h=u;for(const e of c){const r=l.points[e];r.zoom>t&&(h+=r.numPoints||1)}if(h>u&&h>=a){let e=i.x*u,a=i.y*u,s=o&&u>1?this._map(i,!0):null;const d=(n<<5)+(t+1)+this.points.length;for(const r of c){const n=l.points[r];if(n.zoom<=t)continue;n.zoom=t;const c=n.numPoints||1;e+=n.x*c,a+=n.y*c,n.parentId=d,o&&(s||(s=this._map(i,!0)),o(s,this._map(n)))}i.parentId=d,r.push(N(e/h,a/h,d,h,s))}else if(r.push(i),h>1)for(const e of c){const n=l.points[e];n.zoom<=t||(n.zoom=t,r.push(n))}}return r}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?W({},e.properties):e.properties;const r=this.points[e.index].properties,n=this.options.map(r);return t&&n===r?W({},n):n}}function N(e,t,r,n,i){return{x:R(e),y:R(t),zoom:1/0,id:r,parentId:-1,numPoints:n,properties:i}}function j(e,t){const[r,n]=e.geometry.coordinates;return{x:R(G(r)),y:R(H(n)),zoom:1/0,index:t,parentId:-1}}function U(e){return{type:"Feature",id:e.id,properties:V(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),q(e.y)]}};var t}function V(e){const t=e.numPoints,r=t>=1e4?`${Math.round(t/1e3)}k`:t>=1e3?Math.round(t/100)/10+"k":t;return W(W({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function G(e){return e/360+.5}function H(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function q(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function W(e,t){for(const r in t)e[r]=t[r];return e}function Z(e){return e.x}function X(e){return e.y}function Y(e,t,r,n){for(var i,o=n,a=r-t>>1,s=r-t,l=e[t],c=e[t+1],u=e[r],h=e[r+1],d=t+3;d<r;d+=3){var p=K(e[d],e[d+1],l,c,u,h);if(p>o)i=d,o=p;else if(p===o){var f=Math.abs(d-a);f<s&&(i=d,s=f)}}o>n&&(i-t>3&&Y(e,t,i,n),e[i+2]=o,r-i>3&&Y(e,i,r,n))}function K(e,t,r,n,i,o){var a=i-r,s=o-n;if(0!==a||0!==s){var l=((e-r)*a+(t-n)*s)/(a*a+s*s);l>1?(r=i,n=o):l>0&&(r+=a*l,n+=s*l)}return(a=e-r)*a+(s=t-n)*s}function J(e,t,r,n){var i={id:void 0===e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)Q(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<t.length;n++)Q(e,t[n]);else if("MultiPolygon"===r)for(n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)Q(e,t[n][i])}(i),i}function Q(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function $(e,t,r,n){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===o)ee(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)ee(i[c],s);else if("LineString"===o)te(i,s,a,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(c=0;c<i.length;c++)te(i[c],s=[],a,!1),e.push(J(l,"LineString",s,t.properties));return}re(i,s,a,!1)}else if("Polygon"===o)re(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<t.geometry.geometries.length;c++)$(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},r,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];re(i[c],u,a,!0),s.push(u)}}e.push(J(l,o,s,t.properties))}}function ee(e,t){t.push(ne(e[0])),t.push(ie(e[1])),t.push(0)}function te(e,t,r,n){for(var i,o,a=0,s=0;s<e.length;s++){var l=ne(e[s][0]),c=ie(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(a+=n?(i*c-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-o,2))),i=l,o=c}var u=t.length-3;t[2]=1,Y(t,0,u,r),t[u+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function re(e,t,r,n){for(var i=0;i<e.length;i++){var o=[];te(e[i],o,r,n),t.push(o)}}function ne(e){return e/360+.5}function ie(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function oe(e,t,r,n,i,o,a,s){if(n/=t,o>=(r/=t)&&a<n)return e;if(a<r||o>=n)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],h=u.geometry,d=u.type,p=0===i?u.minX:u.minY,f=0===i?u.maxX:u.maxY;if(p>=r&&f<n)l.push(u);else if(!(f<r||p>=n)){var m=[];if("Point"===d||"MultiPoint"===d)ae(h,m,r,n,i);else if("LineString"===d)se(h,m,r,n,i,!1,s.lineMetrics);else if("MultiLineString"===d)ce(h,m,r,n,i,!1);else if("Polygon"===d)ce(h,m,r,n,i,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var y=[];ce(h[g],y,r,n,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(J(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(J(u.id,d,m,u.tags))}}}return l.length?l:null}function ae(e,t,r,n,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=r&&a<=n&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function se(e,t,r,n,i,o,a){for(var s,l,c=le(e),u=0===i?he:de,h=e.start,d=0;d<e.length-3;d+=3){var p=e[d],f=e[d+1],m=e[d+2],g=e[d+3],y=e[d+4],_=0===i?p:f,v=0===i?g:y,x=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-y,2))),_<r?v>r&&(l=u(c,p,f,g,y,r),a&&(c.start=h+s*l)):_>n?v<n&&(l=u(c,p,f,g,y,n),a&&(c.start=h+s*l)):ue(c,p,f,m),v<r&&_>=r&&(l=u(c,p,f,g,y,r),x=!0),v>n&&_<=n&&(l=u(c,p,f,g,y,n),x=!0),!o&&x&&(a&&(c.end=h+s*l),t.push(c),c=le(e)),a&&(h+=s)}var b=e.length-3;p=e[b],f=e[b+1],m=e[b+2],(_=0===i?p:f)>=r&&_<=n&&ue(c,p,f,m),b=c.length-3,o&&b>=3&&(c[b]!==c[0]||c[b+1]!==c[1])&&ue(c,c[0],c[1],c[2]),c.length&&t.push(c)}function le(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ce(e,t,r,n,i,o){for(var a=0;a<e.length;a++)se(e[a],t,r,n,i,o,!1)}function ue(e,t,r,n){e.push(t),e.push(r),e.push(n)}function he(e,t,r,n,i,o){var a=(o-t)/(n-t);return e.push(o),e.push(r+(i-r)*a),e.push(1),a}function de(e,t,r,n,i,o){var a=(o-r)/(i-r);return e.push(t+(n-t)*a),e.push(o),e.push(1),a}function pe(e,t){for(var r=[],n=0;n<e.length;n++){var i,o=e[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=fe(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(fe(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(fe(o.geometry[s][c],t));i.push(l)}r.push(J(o.id,a,i,o.tags))}return r}function fe(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function me(e,t){if(e.transformed)return e;var r,n,i,o=1<<e.z,a=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(n=0;n<c.length;n+=2)l.geometry.push(ge(c[n],c[n+1],t,o,a,s));else for(n=0;n<c.length;n++){var h=[];for(i=0;i<c[n].length;i+=2)h.push(ge(c[n][i],c[n][i+1],t,o,a,s));l.geometry.push(h)}}return e.transformed=!0,e}function ge(e,t,r,n,i,o){return[Math.round(r*(e*n-i)),Math.round(r*(t*n-o))]}function ye(e,t,r,n,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,_e(a,e[s],o,i);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,h=e[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function _e(e,t,r,n){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)ve(a,i,e,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)ve(a,i[s],e,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)ve(a,c[s],e,r,!0,0===s)}if(a.length){var u=t.tags||null;if("LineString"===o&&n.lineMetrics){for(var h in u={},t.tags)u[h]=t.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==t.id&&(d.id=t.id),e.features.push(d)}}function ve(e,t,r,n,i,o){var a=n*n;if(n>0&&t.size<(i?a:n))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>a)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;i&&function(e,t){for(var r=0,n=0,i=e.length,o=i-2;n<i;o=n,n+=2)r+=(e[n]-e[o])*(e[n+1]+e[o+1]);if(r>0===t)for(n=0,i=e.length;n<i/2;n+=2){var a=e[n],s=e[n+1];e[n]=e[i-2-n],e[n+1]=e[i-1-n],e[i-2-n]=a,e[i-1-n]=s}}(s,o),e.push(s)}}function xe(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)$(r,e.features[n],t,n);else $(r,"Feature"===e.type?e:{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=function(e,t){var r=t.buffer/t.extent,n=e,i=oe(e,1,-1-r,r,0,-1,2,t),o=oe(e,1,1-r,2+r,0,-1,2,t);return(i||o)&&(n=oe(e,1,-r,1+r,0,-1,2,t)||[],i&&(n=pe(i,1).concat(n)),o&&(n=n.concat(pe(o,-1)))),n}(n,t),n.length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function be(e,t,r){return 32*((1<<e)*r+t)+e}function we(e,t){const r=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);const n=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!n)return t(null,null);const i=new u(n.features);let o=h.exports(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}xe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xe.prototype.splitTile=function(e,t,r,n,i,o,a){for(var s=[e,t,r,n],l=this.options,c=l.debug;s.length;){n=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,h=be(t,r,n),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=ye(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=e,i){if(t===l.maxZoom||t===i)continue;var f=1<<i-t;if(r!==Math.floor(o/f)||n!==Math.floor(a/f))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,y,_,v,x,b=.5*l.buffer/l.extent,w=.5-b,E=.5+b,T=1+b;m=g=y=_=null,v=oe(e,u,r-b,r+E,0,d.minX,d.maxX,l),x=oe(e,u,r+w,r+T,0,d.minX,d.maxX,l),e=null,v&&(m=oe(v,u,n-b,n+E,1,d.minY,d.maxY,l),g=oe(v,u,n+w,n+T,1,d.minY,d.maxY,l),v=null),x&&(y=oe(x,u,n-b,n+E,1,d.minY,d.maxY,l),_=oe(x,u,n+w,n+T,1,d.minY,d.maxY,l),x=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*r,2*n),s.push(g||[],t+1,2*r,2*n+1),s.push(y||[],t+1,2*r+1,2*n),s.push(_||[],t+1,2*r+1,2*n+1)}}},xe.prototype.getTile=function(e,t,r){var n=this.options,i=n.extent,o=n.debug;if(e<0||e>24)return null;var a=1<<e,s=be(e,t=(t%a+a)%a,r);if(this.tiles[s])return me(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,c=e,u=t,h=r;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[be(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,e,t,r),o>1&&console.timeEnd("drilling down"),this.tiles[s]?me(this.tiles[s],i):null):null};class Ee extends e.VectorTileWorkerSource{constructor(e,t,r,n,i){super(e,t,r,n,we),i&&(this.loadGeoJSON=i)}loadData(t,r){const n=t&&t.request,i=n&&n.collectResourceTiming;this.loadGeoJSON(t,((a,s)=>{if(a||!s)return r(a);if("object"!=typeof s)return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{o(s,!0);try{if(t.filter){const r=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const n=s.features.filter((e=>r.value.evaluate({zoom:0},e)));s={type:"FeatureCollection",features:n}}this._geoJSONIndex=t.cluster?new O(function({superclusterOptions:t,clusterProperties:r}){if(!r||!t)return t;const n={},i={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(r);for(const t of s){const[o,a]=r[t],s=e.createExpression(a),l=e.createExpression("string"==typeof o?[o,["accumulated"],["get",t]]:o);n[t]=s.value,i[t]=l.value}return t.map=e=>{a.properties=e;const t={};for(const e of s)t[e]=n[e].evaluate(o,a);return t},t.reduce=(e,t)=>{a.properties=t;for(const t of s)o.accumulated=e[t],e[t]=i[t].evaluate(o,a)},t}(t)).load(s.features):function(e,t){return new xe(e,t)}(s,t.geojsonVtOptions)}catch(a){return r(a)}this.loaded={};const l={};if(i){const r=e.getPerformanceMeasurement(n);r&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(r)))}r(null,l)}}))}reloadTile(e,t){const r=this.loaded;return r&&r[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,r){if(t.request)e.getJSON(t.request,r);else{if("string"!=typeof t.data)return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class Te{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:Ee},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}clearCaches(e,t,r){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],r()}checkIfReady(e,t,r){r()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,r){this.isSpriteLoaded[t]=r;for(const n in this.workerSources[t]){const i=this.workerSources[t][n];for(const t in i)i[t]instanceof e.VectorTileWorkerSource&&(i[t].isSpriteLoaded=r,i[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,r){this.availableImages[e]=t;for(const r in this.workerSources[e]){const n=this.workerSources[e][r];for(const e in n)n[e].availableImages=t}r()}enableTerrain(e,t,r){this.terrain=t,r()}setProjection(t,r){this.projections[t]=e.getProjection(r)}setLayers(e,t,r){this.getLayerIndex(e).replace(t),r()}updateLayers(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r()}loadTile(t,r,n){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).loadTile(i,n)}loadDEMTile(t,r,n){const i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},r):r;this.getDEMWorkerSource(t,r.source).loadTile(i,n)}reloadTile(t,r,n){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).reloadTile(i,n)}abortTile(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)}removeTile(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)}removeSource(e,t,r){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const n=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==n.removeSource?n.removeSource(t,r):r()}loadWorkerSource(e,t,r){try{this.self.importScripts(t.url),r()}catch(e){r(e.toString())}}syncRTLPluginState(t,r,n){try{e.plugin.setState(r);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const r=e.plugin.isParsed();n(r?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),r)}}catch(e){n(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new n),t}getWorkerSource(e,t,r){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){const n={send:(t,r,n,i,o,a)=>{this.actor.send(t,r,n,e,o,a)},scheduler:this.actor.scheduler};this.workerSources[e][t][r]=new this.workerSourceTypes[t](n,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][r]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,r){e.enforceCacheSizeLimit(r)}getWorkerPerformanceMetrics(e,t,r){r(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Te(self)),Te})),n(0,(function(e){function t(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!t(e[n],r[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==r){if("object"!=typeof r)return!1;if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(!t(e[n],r[n]))return!1;return!0}return e===r}var r=n;function n(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,r=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(r);try{t=new Worker(n),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(n),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var r=t.getImageData(0,0,1,1);return r&&r.width===e.width}()?(void 0===i[t=e&&e.failIfMajorPerformanceCaveat]&&(i[t]=function(e){var t,r=function(e){var t=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,t.getContext("webgl",r)||t.getContext("experimental-webgl",r)}(e);if(!r)return!1;try{t=r.createShader(r.VERTEX_SHADER)}catch(e){return!1}return!(!t||r.isContextLost())&&(r.shaderSource(t,"void main() {}"),r.compileShader(t),!0===r.getShaderParameter(t,r.COMPILE_STATUS))}(t)),i[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var i={};function o(t,r,n){const i=e.window.document.createElement(t);return void 0!==r&&(i.className=r),n&&n.appendChild(i),i}function a(t,r,n){const i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(r))i.setAttributeNS(null,e,r[e]);return n&&n.appendChild(i),i}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const s=e.window.document&&e.window.document.documentElement.style,l=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let c;function u(){s&&l&&(c=s[l],s[l]="none")}function h(){s&&l&&(s[l]=c)}function d(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",d,!0)}function p(){e.window.addEventListener("click",d,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",d,!0)}),0)}function f(e,t){const r=e.getBoundingClientRect();return y(e,r,t)}function m(e,t){const r=e.getBoundingClientRect(),n=[];for(let i=0;i<t.length;i++)n.push(y(e,r,t[i]));return n}function g(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function y(t,r,n){const i=t.offsetWidth===r.width?1:t.offsetWidth/r.width;return new e.pointGeometry((n.clientX-r.left)*i,(n.clientY-r.top)*i)}function _(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*o-i*n;return a?(e[0]=o*(a=1/a),e[1]=-n*a,e[2]=-i*a,e[3]=r*a,e):null}function v(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class x extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}hasImage(e){return!!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,r){let n=!0;return this._validateStretch(r.stretchX,r.data&&r.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),n=!1),this._validateStretch(r.stretchY,r.data&&r.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),n=!1),this._validateContent(r.content,r)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),n=!1),n}_validateStretch(e,t){if(!e)return!0;let r=0;for(const n of e){if(n[0]<r||n[1]<n[0]||t<n[1])return!1;r=n[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let r=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(r=!1);this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,r){const n={};for(const r of t){this.images[r]||this.fire(new e.Event("styleimagemissing",{id:r}));const t=this.images[r];t?n[r]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${r}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}r(null,n)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const r=this.patterns[t],n=this.getImage(t);if(!n)return null;if(r&&r.position.version===n.version)return r.position;if(r)r.position.version=n.version;else{const r={w:n.data.width+2,h:n.data.height+2,x:0,y:0},i=new e.ImagePosition(r,n);this.patterns[t]={bin:r,position:i}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const r=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:r,h:n}=e.potpack(t),i=this.atlasImage;i.resize({width:r||1,height:n||1});for(const t in this.patterns){const{bin:r}=this.patterns[t],n=r.x+1,o=r.y+1,a=this.images[t].data,s=a.width,l=a.height;e.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:o},{width:s,height:l}),e.RGBAImage.copy(a,i,{x:0,y:l-1},{x:n,y:o-1},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:o+l},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:s-1,y:0},{x:n-1,y:o},{width:1,height:l}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:n+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];v(e)&&this.updateImage(t,e)}}}const b=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,r){return function([t,r,n]){const i=e.degToRad(r+90),o=e.degToRad(n);return{x:t*Math.cos(i)*Math.sin(o),y:t*Math.sin(i)*Math.sin(o),z:t*Math.cos(o),azimuthal:r,polar:n}}(t.expression.evaluate(r))}interpolate(t,r,n){return{x:e.number(t.x,r.x,n),y:e.number(t.y,r.y,n),z:e.number(t.z,r.z,n),azimuthal:e.number(t.azimuthal,r.azimuthal,n),polar:e.number(t.polar,r.polar,n)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),w="-transition";class E extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(b),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,r={}){if(!this._validate(e.validateLight,t,r))for(const r in t){const n=t[r];e.endsWith(r,w)?this._transitionable.setTransition(r.slice(0,-w.length),n):this._transitionable.setValue(r,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,r,n){return(!n||!1!==n.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const T=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),S="-transition";class A extends e.Evented{constructor(t,r){super(),this._transitionable=new e.Transitionable(T),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=r}get(){return this._transitionable.serialize()}set(t){for(const r in t){const n=t[r];e.endsWith(r,S)?this._transitionable.setTransition(r.slice(0,-S.length),n):this._transitionable.setValue(r,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}}function P(t,r,n,i){const o=e.smoothstep(45,65,n),[a,s]=I(t,i),l=e.length(r);let c=1-Math.min(1,Math.exp((l-a)/(s-a)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*o*t.alpha}function I(e,t){const r=.5/Math.tan(.5*t);return[e.range[0]+r,e.range[1]+r]}const k=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])}),C="-transition";class M extends e.Evented{constructor(t,r){super(),this._transitionable=new e.Transitionable(k),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=r}get state(){const t=this._transform,r="globe"===t.projection.name,n=e.globeToMercatorTransition(t.zoom),i=this.properties.get("range"),o=[.5,3];return{range:r?[e.number(o[0],i[0],n),e.number(o[1],i[1],n)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,r={}){if(!this._validate(e.validateFog,t,r)){for(const r of Object.keys(e.spec.fog))t&&void 0===t[r]&&(t[r]=e.spec.fog[r].default);for(const r in t){const n=t[r];e.endsWith(r,C)?this._transitionable.setTransition(r.slice(0,-C.length),n):this._transitionable.setValue(r,n)}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const r=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*r.a}getOpacityAtLatLng(t,r){return this._transform.projection.supportsFog?function(t,r,n){const i=e.MercatorCoordinate.fromLngLat(r),o=n.elevation?n.elevation.getAtPointOrZero(i):0,a=[i.x,i.y,o];return e.transformMat4(a,a,n.mercatorFogMatrix),P(t,a,n.pitch,n._fov)}(this.state,t,r):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?I(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,r,n){return(!n||!1!==n.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class z{constructor(t,r){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const n=this.workerPool.acquire(this.id);for(let e=0;e<n.length;e++){const t=new z.Actor(n[e],r,this.id);t.name=`Worker ${e}`,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(t,r,n){e.asyncAll(this.actors,((e,n)=>{e.send(t,r,n)}),n=n||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function D(t,r,n){return r*(e.EXTENT/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}z.Actor=e.Actor;class L{constructor(e,t,r,n){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,n)}static createFromScreenPoints(t,r){let n,i;if(t instanceof e.pointGeometry||"number"==typeof t[0]){const o=e.pointGeometry.convert(t);n=[o],i=r.isPointAboveHorizon(o)}else{const o=e.pointGeometry.convert(t[0]),a=e.pointGeometry.convert(t[1]);n=[o,a],i=e.polygonizeBounds(o,a).every((e=>r.isPointAboveHorizon(e)))}return new L(n,r.getCameraPoint(),i,r)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(r,n,0,!1);return this.cameraPoint.y>n.y&&(this.cameraPoint.x>r.x&&this.cameraPoint.x<n.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=n.x?i[2]=this.cameraPoint:this.cameraPoint.x<=r.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}bufferedCameraGeometryGlobe(t){const r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(r,n,t),o=this.cameraPoint.clone();switch(3*((o.y>r.y)+(o.y>n.y))+((o.x>r.x)+(o.x>n.x))){case 0:i[0]=o,i[4]=o.clone();break;case 1:i.splice(1,0,o);break;case 2:i[1]=o;break;case 3:i.splice(4,0,o);break;case 5:i.splice(2,0,o);break;case 6:i[3]=o;break;case 7:i.splice(3,0,o);break;case 8:i[2]=o}return i}containsTile(t,r,n,i=0){const o=t.queryPadding/r._pixelsPerMercatorPixel+1,a=n?this._bufferedCameraMercator(o,r):this._bufferedScreenMercator(o,r);let s=t.tileID.wrap+(a.unwrapped?i:0);const l=a.polygon.map((r=>e.getTilePoint(t.tileTransform,r,s)));if(!e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT))return;s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);const c=this.screenGeometryMercator.polygon.map((r=>e.getTileVec3(t.tileTransform,r,s))),u=c.map((t=>new e.pointGeometry(t[0],t[1]))),h=r.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),d=e.getTileVec3(t.tileTransform,h,s),p=c.map((t=>{const r=e.sub(t,t,d);return e.normalize(r,r),new e.Ray(d,r)})),f=D(t,1,r.zoom)*r._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:p,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=e.getBounds(l),m.min.x=e.clamp(m.min.x,0,e.EXTENT),m.min.y=e.clamp(m.min.y,0,e.EXTENT),m.max.x=e.clamp(m.max.x,0,e.EXTENT),m.max.y=e.clamp(m.max.y,0,e.EXTENT),m),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:f};var m}_bufferedScreenMercator(e,t){const r=B(e);if(this._screenRaycastCache[r])return this._screenRaycastCache[r];{let n;return n="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._screenRaycastCache[r]=n,n}}_bufferedCameraMercator(e,t){const r=B(e);if(this._cameraRaycastCache[r])return this._cameraRaycastCache[r];{let n;return n="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._cameraRaycastCache[r]=n,n}}_projectAndResample(t,r){const n=function(t,r){const n=e.multiply([],r.pixelMatrix,r.globeMatrix),i=[0,-e.GLOBE_RADIUS,0,1],o=[0,e.GLOBE_RADIUS,0,1],a=[0,0,0,1];e.transformMat4$1(i,i,n),e.transformMat4$1(o,o,n),e.transformMat4$1(a,a,n);const s=new e.pointGeometry(i[0]/i[3],i[1]/i[3]),l=new e.pointGeometry(o[0]/o[3],o[1]/o[3]),c=e.polygonContainsPoint(t,s)&&i[3]<a[3],u=e.polygonContainsPoint(t,l)&&o[3]<a[3];if(!c&&!u)return null;const h=function(e,t,r){for(let n=1;n<e.length;n++){const i=R(t.pointCoordinate3D(e[n-1]).x),o=R(t.pointCoordinate3D(e[n]).x);if(r<0){if(i<o)return{idx:n,t:-i/(o-1-i)}}else if(o<i)return{idx:n,t:(1-i)/(o+1-i)}}return null}(t,r,c?-1:1);if(!h)return null;const{idx:d,t:p}=h;let f=d>1?F(t.slice(0,d),r):[],m=d<t.length?F(t.slice(d),r):[];f=f.map((t=>new e.pointGeometry(R(t.x),t.y))),m=m.map((t=>new e.pointGeometry(R(t.x),t.y)));const g=[...f];0===g.length&&g.push(m[m.length-1]);const y=e.number(g[g.length-1].y,(0===m.length?f[0]:m[0]).y,p);let _;return _=c?[new e.pointGeometry(0,y),new e.pointGeometry(0,0),new e.pointGeometry(1,0),new e.pointGeometry(1,y)]:[new e.pointGeometry(1,y),new e.pointGeometry(1,1),new e.pointGeometry(0,1),new e.pointGeometry(0,y)],g.push(..._),0===m.length?g.push(f[0]):g.push(...m),{polygon:g.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:!1}}(t,r);if(n)return n;const i=function(t,r){let n=!1,i=-1/0,o=0;for(let e=0;e<t.length-1;e++)t[e].x>i&&(i=t[e].x,o=e);for(let e=0;e<t.length-1;e++){const r=(o+e)%(t.length-1),i=t[r],a=t[r+1];Math.abs(i.x-a.x)>.5&&(i.x<a.x?(i.x+=1,0===r&&(t[t.length-1].x+=1)):(a.x+=1,r+1===t.length-1&&(t[0].x+=1)),n=!0)}const a=e.mercatorXfromLng(r.center.lng);return n&&a<Math.abs(a-1)&&t.forEach((e=>{e.x-=1})),{polygon:t,unwrapped:n}}(F(t,r).map((t=>new e.pointGeometry(R(t.x),t.y))),r);return{polygon:i.polygon.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:i.unwrapped}}}function F(t,r){return e.resample(t,(e=>{const t=r.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function R(e){return e<0?1+e%1:e%1}function B(e){return 100*e|0}function O(t,r,n,i,o){const a=function(n,i){if(n)return o(n);if(i){t.url&&i.tiles&&t.tiles&&delete t.tiles;const n=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(n.vectorLayers=i.vector_layers,n.vectorLayerIds=n.vectorLayers.map((e=>e.id))),n.tiles=r.canonicalizeTileset(n,t.url),o(null,n)}};return t.url?e.getJSON(r.transformRequest(r.normalizeSourceURL(t.url,null,n,i),e.ResourceType.Source),a):e.exported.frame((()=>a(null,t)))}class N{constructor(t,r,n){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=r||0,this.maxzoom=n||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const r=Math.pow(2,t.z),n=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*r),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*r),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*r),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*r);return t.x>=n&&t.x<o&&t.y>=i&&t.y<a}}class j{constructor(e,t,r){this.context=e;const n=e.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const U={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class V{constructor(e,t,r,n){this.length=t.length,this.attributes=r,this.itemSize=t.bytesPerElement,this.dynamicDraw=n,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let r=0;r<this.attributes.length;r++){const n=t.attributes[this.attributes[r].name];void 0!==n&&e.enableVertexAttribArray(n)}}setVertexAttribPointers(e,t,r){for(let n=0;n<this.attributes.length;n++){const i=this.attributes[n],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[U[i.type]],!1,this.itemSize,i.offset+this.itemSize*(r||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class G{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class H extends G{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class q extends G{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class W extends G{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Z extends G{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class X extends G{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Y extends G{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class K extends G{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class J extends G{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Q extends G{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class $ extends G{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class ee extends G{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class te extends G{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class re extends G{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class ne extends G{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class ie extends G{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class oe extends G{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class ae extends G{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class se extends G{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class le extends G{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class ce extends G{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class ue extends G{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class he extends G{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class de extends G{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class pe extends G{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class fe extends G{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class me extends G{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ge extends G{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ye extends G{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class _e extends G{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class ve extends G{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class xe extends G{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class be extends G{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class we extends be{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Ee extends be{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Te extends Ee{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Se{constructor(e,t,r,n){this.context=e,this.width=t,this.height=r;const i=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new we(e,i),n&&(this.depthAttachment=new Ee(e,i))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Ae{constructor(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new H(this),this.clearDepth=new q(this),this.clearStencil=new W(this),this.colorMask=new Z(this),this.depthMask=new X(this),this.stencilMask=new Y(this),this.stencilFunc=new K(this),this.stencilOp=new J(this),this.stencilTest=new Q(this),this.depthRange=new $(this),this.depthTest=new ee(this),this.depthFunc=new te(this),this.blend=new re(this),this.blendFunc=new ne(this),this.blendColor=new ie(this),this.blendEquation=new oe(this),this.cullFace=new ae(this),this.cullFaceSide=new se(this),this.frontFace=new le(this),this.program=new ce(this),this.activeTexture=new ue(this),this.viewport=new he(this),this.bindFramebuffer=new de(this),this.bindRenderbuffer=new pe(this),this.bindTexture=new fe(this),this.bindVertexBuffer=new me(this),this.bindElementBuffer=new ge(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ye(this),this.pixelStoreUnpack=new _e(this),this.pixelStoreUnpackPremultiplyAlpha=new ve(this),this.pixelStoreUnpackFlipY=new xe(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new j(this,e,t)}createVertexBuffer(e,t,r){return new V(this,e,t,r)}createRenderbuffer(e,t,r){const n=this.gl,i=n.createRenderbuffer();return this.bindRenderbuffer.set(i),n.renderbufferStorage(n.RENDERBUFFER,e,t,r),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,r){return new Se(this,e,t,r)}clear({color:e,depth:t,stencil:r}){const n=this.gl;let i=0;e&&(i|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(i|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==r&&(i|=n.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),n.clear(i)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(r){t(r.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Pe extends e.Evented{constructor(t,r,n,i){super(),this.id=t,this.dispatcher=n,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},r),e.extend(this,e.pick(r,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,null,null,((t,r)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):r&&(e.extend(this,r),r.bounds&&(this.tileBounds=new N(r.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(r.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,r){const n=e.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),n,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),((n,i,o,a)=>(delete t.request,t.aborted?(t.state="unloaded",r(null)):n?(t.state="errored",r(n)):i?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:a}),t.setTexture(i,this.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void r(null)):r(null))))}static loadTileData(e,t,r){e.setTexture(t,r)}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture)}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}}let Ie;function ke(t,r,n,i,o,a,s,l){const c=[t,n,o,r,i,a,1,1,1],u=[s,l,1],h=e.adjoint([],c),[d,p,f]=e.transformMat3(u,u,e.transpose(h,h));return e.multiply$1(c,[d,0,0,0,p,0,0,0,f],c)}class Ce extends e.Evented{constructor(e,t,r,n){super(),this.id=e,this.dispatcher=r,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=t,this._dirty=!1}load(t,r){this._loaded=r||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((r,n)=>{if(this._imageRequest=null,this._loaded=!0,r)this.fire(new e.ErrorEvent(r));else if(n){const{HTMLImageElement:r}=e.window;this.image=n instanceof r?e.exported.getImageData(n):n,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const r=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let r=1/0,n=1/0,i=-1/0,o=-1/0;for(const e of t)r=Math.min(r,e.x),n=Math.min(n,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y);const a=Math.max(i-r,o-n),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((r+i)/2*l),Math.floor((n+o)/2*l))}(r),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}if(this._boundsArray)return;const r=e.tileTransform(this.tileID,this.map.transform.projection),[n,i,o,a]=this.coordinates.map((t=>{const n=r.projection.project(t[0],t[1]);return e.getTilePoint(r,n)._round()}));this.perspectiveTransform=function(t,r,n,i,o,a,s,l,c,u){const h=ke(0,0,t,0,0,r,t,r),d=ke(n,i,o,a,s,l,c,u);return e.multiply$1(d,e.adjoint(h,h),d),[d[6]/d[8]*t/e.EXTENT,d[7]/d[8]*r/e.EXTENT]}(this.width,this.height,n.x,n.y,i.x,i.y,a.x,a.y,o.x,o.y);const s=this._boundsArray=new e.StructArrayLayout4i8;s.emplaceBack(n.x,n.y,0,0),s.emplaceBack(i.x,i.y,e.EXTENT,0),s.emplaceBack(a.x,a.y,0,e.EXTENT),s.emplaceBack(o.x,o.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(s,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,r=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Me={vector:class extends e.Evented{constructor(t,r,n,i){if(super(),this.id=t,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(r,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));const r=Array.isArray(this.map._language)?this.map._language.join():this.map._language,n=this.map._worldview;this._tileJSONRequest=O(this._options,this.map._requestManager,r,n,((i,o)=>{this._tileJSONRequest=null,this._loaded=!0,i?(r&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${r}`),n&&2!==n.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${n}`),this.fire(new e.ErrorEvent(i))):o&&(e.extend(this,o),o.bounds&&(this.tileBounds=new N(o.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(o.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(i)}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>{const e=this.map.style._getSourceCaches(this.id);for(const t of e)t.clearTiles()}))}setSourceProperty(e){e(),this.reload()}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}loadTile(t,r){const n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(n,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=r:t.request=t.actor.send("reloadTile",i,o.bind(this));else if(t.actor=this._tileWorkers[n]=this._tileWorkers[n]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",i,o.bind(this),void 0,!0);else{const r=e.loadVectorTile.call({deduped:this._deduped},i,((e,r)=>{e||!r?o.call(this,e):(i.data={cacheControl:r.cacheControl,expires:r.expires,rawData:r.rawData.slice(0)},t.actor&&t.actor.send("loadTile",i,o.bind(this),void 0,!0))}),!0);t.request={cancel:r}}function o(n,i){return delete t.request,t.aborted?r(null):n&&404!==n.status?r(n):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),r(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},raster:Pe,"raster-dem":class extends Pe{constructor(t,r,n,i){super(t,r,n,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}loadTile(t,r){const n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,n){e&&(t.state="errored",r(e)),n&&(t.dem=n,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",r(null))}t.request=e.getImage(this.map._requestManager.transformRequest(n,e.ResourceType.Tile),function(n,o,a,s){if(delete t.request,t.aborted)t.state="unloaded",r(null);else if(n)t.state="errored",r(n);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:a,expires:s});const r=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap&&(null==Ie&&(Ie=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),Ie),n=1-(o.width-e.prevPowerOfTwo(o.width))/2;n<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=r?o:e.exported.getImageData(o,n),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:n};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const r=t.canonical,n=Math.pow(2,r.z),i=(r.x-1+n)%n,o=0===r.x?t.wrap-1:t.wrap,a=(r.x+1+n)%n,s=r.x+1===n?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,o,r.z,i,r.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,a,r.y).key]={backfilled:!1},r.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,o,r.z,i,r.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,a,r.y-1).key]={backfilled:!1}),r.y+1<n&&(l[new e.OverscaledTileID(t.overscaledZ,o,r.z,i,r.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,a,r.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,r,n,i){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(i),this._data=r.data,this._options=e.extend({},r),this._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;const o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*o,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==r.clusterRadius?r.clusterRadius:50)*o,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,r,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:r},n),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),r=this._data;"string"==typeof r?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(r),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(r),this._pendingLoad=this.actor.send(`${this.type}.loadData`,t,((t,r)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[this.id]&&(t.resourceTiming=r.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(t,r){const n=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(n,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,i)=>(delete t.request,t.unloadVectorData(),t.aborted?r(null):e?r(e):(t.loadVectorData(i,this.map.painter,"reloadTile"===n),r(null)))),void 0,"loadTile"===n)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ce{constructor(e,t,r,n){super(e,t,r,n),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const r of t.urls)this.urls.push(this.map._requestManager.transformRequest(r,e.ResourceType.Source).url);e.getVideo(this.urls,((t,r)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):r&&(this.video=r,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const r=this.video.seekable;t<r.start(0)||t>r.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,r=t.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ce,canvas:class extends Ce{constructor(t,r,n,i){super(t,r,n,i),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const r=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(r,this.canvas,r.gl.RGBA,{premultiply:!0}),this._prepareData(r)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.Evented{constructor(t,r,n,i){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=n,this._implementation=r,this.setEventedParent(i),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new N(this._implementation.bounds,this.minzoom,this.maxzoom)),r.update=this._update.bind(this),r.clearTiles=this._clearTiles.bind(this),r.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(r,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){const{x:t,y:r,z:n}=e.canonical;return this._implementation.hasTile({x:t,y:r,z:n})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,r){const{x:n,y:i,z:o}=t.tileID.canonical,a=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:n,y:i,z:o},{signal:a.signal})).then(function(n){return delete t.request,t.aborted?(t.state="unloaded",r(null)):void 0===n?(t.state="errored",r(null)):null===n?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",r(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(n)?(this.loadTileData(t,n),t.state="loaded",void r(null)):(t.state="errored",r(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch((e=>{20!==e.code&&(t.state="errored",r(e))})),t.request.cancel=()=>a.abort()}loadTileData(e,t){Pe.loadTileData(e,t,this._map.painter)}unloadTileData(e){Pe.unloadTileData(e,this._map.painter)}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:r,z:n}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:r,z:n})}t()}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}},ze=function(t,r,n,i){const o=new Me[r.type](t,r,n,i);if(o.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${o.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o};function De(t,r){const n=e.identity([]);return e.scale(n,n,[.5*t.width,.5*-t.height,1]),e.translate(n,n,[1,-1,0]),e.multiply(n,n,t.calculateProjMatrix(r.toUnwrapped())),Float32Array.from(n)}function Le(e,t,r,n,i,o,a,s=!1){const l=e.tilesIn(n,a,s);l.sort(Re);const c=[];for(const n of l)c.push({wrappedTileID:n.tile.tileID.wrapped().key,queryResults:n.tile.queryRenderedFeatures(t,r,e._state,n,i,o,De(e.transform,n.tile.tileID),s)});const u=function(e){const t={},r={};for(const n of e){const e=n.queryResults,i=n.wrappedTileID,o=r[i]=r[i]||{};for(const r in e){const n=e[r],i=o[r]=o[r]||{},a=t[r]=t[r]||[];for(const e of n)i[e.featureIndex]||(i[e.featureIndex]=!0,a.push(e))}}return t}(c);for(const t in u)u[t].forEach((t=>{const r=t.feature,n=r.layer;n&&"background"!==n.type&&"sky"!==n.type&&(r.source=n.source,n["source-layer"]&&(r.sourceLayer=n["source-layer"]),r.state=void 0!==r.id?e.getFeatureState(n["source-layer"],r.id):{})}));return u}function Fe(e,t){const r=e.getRenderableIds().map((t=>e.getTileByID(t))),n=[],i={};for(let e=0;e<r.length;e++){const o=r[e],a=o.tileID.canonical.key;i[a]||(i[a]=!0,o.querySourceFeatures(n,t))}return n}function Re(e,t){const r=e.tileID,n=t.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}function Be(){return null!=yo.workerClass?new yo.workerClass:new e.window.Worker(yo.workerUrl)}const Oe="mapboxgl_preloaded_worker_pool";class Ne{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Ne.workerCount;)this.workers.push(new Be);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Oe]}numActive(){return Object.keys(this.active).length}}let je;function Ue(){return je||(je=new Ne),je}function Ve(t,r){const n={};for(const e in t)"ref"!==e&&(n[e]=t[e]);return e.refProperties.forEach((e=>{e in r&&(n[e]=r[e])})),n}function Ge(e){e=e.slice();const t=Object.create(null);for(let r=0;r<e.length;r++)t[e[r].id]=e[r];for(let r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=Ve(e[r],t[e[r].ref]));return e}Ne.workerCount=2;const He={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function qe(e,t,r){r.push({command:He.addSource,args:[e,t[e]]})}function We(e,t,r){t.push({command:He.removeSource,args:[e]}),r[e]=!0}function Ze(e,t,r,n){We(e,r,n),qe(e,t,r)}function Xe(e,r,n){let i;for(i in e[n])if(e[n].hasOwnProperty(i)&&"data"!==i&&!t(e[n][i],r[n][i]))return!1;for(i in r[n])if(r[n].hasOwnProperty(i)&&"data"!==i&&!t(e[n][i],r[n][i]))return!1;return!0}function Ye(e,r,n,i,o,a){let s;for(s in r=r||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],r[s])||n.push({command:a,args:[i,s,r[s],o]}));for(s in r)r.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],r[s])||n.push({command:a,args:[i,s,r[s],o]}))}function Ke(e){return e.id}function Je(e,t){return e[t.id]=t,e}class Qe{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let r=1,n=this._distances[r];const i=t*this.paddedLength+this.padding;for(;n<i&&r<this._distances.length;)n=this._distances[++r];const o=r-1,a=this._distances[o],s=n-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[r].mult(l))}}class $e{constructor(e,t,r){const n=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(t/r);for(let e=0;e<this.xCellCount*this.yCellCount;e++)n.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)}insertCircle(e,t,r,n){this._forEachCell(t-n,r-n,t+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(n)}_insertBoxCell(e,t,r,n,i,o){this.boxCells[i].push(o)}_insertCircleCell(e,t,r,n,i,o){this.circleCells[i].push(o)}_query(e,t,r,n,i,o){if(r<0||e>this.width||n<0||t>this.height)return!i&&[];const a=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=n){if(i)return!0;for(let e=0;e<this.boxKeys.length;e++)a.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],r=this.circles[3*e+1],n=this.circles[3*e+2];a.push({key:this.circleKeys[e],x1:t-n,y1:r-n,x2:t+n,y2:r+n})}return o?a.filter(o):a}return this._forEachCell(e,t,r,n,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}_queryCircle(e,t,r,n,i){const o=e-r,a=e+r,s=t-r,l=t+r;if(a<0||o>this.width||l<0||s>this.height)return!n&&[];const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:n,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}},i),n?c.length>0:c}query(e,t,r,n,i){return this._query(e,t,r,n,!1,i)}hitTest(e,t,r,n,i){return this._query(e,t,r,n,!0,i)}hitTestCircle(e,t,r,n){return this._queryCircle(e,t,r,!0,n)}_queryCell(e,t,r,n,i,o,a,s){const l=a.seenUids,c=this.boxCells[i];if(null!==c){const i=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=i[c+2]&&t<=i[c+3]&&r>=i[c+0]&&n>=i[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:i[c],y1:i[c+1],x2:i[c+2],y2:i[c+3]})}}}const u=this.circleCells[i];if(null!==u){const i=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(i[u],i[u+1],i[u+2],e,t,r,n)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const e=i[u],t=i[u+1],r=i[u+2];o.push({key:this.circleKeys[c],x1:e-r,y1:t-r,x2:e+r,y2:t+r})}}}}}_queryCellCircle(e,t,r,n,i,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[i];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const r=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[r+0],e[r+1],e[r+2],e[r+3])&&(!s||s(this.boxKeys[t])))return o.push(!0),!0}}const h=this.circleCells[i];if(null!==h){const e=this.circles;for(const t of h)if(!c.circle[t]){c.circle[t]=!0;const r=3*t;if(this._circlesCollide(e[r],e[r+1],e[r+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return o.push(!0),!0}}}_forEachCell(e,t,r,n,i,o,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(r),h=this._convertToYCellCoord(n);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(i.call(this,e,t,r,n,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,r,n,i,o){const a=n-e,s=i-t,l=r+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,r,n,i,o,a){const s=(o-n)/2,l=Math.abs(e-(n+s));if(l>s+r)return!1;const c=(a-i)/2,u=Math.abs(t-(i+c));if(u>c+r)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=r*r}}const et=Math.tan(85*Math.PI/180);function tt(t,r,n,i,o,a,s){const l=e.create();if(n)if("globe"===a.name){const t=e.calculateGlobeLabelMatrix(o,r);e.multiply(l,l,t)}else{const t=_([],s);l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],i||e.rotateZ(l,l,o.angle)}else e.multiply(l,o.labelPlaneMatrix,t);return l}function rt(e,t,r,n,i,o,a){const s=tt(e,t,r,n,i,o,a);return"globe"===o.name&&r||(s[2]=s[6]=s[10]=s[14]=0),s}function nt(t,r,n,i,o,a,s){if(n){if("globe"===a.name){const l=tt(t,r,n,i,o,a,s);return e.invert(l,l),e.multiply(l,t,l),l}{const r=e.clone(t),n=e.identity([]);return n[0]=s[0],n[1]=s[1],n[4]=s[2],n[5]=s[3],e.multiply(r,r,n),i||e.rotateZ(r,r,-o.angle),r}}return o.glCoordMatrix}function it(t,r,n=0){const i=[t.x,t.y,n,1];n?e.transformMat4$1(i,i,r):yt(i,i,r);const o=i[3];return{point:[i[0]/o,i[1]/o,i[2]/o],signedDistanceFromCamera:o}}function ot(t,r){const n=[t[0],t[1],t[2],1];e.transformMat4$1(n,n,r);const i=n[3];return{point:[n[0]/i,n[1]/i,n[2]/i],signedDistanceFromCamera:i}}function at(e,t){return Math.min(.5+e/t*.5,1.5)}function st(e,t){const r=e[0]/e[3],n=e[1]/e[3];return r>=-t[0]&&r<=t[0]&&n>=-t[1]&&n<=t[1]}function lt(t,r,n,i,o,a,s,l,c,u){const h=n.transform,d=i?t.textSizeData:t.iconSizeData,p=e.evaluateSizeForZoom(d,n.transform.zoom),f="globe"===h.projection.name,m=[256/n.width*2+1,256/n.height*2+1],g=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;g.clear();let y=null;f&&(y=i?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const _=t.lineVertexArray,v=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,x=n.transform.width/n.transform.height;let b=!1;for(let i=0;i<v.length;i++){const f=v.get(i);if(f.writingMode!==e.WritingMode.vertical||b||0!==i&&v.get(i-1).writingMode===e.WritingMode.horizontal||(b=!0),(f.hidden||f.writingMode===e.WritingMode.vertical)&&!b){gt(f.numGlyphs,g);continue}b=!1;const w=new e.pointGeometry(f.tileAnchorX,f.tileAnchorY),E=c?c(w):[0,0,0],T=h.projection.projectTilePoint(w.x,w.y,u.canonical),S=[T.x+E[0],T.y+E[1],T.z+E[2]],A=[...S,1];if(e.transformMat4$1(A,A,r),!st(A,m)){gt(f.numGlyphs,g);continue}const P=at(n.transform.cameraToCenterDistance,A[3]),I=e.evaluateSizeForFeature(d,p,f),k=s?I/P:I*P,C=it(new e.pointGeometry(S[0],S[1]),o,S[2]);if(C.signedDistanceFromCamera<=0){gt(f.numGlyphs,g);continue}let M={};const z=s?null:c,D=ht(f,k,!1,l,r,o,a,t.glyphOffsetArray,_,g,y,C.point,w,M,x,z,h.projection,u,s);b=D.useVertical,z&&D.needsFlipping&&(M={}),(D.notEnoughRoom||b||D.needsFlipping&&ht(f,k,!0,l,r,o,a,t.glyphOffsetArray,_,g,y,C.point,w,M,x,z,h.projection,u,s).notEnoughRoom)&&gt(f.numGlyphs,g)}i?(t.text.dynamicLayoutVertexBuffer.updateData(g),y&&t.text.globeExtVertexBuffer.updateData(y)):(t.icon.dynamicLayoutVertexBuffer.updateData(g),y&&t.icon.globeExtVertexBuffer.updateData(y))}function ct(e,t,r,n,i,o,a,s,l,c,u,h,d,p,f,m){const g=s.glyphStartIndex+s.numGlyphs,y=s.lineStartIndex,_=s.lineStartIndex+s.lineLength,v=t.getoffsetX(s.glyphStartIndex),x=t.getoffsetX(g-1),b=ft(e*v,r,n,i,o,a,s.segment,y,_,l,c,u,h,d,!0,p,f,m);if(!b)return null;const w=ft(e*x,r,n,i,o,a,s.segment,y,_,l,c,u,h,d,!0,p,f,m);return w?{first:b,last:w}:null}function ut(t,r,n,i){return t.writingMode===e.WritingMode.horizontal&&Math.abs(n.y-r.y)>Math.abs(n.x-r.x)*i?{useVertical:!0}:t.writingMode===e.WritingMode.vertical?r.y<n.y?{needsFlipping:!0}:null:0!==t.flipState&&function(e,t,r){const n=(t.x-e.x)*r;return 0===n||Math.abs((t.y-e.y)/n)>et}(r,n,i)?1===t.flipState?{needsFlipping:!0}:null:r.x>n.x?{needsFlipping:!0}:null}function ht(t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v){const x=r/24,b=t.lineOffsetX*x,w=t.lineOffsetY*x;let E=[];if(t.numGlyphs>1){const r=t.glyphStartIndex+t.numGlyphs,o=t.lineStartIndex,u=t.lineStartIndex+t.lineLength,h=ct(x,l,b,w,n,d,p,t,c,a,f,g,!1,y,_,v);if(!h)return{notEnoughRoom:!0};const T=ot(h.first.point,s).point,S=ot(h.last.point,s).point,A=new e.pointGeometry(T[0],T[1]),P=new e.pointGeometry(S[0],S[1]);if(i&&!n){const e=ut(t,A,P,m);if(t.flipState=e&&e.needsFlipping?1:2,e)return e}E=[h.first];for(let e=t.glyphStartIndex+1;e<r-1;e++){const r=ft(x*l.getoffsetX(e),b,w,n,d,p,t.segment,o,u,c,a,f,g,!1,!1,y,_,v);if(!r)return{notEnoughRoom:!0};E.push(r)}E.push(h.last)}else{if(i&&!n){const r=it(p,o).point,n=t.lineStartIndex+t.segment+1,i=new e.pointGeometry(c.getx(n),c.gety(n)),a=it(i,o),s=a.signedDistanceFromCamera>0?a.point:pt(p,i,r,1,o,void 0,y,_.canonical),l=ut(t,new e.pointGeometry(r[0],r[1]),new e.pointGeometry(s[0],s[1]),m);if(t.flipState=l&&l.needsFlipping?1:2,l)return l}const r=ft(x*l.getoffsetX(t.glyphStartIndex),b,w,n,d,p,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,c,a,f,g,!1,!1,y,_,v);if(!r)return{notEnoughRoom:!0};E=[r]}if(h)for(const t of E)e.updateGlobeVertexNormal(h,u.length+0,t.up[0],t.up[1],t.up[2]),e.updateGlobeVertexNormal(h,u.length+1,t.up[0],t.up[1],t.up[2]),e.updateGlobeVertexNormal(h,u.length+2,t.up[0],t.up[1],t.up[2]),e.updateGlobeVertexNormal(h,u.length+3,t.up[0],t.up[1],t.up[2]),e.addDynamicAttributes(u,t.point[0],t.point[1],t.point[2],t.angle);else for(const t of E)e.addDynamicAttributes(u,t.point[0],t.point[1],t.point[2],t.angle);return{}}function dt(t,r,n,i,o){const a=i.projectTilePoint(t.x,t.y,r);if(!o)return it(a,n,a.z);const s=o(t);return it(new e.pointGeometry(a.x+s[0],a.y+s[1]),n,a.z+s[2])}function pt(t,r,n,i,o,a,s,l){const c=dt(t.add(t.sub(r)._unit()),l,o,s,a).point,u=e.sub([],n,c);return e.scaleAndAdd([],n,u,i/e.length(u))}function ft(t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g,y,_){const v=i?t-r:t+r;let x=v>0?1:-1,b=0;i&&(x*=-1,b=Math.PI),x<0&&(b+=Math.PI);let w=x>0?l+s:l+s+1,E=o,T=o,S=0,A=0;const P=Math.abs(v),I=[],k=[];let C=a;const M=()=>{const t=w-x;return 0===S?a:new e.pointGeometry(u.getx(t),u.gety(t))},z=()=>{const e=M();return pt(e,C||e,T,P-S+1,h,p,g,y.canonical)};for(;S+A<=P;){if(w+=x,w<l||w>=c)return null;if(T=E,I.push(E),f&&k.push(C||M()),E=d[w],void 0===E){C=new e.pointGeometry(u.getx(w),u.gety(w));const t=dt(C,y.canonical,h,g,p);E=t.signedDistanceFromCamera>0?d[w]=t.point:z()}else C=null;S+=A,A=e.distance(T,E)}C=C||new e.pointGeometry(u.getx(w),u.gety(w));const D=M();m&&p&&(d[w]=E=void 0===d[w]?E:z(),A=e.distance(T,E));const L=(P-S)/A,F=C.sub(D).mult(L)._add(D),R=e.sub([],E,T),B=e.scaleAndAdd([],T,R,L);let O=[0,0,1],N=R[0],j=R[1];if(_&&(O=g.upVector(y.canonical,F.x,F.y),0!==O[0]||0!==O[1]||1!==O[2])){const t=[1,0,0],r=[0,1,0];t[0]=O[2],t[1]=0,t[2]=-O[0],e.cross(r,O,t),e.normalize(t,t),e.normalize(r,r),N=e.dot(R,t),j=e.dot(R,r)}if(n){const t=e.cross([],O,R);e.normalize(t,t),e.scaleAndAdd(B,B,t,n*x)}const U=b+Math.atan2(j,N);return I.push(B),f&&k.push(F),{point:B,angle:U,path:I,tilePath:k,up:O}}const mt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function gt(e,t){for(let r=0;r<e;r++){const e=t.length;t.resize(e+4),t.float32.set(mt,4*e)}}function yt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e[3]=r[3]*n+r[7]*i+r[15],e}const _t=100;class vt{constructor(e,t,r=new $e(e.width+200,e.height+200,25),n=new $e(e.width+200,e.height+200,25)){this.transform=e,this.grid=r,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+_t,this.screenBottomBoundary=e.height+_t,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,r,n,i,o,a,s){let l=r.projectedAnchorX,c=r.projectedAnchorY,u=r.projectedAnchorZ;const h=r.elevation,d=r.tileID;if(h&&d){const t=e.getProjection().upVector(d.canonical,r.tileAnchorX,r.tileAnchorY),n=e.getProjection().upVectorScale(d.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=t[0]*h*n,c+=t[1]*h*n,u+=t[2]*h*n}const p=this.projectAndGetPerspectiveRatio(a,[l,c,u],r.tileID,"globe"===e.projection.name||!!h||this.transform.pitch>0,e.getProjection()),f=o*p.perspectiveRatio,m=(r.x1*t+n.x-r.padding)*f+p.point.x,g=(r.y1*t+n.y-r.padding)*f+p.point.y,y=(r.x2*t+n.x+r.padding)*f+p.point.x,_=(r.y2*t+n.y+r.padding)*f+p.point.y,v=p.perspectiveRatio<=.55||p.occluded;return!this.isInsideGrid(m,g,y,_)||!i&&this.grid.hitTest(m,g,y,_,s)||v?{box:[],offscreen:!1,occluded:p.occluded}:{box:[m,g,y,_],offscreen:this.isOffscreen(m,g,y,_),occluded:!1}}placeCollisionCircles(t,r,n,i,o,a,s,l,c,u,h,d,p,f,m){const g=[],y=this.transform.elevation,_=y?y.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,t.getProjection()):e=>[0,0,0],v=new e.pointGeometry(n.tileAnchorX,n.tileAnchorY),x=t.getProjection().projectTilePoint(n.tileAnchorX,n.tileAnchorY,m.canonical),b=_(v),w=[x.x+b[0],x.y+b[1],x.z+b[2]],E="globe"===t.projection.name,T=this.projectAndGetPerspectiveRatio(s,[w[0],w[1],w[2]],m,E||!!y||this.transform.pitch>0,t.getProjection()),{perspectiveRatio:S}=T,A=(h?a/S:a*S)/e.ONE_EM,P=it(new e.pointGeometry(w[0],w[1]),l,w[2]).point,I=T.signedDistanceFromCamera>0?ct(A,o,n.lineOffsetX*A,n.lineOffsetY*A,!1,P,v,n,i,l,{},y&&!h?_:null,h&&!!y,t.getProjection(),m,h):null;let k=!1,C=!1,M=!0;if(I&&!T.occluded){const t=.5*p*S+f,n=new e.pointGeometry(-100,-100),i=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new Qe,a=I.first,s=I.last;let l=[];for(let e=a.path.length-1;e>=1;e--)l.push(a.path[e]);for(let e=1;e<s.path.length;e++)l.push(s.path[e]);const h=2.5*t;if(c){const e=l.map(y&&!E?(e,t)=>{const r=_(t<a.path.length-1?a.tilePath[a.path.length-1-t]:s.tilePath[t-a.path.length+2]);return e[2]=r[2],ot(e,c)}:e=>ot(e,c));l=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let m=[];if(l.length>0){const t=l.map((t=>new e.pointGeometry(t[0],t[1])));let r=1/0,o=-1/0,a=1/0,s=-1/0;for(let e=0;e<t.length;e++)r=Math.min(r,t[e].x),a=Math.min(a,t[e].y),o=Math.max(o,t[e].x),s=Math.max(s,t[e].y);m=r>=n.x&&o<=i.x&&a>=n.y&&s<=i.y?[t]:o<n.x||r>i.x||s<n.y||a>i.y?[]:e.clipLine([t],n.x,n.y,i.x,i.y)}for(const e of m){o.reset(e,.25*t);let n=0;n=o.length<=.5*t?1:Math.ceil(o.paddedLength/h)+1;for(let e=0;e<n;e++){const i=e/Math.max(n-1,1),a=o.lerp(i),s=a.x+_t,l=a.y+_t;g.push(s,l,t,0);const c=s-t,h=l-t,p=s+t,f=l+t;if(M=M&&this.isOffscreen(c,h,p,f),C=C||this.isInsideGrid(c,h,p,f),!r&&this.grid.hitTestCircle(s,l,t,d)&&(k=!0,!u))return{circles:[],offscreen:!1,collisionDetected:k,occluded:!1}}}}return{circles:!u&&k||!C?[]:g,offscreen:M,collisionDetected:k,occluded:T.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const r=[];let n=1/0,i=1/0,o=-1/0,a=-1/0;for(const s of t){const t=new e.pointGeometry(s.x+_t,s.y+_t);n=Math.min(n,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),r.push(t)}const s=this.grid.query(n,i,o,a).concat(this.ignoredGrid.query(n,i,o,a)),l={},c={};for(const t of s){const n=t.key;if(void 0===l[n.bucketInstanceId]&&(l[n.bucketInstanceId]={}),l[n.bucketInstanceId][n.featureIndex])continue;const i=[new e.pointGeometry(t.x1,t.y1),new e.pointGeometry(t.x2,t.y1),new e.pointGeometry(t.x2,t.y2),new e.pointGeometry(t.x1,t.y2)];e.polygonIntersectsPolygon(r,i)&&(l[n.bucketInstanceId][n.featureIndex]=!0,void 0===c[n.bucketInstanceId]&&(c[n.bucketInstanceId]=[]),c[n.bucketInstanceId].push(n.featureIndex))}return c}insertCollisionBox(e,t,r,n,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:n,collisionGroupID:i},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,r,n,i){const o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:r,featureIndex:n,collisionGroupID:i};for(let t=0;t<e.length;t+=4)o.insertCircle(a,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(t,r,n,i,o){const a=[r[0],r[1],r[2],1];let s=!1;if(r[2]||this.transform.pitch>0){e.transformMat4$1(a,a,t);const i="globe"===o.name;this.fogState&&n&&!i&&(s=function(t,r,n,i,o,a){const s=a.calculateFogTileMatrix(o),l=[r,n,i];return e.transformMat4(l,l,s),P(t,l,a.pitch,a._fov)}(this.fogState,r[0],r[1],r[2],n.toUnwrapped(),this.transform)>.9)}else yt(a,a,t);return{point:new e.pointGeometry((a[0]/a[3]+1)/2*this.transform.width+_t,(-a[1]/a[3]+1)/2*this.transform.height+_t),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(o)/a[3]*.5,1.5),signedDistanceFromCamera:a[3],occluded:i&&a[2]>a[3]||s}}isOffscreen(e,t,r,n){return r<_t||e>=this.screenRightBoundary||n<_t||t>this.screenBottomBoundary}isInsideGrid(e,t,r,n){return r>=0&&e<this.gridRightBoundary&&n>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function xt(t,r,n){const i=r.createTileMatrix(t,t.worldSize,n.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,i)}function bt(e,t,r){if(t.projection.name===r.projection.name)return e.projMatrix;const n=r.clone();return n.setProjection(t.projection),xt(n,t.getProjection(),e)}function wt(e,t,r){return t.name===r.projection.name?e.projMatrix:xt(r,t,e)}class Et{constructor(e,t,r,n){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):n&&r?1:0,this.placed=r}isHidden(){return 0===this.opacity&&!this.placed}}class Tt{constructor(e,t,r,n,i,o=!1){this.text=new Et(e?e.text:null,t,r,i),this.icon=new Et(e?e.icon:null,t,n,i),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class St{constructor(e,t,r,n=!1){this.text=e,this.icon=t,this.skipFade=r,this.clipped=n}}class At{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class Pt{constructor(e,t,r,n,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=i}}class It{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function kt(t,r,n,i,o){const{horizontalAlign:a,verticalAlign:s}=e.getAnchorAlignment(t),l=-(a-.5)*r,c=-(s-.5)*n,u=e.evaluateVariableOffset(t,i);return new e.pointGeometry(l+u[0]*o,c+u[1]*o)}function Ct(t,r,n,i,o){const a=new e.pointGeometry(t,r);return n&&a._rotate(i?o:-o),a}class Mt{constructor(e,t,r,n,i){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new vt(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new It(r),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,r,n,i){const o=n.getBucket(r),a=n.latestFeatureIndex;if(!o||!a||r.id!==o.layerIds[0])return;const s=o.layers[0].layout,l=n.collisionBoxArray,c=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),u=n.tileSize/e.EXTENT,h=n.tileID.toUnwrapped();this.transform.setProjection(o.projection);const d=(p=n.tileID,f=o.getProjection(),m=this.transform,f.name===this.projection?m.calculateProjMatrix(p.toUnwrapped()):xt(m,f,p));var p,f,m;const g="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");r.compileFilter();const _=r.dynamicFilter(),v=r.dynamicFilterNeedsFeature(),x=this.transform.calculatePixelsToTileUnitsMatrix(n),b=rt(d,n.tileID.canonical,g,y,this.transform,o.getProjection(),x);let w=null;if(g){const t=nt(d,n.tileID.canonical,g,y,this.transform,o.getProjection(),x);w=e.multiply([],this.transform.labelPlaneMatrix,t)}let E=null;_&&n.latestFeatureIndex&&(E={unwrappedTileID:h,dynamicFilter:_,dynamicFilterNeedsFeature:v,featureIndex:n.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new Pt(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,n.tileID);const T={bucket:o,layout:s,posMatrix:d,textLabelPlaneMatrix:b,labelToScreenMatrix:w,clippingData:E,scale:c,textPixelRatio:u,holdingForFade:n.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const e of o.sortKeyRanges){const{sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:i}=e;t.push({sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:i,parameters:T})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:T})}attemptAnchorPlacement(e,t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g,y){const _=[h.textOffset0,h.textOffset1],v=kt(e,r,n,_,i),x=this.collisionIndex.placeCollisionBox(p,i,t,Ct(v.x,v.y,o,a,this.transform.angle),u,s,l,c.predicate);if(m){const e=p.getSymbolInstanceIconSize(y,this.transform.zoom,h.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(p,e,m,Ct(v.x,v.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)return}if(x.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(t=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:_,width:r,height:n,anchor:e,textScale:i,prevAnchor:t},this.markUsedJustification(p,e,h,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,h),this.placedOrientations[h.crossTileID]=f),{shift:v,placedGlyphBoxes:x}}}placeLayerBucketPart(t,r,n,i){const{bucket:o,layout:a,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:h,holdingForFade:d,collisionBoxArray:p,partiallyEvaluatedTextSize:f,partiallyEvaluatedIconSize:m,collisionGroup:g}=t.parameters,y=a.get("text-optional"),_=a.get("icon-optional"),v=a.get("text-allow-overlap"),x=a.get("icon-allow-overlap"),b="map"===a.get("text-rotation-alignment"),w="map"===a.get("text-pitch-alignment"),E="none"!==a.get("icon-text-fit"),T="viewport-y"===a.get("symbol-z-order");this.transform.setProjection(o.projection);let S=v&&(x||!o.hasIconData()||_),A=x&&(v||!o.hasTextData()||y);!o.collisionArrays&&p&&o.deserializeCollisionBoxes(p),n&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,p);const P=(t,i,p)=>{if(u){const n={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(u.dynamicFilterNeedsFeature){const e=this.retainedQueryData[o.bucketInstanceId];i=u.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(n,i,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new e.pointGeometry(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[t.crossTileID]=new St(!1,!1,!1,!0),void(r[t.crossTileID]=!0)}if(r[t.crossTileID])return;if(d)return void(this.placements[t.crossTileID]=new St(!1,!1,!1));let T=!1,P=!1,I=!0,k=!1,C=!1,M=null,z={box:null,offscreen:null,occluded:null},D={box:null,offscreen:null,occluded:null},L=null,F=null,R=null,B=0,O=0,N=0;p.textFeatureIndex?B=p.textFeatureIndex:t.useRuntimeCollisionCircles&&(B=t.featureIndex),p.verticalTextFeatureIndex&&(O=p.verticalTextFeatureIndex);const j=e=>{e.tileID=this.retainedQueryData[o.bucketInstanceId].tileID,(this.transform.elevation||e.elevation)&&(e.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[o.bucketInstanceId].tileID,e.tileAnchorX,e.tileAnchorY):0)},U=p.textBox;if(U){j(U);const r=r=>{let n=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!r&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[t.crossTileID];e&&(this.placedOrientations[t.crossTileID]=e,n=e,this.markUsedOrientation(o,n,t))}return n},n=(r,n)=>{if(o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&p.verticalTextBox){for(const t of o.writingModes)if(t===e.WritingMode.vertical?(z=n(),D=z):z=r(),z&&z.box&&z.box.length)break}else z=r()};if(a.get("text-variable-anchor")){let l=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[t.crossTileID]){const e=this.prevPlacement.variableOffsets[t.crossTileID];l.indexOf(e.anchor)>0&&(l=l.filter((t=>t!==e.anchor)),l.unshift(e.anchor))}const c=(e,r,n)=>{const a=o.getSymbolInstanceTextSize(f,t,this.transform.zoom,i),c=(e.x2-e.x1)*a+2*e.padding,u=(e.y2-e.y1)*a+2*e.padding,d=E&&!x?r:null;d&&j(d);let p={box:[],offscreen:!1,occluded:!1};const y=v?2*l.length:l.length;for(let r=0;r<y;++r){const y=this.attemptAnchorPlacement(l[r%l.length],e,c,u,a,b,w,h,s,g,r>=l.length,t,i,o,n,d,f,m);if(y&&(p=y.placedGlyphBoxes,p&&p.box&&p.box.length)){T=!0,M=y.shift;break}}return p};n((()=>c(U,p.iconBox,e.WritingMode.horizontal)),(()=>{const r=p.verticalTextBox;return r&&j(r),o.allowVerticalPlacement&&!(z&&z.box&&z.box.length)&&t.numVerticalGlyphVertices>0&&r?c(r,p.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),z&&(T=z.box,I=z.offscreen,k=z.occluded);const u=r(z&&z.box);if(!T&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[t.crossTileID];e&&(this.variableOffsets[t.crossTileID]=e,this.markUsedJustification(o,e.anchor,t,u))}}else{const a=(r,n)=>{const a=o.getSymbolInstanceTextSize(f,t,this.transform.zoom,i),l=this.collisionIndex.placeCollisionBox(o,a,r,new e.pointGeometry(0,0),v,h,s,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(o,n,t),this.placedOrientations[t.crossTileID]=n),l};n((()=>a(U,e.WritingMode.horizontal)),(()=>{const r=p.verticalTextBox;return o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&r?(j(r),a(r,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),r(z&&z.box&&z.box.length)}}if(L=z,T=L&&L.box&&L.box.length>0,I=L&&L.offscreen,k=L&&L.occluded,t.useRuntimeCollisionCircles){const r=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),i=e.evaluateSizeForFeature(o.textSizeData,f,r),u=a.get("text-padding");F=this.collisionIndex.placeCollisionCircles(o,v,r,o.lineVertexArray,o.glyphOffsetArray,i,s,l,c,n,w,g.predicate,t.collisionCircleDiameter*i/e.ONE_EM,u,this.retainedQueryData[o.bucketInstanceId].tileID),T=v||F.circles.length>0&&!F.collisionDetected,I=I&&F.offscreen,k=F.occluded}if(p.iconFeatureIndex&&(N=p.iconFeatureIndex),p.iconBox){const r=r=>{j(r);const n=E&&M?Ct(M.x,M.y,b,w,this.transform.angle):new e.pointGeometry(0,0),i=o.getSymbolInstanceIconSize(m,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(o,i,r,n,x,h,s,g.predicate)};D&&D.box&&D.box.length&&p.verticalIconBox?(R=r(p.verticalIconBox),P=R.box.length>0):(R=r(p.iconBox),P=R.box.length>0),I=I&&R.offscreen,C=R.occluded}const V=y||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,G=_||0===t.numIconVertices;if(V||G?G?V||(P=P&&T):T=P&&T:P=T=P&&T,T&&L&&L.box&&this.collisionIndex.insertCollisionBox(L.box,a.get("text-ignore-placement"),o.bucketInstanceId,D&&D.box&&O?O:B,g.ID),P&&R&&this.collisionIndex.insertCollisionBox(R.box,a.get("icon-ignore-placement"),o.bucketInstanceId,N,g.ID),F&&(T&&this.collisionIndex.insertCollisionCircles(F.circles,a.get("text-ignore-placement"),o.bucketInstanceId,B,g.ID),n)){const e=o.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new At);for(let e=0;e<F.circles.length;e+=4)t.circles.push(F.circles[e+0]),t.circles.push(F.circles[e+1]),t.circles.push(F.circles[e+2]),t.circles.push(F.collisionDetected?1:0)}const H="globe"!==o.projection.name;S=S&&(H||!k),A=A&&(H||!C),this.placements[t.crossTileID]=new St(T||S,P||A,I||o.justReloaded),r[t.crossTileID]=!0};if(T){const e=o.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const r=e[t];P(o.symbolInstances.get(r),r,o.collisionArrays[r])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)P(o.symbolInstances.get(e),e,o.collisionArrays[e]);if(n&&o.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[o.bucketInstanceId];e.invert(t.invProjMatrix,s),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(t,r,n,i){let o;o=i===e.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(r)];const a=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];for(const e of a)e>=0&&(t.text.placedSymbolArray.get(e).crossTileID=o>=0&&e!==o?0:n.crossTileID)}markUsedOrientation(t,r,n){const i=r===e.WritingMode.horizontal||r===e.WritingMode.horizontalOnly?r:0,o=r===e.WritingMode.vertical?r:0,a=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex].filter((e=>-1!==e));for(const e of a)t.text.placedSymbolArray.get(e).placedOrientation=i;-1!==n.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let r=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const n=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],o=i[e];o?(this.opacities[e]=new Tt(o,n,t.text,t.icon,null,t.clipped),r=r||t.text!==o.text.placed||t.icon!==o.icon.placed):(this.opacities[e]=new Tt(null,n,t.text,t.icon,t.skipFade,t.clipped),r=r||t.text||t.icon)}for(const e in i){const t=i[e];if(!this.opacities[e]){const i=new Tt(t,n,!1,!1);i.isHidden()||(this.opacities[e]=i,r=r||t.text.placed||t.icon.placed)}}for(const e in o)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=o[e]);for(const e in a)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=a[e]);r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const r={};for(const n of t){const t=n.getBucket(e);t&&n.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,r,n.collisionBoxArray)}}updateBucketOpacities(t,r,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const i=t.layers[0].layout,o=!!t.layers[0].dynamicFilter(),a=new Tt(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),c=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),d="none"!==i.get("icon-text-fit"),p=new Tt(null,0,s&&(l||!t.hasIconData()||i.get("icon-optional")),l&&(s||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(n);const f=(e,t,r)=>{for(let n=0;n<t/4;n++)e.opacityVertexArray.emplaceBack(r)};let m=0;for(let n=0;n<t.symbolInstances.length;n++){const i=t.symbolInstances.get(n),{numHorizontalGlyphVertices:s,numVerticalGlyphVertices:l,crossTileID:g}=i;let y=this.opacities[g];r[g]?y=a:y||(y=p,this.opacities[g]=y),r[g]=!0;const _=s>0||l>0,v=i.numIconVertices>0,x=this.placedOrientations[i.crossTileID],b=x===e.WritingMode.vertical,w=x===e.WritingMode.horizontal||x===e.WritingMode.horizontalOnly;if(!_&&!v||y.isHidden()||m++,_){const e=jt(y.text);f(t.text,s,b?Ut:e),f(t.text,l,w?Ut:e);const r=y.text.isHidden();[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((e=>{e>=0&&(t.text.placedSymbolArray.get(e).hidden=r||b?1:0)})),i.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).hidden=r||w?1:0);const n=this.variableOffsets[i.crossTileID];n&&this.markUsedJustification(t,n.anchor,i,x);const o=this.placedOrientations[i.crossTileID];o&&(this.markUsedJustification(t,"left",i,o),this.markUsedOrientation(t,o,i))}if(v){const e=jt(y.icon);i.placedIconSymbolIndex>=0&&(f(t.icon,i.numIconVertices,b?Ut:e),t.icon.placedSymbolArray.get(i.placedIconSymbolIndex).hidden=y.icon.isHidden()),i.verticalPlacedIconSymbolIndex>=0&&(f(t.icon,i.numVerticalIconVertices,w?Ut:e),t.icon.placedSymbolArray.get(i.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const r=t.collisionArrays[n];if(r){let n=new e.pointGeometry(0,0),i=!0;if(r.textBox||r.verticalTextBox){if(c){const e=this.variableOffsets[g];e?(n=kt(e.anchor,e.width,e.height,e.textOffset,e.textScale),u&&n._rotate(h?this.transform.angle:-this.transform.angle)):i=!1}o&&(i=!y.clipped),r.textBox&&zt(t.textCollisionBox.collisionVertexArray,y.text.placed,!i||b,n.x,n.y),r.verticalTextBox&&zt(t.textCollisionBox.collisionVertexArray,y.text.placed,!i||w,n.x,n.y)}const a=i&&Boolean(!w&&r.verticalIconBox);r.iconBox&&zt(t.iconCollisionBox.collisionVertexArray,y.icon.placed,a,d?n.x:0,d?n.y:0),r.verticalIconBox&&zt(t.iconCollisionBox.collisionVertexArray,y.icon.placed,!a,d?n.x:0,d?n.y:0)}}}if(t.fullyClipped=0===m,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const r=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*r>e}setStale(){this.stale=!0}}function zt(e,t,r,n,i){e.emplaceBack(t?1:0,r?1:0,n||0,i||0),e.emplaceBack(t?1:0,r?1:0,n||0,i||0),e.emplaceBack(t?1:0,r?1:0,n||0,i||0),e.emplaceBack(t?1:0,r?1:0,n||0,i||0)}const Dt=Math.pow(2,25),Lt=Math.pow(2,24),Ft=Math.pow(2,17),Rt=Math.pow(2,16),Bt=Math.pow(2,9),Ot=Math.pow(2,8),Nt=Math.pow(2,1);function jt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,r=Math.floor(127*e.opacity);return r*Dt+t*Lt+r*Ft+t*Rt+r*Bt+t*Ot+r*Nt+t}const Ut=0;class Vt{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,r,n,i){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,n,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;){const e=o[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,r,0===e.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class Gt{constructor(e,t,r,n,i,o,a,s){this.placement=new Mt(e,i,o,a,s),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(t,r,n){const i=e.exported.now(),o=()=>{const t=e.exported.now()-i;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=r[t[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=i)&&(!e.maxzoom||e.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Vt(e)),this._inProgressLayer.continuePlacement(n[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Ht=512/e.EXTENT/2;class qt{constructor(e,t,r){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(let r=0;r<t.length;r++){const n=t.get(r),i=n.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,e)})}}getScaledCoordinates(t,r){const n=Ht/Math.pow(2,r.canonical.z-this.tileID.canonical.z);return{x:Math.floor((r.canonical.x*e.EXTENT+t.tileAnchorX)*n),y:Math.floor((r.canonical.y*e.EXTENT+t.tileAnchorY)*n)}}findMatches(e,t,r){const n=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let i=0;i<e.length;i++){const o=e.get(i);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,t);for(const e of a)if(Math.abs(e.coord.x-s.x)<=n&&Math.abs(e.coord.y-s.y)<=n&&!r[e.crossTileID]){r[e.crossTileID]=!0,o.crossTileID=e.crossTileID;break}}}}class Wt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const r=this.indexes[e],n={};for(const e in r){const i=r[e];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),n[i.tileID.key]=i}this.indexes[e]=n}this.lng=e}addBucket(e,t,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const n=this.usedCrossTileIDs[e.overscaledZ];for(const r in this.indexes){const i=this.indexes[r];if(Number(r)>e.overscaledZ)for(const r in i){const o=i[r];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,n)}else{const o=i[e.scaledTo(Number(r)).key];o&&o.findMatches(t.symbolInstances,e,n)}}for(let e=0;e<t.symbolInstances.length;e++){const i=t.symbolInstances.get(e);i.crossTileID||(i.crossTileID=r.generate(),n[i.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new qt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const r in t.indexedSymbolInstances)for(const n of t.indexedSymbolInstances[r])delete this.usedCrossTileIDs[e][n.crossTileID]}removeStaleBuckets(e){let t=!1;for(const r in this.indexes){const n=this.indexes[r];for(const i in n)e[n[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[i]),delete n[i],t=!0)}return t}}class Xt{constructor(){this.layerIndexes={},this.crossTileIDs=new Wt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,r,n){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new Zt);let o=!1;const a={};"globe"!==n.name&&i.handleWrapJump(r);for(const r of t){const t=r.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(r.tileID,t,this.crossTileIDs)&&(o=!0),a[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(o=!0),o}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}const Yt=(t,r)=>e.emitValidationErrors(t,r&&r.filter((e=>"source.canvas"!==e.identifier))),Kt=e.pick(He,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Jt=e.pick(He,["setCenter","setZoom","setBearing","setPitch"]),Qt={version:8,layers:[],sources:{}},$t={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class er extends e.Evented{constructor(t,r={}){super(),this.map=t,this.dispatcher=new z(Ue(),this),this.imageManager=new x,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,r.localFontFamily?e.LocalGlyphMode.all:r.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,r.localFontFamily||r.localIdeographFontFamily),this.crossTileSymbolIndex=new Xt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const n=this;this._rtlTextPluginCallback=er.registerForPluginStateChange((t=>{n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,r)=>{if(e.triggerPluginCompletionEvent(t),r&&r.every((e=>e)))for(const e in n._sourceCaches){const t=n._sourceCaches[e],r=t.getSource().type;"vector"!==r&&"geojson"!==r||t.reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const e in this._layers){const r=this._layers[e];r.source===t.id&&this._validateLayer(r)}}))}loadURL(t,r={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const n="boolean"==typeof r.validate?r.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,r.accessToken);const i=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(i,((t,r)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):r&&this._load(r,n)}))}loadJSON(t,r={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==r.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Qt,!1)}_updateLayerCount(e,t){const r=t?1:-1;e.is3D()&&(this._num3DLayers+=r),"circle"===e.type&&(this._numCircleLayers+=r),"symbol"===e.type&&(this._numSymbolLayers+=r)}_load(t,r){if(r&&Yt(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const n=Ge(this.stylesheet.layers);this._order=n.map((e=>e.id)),this._layers={},this._serializedLayers={};for(let t of n)t=e.createStyleLayer(t),t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),this._updateLayerCount(t,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new E(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(t){this._spriteRequest=function(t,r,n){let i,o,a;const s=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(r.transformRequest(r.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,a||(a=e,i=t,u())})),c=e.getImage(r.transformRequest(r.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),((e,t)=>{c=null,a||(a=e,o=t,u())}));function u(){if(a)n(a);else if(i&&o){const t=e.exported.getImageData(o),r={};for(const n in i){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p}=i[n],f=new e.RGBAImage({width:o,height:a});e.RGBAImage.copy(t,f,{x:s,y:l},{x:0,y:0},{width:o,height:a}),r[n]={data:f,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p}}n(null,r)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,((t,r)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(r)for(const e in r)this.imageManager.addImage(e,r[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const r=this.getSource(t.source);if(!r)return;const n=t.sourceLayer;n&&("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${n}" does not exist on source "${r.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const r of e){const e=this._layers[r];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&$t[e.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const r=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(e.length||r.length)&&this._updateWorkerLayers(e,r);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const n={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];n[e]=t.used,t.used=!1}for(const e of this._order){const r=this._layers[e];if(r.recalculate(t,this._availableImages),!r.isHidden(t.zoom)){const e=this._getLayerSourceCache(r);e&&(e.used=!0)}const n=this.map.painter;if(n){const e=r.getProgramIds();if(!e)continue;const i=r.getProgramConfiguration(t.zoom);for(const t of e)n.useProgram(t,i)}}for(const t in n){const r=this._sourceCaches[t];n[t]!==r.used&&r.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:r.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),r&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(r){if(this._checkLoaded(),Yt(this,e.validateStyle(r)))return!1;(r=e.clone$1(r)).layers=Ge(r.layers);const n=function(e,r){if(!e)return[{command:He.setStyle,args:[r]}];let n=[];try{if(!t(e.version,r.version))return[{command:He.setStyle,args:[r]}];t(e.center,r.center)||n.push({command:He.setCenter,args:[r.center]}),t(e.zoom,r.zoom)||n.push({command:He.setZoom,args:[r.zoom]}),t(e.bearing,r.bearing)||n.push({command:He.setBearing,args:[r.bearing]}),t(e.pitch,r.pitch)||n.push({command:He.setPitch,args:[r.pitch]}),t(e.sprite,r.sprite)||n.push({command:He.setSprite,args:[r.sprite]}),t(e.glyphs,r.glyphs)||n.push({command:He.setGlyphs,args:[r.glyphs]}),t(e.transition,r.transition)||n.push({command:He.setTransition,args:[r.transition]}),t(e.light,r.light)||n.push({command:He.setLight,args:[r.light]}),t(e.fog,r.fog)||n.push({command:He.setFog,args:[r.fog]}),t(e.projection,r.projection)||n.push({command:He.setProjection,args:[r.projection]});const i={},o=[];!function(e,r,n,i){let o;for(o in r=r||{},e=e||{})e.hasOwnProperty(o)&&(r.hasOwnProperty(o)||We(o,n,i));for(o in r)r.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t(e[o],r[o])||("geojson"===e[o].type&&"geojson"===r[o].type&&Xe(e,r,o)?n.push({command:He.setGeoJSONSourceData,args:[o,r[o].data]}):Ze(o,r,n,i)):qe(o,r,n))}(e.sources,r.sources,o,i);const a=[];e.layers&&e.layers.forEach((e=>{e.source&&i[e.source]?n.push({command:He.removeLayer,args:[e.id]}):a.push(e)}));let s=e.terrain;s&&i[s.source]&&(n.push({command:He.setTerrain,args:[void 0]}),s=void 0),n=n.concat(o),t(s,r.terrain)||n.push({command:He.setTerrain,args:[r.terrain]}),function(e,r,n){r=r||[];const i=(e=e||[]).map(Ke),o=r.map(Ke),a=e.reduce(Je,{}),s=r.reduce(Je,{}),l=i.slice(),c=Object.create(null);let u,h,d,p,f,m,g;for(u=0,h=0;u<i.length;u++)d=i[u],s.hasOwnProperty(d)?h++:(n.push({command:He.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(u=0,h=0;u<o.length;u++)d=o[o.length-1-u],l[l.length-1-u]!==d&&(a.hasOwnProperty(d)?(n.push({command:He.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-u],n.push({command:He.addLayer,args:[s[d],m]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<o.length;u++)if(d=o[u],p=a[d],f=s[d],!c[d]&&!t(p,f))if(t(p.source,f.source)&&t(p["source-layer"],f["source-layer"])&&t(p.type,f.type)){for(g in Ye(p.layout,f.layout,n,d,null,He.setLayoutProperty),Ye(p.paint,f.paint,n,d,null,He.setPaintProperty),t(p.filter,f.filter)||n.push({command:He.setFilter,args:[d,f.filter]}),t(p.minzoom,f.minzoom)&&t(p.maxzoom,f.maxzoom)||n.push({command:He.setLayerZoomRange,args:[d,f.minzoom,f.maxzoom]}),p)p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ye(p[g],f[g],n,d,g.slice(6),He.setPaintProperty):t(p[g],f[g])||n.push({command:He.setLayerProperty,args:[d,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ye(p[g],f[g],n,d,g.slice(6),He.setPaintProperty):t(p[g],f[g])||n.push({command:He.setLayerProperty,args:[d,g,f[g]]}))}else n.push({command:He.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],n.push({command:He.addLayer,args:[f,m]})}(a,r.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:He.setStyle,args:[r]}]}return n}(this.serialize(),r).filter((e=>!(e.command in Jt)));if(0===n.length)return!1;const i=n.filter((e=>!(e.command in Kt)));if(i.length>0)throw new Error(`Unimplemented: ${i.map((e=>e.command)).join(", ")}.`);return n.forEach((e=>{"setTransition"!==e.command&&"setProjection"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=r,this._updateMapProjection(),!0}addImage(t,r){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,r),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,r,n={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!r.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(e.validateSource,`sources.${t}`,r,null,n))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);const i=ze(t,r,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:i.serialize(),sourceId:t})));const o=r=>{const n=(r?"symbol:":"other:")+t,o=this._sourceCaches[n]=new e.SourceCache(n,i,r);(r?this._symbolSourceCaches:this._otherSourceCaches)[t]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==r.type&&"geojson"!==r.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const r=this.getSource(t);if(!r)throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${r}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const n=this._getSourceCaches(t);for(const t of n)delete this._sourceCaches[t.id],delete this._updatedSources[t.id],t.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t.getSource().id})),t.setEventedParent(null),t.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],r.setEventedParent(null),r.onRemove&&r.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}_getSources(){const e=[];for(const t in this._otherSourceCaches){const r=this._getSourceCache(t);r&&e.push(r.getSource())}return e}addLayer(t,r,n={}){this._checkLoaded();const i=t.id;if(this.getLayer(i))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let o;if("custom"===t.type){if(Yt(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,`layers.${i}`,t,{arrayIndex:-1},n))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=r?this._order.indexOf(r):this._order.length;if(r&&-1===a)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${r}" does not exist on this map.`)));this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,r){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===r)return;const n=this._order.indexOf(t);this._order.splice(n,1);const i=r?this._order.indexOf(r):this._order.length;r&&-1===i?this.fire(new e.ErrorEvent(new Error(`Layer with id "${r}" does not exist on this map.`))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const r=this._layers[t];if(!r)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));r.setEventedParent(null),this._updateLayerCount(r,!1);const n=this._order.indexOf(t);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=r,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],r.onRemove&&r.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,r,n){this._checkLoaded();const i=this.getLayer(t);i?i.minzoom===r&&i.maxzoom===n||(null!=r&&(i.minzoom=r),null!=n&&(i.maxzoom=n),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(r,n,i={}){this._checkLoaded();const o=this.getLayer(r);if(o){if(!t(o.filter,n))return null==n?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(e.validateFilter,`layers.${o.id}.filter`,n,{layerType:o.type},i)||(o.filter=e.clone$1(n),this._updateLayer(o)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){const r=this.getLayer(t);return r&&e.clone$1(r.filter)}setLayoutProperty(r,n,i,o={}){this._checkLoaded();const a=this.getLayer(r);a?t(a.getLayoutProperty(n),i)||(a.setLayoutProperty(n,i,o),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,r){const n=this.getLayer(t);if(n)return n.getLayoutProperty(r);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(r,n,i,o={}){this._checkLoaded();const a=this.getLayer(r);a?t(a.getPaintProperty(n),i)||(a.setPaintProperty(n,i,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){const r=this.getLayer(e);return r&&r.getPaintProperty(t)}setFeatureState(t,r){this._checkLoaded();const n=t.source,i=t.sourceLayer,o=this.getSource(n);if(!o)return void this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const a=o.type;if("geojson"===a&&i)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!i)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(n);for(const e of s)e.setFeatureState(i,t.id,r)}removeFeatureState(t,r){this._checkLoaded();const n=t.source,i=this.getSource(n);if(!i)return void this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const o=i.type,a="vector"===o?t.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(r&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(n);for(const e of s)e.removeFeatureState(a,t.id,r)}getFeatureState(t){this._checkLoaded();const r=t.source,n=t.sourceLayer,i=this.getSource(r);if(i){if("vector"!==i.type||n)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(r)[0].getFeatureState(n,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const r=this._sourceCaches[e].getSource();t[r.id]||(t[r.id]=r.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,r={},n=[];for(let i=this._order.length-1;i>=0;i--){const o=this._order[i];if(t(o)){r[o]=i;for(const t of e){const e=t[o];if(e)for(const t of e)n.push(t)}}}n.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=n.length-1;e>=0;e--){const t=n[e].feature;if(r[t.layer.id]<o)break;i.push(t),n.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(t,r,n){r&&r.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",r.filter,null,r);const i={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of r.layers){const r=this._layers[t];if(!r)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];i[r.source]=!0}}const o=[];r.availableImages=this._availableImages;const a=r&&r.layers?r.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),s=L.createFromScreenPoints(t,n);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;r.layers&&!i[t]||o.push(Le(this._sourceCaches[e],this._layers,this._serializedLayers,s,r,n,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(e,t,r,n,i,o,a){const s={},l=o.queryRenderedSymbols(n),c=[];for(const e of Object.keys(l).map(Number))c.push(a[e]);c.sort(Re);for(const r of c){const n=r.featureIndex.lookupSymbolFeatures(l[r.bucketInstanceId],t,r.bucketIndex,r.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in n){const t=s[e]=s[e]||[],i=n[e];i.sort(((e,t)=>{const n=r.featureSortOrder;if(n){const r=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));for(const e of i)t.push(e)}}for(const t in s)s[t].forEach((n=>{const i=n.feature,o=r(e[t]).getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,r){r&&r.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",r.filter,null,r);const n=this._getSourceCaches(t);let i=[];for(const e of n)i=i.concat(Fe(e,r));return i}addSourceType(e,t,r){return er.getSourceType(e)?r(new Error(`A source type called "${e}" already exists.`)):(er.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))}getLight(){return this.light.getLight()}setLight(e,r={}){this._checkLoaded();const n=this.light.getLight();let i=!1;for(const r in e)if(!t(e[r],n[r])){i=!0;break}if(!i)return;const o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,r),this.light.updateTransitions(o)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(r,n=1){if(this._checkLoaded(),!r)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===n){if("object"==typeof r.source){const t="terrain-dem-src";this.addSource(t,r.source),r=e.clone$1(r),r=e.extend(r,{source:t})}if(this._validate(e.validateTerrain,"terrain",r))return}if(!this.terrain||this.terrain&&n!==this.terrain.drapeRenderMode)this._createTerrain(r,n);else{const n=this.terrain,i=n.get();for(const t of Object.keys(e.spec.terrain))!r.hasOwnProperty(t)&&e.spec.terrain[t].default&&(r[t]=e.spec.terrain[t].default);for(const e in r)if(!t(r[e],i[e])){n.set(r),this.stylesheet.terrain=r;const e=this._setTransitionParameters({duration:0});n.updateTransitions(e);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){const t=this.fog=new M(e,this.map.transform);this.stylesheet.fog=e;const r=this._setTransitionParameters({duration:0});t.updateTransitions(r)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const r=this.fog,n=r.get();0===Object.keys(e).length&&r.set(e);for(const i in e)if(!t(e[i],n[i])){r.set(e),this.stylesheet.fog=e;const t=this._setTransitionParameters({duration:0});r.updateTransitions(t);break}}else this._createFog(e);this._markersNeedUpdate=!0}_setTransitionParameters(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(e,t){const r=this.terrain=new A(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const n=this._setTransitionParameters({duration:0});r.updateTransitions(n)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,r,n,i,o={}){return(!o||!1!==o.validate)&&Yt(this,t.call(e.validateStyle,e.extend({key:r,style:this.serialize(),value:n,styleSpec:e.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const e of t)e.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const e of t)e.resume(),e.reload()}_reloadSources(){for(const e of this._getSources())e.reload&&e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,r,n,i,o=!1){let a=!1,s=!1;const l={};for(const e of this._order){const r=this._layers[e];if("symbol"!==r.type)continue;if(!l[r.source]){const e=this._getLayerSourceCache(r);if(!e)continue;l[r.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const n=this.crossTileSymbolIndex.addLayer(r,l[r.source],t.center.lng,t.projection);a=a||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===n,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Gt(t,this._order,o,r,n,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,r){this.imageManager.getImages(t.icons,r),this._updateTilesForChangedImages();const n=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};n(this._otherSourceCaches[t.source]),n(this._symbolSourceCaches[t.source])}getGlyphs(e,t,r){this.glyphManager.getGlyphs(t.stacks,r)}getResource(t,r,n){return e.makeRequest(r,n)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const r=this._getSourceCaches(t);return 0===r.length?(this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):r.every((e=>e.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}er.getSourceType=function(e){return Me[e]},er.setSourceType=function(e,t){Me[e]=t},er.registerForPluginStateChange=e.registerForPluginStateChange;var tr="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",rr="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",nr="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",ir="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",or="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let ar={},sr={};const lr=[];pr(tr,lr),pr(nr,lr),pr(ir,lr),pr(or,lr),ar=fr("",nr),sr=fr(or,ir);const cr=fr("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ur=tr,hr="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var dr={background:fr("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:fr("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:fr("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:fr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:fr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:fr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:fr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:fr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:fr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:fr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:fr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:fr("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:fr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:fr("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\nv_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);float roof_radiance=clamp(u_lightpos.z,0.0,1.0);roof_radiance=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roof_radiance);v_roof_color.rgb+=clamp(color.rgb*roof_radiance*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:fr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\nv_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:fr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:fr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:fr("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nhighp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nvec4 out_color=color;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:fr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:fr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:fr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:fr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:fr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:fr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:fr("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:fr("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",rr),skyboxGradient:fr("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",rr),skyboxCapture:fr("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:fr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;\n#ifdef GLOBE_POLES\nvec3 up_vector=normalize(globe_pos)*u_tile_up_scale;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:fr("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function pr(e,t){const r=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let e of r)if(e=e.trim(),"#"===e[0]&&e.includes("if")&&!e.includes("endif")){e=e.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const r=e.split(" ");for(const e of r)t.includes(e)||t.push(e)}}function fr(e,t){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},o=[...lr];return pr(e,o),pr(t,o),{fragmentSource:e=e.replace(r,((e,t,r,n,o)=>(i[o]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nvarying ${r} ${n} ${o};\n#else\nuniform ${r} ${n} u_${o};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${o}\n    ${r} ${n} ${o} = u_${o};\n#endif\n`))),vertexSource:t=t.replace(r,((e,t,r,n,o)=>{const a="float"===n?"vec2":"vec4",s=o.match(/color/)?"color":a;return i[o]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${r} ${a} a_${o};\nvarying ${r} ${n} ${o};\n#else\nuniform ${r} ${n} u_${o};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = a_${o};\n#else\n    ${r} ${n} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = unpack_mix_${s}(a_${o}, u_${o}_t);\n#else\n    ${r} ${n} ${o} = u_${o};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${r} ${a} a_${o};\n#else\nuniform ${r} ${n} u_${o};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${r} ${n} ${o} = a_${o};\n#else\n    ${r} ${n} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${r} ${n} ${o} = unpack_mix_${s}(a_${o}, u_${o}_t);\n#else\n    ${r} ${n} ${o} = u_${o};\n#endif\n`})),staticAttributes:n,usedDefines:o}}class mr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,t,r,n,i,o,a){this.context=e;let s=this.boundPaintVertexBuffers.length!==n.length;for(let e=0;!s&&e<n.length;e++)this.boundPaintVertexBuffers[e]!==n[e]&&(s=!0);let l=this.boundDynamicVertexBuffers.length!==a.length;for(let e=0;!l&&e<a.length;e++)this.boundDynamicVertexBuffers[e]!==a[e]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==r||s||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o)this.freshBind(t,r,n,i,o,a);else{e.bindVertexArrayOES.set(this.vao);for(const e of a)e&&e.bind();i&&i.dynamicDraw&&i.bind()}}freshBind(e,t,r,n,i,o){let a;const s=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),a=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=o;else{a=l.currentNumAttributes||0;for(let e=s;e<a;e++)c.disableVertexAttribArray(e)}t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(const t of r)t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(const t of o)t&&(t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i));n&&n.bind(),l.currentNumAttributes=s}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function gr(t,r){const n=Math.pow(2,r.canonical.z),i=r.canonical.y;return[new e.MercatorCoordinate(0,i/n).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/n).toLngLat().lat]}function yr(t,r,n,i,o,a,s){const l=t.context,c=l.gl,u=n.fbo;if(!u)return;t.prepareDrawTile();const h=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const d=((e,t,r,n)=>{const i=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color");let s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:n||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:gr(0,t.tileID),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(t,n,i,t.terrain?r.projMatrix:null);t.prepareDrawProgram(l,h,r.toUnwrapped());const{tileBoundsBuffer:p,tileBoundsIndexBuffer:f,tileBoundsSegments:m}=t.getTileBoundsBuffers(n);h.draw(l,c.TRIANGLES,o,a,s,e.CullFaceMode.disabled,d,i.id,p,f,m)}function _r(t,r,n){if(!r.needsDEMTextureUpload)return;const i=t.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||t.getTileTexture(n.stride);const a=n.getPixels();r.demTexture?r.demTexture.update(a,{premultiply:!1}):r.demTexture=new e.Texture(i,a,o.RGBA,{premultiply:!1}),r.needsDEMTextureUpload=!1}function vr(t,r,n,i,o,a){const s=t.context,l=s.gl;if(!r.dem)return;const c=r.dem;if(s.activeTexture.set(l.TEXTURE1),_r(t,r,c),!r.demTexture)return;r.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let h=r.fbo;if(!h){const t=new e.Texture(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=r.fbo=s.createFramebuffer(u,u,!0),h.colorAttachment.set(t.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]);const{tileBoundsBuffer:d,tileBoundsIndexBuffer:p,tileBoundsSegments:f}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,e.CullFaceMode.disabled,((t,r)=>{const n=r.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[n,n],u_zoom:t.overscaledZ,u_unpack:r.unpackVector}})(r.tileID,c),n.id,d,p,f),r.needsHillshadePrepare=!1}const xr=t=>({u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}),br=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),wr=(e,t,r,n,i,o,a,s,l,c,u,h,d,p)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(n),u_merc_matrix:r,u_zoom_transition:i,u_merc_center:o,u_image0:0,u_frustum_tl:a,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:u,u_globe_radius:h,u_viewport:d,u_grid_matrix:p?Float32Array.from(p):new Float32Array(9)});function Er(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const Tr=new class{constructor(){this.operations={}}newMorphing(e,t,r,n,i){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==r.tileID.key&&(t.queued=r)}else this.operations[e]={startTime:n,phase:0,duration:i,from:t,to:r,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const r=this.operations[t];for(r.phase=(e-r.startTime)/r.duration;r.phase>=1||!this._validOp(r);)if(!this._nextOp(r,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},Sr={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ar(e,t){const r=1<<e.z;return!t&&(0===e.x||e.x===r-1)||0===e.y||e.y===r-1}const Pr=e=>({u_matrix:e});function Ir(t,r,n,i,o){if(o>0){const a=e.exported.now(),s=(a-t.timeAdded)/o,l=r?(a-r.timeAdded)/o:-1,c=n.getSource(),u=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!r||Math.abs(r.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),d=h&&t.refreshedUponExpiration?1:e.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),r?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class kr extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},r=new z(Ue(),null),n=ze("mock-dem",t,r,e.style);super("mock-dem",n,!1),n.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class Cr extends e.SourceCache{constructor(e){const t=ze("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new z(Ue(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,r,n){if(t.freezeTileCoverage)return;this.transform=t;const i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((r,n)=>{if(r[n.key]="",!this._tiles[n.key]){const r=new e.Tile(n,this._source.tileSize*n.overscaleFactor(),t.tileZoom);r.state="loaded",this._tiles[n.key]=r}return r}),{});for(const e in this._tiles)e in i||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const r=Object.values(t);this.renderCachePool.push(...r),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Mr extends e.OverscaledTileID{constructor(e,t,r){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=r}}class zr extends e.Elevation{constructor(t,r){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[n,i,o]=function(t){const r=new e.StructArrayLayout4i8,n=new e.StructArrayLayout3ui6,i=131;r.reserve(17161),n.reserve(33800);const o=e.EXTENT/128,a=e.EXTENT+o/2,s=a+o;for(let t=-o;t<s;t+=o)for(let n=-o;n<s;n+=o){const i=n<0||n>a||t<0||t>a?24575:0,o=e.clamp(Math.round(n),0,e.EXTENT),s=e.clamp(Math.round(t),0,e.EXTENT);r.emplaceBack(o+i,s,o,s)}const l=(e,t)=>{const r=t*i+e;n.emplaceBack(r+1,r,r+i),n.emplaceBack(r+i,r+i+1,r+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return[0,129].forEach((e=>{for(let t=0;t<130;t++)l(t,e),l(e,t)})),[r,n,32768]}(),a=t.context;this.gridBuffer=a.createVertexBuffer(n,e.boundsAttributes.members),this.gridIndexBuffer=a.createIndexBuffer(i),this.gridSegments=e.SegmentVector.simpleSegment(0,0,n.length,i.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,n.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Cr(r.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=r,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new kr(r.map)}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency()}update(t,r,n){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const i=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.getScaledDemTileSize();this.sourceCache.update(r,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),r.updateElevation(!n),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(r),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const r=this.proxySourceCache,n=this.painter.transform;this._initializing&&(this._initializing=0===n._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(n.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=r.getIds().map((e=>{const t=r.getTileByID(e).tileID;return t.projMatrix=n.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,r){const n=r.transform.pointCoordinate(r.transform.getCameraPoint()),i=new e.pointGeometry(n.x,n.y);t.sort(((t,r)=>{if(r.overscaledZ-t.overscaledZ)return r.overscaledZ-t.overscaledZ;const n=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),o=new e.pointGeometry(r.canonical.x+(1<<r.canonical.z)*r.wrap,r.canonical.y),a=i.mult(1<<t.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(n)-a.distSqr(o)}))}(i,this.painter),this._previousZoom=n.zoom;const o=this.proxyToSource||{};this.proxyToSource={},i.forEach((e=>{this.proxyToSource[e.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const e in a){const r=a[e];if(!r.used)continue;if(r!==this.sourceCache&&this.resetTileLookupCache(r.id),this._setupProxiedCoordsForOrtho(r,t[e],o),r.usedForTerrain)continue;const n=t[e];r.getSource().reparseOverscaled&&this._assignTerrainTiles(n)}this.proxiedCoords[r.id]=i.map((e=>new Mr(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const r=t.tileID.key;r in s||(this._visibleDemTiles.push(t),s[r]=r)}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)}))}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const r in this.terrainTileForTile){const n=this.terrainTileForTile[r],i=n.dem;!i||n.demTexture&&!n.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),_r(this.painter,n,i))}}_prepareDemTileUniforms(e,t,r,n){if(!t||null==t.demTexture)return!1;const i=e.tileID.canonical,o=Math.pow(2,t.tileID.canonical.z-i.z),a=n||"";return r[`u_dem_tl${a}`]=[i.x*o%1,i.y*o%1],r[`u_dem_scale${a}`]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,r=t.gl;if(!this._emptyDepthBufferTexture){const n=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,n,r.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,r)=>{if(!r.dem)return t;const n=r.dem.tree.minimums[0];return n>0&&e++,t+n}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,r=t.gl;t.activeTexture.set(r.TEXTURE2);const n=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(n,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new e.Texture(t,i,r.RGBA,{premultiply:!1}),o}setupElevationDraw(t,r,n){const i=this.painter.context,o=i.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(n&&n.morphing&&this._useVertexMorphing){const e=n.morphing.srcDemTile,r=n.morphing.dstDemTile;u=n.morphing.phase,e&&r&&(this._prepareDemTileUniforms(t,e,a,"_prev")&&(c=e),this._prepareDemTileUniforms(t,r,a)&&(l=r))}if(c&&l?(i.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=u):(l=this.terrainTileForTile[t.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,l,a)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),i.activeTexture.set(o.TEXTURE3),n&&n.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),a.u_depth_size_inv=[1,1]),n&&n.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=t}if(n&&n.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=n.labelPlaneMatrixInv),r.setTerrainUniformValues(i,a),"globe"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,n&&n.useDenormalizedUpVectorScale);r.setGlobeUniformValues(i,e)}}globeUniformValues(t,r,n){const i=t.projection;return{u_tile_tl_up:i.upVector(r,0,0),u_tile_tr_up:i.upVector(r,e.EXTENT,0),u_tile_br_up:i.upVector(r,e.EXTENT,e.EXTENT),u_tile_bl_up:i.upVector(r,0,e.EXTENT),u_tile_up_scale:n?e.GLOBE_METERS_TO_ECEF:i.upVectorScale(r,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const r=this.painter,n=this.painter.context;0!==t.length&&(n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),r.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,r,n,i,o){if("globe"===t.transform.projection.name)!function(t,r,n,i,o){const a=t.context,s=a.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,h=t.transform,d=e.globeUseCustomAntiAliasing(t,a,h),p=(e,r)=>{if(c===e)return;const n=[Sr[e],"PROJECTION_GLOBE_VIEW"];d&&n.push("CUSTOM_ANTIALIASING"),r&&n.push(Sr[u]),l=t.useProgram("globeRaster",null,n),c=e},f=t.colorModeForRenderPass(),m=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Tr.update(o);const g=e.calculateGlobeMercatorMatrix(h),y=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],_=u?[!1,!0]:[!1],v=t.globeSharedBuffers,x=[h.width*e.exported.devicePixelRatio,h.height*e.exported.devicePixelRatio],b=Float32Array.from(h.globeMatrix),w={useDenormalizedUpVectorScale:!0};if(_.forEach((u=>{c=-1;const d=u?s.LINES:s.TRIANGLES;for(const c of i){const i=n.getTile(c),_=e.StencilMode.disabled,E=r.prevTerrainTileForTile[c.key],T=r.terrainTileForTile[c.key];Er(E,T)&&Tr.newMorphing(c.key,E,T,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const S=Tr.getMorphValuesForProxy(c.key),A=S?1:0;S&&e.extend$1(w,{morphing:{srcDemTile:S.from,dstDemTile:S.to,phase:e.easeCubicInOut(S.phase)}});const P=e.tileCornersToBounds(c.canonical),I=e.getLatitudinalLod(P.getCenter().lat),k=e.getGridMatrix(c.canonical,P,I,h.worldSize/h._pixelsPerMercatorPixel),C=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),M=wr(h.projMatrix,b,g,C,e.globeToMercatorTransition(h.zoom),y,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,x,k);if(p(A,u),r.setupElevationDraw(i,l,w),t.prepareDrawProgram(a,l,c.toUnwrapped()),v){const[r,n,i]=u?v.getWirefameBuffers(t.context,I):v.getGridBuffers(I);l.draw(a,d,m,_,f,e.CullFaceMode.backCCW,M,"globe_raster",r,n,i)}}})),v){const o=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];d&&o.push("CUSTOM_ANTIALIASING"),l=t.useProgram("globeRaster",null,o);for(const o of i){const{x:i,y:c,z:u}=o.canonical,d=0===c,p=c===(1<<u)-1,[g,_,b,E]=v.getPoleBuffers(u);if(E&&(d||p)){const c=n.getTile(o);a.activeTexture.set(s.TEXTURE0),c.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let v=e.globePoleMatrixForTile(u,i,h);const T=e.globeNormalizeECEF(e.globeTileBounds(o.canonical)),S=(t,r)=>t.draw(a,s.TRIANGLES,m,e.StencilMode.disabled,f,e.CullFaceMode.disabled,wr(h.projMatrix,v,v,T,0,y,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,x),"globe_pole_raster",r,b,E);r.setupElevationDraw(c,l,w),t.prepareDrawProgram(a,l,o.toUnwrapped()),d&&S(l,g),p&&(v=e.scale(e.create(),v,[1,-1,1]),S(l,_))}}}}(t,r,n,i,o);else{const a=t.context,s=a.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,h=(e,r)=>{if(c===e)return;const n=[Sr[e]];r&&n.push(Sr[u]),l=t.useProgram("terrainRaster",null,n),c=e},d=t.colorModeForRenderPass(),p=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Tr.update(o);const f=t.transform,m=6*Math.pow(1.5,22-f.zoom)*r.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[y,_]=u?r.getWirefameBuffer():[r.gridIndexBuffer,r.gridSegments];for(const c of i){const i=n.getTile(c),v=e.StencilMode.disabled,x=r.prevTerrainTileForTile[c.key],b=r.terrainTileForTile[c.key];Er(x,b)&&Tr.newMorphing(c.key,x,b,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const w=Tr.getMorphValuesForProxy(c.key),E=w?1:0;let T;w&&(T={morphing:{srcDemTile:w.from,dstDemTile:w.to,phase:e.easeCubicInOut(w.phase)}});const S=br(c.projMatrix,Ar(c.canonical,f.renderWorldCopies)?m/10:m);h(E,u),r.setupElevationDraw(i,l,T),t.prepareDrawProgram(a,l,c.toUnwrapped()),l.draw(a,g,p,v,d,e.CullFaceMode.backCCW,S,"terrain_raster",r.gridBuffer,y,_)}}))}}(r,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,r.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const r=this.painter,n=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],a=this._drapedRenderBatches.shift(),s=[],l=r.style.order;let c=0;for(const u of o){const o=i.getTileByID(u.proxyTileKey),h=i.proxyCachedFBO[u.key]?i.proxyCachedFBO[u.key][t]:void 0,d=void 0!==h?i.renderCache[h]:this.pool[c++],p=void 0!==h;if(o.texture=d.tex,p&&!d.dirty){s.push(o.tileID);continue}let f;n.bindFramebuffer.set(d.fb.framebuffer),this.renderedToTile=!1,d.dirty&&(n.clear({color:e.Color.transparent,stencil:0}),d.dirty=!1);for(let e=a.start;e<=a.end;++e){const t=r.style._layers[l[e]];if(t.isHidden(r.transform.zoom))continue;const i=r.style._getLayerSourceCache(t),o=i?this.proxyToSource[u.key][i.id]:[u];if(!o)continue;const a=o;n.viewport.set([0,0,d.fb.width,d.fb.height]),f!==(i?i.id:null)&&(this._setupStencil(d,o,t,i),f=i?i.id:null),r.renderLayer(r,i,t,a)}this.renderedToTile?(d.dirty=!0,s.push(o.tileID)):p||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),a.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let r,n=0,i=0,o=!1;for(let a=0;a<t;++a){const t=e._layers[e.order[a]];this._style.isLayerDraped(t)?(o&&++n,++i):o||(o=!0,r=t.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-n/i),firstUndrapedLayer:r}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,r){if(!this._visibleDemTiles)return null;const n=this._visibleDemTiles.filter((e=>e.dem)).map((n=>{const i=n.tileID,o=1<<i.overscaledZ,{x:a,y:s}=i.canonical,l=a/o,c=(a+1)/o,u=s/o,h=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:h,t:n.dem.tree.raycastRoot(l,u,c,h,e,t,r),tile:n}}));n.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const i of n){if(null==i.t)return null;const n=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,e,t,r);if(null!=n)return n}return null}_createFBO(){const t=this.painter.context,r=t.gl,n=this.drapeBufferSize;t.activeTexture.set(r.TEXTURE0);const i=new e.Texture(t,{width:n[0],height:n[1],data:null},r.RGBA);i.bind(r.LINEAR,r.CLAMP_TO_EDGE);const o=t.createFramebuffer(n[0],n[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new Te(t,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,n[0],n[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&r.texParameterf(r.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some((e=>{const t=this._style._layers[e],r=t.isHidden(this.painter.transform.zoom),n=t.getCrossfadeParameters(),i=!!n&&1!==n.t,o=t.hasTransition();return"custom"!==t.type&&!r&&(i||o)}))}_clearRasterFadeFromRenderCache(){let e=!1;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Pe){e=!0;break}if(e)for(let e=0;e<this._style.order.length;++e){const t=this._style._layers[this._style.order[e]],r=t.isHidden(this.painter.transform.zoom),n=this._style._getLayerSourceCache(t);if("raster"!==t.type||r||!n)continue;const i=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][n.id];if(t)for(const e of t){const t=Ir(n.getTile(e),n.findLoadedParent(e,0),n,this.painter.transform,i);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(n.id,e)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const r=[];let n,i=0,o=this._style._layers[e[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<t;)o=this._style._layers[e[i]];for(;i<t;++i){const t=this._style._layers[e[i]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===n&&(n=i):void 0!==n&&(r.push({start:n,end:i-1}),n=void 0))}void 0!==n&&r.push({start:n,end:i-1}),this._drapedRenderBatches=r}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let r=0;r<e.length;++r){const n=Object.values(e[r]);t.renderCachePool.push(...n)}}return}this._clearRasterFadeFromRenderCache();const r=this.proxyCoords,n=this._tilesDirty;for(let i=r.length-1;i>=0;i--){const o=r[i];if(t.getTileByID(o.key),void 0!==t.proxyCachedFBO[o.key]){const r=e[o.key],i=this.proxyToSource[o.key];let a=0;for(const e in i){const t=i[e],o=r[e];if(!o||o.length!==t.length||t.some(((t,r)=>t!==o[r]||n[e]&&n[e].hasOwnProperty(t.key)))){a=-1;break}++a}for(const e in t.proxyCachedFBO[o.key])t.renderCache[t.proxyCachedFBO[o.key][e]].dirty=a<0||a!==Object.values(r).length}}const i=[...this._drapedRenderBatches];i.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const e of i)for(const n of r){if(t.proxyCachedFBO[n.key])continue;let r=t.renderCachePool.pop();void 0===r&&t.renderCache.length<50&&(r=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==r&&(t.proxyCachedFBO[n.key]={},t.proxyCachedFBO[n.key][e.start]=r,t.renderCache[r].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,r,n){if(!n||!this._sourceTilesOverlap[n.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let a;if(r.isTileClipped())a=t.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,r.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,r){const n=this.painter,i=this.painter.context,o=i.gl;n._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=n.useProgram("clippingMask");for(const s of t){const t=n._tileClippingMaskIDs[s.key]=--r;a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Pr(s.projMatrix),"$clipping",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}pointCoordinate(t){const r=this.painter.transform;if(t.x<0||t.x>r.width||t.y<0||t.y>r.height)return null;const n=[t.x,t.y,1,1];e.transformMat4$1(n,n,r.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),n[0]/=r.worldSize,n[1]/=r.worldSize;const i=r._camera.position,o=e.mercatorZfromAltitude(1,r.center.lat),a=[i[0],i[1],i[2]/o,0],s=e.subtract([],n.slice(0,3),a);e.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const t=this.painter,r=t.context,n=this.proxySourceCache,i=Math.ceil(t.width),o=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=r.gl,n=r.createFramebuffer(i,o,!0);r.activeTexture.set(t.TEXTURE0);const a=new e.Texture(r,{width:i,height:o,data:null},t.RGBA);a.bind(t.NEAREST,t.CLAMP_TO_EDGE),n.colorAttachment.set(a.texture);const s=r.createRenderbuffer(r.gl.DEPTH_COMPONENT16,i,o);n.depthAttachment.set(s),this._depthFBO=n,this._depthTexture=a}r.bindFramebuffer.set(this._depthFBO.framebuffer),r.viewport.set([0,0,i,o]),function(t,r,n,i){if("globe"===t.transform.projection.name)return;const o=t.context,a=o.gl;o.clear({depth:1});const s=t.useProgram("terrainDepth"),l=new e.DepthMode(a.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const t of i){const i=n.getTile(t),c=br(t.projMatrix,0);r.setupElevationDraw(i,s),s.draw(o,a.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,c,"terrain_depth",r.gridBuffer,r.gridIndexBuffer,r.gridNoSkirtSegments)}}(t,this,n,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,r){if(e.getSource()instanceof Ce)return this._setupProxiedCoordsForImageSource(e,t,r);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const n=this.proxiedCoords[e.id]=[],i=this.proxyCoords;for(let t=0;t<i.length;t++){const o=i[t],a=this._findTileCoveringTileID(o,e);if(a){const t=this._createProxiedId(o,a,r[o.key]&&r[o.key][e.id]);n.push(t),this.proxyToSource[o.key][e.id]=[t]}}let o=!1;for(let i=0;i<t.length;i++){const a=e.getTile(t[i]);if(!a||!a.hasData())continue;const s=this._findTileCoveringTileID(a.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==a.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],i=this._createProxiedId(s.tileID,a,r[s.tileID.key]&&r[s.tileID.key][e.id]);t?t.splice(t.length-1,0,i):this.proxyToSource[s.tileID.key][e.id]=[i],n.push(i),o=!0}}this._sourceTilesOverlap[e.id]=o}_setupProxiedCoordsForImageSource(t,r,n){if(!t.getSource().loaded())return;const i=this.proxiedCoords[t.id]=[],o=this.proxyCoords,a=t.getSource(),s=new e.pointGeometry(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e)),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,r)=>{const n=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),o=e.EXTENT/(1<<t.canonical.z),a=r.wrap+r.canonical.x/(1<<r.canonical.z),s=r.canonical.y/(1<<r.canonical.z);return n+o<a+l.min.x||n>a+l.max.x||i+o<s+l.min.y||i>s+l.max.y};for(let e=0;e<o.length;e++){const a=o[e];for(let e=0;e<r.length;e++){const o=t.getTile(r[e]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,n[a.key]&&n[a.key][t.id]),l=this.proxyToSource[a.key][t.id];l?l.push(s):this.proxyToSource[a.key][t.id]=[s],i.push(s)}}}_createProxiedId(t,r,n){let i=this.orthoMatrix;if(n){const e=n.find((e=>e.key===r.tileID.key));if(e)return e}if(r.tileID.key!==t.key){const n=t.canonical.z-r.tileID.canonical.z;let o,a,s;i=e.create();const l=r.tileID.wrap-t.wrap<<t.overscaledZ;n>0?(o=e.EXTENT>>n,a=o*((r.tileID.canonical.x<<n)-t.canonical.x+l),s=o*((r.tileID.canonical.y<<n)-t.canonical.y)):(o=e.EXTENT<<-n,a=e.EXTENT*(r.tileID.canonical.x-(t.canonical.x+l<<-n)),s=e.EXTENT*(r.tileID.canonical.y-(t.canonical.y<<-n))),e.ortho(i,0,o,0,o,0,1),e.translate(i,i,[a,s,0])}return new Mr(r.tileID,t.key,i)}_findTileCoveringTileID(t,r){let n=r.getTile(t);if(n&&n.hasData())return n;const i=this._findCoveringTileCache[r.id],o=i[t.key];if(n=o?r.getTileByID(o):null,n&&n.hasData()||null===o)return n;let a=n?n.tileID:t,s=a.overscaledZ;const l=r.getSource().minzoom,c=[];if(!o){const i=r.getSource().maxzoom;if(t.canonical.z>=i){const n=t.canonical.z-i;r.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,r.transform.tileZoom),a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>n,t.canonical.y>>n)):0!==n&&(s=i,a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>n,t.canonical.y>>n))}a.key!==t.key&&(c.push(a.key),n=r.getTile(a))}const u=e=>{c.forEach((t=>{i[t]=e})),c.length=0};for(s-=1;s>=l&&(!n||!n.hasData());s--){n&&u(n.tileID.key);const e=a.calculateScaledKey(s);if(n=r.getTileByID(e),n&&n.hasData())break;const t=i[e];if(null===t)break;void 0===t?c.push(e):n=r.getTileByID(t)}return u(n?n.tileID.key:null),n&&n.hasData()?n:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let r=this._tilesDirty[e];r||(r=this._tilesDirty[e]={}),r[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let r=0;const n=new e.StructArrayLayout2ui4,i=131;for(let e=1;e<129;e++){for(let t=1;t<129;t++)r=e*i+t,n.emplaceBack(r,r+1),n.emplaceBack(r,r+i),n.emplaceBack(r+1,r+i),128===e&&n.emplaceBack(r+i,r+i+1);n.emplaceBack(r+1,r+1+i)}return n}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Dr{static cacheKey(e,t,r,n){let i=`${t}${n?n.cacheKey:""}`;for(const t of r)e.usedDefines.includes(t)&&(i+=`/${t}`);return i}constructor(t,r,n,i,o,a){const s=t.gl;this.program=s.createProgram();const l=function(e){const t=[];for(let r=0;r<e.length;r++){if(null===e[r])continue;const n=e[r].split(" ");t.push(n.pop())}return t}(n.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c);let h=i?i.defines():[];h=h.concat(a.map((e=>`#define ${e}`)));const d=h.concat(t.extStandardDerivatives?"#extension GL_OES_standard_derivatives : enable\n".concat(hr):hr,hr,ur,cr.fragmentSource,sr.fragmentSource,n.fragmentSource).join("\n"),p=h.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ur,cr.vertexSource,sr.vertexSource,ar.vertexSource,n.vertexSource).join("\n"),f=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(f,d),s.compileShader(f),s.attachShader(this.program,f);const m=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(m,p),s.compileShader(m),s.attachShader(this.program,m),this.attributes={},this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);s.linkProgram(this.program),s.deleteShader(m),s.deleteShader(f),this.fixedUniforms=o(t),this.binderUniforms=i?i.getUniforms(t):[],a.includes("TERRAIN")&&(this.terrainUniforms=(t=>({u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}))(t)),a.includes("GLOBE")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}))(t)),a.includes("FOG")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}))(t))}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const r=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e]&&r[e].set(this.program,e,t[e])}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const r=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e]&&r[e].set(this.program,e,t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const r=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e].set(this.program,e,t[e])}}draw(e,t,r,n,i,o,a,s,l,c,u,h,d,p,f){const m=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(r),e.setStencilMode(n),e.setColorMode(i),e.setCullFace(o);for(const e of Object.keys(this.fixedUniforms))this.fixedUniforms[e].set(this.program,e,a[e]);p&&p.setUniforms(this.program,e,this.binderUniforms,h,{zoom:d});const g={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[t];for(const r of u.get()){const n=r.vaos||(r.vaos={});(n[s]||(n[s]=new mr)).bind(e,this,l,p?p.getPaintVertexBuffers():[],c,r.vertexOffset,f||[]),m.drawElements(t,r.primitiveLength*g,m.UNSIGNED_SHORT,r.primitiveOffset*g*2)}}}function Lr(e,t,r){const n=1/D(r,1,t.transform.tileZoom),i=Math.pow(2,r.tileID.overscaledZ),o=r.tileSize*Math.pow(2,t.transform.tileZoom)/i,a=o*(r.tileID.canonical.x+r.tileID.wrap*i),s=o*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[n,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const Fr=e.create(),Rr=(t,r,n,i,o,a,s,l,c,u,h)=>{const d=r.style.light,p=d.properties.get("position"),f=[p.x,p.y,p.z],m=e.create$1();"viewport"===d.properties.get("anchor")&&(e.fromRotation(m,-r.transform.angle),e.transformMat3(f,f,m));const g=d.properties.get("color"),y=r.transform,_={u_matrix:t,u_lightpos:f,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[g.r,g.g,g.b],u_vertical_gradient:+n,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Fr,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:o,u_edge_radius:a};return"globe"===y.projection.name&&(_.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],_.u_zoom_transition=c,_.u_inv_rot_matrix=h,_.u_merc_center=u,_.u_up_dir=y.projection.upVector(new e.CanonicalTileID(0,0,0),u[0]*e.EXTENT,u[1]*e.EXTENT),_.u_height_lift=l),_},Br=(t,r,n,i,o,a,s,l,c,u,h,d,p)=>{const f=Rr(t,r,n,i,o,a,s,u,h,d,p),m={u_height_factor:-Math.pow(2,s.overscaledZ)/c.tileSize/8};return e.extend(f,Lr(l,r,c),m)},Or=e=>({u_matrix:e}),Nr=(t,r,n,i)=>e.extend(Or(t),Lr(n,r,i)),jr=(e,t)=>({u_matrix:e,u_world:t}),Ur=(t,r,n,i,o)=>e.extend(Nr(t,r,n,i),{u_world:o}),Vr=e.create(),Gr=(t,r,n,i,o,a)=>{const s=t.transform,l="globe"===s.projection.name;let c;if("map"===a.paint.get("circle-pitch-alignment"))if(l){const t=e.globePixelsToTileUnits(s.zoom,r.canonical)*s._pixelsPerMercatorPixel;c=Float32Array.from([t,0,0,t])}else c=s.calculatePixelsToTileUnitsMatrix(n);else c=new Float32Array([s.pixelsToGLUnits[0],0,0,s.pixelsToGLUnits[1]]);const u={u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:t.translatePosMatrix(r.projMatrix,n,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:Vr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){u.u_inv_rot_matrix=i,u.u_merc_center=o,u.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],u.u_zoom_transition=e.globeToMercatorTransition(s.zoom);const t=o[0]*e.EXTENT,n=o[1]*e.EXTENT;u.u_up_dir=s.projection.upVector(new e.CanonicalTileID(0,0,0),t,n)}return u},Hr=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},qr=(t,r,n,i)=>{const o=e.EXTENT/n.tileSize;return{u_matrix:t,u_camera_to_center_distance:r.getCameraToCenterDistance(i),u_extrude_scale:[r.pixelsToGLUnits[0]/o,r.pixelsToGLUnits[1]/o]}},Wr=(e,t,r=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:r}),Zr=e.create(),Xr=(t,r,n,i,o,a,s)=>{const l=t.transform,c="globe"===l.projection.name,u=c?e.globePixelsToTileUnits(l.zoom,r.canonical)*l._pixelsPerMercatorPixel:D(n,1,a),h={u_matrix:r.projMatrix,u_extrude_scale:u,u_intensity:s,u_inv_rot_matrix:Zr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){h.u_inv_rot_matrix=i,h.u_merc_center=o,h.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(l.zoom);const t=o[0]*e.EXTENT,n=o[1]*e.EXTENT;h.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),t,n)}return h},Yr=(e,t,r,n,i,o,a,s)=>{const l=e.transform,c=l.calculatePixelsToTileUnitsMatrix(t),u={u_matrix:Qr(e,t,r,i),u_pixels_to_tile_units:c,u_device_pixel_ratio:a,u_units_to_pixels:[1/l.pixelsToGLUnits[0],1/l.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:o,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:s};if($r(r)){const r=Jr(t,e.transform);u.u_texsize=t.lineAtlasTexture.size,u.u_scale=[r,n.fromScale,n.toScale],u.u_mix=n.t}return u},Kr=(e,t,r,n,i,o)=>{const a=e.transform,s=Jr(t,a);return{u_matrix:Qr(e,t,r,i),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:a.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:o,u_image:0,u_scale:[s,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Jr(e,t){return 1/D(e,1,t.tileZoom)}function Qr(e,t,r,n){return e.translatePosMatrix(n||t.tileID.projMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}function $r(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const en=(e,t,r,n,i,o)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:r,u_fade_t:n.mix,u_opacity:n.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:tn(i.paint.get("raster-hue-rotate")),u_perspective_transform:o};var a,s};function tn(e){e*=Math.PI/180;const t=Math.sin(e),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}const rn=e.create(),nn=(t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g)=>{const y=o.transform,_={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+n,u_aspect_ratio:y.width/y.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+i,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:rn,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:rn,u_up_vector:[0,-1,0]};return"globe"===g.name&&(_.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],_.u_zoom_transition=d,_.u_inv_rot_matrix=f,_.u_merc_center=p,_.u_camera_forward=y._camera.forward(),_.u_ecef_origin=e.globeECEFOrigin(y.globeMatrix,h.toUnwrapped()),_.u_tile_matrix=Float32Array.from(y.globeMatrix),_.u_up_vector=m),_},on=(t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g,y)=>e.extend(nn(t,r,n,i,o,a,s,l,c,u,d,p,f,m,g,y),{u_gamma_scale:i?o.transform.cameraToCenterDistance*Math.cos(o.terrain?0:o.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+h}),an=(t,r,n,i,o,a,s,l,c,u,h,d,p,f,m,g)=>e.extend(on(t,r,n,i,o,a,s,l,!0,c,!0,h,d,p,f,m,g),{u_texsize_icon:u,u_texture_icon:1}),sn=(e,t,r)=>({u_matrix:e,u_opacity:t,u_color:r}),ln=(t,r,n,i,o,a)=>e.extend(function(e,t,r,n){const i=r.imageManager.getPattern(e.from.toString()),o=r.imageManager.getPattern(e.to.toString()),{width:a,height:s}=r.imageManager.getPixelSize(),l=Math.pow(2,n.tileID.overscaledZ),c=n.tileSize*Math.pow(2,r.transform.tileZoom)/l,u=c*(n.tileID.canonical.x+n.tileID.wrap*l),h=c*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/D(n,1,r.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(i,a,n,o),{u_matrix:t,u_opacity:r}),cn={fillExtrusion:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}),fillExtrusionPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_fade:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}),fill:t=>({u_matrix:new e.UniformMatrix4f(t)}),fillPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_fade:new e.Uniform1f(t)}),fillOutline:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}),fillOutlinePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_fade:new e.Uniform1f(t)}),circle:t=>({u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),collisionBox:t=>({u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}),collisionCircle:t=>({u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}),debug:t=>({u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}),clippingMask:t=>({u_matrix:new e.UniformMatrix4f(t)}),heatmap:t=>({u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),heatmapTexture:t=>({u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}),hillshade:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}),hillshadePrepare:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}),line:t=>({u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_mix:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}),linePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_fade:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}),raster:t=>({u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}),symbolIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}),symbolSDF:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}),symbolTextAndIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}),background:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}),backgroundPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl_a:new e.Uniform2f(t),u_pattern_br_a:new e.Uniform2f(t),u_pattern_tl_b:new e.Uniform2f(t),u_pattern_br_b:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_mix:new e.Uniform1f(t),u_pattern_size_a:new e.Uniform2f(t),u_pattern_size_b:new e.Uniform2f(t),u_scale_a:new e.Uniform1f(t),u_scale_b:new e.Uniform1f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),terrainRaster:xr,terrainDepth:xr,skybox:t=>({u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxGradient:t=>({u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxCapture:t=>({u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}),globeRaster:t=>({u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)})};let un;function hn(t,r,n,i,o,a,s){const l=t.context,c=l.gl,u=t.transform,h=t.useProgram("collisionBox"),d=[];let p=0,f=0;for(let m=0;m<i.length;m++){const g=i[m],y=r.getTile(g),_=y.getBucket(n);if(!_)continue;const v=bt(g,_,u);let x=v;0===o[0]&&0===o[1]||(x=t.translatePosMatrix(v,y,o,a));const b=s?_.textCollisionBox:_.iconCollisionBox,w=_.collisionCircleArray;if(w.length>0){const t=e.create(),r=x;e.mul(t,_.placementInvProjMatrix,u.glCoordMatrix),e.mul(t,t,_.placementViewportMatrix),d.push({circleArray:w,circleOffset:f,transform:r,invTransform:t,projection:_.getProjection()}),p+=w.length/4,f=p}b&&(t.terrain&&t.terrain.setupElevationDraw(y,h),h.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,qr(x,u,y,_.getProjection()),n.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,u.zoom,null,[b.collisionVertexBuffer,b.collisionVertexBufferExt]))}if(!s||!d.length)return;const m=t.useProgram("collisionCircle"),g=new e.StructArrayLayout2f1f2i16;g.resize(4*p),g._trim();let y=0;for(const e of d)for(let t=0;t<e.circleArray.length/4;t++){const r=4*t,n=e.circleArray[r+0],i=e.circleArray[r+1],o=e.circleArray[r+2],a=e.circleArray[r+3];g.emplace(y++,n,i,o,a,0),g.emplace(y++,n,i,o,a,1),g.emplace(y++,n,i,o,a,2),g.emplace(y++,n,i,o,a,3)}(!un||un.length<2*p)&&(un=function(t){const r=2*t,n=new e.StructArrayLayout3ui6;n.resize(r),n._trim();for(let e=0;e<r;e++){const t=6*e;n.uint16[t+0]=4*e+0,n.uint16[t+1]=4*e+1,n.uint16[t+2]=4*e+2,n.uint16[t+3]=4*e+2,n.uint16[t+4]=4*e+3,n.uint16[t+5]=4*e+0}return n}(p));const _=l.createIndexBuffer(un,!0),v=l.createVertexBuffer(g,e.collisionCircleLayout.members,!0);for(const r of d){const i={u_matrix:r.transform,u_inv_matrix:r.invTransform,u_camera_to_center_distance:(x=u).getCameraToCenterDistance(r.projection),u_viewport_size:[x.width,x.height]};m.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,i,n.id,v,_,e.SegmentVector.simpleSegment(0,2*r.circleOffset,r.circleArray.length,r.circleArray.length/2),null,u.zoom)}var x;v.destroy(),_.destroy()}const dn=e.create();function pn(t,r,n,i,o,a){const{horizontalAlign:s,verticalAlign:l}=e.getAnchorAlignment(t),c=-(s-.5)*r,u=-(l-.5)*n,h=e.evaluateVariableOffset(t,i);return new e.pointGeometry((c/o+h[0])*a,(u/o+h[1])*a)}function fn(t,r,n,i,o,a,s,l,c,u,h){const d=t.text.placedSymbolArray,p=t.text.dynamicLayoutVertexArray,f=t.icon.dynamicLayoutVertexArray,m={},g=wt(l,t.getProjection(),a),y=a.elevation,_=t.getProjection().upVectorScale(l.canonical,a.center.lat,a.worldSize);p.clear();for(let f=0;f<d.length;f++){const v=d.get(f),x=t.allowVerticalPlacement&&!v.placedOrientation,b=v.hidden||!v.crossTileID||x?null:i[v.crossTileID];if(b){const i=new e.pointGeometry(v.tileAnchorX,v.tileAnchorY),d=t.getProjection().upVector(l.canonical,i.x,i.y),f=y?y.getAtTileOffset(l,i.x,i.y):0,x=ot([v.projectedAnchorX+f*d[0]*_.metersToTile,v.projectedAnchorY+f*d[1]*_.metersToTile,v.projectedAnchorZ+f*d[2]*_.metersToTile],n?g:s),w=at(a.getCameraToCenterDistance(t.getProjection()),x.signedDistanceFromCamera);let E=o.evaluateSizeForFeature(t.textSizeData,u,v)*w/e.ONE_EM;n&&(E*=t.tilePixelRatio/c);const{width:T,height:S,anchor:A,textOffset:P,textScale:I}=b,k=pn(A,T,S,P,I,E);let C;if(n){const e=i.add(k),{x:r,y:n,z:o}=t.getProjection().projectTilePoint(e.x,e.y,l.canonical);C=ot([r+f*d[0]*_.metersToTile,n+f*d[1]*_.metersToTile,o+f*d[2]*_.metersToTile],s).point}else{const e=r?k.rotate(-a.angle):k;C=[x.point[0]+e.x,x.point[1]+e.y,0]}const M=t.allowVerticalPlacement&&v.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<v.numGlyphs;t++)e.addDynamicAttributes(p,C[0],C[1],C[2],M);h&&v.associatedIconIndex>=0&&(m[v.associatedIconIndex]={shiftedAnchor:C,angle:M})}else gt(v.numGlyphs,p)}if(h){f.clear();const r=t.icon.placedSymbolArray;for(let t=0;t<r.length;t++){const n=r.get(t);if(n.hidden)gt(n.numGlyphs,f);else{const r=m[t];if(r)for(let t=0;t<n.numGlyphs;t++)e.addDynamicAttributes(f,r.shiftedAnchor[0],r.shiftedAnchor[1],r.shiftedAnchor[2],r.angle);else gt(n.numGlyphs,f)}}t.icon.dynamicLayoutVertexBuffer.updateData(f)}t.text.dynamicLayoutVertexBuffer.updateData(p)}function mn(e,t,r){return r.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function gn(t,r,n,i,o,a,s,l,c,u,h,d){const p=t.context,f=p.gl,m=t.transform,g="map"===l,y="map"===c,_=g&&"point"!==n.layout.get("symbol-placement"),v=g&&!y&&!_,x=void 0!==n.layout.get("symbol-sort-key").constantOr(1);let b=!1;const w=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),E=[e.mercatorXfromLng(m.center.lng),e.mercatorYfromLat(m.center.lat)],T=n.layout.get("text-variable-anchor"),S="globe"===m.projection.name,A=[],P=[0,-1,0];let I=P;!S&&!m.mercatorFromTransition||g||(I=function(t){const r=t._camera.getWorldToCamera(t.worldSize,1),n=e.multiply([],r,t.globeMatrix);e.invert(n,n);const i=[0,0,0],o=[0,1,0,0];return e.transformMat4$1(o,o,n),i[0]=o[0],i[1]=o[1],i[2]=o[2],e.normalize(i,i),i}(m));for(const l of i){const i=r.getTile(l),c=i.getBucket(n);if(!c)continue;if("mercator"===c.projection.name&&S)continue;const h=o?c.text:c.icon;if(!h||c.fullyClipped||!h.segments.get().length)continue;const d=h.programConfigurations.get(n.id),p=o||c.sdfIcons,w=o?c.textSizeData:c.iconSizeData,k=y||0!==m.pitch,C=e.evaluateSizeForZoom(w,m.zoom);let M,z,D,L,F=[0,0],R=null;if(o){if(z=i.glyphAtlasTexture,D=f.LINEAR,M=i.glyphAtlasTexture.size,c.iconsInText){F=i.imageAtlasTexture.size,R=i.imageAtlasTexture;const e="composite"===w.kind||"camera"===w.kind;L=k||t.options.rotating||t.options.zooming||e?f.LINEAR:f.NEAREST}}else{const e=1!==n.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;z=i.imageAtlasTexture,D=p||t.options.rotating||t.options.zooming||e||k?f.LINEAR:f.NEAREST,M=i.imageAtlasTexture.size}const B="globe"===c.projection.name,O=B?I:P,N=B?e.globeToMercatorTransition(m.zoom):0,j=wt(l,c.getProjection(),m),U=m.calculatePixelsToTileUnitsMatrix(i),V=tt(j,i.tileID.canonical,y,g,m,c.getProjection(),U),G=t.terrain&&y&&_?e.invert(e.create(),V):dn,H=nt(j,i.tileID.canonical,y,g,m,c.getProjection(),U),q=T&&c.hasTextData(),W="none"!==n.layout.get("icon-text-fit")&&q&&c.hasIconData();if(_){const e=m.elevation,r=e?e.getAtTileOffsetFunc(l,m.center.lat,m.worldSize,c.getProjection()):e=>[0,0,0],n=rt(j,i.tileID.canonical,y,g,m,c.getProjection(),U);lt(c,j,t,o,n,H,y,u,r,l)}const Z=_||o&&T||W,X=t.translatePosMatrix(j,i,a,s),Y=Z?dn:V,K=t.translatePosMatrix(H,i,a,s,!0),J=c.getProjection().createInversionMatrix(m,l.canonical),Q=[];t.terrainRenderModeElevated()&&y&&Q.push("PITCH_WITH_MAP_TERRAIN"),B&&Q.push("PROJECTION_GLOBE_VIEW"),Z&&Q.push("PROJECTED_POS_ON_VIEWPORT");const $=p&&0!==n.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let ee;ee=p?c.iconsInText?an(w.kind,C,v,y,t,X,Y,K,M,F,l,N,E,J,O,c.getProjection()):on(w.kind,C,v,y,t,X,Y,K,o,M,!0,l,N,E,J,O,c.getProjection()):nn(w.kind,C,v,y,t,X,Y,K,o,M,l,N,E,J,O,c.getProjection());const te={program:t.useProgram(mn(p,o,c),d,Q),buffers:h,uniformValues:ee,atlasTexture:z,atlasTextureIcon:R,atlasInterpolation:D,atlasInterpolationIcon:L,isSDF:p,hasHalo:$,tile:i,labelPlaneMatrixInv:G};if(x&&c.canOverlap){b=!0;const t=h.segments.get();for(const r of t)A.push({segments:new e.SegmentVector([r]),sortKey:r.sortKey,state:te})}else A.push({segments:h.segments,sortKey:0,state:te})}b&&A.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of A){const r=e.state;if(t.terrain&&t.terrain.setupElevationDraw(r.tile,r.program,{useDepthForOcclusion:!S,labelPlaneMatrixInv:r.labelPlaneMatrixInv}),p.activeTexture.set(f.TEXTURE0),r.atlasTexture.bind(r.atlasInterpolation,f.CLAMP_TO_EDGE),r.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),r.atlasTextureIcon&&r.atlasTextureIcon.bind(r.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),r.isSDF){const i=r.uniformValues;r.hasHalo&&(i.u_is_halo=1,yn(r.buffers,e.segments,n,t,r.program,w,h,d,i)),i.u_is_halo=0}yn(r.buffers,e.segments,n,t,r.program,w,h,d,r.uniformValues)}}function yn(t,r,n,i,o,a,s,l,c){const u=i.context,h=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];o.draw(u,u.gl.TRIANGLES,a,s,l,e.CullFaceMode.disabled,c,n.id,t.layoutVertexBuffer,t.indexBuffer,r,n.paint,i.transform.zoom,t.programConfigurations.get(n.id),h)}function _n(t,r,n,i,o,a,s){const l=t.context.gl,c=n.paint.get("fill-pattern"),u=c&&c.constantOr(1),h=n.getCrossfadeParameters();let d,p,f,m,g;s?(p=u&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(p=u?"fillPattern":"fill",d=l.TRIANGLES);for(const y of i){const i=r.getTile(y);if(u&&!i.patternsLoaded())continue;const _=i.getBucket(n);if(!_)continue;t.prepareDrawTile();const v=_.programConfigurations.get(n.id),x=t.useProgram(p,v);u&&(t.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers(h));const b=c.constantOr(null);if(b&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[b.to.toString()],r=e.patternPositions[b.from.toString()];t&&r&&v.setConstantPatternPositions(t,r)}const w=t.translatePosMatrix(y.projMatrix,i,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(s){m=_.indexBuffer2,g=_.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];f="fillOutlinePattern"===p&&u?Ur(w,t,h,i,e):jr(w,e)}else m=_.indexBuffer,g=_.segments,f=u?Nr(w,t,h,i):Or(w);t.prepareDrawProgram(t.context,x,y.toUnwrapped()),x.draw(t.context,d,o,t.stencilModeForClipping(y),a,e.CullFaceMode.disabled,f,n.id,_.layoutVertexBuffer,m,g,n.paint,t.transform.zoom,v)}}function vn(t,r,n,i,o,a,s){const l=t.context,c=l.gl,u=t.transform,h=n.paint.get("fill-extrusion-pattern"),d=h.constantOr(1),p=n.getCrossfadeParameters(),f=n.paint.get("fill-extrusion-opacity"),m=[n.paint.get("fill-extrusion-ambient-occlusion-intensity"),n.paint.get("fill-extrusion-ambient-occlusion-radius")],g=n.layout.get("fill-extrusion-edge-radius"),y="globe"===u.projection.name?e.fillExtrusionHeightLift():0,_="globe"===u.projection.name,v=_?e.globeToMercatorTransition(u.zoom):0,x=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],b=[];_&&(b.push("PROJECTION_GLOBE_VIEW"),t.style.terrainSetForDrapingOnly()&&b.push("TERRAIN")),m[0]>0&&b.push("FAUX_AO");for(const w of i){const i=r.getTile(w),E=i.getBucket(n);if(!E||E.projection.name!==u.projection.name)continue;const T=E.programConfigurations.get(n.id),S=t.useProgram(d?"fillExtrusionPattern":"fillExtrusion",T,b);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(i,S,{useMeterToDem:!0});else{if(!E.enableTerrain)continue;if(e.setupElevationDraw(i,S,{useMeterToDem:!0}),xn(l,r,w,E,n,e),!E.centroidVertexBuffer){const e=S.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}}d&&(t.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),T.updatePaintBuffers(p));const A=h.constantOr(null);if(A&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[A.to.toString()],r=e.patternPositions[A.from.toString()];t&&r&&T.setConstantPatternPositions(t,r)}const P=t.translatePosMatrix(w.projMatrix,i,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),I=u.projection.createInversionMatrix(u,w.canonical),k=n.paint.get("fill-extrusion-vertical-gradient"),C=d?Br(P,t,k,f,m,g,w,p,i,y,v,x,I):Rr(P,t,k,f,m,g,w,y,v,x,I);t.prepareDrawProgram(l,S,w.toUnwrapped());const M=[];t.terrain&&M.push(E.centroidVertexBuffer),_&&M.push(E.layoutVertexExtBuffer),S.draw(l,l.gl.TRIANGLES,o,a,s,e.CullFaceMode.backCCW,C,n.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,n.paint,t.transform.zoom,T,M)}}function xn(t,r,n,i,o,a){const s=[t=>{let r=t.canonical.x-1,n=t.wrap;return r<0&&(r=(1<<t.canonical.z)-1,n--),new e.OverscaledTileID(t.overscaledZ,n,t.canonical.z,r,t.canonical.y)},t=>{let r=t.canonical.x+1,n=t.wrap;return r===1<<t.canonical.z&&(r=0,n++),new e.OverscaledTileID(t.overscaledZ,n,t.canonical.z,r,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=r.getSource().minzoom,n=e=>{const t=r.getTileByID(e);if(t&&t.hasData())return t.getBucket(o)},i=[0,-1,1];for(const r of i){if(e.overscaledZ+r<t)continue;const i=n(e.calculateScaledKey(e.overscaledZ+r));if(i)return i}},c=[0,0,0],u=(t,r)=>(c[0]=Math.min(t.min.y,r.min.y),c[1]=Math.max(t.max.y,r.max.y),c[2]=e.EXTENT-r.min.x>t.max.x?r.min.x-e.EXTENT:t.max.x,c),h=(t,r)=>(c[0]=Math.min(t.min.x,r.min.x),c[1]=Math.max(t.max.x,r.max.x),c[2]=e.EXTENT-r.min.y>t.max.y?r.min.y-e.EXTENT:t.max.y,c),d=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>h(e,t),(e,t)=>h(t,e)],p=new e.pointGeometry(0,0);let f,m,g;const y=(t,r,i,o,s)=>{const l=[[o?i:t,o?t:i,0],[o?i:r,o?r:i,0]],c=s<0?e.EXTENT+s:s,u=[o?c:(t+r)/2,o?(t+r)/2:c,0];return 0===i&&s<0||0!==i&&s>0?a.getForTilePoints(g,[u],!0,m):l.push(u),a.getForTilePoints(n,l,!0,f),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let t=0;t<4;t++){const r=(t<2?1:5)-t,o=i.borders[t];if(0===o.length)continue;const c=g=s[t](n),u=l(c);if(!(u&&u instanceof e.FillExtrusionBucket&&u.enableTerrain))continue;if(i.borderDoneWithNeighborZ[t]===u.canonical.z&&u.borderDoneWithNeighborZ[r]===i.canonical.z)continue;if(m=a.findDEMTileFor(c),!m||!m.dem)continue;if(!f){const e=a.findDEMTileFor(n);if(!e||!e.dem)return;f=e}const h=u.borders[r];let _=0;const v=u.borderDoneWithNeighborZ[r]!==i.canonical.z;if(i.canonical.z===u.canonical.z){for(let n=0;n<o.length;n++){const a=i.featuresOnBorder[o[n]],s=a.borders[t];let l;for(;_<h.length&&(l=u.featuresOnBorder[h[_]],!(l.borders[r][1]>s[0]+3));)v&&u.encodeCentroid(void 0,l,!1),_++;if(l&&_<h.length){const n=_;let o=0;for(;!(l.borders[r][0]>s[1]-3)&&(o++,++_!==h.length);)l=u.featuresOnBorder[h[_]];if(l=u.featuresOnBorder[h[n]],a.intersectsCount()>1||l.intersectsCount()>1||1!==o){1!==o&&(_=n),i.encodeCentroid(void 0,a,!1),v&&u.encodeCentroid(void 0,l,!1);continue}const c=d[t](a,l),f=t%2?e.EXTENT-1:0;p.x=y(c[0],Math.min(e.EXTENT-1,c[1]),f,t<2,c[2]),p.y=0,i.encodeCentroid(p,a,!1),v&&u.encodeCentroid(p,l,!1)}else i.encodeCentroid(void 0,a,!1)}i.borderDoneWithNeighborZ[t]=u.canonical.z,i.needsCentroidUpdate=!0,v&&(u.borderDoneWithNeighborZ[r]=i.canonical.z,u.needsCentroidUpdate=!0)}else{for(const e of o)i.encodeCentroid(void 0,i.featuresOnBorder[e],!1);if(v){for(const e of h)u.encodeCentroid(void 0,u.featuresOnBorder[e],!1);u.borderDoneWithNeighborZ[r]=i.canonical.z,u.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[t]=u.canonical.z,i.needsCentroidUpdate=!0}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}const bn=new e.Color(1,0,0,1),wn=new e.Color(0,1,0,1),En=new e.Color(0,0,1,1),Tn=new e.Color(1,0,1,1),Sn=new e.Color(0,1,1,1);function An(t,r,n){const i=t.context,o=t.transform,a=i.gl,s="globe"===o.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null;let c=n.projMatrix;if(s&&e.globeToMercatorTransition(o.zoom)>0){const t=e.transitionTileAABBinECEF(n.canonical,o),r=e.globeDenormalizeECEF(t);c=e.multiply(new Float32Array(16),o.globeMatrix,r),e.multiply(c,o.projMatrix,c)}const u=t.useProgram("debug",null,l),h=r.getTileByID(n.key);t.terrain&&t.terrain.setupElevationDraw(h,u);const d=e.DepthMode.disabled,p=e.StencilMode.disabled,f=t.colorModeForRenderPass(),m="$debug";i.activeTexture.set(a.TEXTURE0),t.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s?h._makeGlobeTileDebugBuffers(t.context,o):h._makeDebugTileBoundsBuffers(t.context,o.projection);const g=h._tileDebugBuffer||t.debugBuffer,y=h._tileDebugIndexBuffer||t.debugIndexBuffer,_=h._tileDebugSegments||t.debugSegments;u.draw(i,a.LINE_STRIP,d,p,f,e.CullFaceMode.disabled,Wr(c,e.Color.red),m,g,y,_,null,null,null,[h._globeTileDebugBorderBuffer]);const v=h.latestRawTileData,x=Math.floor((v&&v.byteLength||0)/1024),b=r.getTile(n).tileSize,w=512/Math.min(b,512)*(n.overscaledZ/o.zoom)*.5;let E=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(E+=` => ${n.overscaledZ}`),E+=` ${x}kb`,function(e,t){e.initDebugOverlayCanvas();const r=e.debugOverlayCanvas,n=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,r.width,r.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(r),e.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(t,E);const T=h._tileDebugTextBuffer||t.debugBuffer,S=h._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,A=h._tileDebugTextSegments||t.debugSegments;u.draw(i,a.TRIANGLES,d,p,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Wr(c,e.Color.transparent,w),m,T,S,A,null,null,null,[h._globeTileDebugTextBuffer])}function Pn(e,t,r,n){kn(e,0,t+r/2,e.transform.width,r,n)}function In(e,t,r,n){kn(e,t-r/2,0,r,e.transform.height,n)}function kn(t,r,n,i,o,a){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(r*e.exported.devicePixelRatio,n*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,o*e.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}const Cn=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Mn}=Cn;function zn(e,t,r,n){e.emplaceBack(t,r,n)}class Dn{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,zn(this.vertexArray,-1,-1,1),zn(this.vertexArray,1,-1,1),zn(this.vertexArray,-1,1,1),zn(this.vertexArray,1,1,1),zn(this.vertexArray,-1,-1,-1),zn(this.vertexArray,1,-1,-1),zn(this.vertexArray,-1,1,-1),zn(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Mn),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Ln(t,r,n,i,o,a){const s=t.gl,l=r.paint.get("sky-atmosphere-color"),c=r.paint.get("sky-atmosphere-halo-color"),u=r.paint.get("sky-atmosphere-sun-intensity"),h=((e,t,r,n,i)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:r,u_color_tint_r:[n.r,n.g,n.b,n.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),i),o,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,r.skyboxTexture,0),n.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}const Fn=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Rn{constructor(t){const r=new e.StructArrayLayout5f20;r.emplaceBack(-1,1,1,0,0),r.emplaceBack(1,1,1,1,0),r.emplaceBack(1,-1,1,1,1),r.emplaceBack(-1,-1,1,0,1);const n=new e.StructArrayLayout3ui6;n.emplaceBack(0,1,2),n.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(r,Fn.members),this.indexBuffer=t.createIndexBuffer(n),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Bn={symbol:function(t,r,n,i,o){if("translucent"!==t.renderPass)return;const a=e.StencilMode.disabled,s=t.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(t,r,n,i,o,a,s){const l=r.transform,c="map"===o,u="map"===a;for(const r of t){const t=i.getTile(r),o=t.getBucket(n);if(!o||!o.text||!o.text.segments.get().length)continue;const a=e.evaluateSizeForZoom(o.textSizeData,l.zoom),h=wt(r,o.getProjection(),l),d=l.calculatePixelsToTileUnitsMatrix(t),p=tt(h,t.tileID.canonical,u,c,l,o.getProjection(),d),f="none"!==n.layout.get("icon-text-fit")&&o.hasIconData();if(a){const n=Math.pow(2,l.zoom-t.tileID.overscaledZ);fn(o,c,u,s,e.symbolSize,l,p,r,n,a,f)}}}(i,t,n,r,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),o),0!==n.paint.get("icon-opacity").constantOr(1)&&gn(t,r,n,i,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),a,s),0!==n.paint.get("text-opacity").constantOr(1)&&gn(t,r,n,i,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),a,s),r.map.showCollisionBoxes&&(hn(t,r,n,i,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),hn(t,r,n,i,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))},circle:function(t,r,n,i){if("translucent"!==t.renderPass)return;const o=n.paint.get("circle-opacity"),a=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity"),l=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,h=t.transform,d=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),p=e.StencilMode.disabled,f=t.colorModeForRenderPass(),m="globe"===h.projection.name,g=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],y=[];for(let o=0;o<i.length;o++){const a=i[o],s=r.getTile(a),c=s.getBucket(n);if(!c||c.projection.name!==h.projection.name)continue;const u=c.programConfigurations.get(n.id),d=Hr(n);m&&d.push("PROJECTION_GLOBE_VIEW");const p=t.useProgram("circle",u,d),f=c.layoutVertexBuffer,_=c.globeExtVertexBuffer,v=c.indexBuffer,x=h.projection.createInversionMatrix(h,a.canonical),b={programConfiguration:u,program:p,layoutVertexBuffer:f,globeExtVertexBuffer:_,indexBuffer:v,uniformValues:Gr(t,a,s,x,g,n),tile:s};if(l){const t=c.segments.get();for(const r of t)y.push({segments:new e.SegmentVector([r]),sortKey:r.sortKey,state:b})}else y.push({segments:c.segments,sortKey:0,state:b})}l&&y.sort(((e,t)=>e.sortKey-t.sortKey));const _={useDepthForOcclusion:!m};for(const r of y){const{programConfiguration:i,program:o,layoutVertexBuffer:a,globeExtVertexBuffer:s,indexBuffer:l,uniformValues:m,tile:g}=r.state,y=r.segments;t.terrain&&t.terrain.setupElevationDraw(g,o,_),t.prepareDrawProgram(c,o,g.tileID.toUnwrapped()),o.draw(c,u.TRIANGLES,d,p,f,e.CullFaceMode.disabled,m,n.id,a,l,y,n.paint,h.zoom,i,[s])}},heatmap:function(t,r,n,i){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,a=o.gl,s=e.StencilMode.disabled,l=new e.ColorMode([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,r,n){const i=e.gl,o=t.width*n,a=t.height*n;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,o,a]);let s=r.heatmapFbo;if(!s||s&&(s.width!==o||s.height!==a)){s&&s.destroy();const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=r.heatmapFbo=e.createFramebuffer(o,a,!1),function(e,t,r,n,i,o){const a=e.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,i,o,0,a.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),n.colorAttachment.set(r)}(e,0,t,s,o,a)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(o,t,n,"globe"===t.transform.projection.name?.5:.25),o.clear({color:e.Color.transparent});const c=t.transform,u="globe"===c.projection.name,h=u?["PROJECTION_GLOBE_VIEW"]:null,d=u?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,p=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)];for(let f=0;f<i.length;f++){const m=i[f];if(r.hasRenderableParent(m))continue;const g=r.getTile(m),y=g.getBucket(n);if(!y||y.projection.name!==c.projection.name)continue;const _=y.programConfigurations.get(n.id),v=t.useProgram("heatmap",_,h),{zoom:x}=t.transform;t.terrain&&t.terrain.setupElevationDraw(g,v),t.prepareDrawProgram(o,v,m.toUnwrapped());const b=c.projection.createInversionMatrix(c,m.canonical);v.draw(o,a.TRIANGLES,e.DepthMode.disabled,s,l,d,Xr(t,m,g,b,p,x,n.paint.get("heatmap-intensity")),n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,t.transform.zoom,_,u?[y.globeExtVertexBuffer]:null)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,r){const n=t.context,i=n.gl,o=r.heatmapFbo;if(!o)return;n.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),n.activeTexture.set(i.TEXTURE1);let a=r.colorRampTexture;a||(a=r.colorRampTexture=new e.Texture(n,r.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(n,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,r,n)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,r),r.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,r.paint,t.transform.zoom)}(t,n))},line:function(t,r,n,i){if("translucent"!==t.renderPass)return;const o=n.paint.get("line-opacity"),a=n.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,u=n.paint.get("line-dasharray"),h=u.constantOr(1),d=n.layout.get("line-cap"),p=n.paint.get("line-pattern"),f=p.constantOr(1),m=n.paint.get("line-gradient"),g=n.getCrossfadeParameters(),y=f?"linePattern":"line",_=t.context,v=_.gl,x=(e=>{const t=[];$r(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const r=e.paint.get("line-trim-offset");0===r[0]&&0===r[1]||t.push("RENDER_LINE_TRIM_OFFSET");const n=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!n&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(n);let b=x.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(b=!1);for(const o of i){const i=r.getTile(o);if(f&&!i.patternsLoaded())continue;const a=i.getBucket(n);if(!a)continue;t.prepareDrawTile();const w=a.programConfigurations.get(n.id),E=t.useProgram(y,w,x),T=p.constantOr(null);if(T&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[T.to.toString()],r=e.patternPositions[T.from.toString()];t&&r&&w.setConstantPatternPositions(t,r)}const S=u.constantOr(null),A=d.constantOr(null);if(!f&&S&&A&&i.lineAtlas){const e=i.lineAtlas,t=e.getDash(S.to,A),r=e.getDash(S.from,A);t&&r&&w.setConstantPatternPositions(t,r)}let[P,I]=n.paint.get("line-trim-offset");if("round"===A||"square"===A){const e=1;P!==I&&(0===P&&(P-=e),1===I&&(I+=e))}const k=t.terrain?o.projMatrix:null,C=f?Kr(t,i,n,g,k,c):Yr(t,i,n,g,k,a.lineClipsArray.length,c,[P,I]);if(m){const i=a.gradients[n.id];let s=i.texture;if(n.gradientVersion!==i.version){let l=256;if(n.stepInterpolant){const n=r.getSource().maxzoom,i=o.canonical.z===n?Math.ceil(1<<t.transform.maxZoom-o.canonical.z):1;l=e.clamp(e.nextPowerOfTwo(a.maxLineLength/e.EXTENT*1024*i),256,_.maxTextureSize)}i.gradient=e.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:i.gradient||void 0,clips:a.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new e.Texture(_,i.gradient,v.RGBA),i.version=n.gradientVersion,s=i.texture}_.activeTexture.set(v.TEXTURE1),s.bind(n.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}h&&(_.activeTexture.set(v.TEXTURE0),i.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),w.updatePaintBuffers(g)),f&&(_.activeTexture.set(v.TEXTURE0),i.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),w.updatePaintBuffers(g)),t.prepareDrawProgram(_,E,o.toUnwrapped());const M=r=>{E.draw(_,v.TRIANGLES,s,r,l,e.CullFaceMode.disabled,C,n.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,n.paint,t.transform.zoom,w,[a.layoutVertexBuffer2])};if(b){const r=t.stencilModeForClipping(o).ref;0===r&&t.terrain&&_.clear({stencil:0});const n={func:v.EQUAL,mask:255};C.u_alpha_discard_threshold=.8,M(new e.StencilMode(n,r,255,v.KEEP,v.KEEP,v.INVERT)),C.u_alpha_discard_threshold=0,M(new e.StencilMode(n,r,255,v.KEEP,v.KEEP,v.KEEP))}else M(t.stencilModeForClipping(o))}b&&(t.resetStencilClippingMasks(),t.terrain&&_.clear({stencil:0}))},fill:function(t,r,n,i){const o=n.paint.get("fill-color"),a=n.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=t.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const o=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);_n(t,r,n,i,o,s,!1)}if("translucent"===t.renderPass&&n.paint.get("fill-antialias")){const o=t.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);_n(t,r,n,i,o,s,!0)}},"fill-extrusion":function(t,r,n,i){const o=n.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===t.renderPass){const a=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==o||n.paint.get("fill-extrusion-pattern").constantOr(1))vn(t,r,n,i,a,e.StencilMode.disabled,e.ColorMode.disabled),vn(t,r,n,i,a,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{const o=t.colorModeForRenderPass();vn(t,r,n,i,a,e.StencilMode.disabled,o)}}},hillshade:function(t,r,n,i){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const o=t.context,a=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},i]:t.stencilConfigForOverlap(i);for(const i of u){const o=r.getTile(i);if(o.needsHillshadePrepare&&"offscreen"===t.renderPass)vr(t,o,n,a,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(i):c[i.overscaledZ];yr(t,i,o,n,a,e,s)}}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()},raster:function(t,r,n,i,o,a){if("translucent"!==t.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!i.length)return;const s=t.context,l=s.gl,c=r.getSource(),u=t.useProgram("raster"),h=t.colorModeForRenderPass(),d=t.terrain&&t.terrain.renderingToTexture,[p,f]=c instanceof Ce||d?[{},i]:t.stencilConfigForOverlap(i),m=f[f.length-1].overscaledZ,g=!t.options.moving;for(const i of f){const o=d?e.DepthMode.disabled:t.depthModeForSublayer(i.overscaledZ-m,1===n.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),f=i.toUnwrapped(),y=r.getTile(i);if(d&&(!y||!y.hasData()))continue;const _=d?i.projMatrix:t.transform.calculateProjMatrix(f,g),v=t.terrain&&d?t.terrain.stencilModeForRTTOverlap(i):p[i.overscaledZ],x=a?0:n.paint.get("raster-fade-duration");y.registerFadeDuration(x);const b=r.findLoadedParent(i,0),w=Ir(y,b,r,t.transform,x);let E,T;t.terrain&&t.terrain.prepareDrawTile();const S="nearest"===n.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),y.texture.bind(S,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),b?(b.texture.bind(S,l.CLAMP_TO_EDGE),E=Math.pow(2,b.tileID.overscaledZ-y.tileID.overscaledZ),T=[y.tileID.canonical.x*E%1,y.tileID.canonical.y*E%1]):y.texture.bind(S,l.CLAMP_TO_EDGE);const A=en(_,T||[0,0],E||1,w,n,c instanceof Ce?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(s,u,f),c instanceof Ce)c.boundsBuffer&&c.boundsSegments&&u.draw(s,l.TRIANGLES,o,e.StencilMode.disabled,h,e.CullFaceMode.disabled,A,n.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:r,tileBoundsIndexBuffer:i,tileBoundsSegments:a}=t.getTileBoundsBuffers(y);u.draw(s,l.TRIANGLES,o,v,h,e.CullFaceMode.disabled,A,n.id,r,i,a)}}t.resetStencilClippingMasks()},background:function(t,r,n,i){const o=n.paint.get("background-color"),a=n.paint.get("background-opacity");if(0===a)return;const s=t.context,l=s.gl,c=t.transform,u=c.tileSize,h=n.paint.get("background-pattern");if(t.isPatternMissing(h))return;const d=!h&&1===o.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==d)return;const p=e.StencilMode.disabled,f=t.depthModeForSublayer(0,"opaque"===d?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),g=t.useProgram(h?"backgroundPattern":"background");let y,_=i;_||(y=t.getBackgroundTiles(),_=Object.values(y).map((e=>e.tileID))),h&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));const v=n.getCrossfadeParameters();for(const d of _){const _=d.toUnwrapped(),x=i?d.projMatrix:t.transform.calculateProjMatrix(_);t.prepareDrawTile();const b=r?r.getTile(d):y?y[d.key]:new e.Tile(d,u,c.zoom,t),w=h?ln(x,a,t,h,{tileID:d,tileSize:u},v):sn(x,a,o);t.prepareDrawProgram(s,g,_);const{tileBoundsBuffer:E,tileBoundsIndexBuffer:T,tileBoundsSegments:S}=t.getTileBoundsBuffers(b);g.draw(s,l.TRIANGLES,f,p,m,e.CullFaceMode.disabled,w,n.id,E,T,S)}},sky:function(t,r,n){const i=t.transform,o="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),a=n.paint.get("sky-opacity")*o;if(0===a)return;const s=t.context,l=n.paint.get("sky-type"),c=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),u=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?n.needsSkyboxCapture(t)&&(function(t,r,n,i){const o=t.context,a=o.gl;let s=r.skyboxFbo;if(!s){s=r.skyboxFbo=o.createFramebuffer(32,32,!1),r.skyboxGeometry=new Dn(o),r.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,r.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let e=0;e<6;++e)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=r.getCenter(t,!0),c=t.useProgram("skyboxCapture"),u=new Float64Array(16);e.identity(u),e.rotateY(u,u,.5*-Math.PI),Ln(o,r,c,u,l,0),e.identity(u),e.rotateY(u,u,.5*Math.PI),Ln(o,r,c,u,l,1),e.identity(u),e.rotateX(u,u,.5*-Math.PI),Ln(o,r,c,u,l,2),e.identity(u),e.rotateX(u,u,.5*Math.PI),Ln(o,r,c,u,l,3),e.identity(u),Ln(o,r,c,u,l,4),e.identity(u),e.rotateY(u,u,Math.PI),Ln(o,r,c,u,l,5),o.viewport.set([0,0,t.width,t.height])}(t,n),n.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,r,n,i,o){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,r.skyboxTexture);const u=((e,t,r,n,i)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:n,u_temporal_offset:i}))(l.skyboxMatrix,r.getCenter(t,!1),0,i,o);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,n,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(t,n,c,a,u):"gradient"===l&&"sky"===t.renderPass&&function(t,r,n,i,o){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skyboxGradient");r.skyboxGeometry||(r.skyboxGeometry=new Dn(a)),a.activeTexture.set(s.TEXTURE0);let u=r.colorRampTexture;u||(u=r.colorRampTexture=new e.Texture(a,r.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((t,r,n,i,o)=>({u_matrix:t,u_color_ramp:0,u_center_direction:r,u_radius:e.degToRad(n),u_opacity:i,u_temporal_offset:o}))(l.skyboxMatrix,r.getCenter(t,!1),r.paint.get("sky-gradient-radius"),i,o);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,n,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(t,n,c,a,u)},debug:function(e,t,r){for(let n=0;n<r.length;n++)An(e,t,r[n])},custom:function(t,r,n){const i=t.context,o=n.implementation;if(t.transform.projection.unsupportedLayers&&t.transform.projection.unsupportedLayers.includes("custom"))e.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===t.renderPass){const e=o.prerender;e&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),e.call(o,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(e.StencilMode.disabled);const r="3d"===o.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);i.setDepthMode(r),o.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}};class On{constructor(t,r){this.context=new Ae(t),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xt,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(e,t){const r=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(r||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new zr(this,e));const n=this._terrain;this.transform.elevation=r?n:null,n.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[r,n]=t.getFovAdjustedRange(this.transform._fov);if(r>n)return void(this.transform.fogCullDistSq=null);const i=r+.78*(n-r);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,r){if(this.width=t*e.exported.devicePixelRatio,this.height=r*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(e.EXTENT,0,e.EXTENT,0),o.emplaceBack(0,e.EXTENT,0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(o,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a);const s=new e.StructArrayLayout1ui2;for(const e of[0,1,3,2,0])s.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Rn(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,r=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,r.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Pr(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,r,n){if(!r||this.currentStencilSource===r.id||!t.isTileClipped()||!n||0===n.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of n)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=r.id;const i=this.context,o=i.gl;this.nextStencilID+n.length>256&&this.clearStencil(),i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of n){const n=r.getTile(t),s=this._tileClippingMaskIDs[t.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:u}=this.getTileBoundsBuffers(n);a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},s,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Pr(t.projMatrix),"$clipping",l,c,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,r=this.context.gl;return new e.StencilMode({func:r.NOTEQUAL,mask:255},t,255,r.KEEP,r.KEEP,r.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const r=this.context.gl;return new e.StencilMode({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,r.KEEP,r.KEEP,r.REPLACE)}stencilConfigForOverlap(t){const r=this.context.gl,n=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=n[n.length-1].overscaledZ,o=n[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const t={};for(let n=0;n<o;n++)t[n+i]=new e.StencilMode({func:r.GEQUAL,mask:255},n+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=o,[t,n]}return[{[i]:e.StencilMode.disabled},n]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const r=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(r,r,r,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,r,n){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(n||this.context.gl.LEQUAL,r,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,r){this.style=t,this.options=r,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const n=this.style.order,i=this.style._sourceCaches;for(const e in i){const t=i[e];t.used&&t.prepare(this.context)}const o={},a={},s={};for(const e in i){const t=i[e];o[e]=t.getVisibleCoordinates(),a[e]=o[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<n.length;e++)if(this.style._layers[n[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),e.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const e of n){const r=this.style._layers[e],n=t._getLayerSourceCache(r);if(!r.hasOffscreenPass()||r.isHidden(this.transform.zoom))continue;const i=n?a[n.id]:void 0;("custom"===r.type||r.isSky()||i&&i.length)&&this.renderLayer(this,n,r,i)}if(this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:r.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[n[this.currentLayer]],r=t._getLayerSourceCache(e);if(e.isSky())continue;const i=r?a[r.id]:void 0;this._renderTileClippingMasks(e,r,i),this.renderLayer(this,r,e,i)}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,r){const n=t.context,i=n.gl,o=t.transform,a=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===o.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(o.zoom),c=r.properties.get("color").toArray01(),u=r.properties.get("high-color").toArray01(),h=r.properties.get("space-color").toArray01PremultipliedAlpha(),d=e.identity$1([]);e.rotateY$1(d,d,-e.degToRad(o._center.lng)),e.rotateX$1(d,d,e.degToRad(o._center.lat)),e.rotateZ$1(d,d,o.angle),e.rotateX$1(d,d,-o._pitch);const p=e.fromQuat(new Float32Array(16),d),f=e.mapValue(r.properties.get("star-intensity"),0,1,0,.25),m=5e-4,g=e.mapValue(r.properties.get("horizon-blend"),0,1,m,.25),y=e.globeUseCustomAntiAliasing(t,n,o)&&g===m?o.worldSize/(2*Math.PI*1.025)-1:o.globeRadius,_=t.frameCounter/1e3%1,v=e.length(o.globeCenterInViewSpace),x=Math.sqrt(Math.pow(v,2)-Math.pow(y,2)),b=Math.acos(x/v),w=((t,r,n,i,o,a,s,l,c,u,h,d,p,f)=>({u_frustum_tl:t,u_frustum_tr:r,u_frustum_br:n,u_frustum_bl:i,u_horizon:o,u_transition:a,u_fadeout_range:s,u_color:l,u_high_color:c,u_space_color:u,u_star_intensity:h,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:d,u_horizon_angle:p,u_rotation_matrix:f}))(o.frustumCorners.TL,o.frustumCorners.TR,o.frustumCorners.BR,o.frustumCorners.BL,o.frustumCorners.horizon,l,g,c,u,h,f,_,b,p);t.prepareDrawProgram(n,s);const E=t.atmosphereBuffer;E&&s.draw(n,i.TRIANGLES,a,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,w,"skybox",E.vertexBuffer,E.indexBuffer,E.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){const e=this.style._layers[n[this.currentLayer]],r=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,r,e,r?a[r.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;){const e=this.style._layers[n[this.currentLayer]],r=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=r?("symbol"===e.type?s:a)[r.id]:void 0;this._renderTileClippingMasks(e,r,r?o[r.id]:void 0),this.renderLayer(this,r,e,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let r=null;e.values(this.style._layers).forEach((e=>{const n=t._getLayerSourceCache(e);n&&!e.isHidden(this.transform.zoom)&&(!r||r.getSource().maxzoom<n.getSource().maxzoom)&&(r=n)})),r&&this.options.showTileBoundaries&&Bn.debug(this,r,r.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Pn(e,e.transform.height-(t.top||0),3,bn),Pn(e,t.bottom||0,3,wn),In(e,t.left||0,3,En),In(e,e.transform.width-(t.right||0),3,Tn);const r=e.transform.centerPoint;!function(e,t,r,n){kn(e,t-1,r-10,2,20,n),kn(e,t-10,r-1,20,2,n)}(e,r.x,e.transform.height-r.y,Sn)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}}renderLayer(e,t,r,n){r.isHidden(this.transform.zoom)||("background"===r.type||"sky"===r.type||"custom"===r.type||n&&n.length)&&(this.id=r.id,this.gpuTimingStart(r),e.transform.projection.unsupportedLayers&&e.transform.projection.unsupportedLayers.includes(r.type)||Bn[r.type](e,t,r,n,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let r=this.gpuTimers[e.id];r||(r=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),r.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,r.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const r in e){const n=e[r],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(n.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n.query),t[r]=o}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.extTimerQuery;let r=0;for(const n of e)r+=t.getQueryObjectEXT(n,t.QUERY_RESULT_EXT)/1e6,t.deleteQueryEXT(n);return r}translatePosMatrix(t,r,n,i,o){if(!n[0]&&!n[1])return t;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);n=[n[0]*t-n[1]*e,n[0]*e+n[1]*t]}const s=[o?n[0]:D(r,n[0],this.transform.zoom),o?n[1]:D(r,n[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),r=this.imageManager.getPattern(e.to.toString());return!t||!r}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),t&&!e&&0!==t.getOpacity(this.transform.pitch)&&r.push("FOG"),e&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}useProgram(e,t,r){this.cache=this.cache||{};const n=r||[],i=this.currentGlobalDefines().concat(n),o=Dr.cacheKey(dr[e],e,i,t);return this.cache[o]||(this.cache[o]=new Dr(this.context,e,dr[e],t,cn[e],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(t,r,n){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const o=i.getOpacity(this.transform.pitch),a=((t,r,n,i,o,a,s,l,c,u,h)=>{const d=t.transform,p=r.properties.get("color").toArray01();p[3]=i;const f=t.frameCounter/1e3%1;return{u_fog_matrix:n?d.calculateFogTileMatrix(n):t.identityMat,u_fog_range:r.getFovAdjustedRange(d._fov),u_fog_color:p,u_fog_horizon_blend:r.properties.get("horizon-blend"),u_fog_temporal_offset:f,u_frustum_tl:o,u_frustum_tr:a,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:u,u_viewport:h,u_globe_transition:e.globeToMercatorTransition(d.zoom),u_is_globe:+("globe"===d.projection.name)}})(this,i,n,o,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);r.setFogUniformValues(t,a)}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,r=this._backgroundTiles={},n=this.transform.coveringTiles({tileSize:512});for(const i of n)r[i.key]=t[i.key]||new e.Tile(i,512,this.transform.tileZoom,this);return r}clearBackgroundTiles(){this._backgroundTiles={}}}class Nn{constructor(e=0,t=0,r=0,n=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(r)||r<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=r,this.right=n}interpolate(t,r,n){return null!=r.top&&null!=t.top&&(this.top=e.number(t.top,r.top,n)),null!=r.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,r.bottom,n)),null!=r.left&&null!=t.left&&(this.left=e.number(t.left,r.left,n)),null!=r.right&&null!=t.right&&(this.right=e.number(t.right,r.right,n)),this}getCenter(t,r){const n=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+r-this.bottom)/2,0,r);return new e.pointGeometry(n,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Nn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function jn(t,r){const n=e.getColumn(t,3);e.fromQuat(t,r),e.setColumn(t,3,n)}function Un(t,r){const n=e.identity$1([]);return e.rotateZ$1(n,n,-r),e.rotateX$1(n,n,-t),n}function Vn(t,r){const n=[t[0],t[1],0],i=[r[0],r[1],0];if(e.length(n)>=1e-15){const t=e.normalize([],n);e.scale$2(i,t,e.dot(i,t)),r[0]=i[0],r[1]=i[1]}const o=e.cross([],r,t);if(e.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return Un(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),a)}class Gn{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){if(t){const r=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(r.x=e.wrap(r.x,0,1)),this._position=r}else this._position=null}lookAtPoint(t,r){if(this.orientation=null,!this.position)return;const n=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,i=this.position,o=e.MercatorCoordinate.fromLngLat(t,n),a=[o.x-i.x,o.y-i.y,o.z-i.z];r||(r=[0,0,1]),r[2]=Math.abs(r[2]),this.orientation=Vn(a,r)}setPitchBearing(t,r){this.orientation=Un(e.degToRad(t),e.degToRad(-r))}}class Hn{constructor(t,r){this._transform=e.identity([]),this.orientation=r,this.position=t}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var r;t&&e.setColumn(this._transform,3,[(r=t)[0],r[1],r[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&jn(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Un(e,t),jn(this._transform,this._orientation)}forward(){const t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,r){const n=new Float64Array(16);return e.invert(n,this.getWorldToCamera(t,r)),n}getWorldToCameraPosition(t,r,n){const i=this.position;e.scale$2(i,i,-t);const o=new Float64Array(16);return e.fromScaling(o,[n,n,n]),e.translate(o,o,i),o[10]*=r,o}getWorldToCamera(t,r){const n=new Float64Array(16),i=new Float64Array(4),o=this.position;return e.conjugate(i,this._orientation),e.scale$2(o,o,-t),e.fromQuat(n,i),e.translate(n,n,o),n[1]*=-1,n[5]*=-1,n[9]*=-1,n[13]*=-1,n[8]*=r,n[9]*=r,n[10]*=r,n[11]*=r,n}getCameraToClipPerspective(t,r,n,i){const o=new Float64Array(16);return e.perspective(o,t,r,n,i),o}getDistanceToElevation(t){const r=0===t?0:e.mercatorZfromAltitude(t,this.position[1]),n=this.forward();return(r-this.position[2])/n[2]}clone(){return new Hn([...this.position],[...this.orientation])}}function qn(t,r){const n=Zn(t.projection,t.zoom,t.width,t.height),i=function(t,r,n,i,o){const a=new e.LngLat(n.lng-180*Xn,n.lat),s=new e.LngLat(n.lng+180*Xn,n.lat),l=t.project(a.lng,a.lat),c=t.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),h=e.MercatorCoordinate.fromLngLat(n);h.y=e.clamp(h.y,-.999975,.999975);const d=h.toLngLat(),p=t.project(d.lng,d.lat),f=e.MercatorCoordinate.fromLngLat(d);f.x+=Xn;const m=f.toLngLat(),g=t.project(m.lng,m.lat),y=Kn(g.x-p.x,g.y-p.y,u),_=e.MercatorCoordinate.fromLngLat(d);_.y+=Xn;const v=_.toLngLat(),x=t.project(v.lng,v.lat),b=Kn(x.x-p.x,x.y-p.y,u),w=Math.abs(y.x)/Math.abs(b.y),E=e.identity([]);e.rotateZ(E,E,-u*(1-(o?0:i)));const T=e.identity([]);return e.scale(T,T,[1,1-(1-w)*i,1]),T[4]=-b.x/b.y*i,e.rotateZ(T,T,u),e.multiply(T,E,T),T}(t.projection,0,t.center,n,r),o=Wn(t);return e.scale(i,i,[o,o,1]),i}function Wn(t){const r=t.projection,n=Zn(t.projection,t.zoom,t.width,t.height),i=Yn(r,t.center),o=Yn(r,e.LngLat.convert(r.center));return Math.pow(2,i*n+(1-n)*o)}function Zn(t,r,n,i,o=1/0){const a=t.range;if(!a)return 0;const s=Math.min(o,Math.max(n,i)),l=Math.log(s/1024)/Math.LN2;return e.smoothstep(a[0]+l,a[1]+l,r)}const Xn=1/4e4;function Yn(t,r){const n=e.clamp(r.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(r.lng-180*Xn,n),o=new e.LngLat(r.lng+180*Xn,n),a=t.project(i.lng,n),s=t.project(o.lng,n),l=e.MercatorCoordinate.fromLngLat(i),c=e.MercatorCoordinate.fromLngLat(o),u=s.x-a.x,h=s.y-a.y,d=c.x-l.x,p=c.y-l.y,f=Math.sqrt((d*d+p*p)/(u*u+h*h));return Math.log(f)/Math.LN2}function Kn(e,t,r){const n=Math.cos(r),i=Math.sin(r);return{x:e*n-t*i,y:e*i+t*n}}class Jn{constructor(t,r,n,i,o,a,s){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=r||22,this._minPitch=null==n?0:n,this._maxPitch=null==i?60:i,this.setProjection(a),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Nn,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Hn,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const e=new Jn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(e){const t=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||t)&&this._updateCameraOnTerrain(),(e||t)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(r){this.projectionOptions=r||{name:"mercator"};const n=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const i=!t(n,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});const r=t!==this.projection.name;return r&&this._calcMatrices(),r}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.pointGeometry(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const r=-t*Math.PI/180;var n;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=(n=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);e[0]=n*l+o*s,e[1]=i*l+a*s,e[2]=n*-s+o*l,e[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const r=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())}get aspect(){return this.width/this.height}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,r=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],n=this.horizonLineFromTop();let i=0,o=0;for(let a=0;a<r.length;a++){const s=new e.pointGeometry(r[a][0]*this.width,n+r[a][1]*(this.height-n)),l=t.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*c,o+=c}return 0===o?NaN:i/o}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),r=this.pixelsPerMeter/this.worldSize*t,n=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(n-r,i);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const r=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let n;n=t.z<this._camera.position[2]?[r.x,r.y,r.z]:[t.x,t.y,t.z];const i=e.length(e.sub([],this._camera.position,n));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let r=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(r=this._setCameraOrientation(t.orientation)),t.position){const n=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(n,this._camera.position)||(this._setCameraPosition(n),r=!0)}r&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,r=new Gn;return r.position=new e.MercatorCoordinate(t[0],t[1],t[2]),r.orientation=this._camera.orientation,r._elevation=this.elevation,r._renderWorldCopies=this.renderWorldCopies,r}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const r=e.transformQuat([],[0,0,-1],t),n=e.transformQuat([],[0,-1,0],t);if(n[2]<0)return!1;const i=Vn(r,n);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(t){const r=this.zoomScale(this.minZoom)*this.tileSize,n=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/n,i/r),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,r){this._unmodified=!1,this._edgeInsets.interpolate(e,t,r),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const r=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const n=this.pointCoordinate(new e.pointGeometry(0,0)),i=this.pointCoordinate(new e.pointGeometry(this.width,0)),o=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(n.x,i.x,o.x,a.x)),l=Math.floor(Math.max(n.x,i.x,o.x,a.x)),c=1;for(let n=s-c;n<=l+c;n++)0!==n&&r.push(new e.UnwrappedTileID(n,t))}return r}coveringTiles(t){let r=this.coveringZoomLevel(t);const n=r,i=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&r<t.minzoom)return[];void 0!==t.maxzoom&&r>t.maxzoom&&(r=t.maxzoom);const a=this.locationCoordinate(this.center),s=this.center.lat,l=1<<r,c=[l*a.x,l*a.y,0],u="globe"===this.projection.name,h=!u,d=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r,h),p=u?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),f=l*e.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[l*p.x,l*p.y,m*(h?1:f)],y=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),_=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?r:0,v=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,x=t.isTerrainDEM?-v:this._elevation?this._elevation.getMinElevationBelowMSL():0,b=this.projection.isReprojectedInTileSpace?Wn(this):1,w=t=>{const r=1/4e4,n=new e.MercatorCoordinate(t.x+r,t.y,t.z),i=new e.MercatorCoordinate(t.x,t.y+r,t.z),o=t.toLngLat(),a=n.toLngLat(),s=i.toLngLat(),l=this.locationCoordinate(o),c=this.locationCoordinate(a),u=this.locationCoordinate(s),h=Math.hypot(c.x-l.x,c.y-l.y),d=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(h*d)*b/r},E=t=>{const r=v,n=x;return{aabb:e.tileAABB(this,l,0,0,0,t,n,r,this.projection),zoom:0,x:0,y:0,minZ:n,maxZ:r,wrap:t,fullyVisible:!1}},T=[];let S=[];const A=r,P=t.reparseOverscaled?n:r,I=e=>e*e,k=I((m-this._centerAltitude)*f),C=e=>{if(!this._elevation||!e.tileID||!o)return;const t=this._elevation.getMinMaxForTile(e.tileID),r=e.aabb;t?(r.min[2]=t.min,r.max[2]=t.max,r.center[2]=(r.min[2]+r.max[2])/2):(e.shouldSplit=M(e),e.shouldSplit||(r.min[2]=r.max[2]=r.center[2]=this._centerAltitude))},M=t=>{if(t.zoom<_)return!0;if(t.zoom===A)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const r=t.aabb.distanceX(g),o=t.aabb.distanceY(g);let a=k,l=1;if(u){a=I(t.aabb.distanceZ(g));const r=Math.pow(2,t.zoom),n=e.latFromMercatorY((t.y+1)/r),i=e.latFromMercatorY(t.y/r),o=Math.min(Math.max(s,n),i),c=e.circumferenceAtLatitude(o)/e.circumferenceAtLatitude(s);if(l=o===s?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===A-1&&c>=.9)return!0}else if(i&&(a=I(t.aabb.distanceZ(g)*f)),this.projection.isReprojectedInTileSpace&&n<=5){const r=Math.pow(2,t.zoom),n=w(new e.MercatorCoordinate((t.x+.5)/r,(t.y+.5)/r));l=n>.85?1:n}const c=r*r+o*o+a,h=I((1<<A-t.zoom)*y*l*((e,t)=>{if(t*I(.707)<e)return 1;const r=Math.sqrt(t/e);return r/(1.4144271570014144+(Math.pow(1.1,r-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(a,k),c));return c<h};if(this.renderWorldCopies)for(let e=1;e<=3;e++)T.push(E(-e)),T.push(E(e));for(T.push(E(0));T.length>0;){const n=T.pop(),a=n.x,s=n.y;let h=n.fullyVisible;if(!h){const e=n.aabb.intersects(d);if(0===e)continue;h=2===e}if(n.zoom!==A&&M(n))for(let t=0;t<4;t++){const r=(a<<1)+t%2,c=(s<<1)+(t>>1),d={aabb:o?n.aabb.quadrant(t):e.tileAABB(this,l,n.zoom+1,r,c,n.wrap,n.minZ,n.maxZ,this.projection),zoom:n.zoom+1,x:r,y:c,wrap:n.wrap,fullyVisible:h,tileID:void 0,shouldSplit:void 0,minZ:n.minZ,maxZ:n.maxZ};i&&!u&&(d.tileID=new e.OverscaledTileID(n.zoom+1===A?P:n.zoom+1,n.wrap,n.zoom+1,r,c),C(d)),T.push(d)}else{const i=n.zoom===A?P:n.zoom;if(t.minzoom&&t.minzoom>i)continue;const o=c[0]-(.5+a+(n.wrap<<n.zoom))*(1<<r-n.zoom),l=c[1]-.5-s,u=n.tileID?n.tileID:new e.OverscaledTileID(i,n.wrap,n.zoom,a,s);S.push({tileID:u,distanceSq:o*o+l*l})}}if(this.fogCullDistSq){const r=this.fogCullDistSq,n=this.horizonLineFromTop();S=S.filter((i=>{const o=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],s=this.calculateFogTileMatrix(i.tileID.toUnwrapped());e.transformMat4$1(o,o,s),e.transformMat4$1(a,a,s);const l=e.getAABBPointSquareDist(o,a);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>r&&0!==n){const r=this.calculateProjMatrix(i.tileID.toUnwrapped());let o;t.isTerrainDEM||(o=u.getMinMaxForTile(i.tileID)),o||(o={min:x,max:v});const a=e.furthestTileCorner(this.rotation),s=[a[0]*e.EXTENT,a[1]*e.EXTENT,o.max];e.transformMat4(s,s,r),c=(1-s[1])*this.height*.5<n}return l<r||c}))}return S.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const r=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),n=this.projection.project(t.lng,r);return new e.pointGeometry(n.x*this.worldSize,n.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(t,r){let n,i;const o=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;n=(r.x-o.x)/e,i=(r.y-o.y)/e}else{const e=this.pointCoordinate(r),t=this.pointCoordinate(o);n=e.x-t.x,i=e.y-t.y}const a=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(a.x-n,a.y-i))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,r){const n=r?e.mercatorZfromAltitude(r,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,n)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,r){const n=null!=r?r:this._centerAltitude,i=[t.x,t.y,0,1],o=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(o,o,this.pixelMatrixInverse);const a=o[3];e.scale$1(i,i,1/i[3]),e.scale$1(o,o,1/a);const s=i[2],l=o[2];return{p0:i,p1:o,t:s===l?0:(n-s)/(l-s)}}screenPointToMercatorRay(t){const r=[t.x,t.y,0,1],n=[t.x,t.y,1,1];return e.transformMat4$1(r,r,this.pixelMatrixInverse),e.transformMat4$1(n,n,this.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),e.scale$1(n,n,1/n[3]),r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,e.scale$1(r,r,1/this.worldSize),e.scale$1(n,n,1/this.worldSize),new e.Ray([r[0],r[1],r[2]],e.normalize([],e.sub([],n,r)))}rayIntersectionCoordinate(t){const{p0:r,p1:n,t:i}=t,o=e.mercatorZfromAltitude(r[2],this._center.lat),a=e.mercatorZfromAltitude(n[2],this._center.lat);return new e.MercatorCoordinate(e.number(r[0],n[0],i)/this.worldSize,e.number(r[1],n[1],i)/this.worldSize,e.number(o,a,i))}pointCoordinate(e,t=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let r=this.projection.pointCoordinate3D(this,t.x,t.y);if(r)return new e.MercatorCoordinate(r[0],r[1],r[2]);let n=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);const o=.02*i,a=t.clone();for(let t=0;t<10&&i-n>o;t++){a.y=e.number(n,i,.66);const t=this.projection.pointCoordinate3D(this,a.x,a.y);t?(i=a.y,r=t):n=a.y}return r?new e.MercatorCoordinate(r[0],r[1],r[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}_coordinatePoint(t,r){const n=r&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,n+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.pointGeometry(i[0]/i[3],i[1]/i[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getGlobeBounds(){const{top:t,left:r}=this._edgeInsets,n=this.height-this._edgeInsets.bottom,i=this.width-this._edgeInsets.right,o=this.pointCoordinate3D(new e.pointGeometry(r,t)),a=this.pointCoordinate3D(new e.pointGeometry(i,t)),s=this.pointCoordinate3D(new e.pointGeometry(i,n)),l=this.pointCoordinate3D(new e.pointGeometry(r,n));let c=Math.min(o.x,l.x),u=Math.max(a.x,s.x),h=Math.min(o.y,a.y),d=Math.max(l.y,s.y);const p=Math.pow(2,-this.zoom)/16,f=(t,r,n,i)=>{const o=(t+n)/2,a=(r+i)/2,s=new e.pointGeometry(o,a),l=this.pointCoordinate3D(s),m=Math.max(0,c-l.x,h-l.y,l.x-u,l.y-d);c=Math.min(c,l.x),u=Math.max(u,l.x),h=Math.min(h,l.y),d=Math.max(d,l.y),m>p&&(f(t,r,o,a),f(o,a,n,i))};f(r,t,i,t),f(i,t,i,n),f(i,n,r,n),f(r,n,r,t);const m=new e.LngLat(e.lngFromMercatorX(u),e.latFromMercatorY(h)),g=new e.LngLat(e.lngFromMercatorX(c),e.latFromMercatorY(d));return new e.LngLatBounds(g,m)}_getBounds(t,r){if("globe"===this.projection.name)return this._getGlobeBounds();const n=new e.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),i=new e.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),o=new e.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),a=new e.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let s=this.pointCoordinate(n,t),l=this.pointCoordinate(i,t);const c=this.pointCoordinate(o,r),u=this.pointCoordinate(a,r),h=(e,t)=>(t.y-e.y)/(t.x-e.x);return s.y>1&&l.y>=0?s=new e.MercatorCoordinate((1-u.y)/h(u,s)+u.x,1):s.y<0&&l.y<=1&&(s=new e.MercatorCoordinate(-u.y/h(u,s)+u.x,0)),l.y>1&&s.y>=0?l=new e.MercatorCoordinate((1-c.y)/h(c,l)+c.x,1):l.y<0&&s.y<=1&&(l=new e.MercatorCoordinate(-c.y/h(c,l)+c.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(s)).extend(this.coordinateLocation(l)).extend(this.coordinateLocation(u)).extend(this.coordinateLocation(c))}_getBounds3D(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBounds(0,0);const t=e.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const r=t.dem.tree;e.min=Math.min(e.min,r.minimums[0]),e.max=Math.max(e.max,r.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBounds(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,r=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,r):r}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const r=t.key,n=this._distanceTileDataCache;if(n[r])return n[r];const i=t.canonical,o=1/this.height,a=this.cameraWorldSize/this.zoomScale(i.z),s=(i.x+Math.pow(2,i.z)*t.wrap)*a,l=i.y*a,c=this.point,u=this.angle,h=Math.sin(-u),d=-Math.cos(-u);return n[r]={bearing:[h,d],center:[(c.x-s)*o,(c.y-l)*o],scale:a/e.EXTENT*o},n[r]}calculateFogTileMatrix(t){const r=t.key,n=this._fogTileMatrixCache;if(n[r])return n[r];const i=this.projection.createTileMatrix(this,this.cameraWorldSize,t);return e.multiply(i,this.worldToFogMatrix,i),n[r]=new Float32Array(i),n[r]}calculateProjMatrix(t,r=!1){const n=t.key,i=r?this._alignedProjMatrixCache:this._projMatrixCache;if(i[n])return i[n];const o=this.calculatePosMatrix(t,this.worldSize);return e.multiply(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:r?this.alignedProjMatrix:this.projMatrix,o),i[n]=new Float32Array(o),i[n]}calculatePixelsToTileUnitsMatrix(t){const r=t.tileID.key,n=this._pixelsToTileUnitsCache;if(n[r])return n[r];const i=function(t,r){const{scale:n}=t.tileTransform,i=n*e.EXTENT/(t.tileSize*Math.pow(2,r.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return o=new Float32Array(4),l=(a=r.inverseAdjustmentMatrix)[1],c=a[2],u=a[3],d=(s=[i,i])[1],o[0]=a[0]*(h=s[0]),o[1]=l*h,o[2]=c*d,o[3]=u*d,o;var o,a,s,l,c,u,h,d}(t,this);return n[r]=i,n[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,n=this._computeCameraPosition(r),i=this._camera.forward(),o=e.mercatorZfromAltitude(1,this._center.lat);n[2]/=o,i[2]/=o,e.normalize(i,i);const a=t.raycast(n,i,t.exaggeration());if(a){const t=e.scaleAndAdd([],n,i,a),r=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),s=(r.z+e.length([r.x-n[0],r.y-n[1],r.z-n[2]*o]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=r.toAltitude(),this._center=this.coordinateLocation(r),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,n=this._computeCameraPosition(r),i=t.getAtPointOrZero(new e.MercatorCoordinate(...n)),o=this._minimumHeightOverTerrain()*Math.cos(e.degToRad(this._maxPitch)),a=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*i;if(a<o){const t=this.locationCoordinate(this._center,this._centerAltitude),r=[t.x-n[0],t.y-n[1],t.z-n[2]],i=e.length(r);r[2]-=(o-a)/this._pixelsPerMercatorPixel;const s=e.length(r);if(0===s)return;e.scale$2(r,r,i/s*this._pixelsPerMercatorPixel),this._camera.position=[t.x-r[0],t.y-r[1],t.z*this._pixelsPerMercatorPixel-r[2]],this._camera.orientation=Vn(r,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const r=this.center;return r.lat=e.clamp(r.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(r.lng=e.clamp(r.lng,this.minLng,this.maxLng)),this.center=r,void(this._constraining=!1)}const r=this._unmodified,{x:n,y:i}=this.point;let o=0,a=n,s=i;const l=this.width/2,c=this.height/2,u=this.worldMinY*this.scale,h=this.worldMaxY*this.scale;if(i-c<u&&(s=u+c),i+c>h&&(s=h-c),h-u<this.height&&(o=Math.max(o,this.height/(h-u)),s=(h+u)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,r=this.worldSize/2-(e+t)/2;a=(n+r+this.worldSize)%this.worldSize-r,a-l<e&&(a=e+l),a+l>t&&(a=t-l),t-e<this.width&&(o=Math.max(o,this.width/(t-e)),a=(t+e)/2)}a===n&&s===i||(this.center=this.unproject(new e.pointGeometry(a,s))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCameraAltitude(),this._unmodified=r,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,r=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const n=Zn(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,n),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const i=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?r:1),o=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);o[8]=2*-t.x/this.width,o[9]=2*t.y/this.height;let a=e.mul([],o,i);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),r=e.identity([]);e.translate(r,r,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply(r,r,qn(this)),e.translate(r,r,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply(a,a,r),this.inverseAdjustmentMatrix=function(e){const t=qn(e,!0);return _([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],a,[this.worldSize,this.worldSize,this.worldSize/r,1]),this.projMatrix=a,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const s=e.invert([],o);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(s,this.horizonLineFromTop(),this.height);const l=new Float32Array(16);e.identity(l),e.scale(l,l,[1,-1,1]),e.rotateX(l,l,this._pitch),e.rotateZ(l,l,this.angle);const c=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),u=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;c[8]=2*-t.x/this.width,c[9]=2*(t.y+u)/this.height,this.skyboxMatrix=e.multiply(l,c,l);const h=this.point,d=h.x,p=h.y,f=this.width%2/2,m=this.height%2/2,g=Math.cos(this.angle),y=Math.sin(this.angle),v=d-Math.round(d)+g*f+y*m,x=p-Math.round(p)+g*m+y*f,b=new Float64Array(a);if(e.translate(b,b,[v>.5?v-1:v,x>.5?x-1:x,0]),this.alignedProjMatrix=b,a=e.create(),e.scale(a,a,[this.width/2,-this.height/2,1]),e.translate(a,a,[1,-1,0]),this.labelPlaneMatrix=a,a=e.create(),e.scale(a,a,[1,-1,1]),e.translate(a,a,[-1,-1,0]),e.scale(a,a,[2/this.width,2/this.height,1]),this.glCoordMatrix=a,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},a=e.invert(new Float64Array(16),this.pixelMatrix),!a)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=a,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(t,t,i),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=a;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSize,r=this.cameraPixelsPerMeter,n=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,o=[t,t,r];e.scale$2(o,o,i),e.scale$2(n,n,-1),e.multiply$2(n,n,o);const a=e.create();e.translate(a,a,n),e.scale(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,r,i)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,r=this._camera.forward(),n=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[n.x/this.worldSize-r[0]*i,n.y/this.worldSize-r[1]*i,e/this.worldSize*this._centerAltitude-r[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const r=this._maxCameraBoundsDistance()*Math.cos(this._pitch),n=this._camera.position[2],i=t[2];let o=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(o=Math.min((r-n)/i,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,o),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,r=this._camera.forward(),{pitch:n,bearing:i}=this._camera.getPitchBearing(),o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-o)/Math.cos(n),a),l=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,r,s),this._pitch=e.clamp(n,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(i,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(e){const t=t=>{const r=this.getCameraToCenterDistance(this.projection,t);return this.scaleZoom(r/(e*this.tileSize))};let r,n=t(this.zoom),i=Math.abs(n-t(n));for(;r!==i;)n=t(n),r=i,i=Math.abs(n-t(n));return n}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,r){const n=Math.min(t.x,r.x),i=Math.max(t.x,r.x),o=Math.min(t.y,r.y),a=Math.max(t.y,r.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new e.pointGeometry(n,o),new e.pointGeometry(i,a),new e.pointGeometry(n,a),new e.pointGeometry(i,o)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const r=this.rayIntersectionCoordinate(t);if(r.x<l||r.y<0||r.x>c||r.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}zoomDeltaToMovement(t,r){const n=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(n)+r;return n-this._mercatorZfromZoom(i)}getCameraPoint(){if("globe"===this.projection.name){const t=function(t,r){const n=[t[0],t[1],t[2],1];e.transformMat4$1(n,n,r);const i=Math.max(n[3],1e-6);return[n[0]/i,n[1]/i,n[2]/i,i]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.pointGeometry(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,t))}}getCameraToCenterDistance(e,t=this.zoom){const r=Zn(e,t,this.width,this.height,1024),n=e.pixelSpaceConversion(this.center.lat,this.worldSize,r);return.5/Math.tan(.5*this._fov)*this.height*n}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}function Qn(e,t){let r=!1,n=null;const i=()=>{n=null,r&&(e(),n=setTimeout(i,t),r=!1)};return()=>(r=!0,n||i(),n)}class $n{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Qn(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return"";const r=ei(t);if(this._hashName){const t=this._hashName;let n=!1;const i=e.window.location.hash.slice(1).split("&").map((e=>{const i=e.split("=")[0];return i===t?(n=!0,`${i}=${r}`):e})).filter((e=>e));return n||i.push(`${t}=${r}`),`#${i.join("&")}`}return`#${r}`}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const t=this._getCurrentHash();if(t.length>=3&&!t.some((e=>isNaN(e)))){const r=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:r,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}function ei(e,t){const r=e.getCenter(),n=Math.round(100*e.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(r.lng*o)/o,s=Math.round(r.lat*o)/o,l=e.getBearing(),c=e.getPitch();let u=t?`/${a}/${s}/${n}`:`${n}/${s}/${a}`;return(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+=`/${Math.round(c)}`),u}const ti={linearity:.3,easing:e.bezier(0,0,.3,1)},ri=e.extend({deceleration:2500,maxSpeed:1400},ti),ni=e.extend({deceleration:20,maxSpeed:1400},ti),ii=e.extend({deceleration:1e3,maxSpeed:360},ti),oi=e.extend({deceleration:1e3,maxSpeed:90},ti);class ai{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,r=e.exported.now();for(;t.length>0&&r-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const r={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)r.zoom+=e.zoomDelta||0,r.bearing+=e.bearingDelta||0,r.pitch+=e.pitchDelta||0,e.panDelta&&r.pan._add(e.panDelta),e.around&&(r.around=e.around),e.pinchAround&&(r.pinchAround=e.pinchAround);const n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(r.pan.mag()){const o=li(r.pan.mag(),n,e.extend({},ri,t||{}));i.offset=r.pan.mult(o.amount/r.pan.mag()),i.center=this._map.transform.center,si(i,o)}if(r.zoom){const e=li(r.zoom,n,ni);i.zoom=this._map.transform.zoom+e.amount,si(i,e)}if(r.bearing){const t=li(r.bearing,n,ii);i.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),si(i,t)}if(r.pitch){const e=li(r.pitch,n,oi);i.pitch=this._map.transform.pitch+e.amount,si(i,e)}if(i.zoom||i.bearing){const e=void 0===r.pinchAround?r.around:r.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),i.noMoveStart=!0,i}}function si(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function li(t,r,n){const{maxSpeed:i,linearity:o,deceleration:a}=n,s=e.clamp(t*o/(r/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:n.easing,duration:1e3*l,amount:s*(l/2)}}class ci extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,n,i={}){const o=f(r.getCanvasContainer(),n),a=r.unproject(o);super(t,e.extend({point:o,lngLat:a,originalEvent:n},i)),this._defaultPrevented=!1,this.target=r}}class ui extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,n){const i="touchend"===t?n.changedTouches:n.touches,o=m(r.getCanvasContainer(),i),a=o.map((e=>r.unproject(e))),s=o.reduce(((e,t,r,n)=>e.add(t.div(n.length))),new e.pointGeometry(0,0));super(t,{points:o,point:s,lngLats:a,lngLat:r.unproject(s),originalEvent:n}),this._defaultPrevented=!1}}class hi extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,r){super(e,{originalEvent:r}),this._defaultPrevented=!1}}class di{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new hi(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new ci(e.type,this._map,e))}mouseup(e){this._map.fire(new ci(e.type,this._map,e))}preclick(t){const r=e.extend({},t);r.type="preclick",this._map.fire(new ci(r.type,this._map,r))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new ci(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new ci(e.type,this._map,e))}mouseover(e){this._map.fire(new ci(e.type,this._map,e))}mouseout(e){this._map.fire(new ci(e.type,this._map,e))}touchstart(e){return this._firePreventable(new ui(e.type,this._map,e))}touchmove(e){this._map.fire(new ui(e.type,this._map,e))}touchend(e){this._map.fire(new ui(e.type,this._map,e))}touchcancel(e){this._map.fire(new ui(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pi{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new ci(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new ci(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fi{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(u(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const r=t,n=this._startPos,i=this._lastPos;if(!n||!i||i.equals(r)||!this._box&&r.dist(n)<this._clickTolerance)return;this._lastPos=r,this._box||(this._box=o("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const a=Math.min(n.x,r.x),s=Math.max(n.x,r.x),l=Math.min(n.y,r.y),c=Math.max(n.y,r.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${a}px,${l}px)`,this._box.style.width=s-a+"px",this._box.style.height=c-l+"px")}))}mouseupWindow(t,r){if(!this._active)return;const n=this._startPos,i=r;if(n&&0===t.button){if(this.reset(),p(),n.x!==i.x||n.y!==i.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(n,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),h(),delete this._startPos,delete this._lastPos}_fireEvent(t,r){return this._map.fire(new e.Event(t,{originalEvent:r}))}}function mi(e,t){const r={};for(let n=0;n<e.length;n++)r[e[n].identifier]=t[n];return r}class gi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,r,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),n.length===this.numTouches&&(this.centroid=function(t){const r=new e.pointGeometry(0,0);for(const e of t)r._add(e);return r.div(t.length)}(r),this.touches=mi(n,r)))}touchmove(e,t,r){if(this.aborted||!this.centroid)return;const n=mi(r,t);for(const e in this.touches){const t=this.touches[e],r=n[e];(!r||r.dist(t)>30)&&(this.aborted=!0)}}touchend(e,t,r){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class yi{constructor(e){this.singleTap=new gi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,t,r){this.singleTap.touchstart(e,t,r)}touchmove(e,t,r){this.singleTap.touchmove(e,t,r)}touchend(e,t,r){const n=this.singleTap.touchend(e,t,r);if(n){const t=e.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(n)<30;if(t&&r||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class _i{constructor(){this._zoomIn=new yi({numTouches:1,numTaps:2}),this._zoomOut=new yi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,r){this._zoomIn.touchstart(e,t,r),this._zoomOut.touchstart(e,t,r)}touchmove(e,t,r){this._zoomIn.touchmove(e,t,r),this._zoomOut.touchmove(e,t,r)}touchend(e,t,r){const n=this._zoomIn.touchend(e,t,r),i=this._zoomOut.touchend(e,t,r);return n?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(n)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const vi={0:1,2:2};class xi{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const r=g(e);this._correctButton(e,r)&&(this._lastPoint=t,this._eventButton=r)}mousemoveWindow(e,t){const r=this._lastPoint;if(r)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const r=vi[t];return void 0===e.buttons||(e.buttons&r)!==r}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(r,t)}mouseupWindow(e){this._lastPoint&&g(e)===this._eventButton&&(this._moved&&p(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bi extends xi{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class wi extends xi{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const r=.8*(t.x-e.x);if(r)return this._active=!0,{bearingDelta:r}}contextmenu(e){e.preventDefault()}}class Ei extends xi{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const r=-.5*(t.y-e.y);if(r)return this._active=!0,{pitchDelta:r}}contextmenu(e){e.preventDefault()}}class Ti{constructor(t,r){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0)}touchstart(e,t,r){return this._calculateTransform(e,t,r)}touchmove(t,r,n){if(this._active&&!(n.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===n.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,r,n)}}touchend(e,t,r){this._calculateTransform(e,t,r),this._active&&r.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,r,n){n.length>0&&(this._active=!0);const i=mi(n,r),o=new e.pointGeometry(0,0),a=new e.pointGeometry(0,0);let s=0;for(const e in i){const t=i[e],r=this._touches[e];r&&(o._add(t),a._add(t.sub(r)),s++,i[e]=t)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Si{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,t,r){return{}}touchstart(e,t,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,r){const n=this._firstTwoTouches;if(!n)return;e.preventDefault();const[i,o]=n,a=Ai(r,t,i),s=Ai(r,t,o);if(!a||!s)return;const l=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],l,e)}touchend(e,t,r){if(!this._firstTwoTouches)return;const[n,i]=this._firstTwoTouches,o=Ai(r,t,n),a=Ai(r,t,i);o&&a||(this._active&&p(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ai(e,t,r){for(let n=0;n<e.length;n++)if(e[n].identifier===r)return t[n]}function Pi(e,t){return Math.log(e/t)/Math.LN2}class Ii extends Si{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const r=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Pi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Pi(this._distance,r),pinchAround:t}}}function ki(e,t){return 180*e.angleWith(t)/Math.PI}class Ci extends Si{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const r=this._vector;if(this._vector=e[0].sub(e[1]),r&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ki(this._vector,r),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,r=this._startVector;if(!r)return!1;const n=ki(e,r);return Math.abs(n)<t}}function Mi(e){return Math.abs(e.y)>Math.abs(e.x)}class zi extends Si{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,Mi(e[0].sub(e[1]))&&(this._valid=!1)}_move(t,r,n){const i=this._lastPoints;if(!i)return;const o=t[0].sub(i[0]),a=t[1].sub(i[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&n.touches.length<3||(this._valid=this.gestureBeginsVertically(o,a,n.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(o.y+a.y)/2*-.5})}gestureBeginsVertically(e,t,r){if(void 0!==this._valid)return this._valid;const n=e.mag()>=2,i=t.mag()>=2;if(!n&&!i)return;if(!n||!i)return null==this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return Mi(e)&&Mi(t)&&o}}const Di={panStep:100,bearingStep:15,pitchStep:10};class Li{constructor(){const e=Di;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,r=0,n=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?n=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?n=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(r=0,n=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Fi,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+r*this._bearingStep,pitch:a.getPitch()+n*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Fi(e){return e*(2-e)}const Ri=4.000244140625;class Bi{constructor(t,r){this._map=t,this._el=t.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let r=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const n=e.exported.now(),i=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==r&&r%Ri==0?this._type="wheel":0!==r&&Math.abs(r)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),t.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=t,this._delta-=r,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=f(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const r=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Ri?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==n&&(n=1/n);const i=r(),o=Math.pow(2,i),a="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(a*n))),"wheel"===this._type&&(this._startZoom=i,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:r(),i=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&i&&o){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),r=o(t);a=e.number(i,n,r),t<1?this._frameId||(this._frameId=!0):s=!0}else a=n,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-r(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let r=e.ease;if(this._prevEase){const t=this._prevEase,n=(e.exported.now()-t.start)/t.duration,i=t.easing(n+.01)-t.easing(n),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);r=e.bezier(o,a,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:r},r}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Oi{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ni{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:r=>{r.easeTo({duration:300,zoom:r.getZoom()+(e.shiftKey?-1:1),around:r.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ji{constructor(){this._tap=new yi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,t,r){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?r.length>0&&(this._swipePoint=t[0],this._swipeTouch=r[0].identifier):this._tap.touchstart(e,t,r))}touchmove(e,t,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;const n=t[0],i=n.y-this._swipePoint.y;return this._swipePoint=n,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,r)}touchend(e,t,r){this._tapTime?this._swipePoint&&0===r.length&&this.reset():this._tap.touchend(e,t,r)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ui{constructor(e,t,r){this._el=e,this._mousePan=t,this._touchPan=r}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Vi{constructor(e,t,r){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=r}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Gi{constructor(e,t,r,n){this._el=e,this._touchZoom=t,this._touchRotate=r,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Hi=e=>e.zoom||e.drag||e.pitch||e.rotate;class qi extends e.Event{}class Wi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,r){const n=e.sub([],r,t);this.radius=e.length(n[2]<0?e.div([],n,this.constants):[n[0],n[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const r=e.scale$2([],t,this.radius);if(r[2]>0){const t=e.scale$2([],[0,0,1],e.dot(r,[0,0,1])),n=e.scale$2([],e.normalize([],[r[0],r[1],0]),this.radius),i=e.add([],r,e.scale$2([],e.sub([],e.add([],n,t),r),2));r[0]=i[0],r[1]=i[1]}return r}}function Zi(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Xi{constructor(t,r){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ai(t),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Wi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[t,r,n]of this._listeners)t.addEventListener(r,t===e.window.document?this.handleWindowEvent:this.handleEvent,n)}destroy(){for(const[t,r,n]of this._listeners)t.removeEventListener(r,t===e.window.document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(e){const t=this._map,r=t.getCanvasContainer();this._add("mapEvent",new di(t,e));const n=t.boxZoom=new fi(t,e);this._add("boxZoom",n);const i=new _i,o=new Ni;t.doubleClickZoom=new Oi(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new ji;this._add("tapDragZoom",a);const s=t.touchPitch=new zi(t);this._add("touchPitch",s);const l=new wi(e),c=new Ei(e);t.dragRotate=new Vi(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new bi(e),h=new Ti(t,e);t.dragPan=new Ui(r,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new Ci,p=new Ii;t.touchZoomRotate=new Gi(r,p,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new pi(t));const f=t.scrollZoom=new Bi(t,this);this._add("scrollZoom",f,["mousePan"]);const m=t.keyboard=new Li;this._add("keyboard",m);for(const r of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[r]&&t[r].enable(e[r])}_add(e,t,r){this._handlers.push({handlerName:e,handler:t,allowed:r}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Hi(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,t,r){for(const n in e)if(n!==r&&(!t||t.indexOf(n)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const r of e)this._el.contains(r.target)&&t.push(r);return t}handleEvent(e,t){this._updatingCamera=!0;const r="renderFrame"===e.type,n=r?void 0:e,i={needsRenderFrame:!1},o={},a={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?m(this._el,s):r?void 0:f(this._el,e);for(const{handlerName:r,handler:c,allowed:u}of this._handlers){if(!c.isEnabled())continue;let h;this._blockedByActive(a,u,r)?c.reset():c[t||e.type]&&(h=c[t||e.type](e,l,s),this.mergeHandlerResult(i,o,h,r,n),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||c.isActive())&&(a[r]=c)}const c={};for(const e in this._previousActiveHandlers)a[e]||(c[e]=n);this._previousActiveHandlers=a,(Object.keys(c).length||Zi(i))&&(this._changes.push([i,o,c]),this._triggerRenderFrame()),(Object.keys(a).length||Zi(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=i;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(t,r,n,i,o){if(!n)return;e.extend(t,n);const a={handlerName:i,originalEvent:n.originalEvent||o};void 0!==n.zoomDelta&&(r.zoom=a),void 0!==n.panDelta&&(r.drag=a),void 0!==n.pitchDelta&&(r.pitch=a),void 0!==n.bearingDelta&&(r.rotate=a)}_applyChanges(){const t={},r={},n={};for(const[i,o,a]of this._changes)i.panDelta&&(t.panDelta=(t.panDelta||new e.pointGeometry(0,0))._add(i.panDelta)),i.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(t.around=i.around),void 0!==i.aroundCoord&&(t.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(t.pinchAround=i.pinchAround),i.noInertia&&(t.noInertia=i.noInertia),e.extend(r,o),e.extend(n,a);this._updateMapTransform(t,r,n),this._changes=[]}_updateMapTransform(t,r,n){const i=this._map,o=i.transform,a=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Zi(t)){const e=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",e!==o.zoom&&this._map._update(!0)}if(!Zi(t))return void this._fireEvents(r,n,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:d,pinchAround:p}=t;void 0!==p&&(h=p),(e=>r.drag&&!this._eventsInProgress.drag)()&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),h=h||i.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const f=[0,0,0];if(s)if("mercator"===o.projection.name){const e=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h).dir),t=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h.sub(s)).dir);f[0]=t[0]-e[0],f[1]=t[1]-e[1]}else{const t=o.pointCoordinate(h);if("globe"===o.projection.name){s=s.rotate(-o.angle);const r=o._pixelsPerMercatorPixel/o.worldSize;f[0]=-s.x*e.mercatorScale(e.latFromMercatorY(t.y))*r,f[1]=-s.y*e.mercatorScale(o.center.lat)*r}else{const e=o.pointCoordinate(h.sub(s));t&&e&&(f[0]=e.x-t.x,f[1]=e.y-t.y)}}const m=o.zoom,g=[0,0,0];if(l){const t=a(d||o.pointCoordinate3D(h)),r={dir:e.normalize([],e.sub([],t,o._camera.position))};if(r.dir[2]<0){const n=o.zoomDeltaToMovement(t,l);e.scale$2(g,r.dir,n)}}const y=e.add(f,f,g);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(r,n,!0)}_fireEvents(t,r,n){const i=Hi(this._eventsInProgress),o=Hi(t),a={};for(const e in t){const{originalEvent:r}=t[e];this._eventsInProgress[e]||(a[`${e}start`]=r),this._eventsInProgress[e]=t[e]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in a)this._fireEvent(e,a[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:r}=t[e];this._fireEvent(e,r)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:n}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=r[t]||n,s[`${e}end`]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=Hi(this._eventsInProgress);if(n&&(i||o)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),r=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(r(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),r(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,r){this._map.fire(new e.Event(t,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{this._frameId=void 0,this.handleEvent(new qi("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Yi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ki extends e.Evented{constructor(t,r){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=r.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,r,n){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},r),n)}panTo(t,r,n){return this.easeTo(e.extend({center:t},r),n)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,r,n){return this.easeTo(e.extend({zoom:t},r),n)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,r,n){return this.easeTo(e.extend({bearing:t},r),n)}resetNorth(t,r){return this.rotateTo(0,e.extend({duration:1e3},t),r),this}resetNorthPitch(t,r){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),r),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,r){t=e.LngLatBounds.convert(t);const n=r&&r.bearing||0,i=t.getNorthWest(),o=t.getSouthEast();return this._cameraForBounds(this.transform,i,o,n,r)}_extendCameraOptions(t){const r={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(r,t.padding),t}_minimumAABBFrustumDistance(e,t){const r=t.max[0]-t.min[0],n=t.max[1]-t.min[1];return r/n>e.aspect?r/(2*Math.tan(.5*e.fovX)*e.aspect):n/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,r,n,i,o){const a=t.clone(),s=this._extendCameraOptions(o);a.bearing=i;const l=e.LngLat.convert(r),c=e.LngLat.convert(n),u=.5*(l.lat+c.lat),h=.5*(l.lng+c.lng),d=e.latLngToECEF(u,h),p=e.normalize([],d),f=e.normalize([],e.cross([],p,[0,1,0])),m=e.cross([],f,p),g=[f[0],f[1],f[2],0,m[0],m[1],m[2],0,p[0],p[1],p[2],0,0,0,0,1],y=[d,e.latLngToECEF(l.lat,l.lng),e.latLngToECEF(c.lat,l.lng),e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(l.lat,c.lng),e.latLngToECEF(u,l.lng),e.latLngToECEF(u,c.lng),e.latLngToECEF(l.lat,h),e.latLngToECEF(c.lat,h)];let _=e.Aabb.fromPoints(y.map((t=>[e.dot(f,t),e.dot(m,t),e.dot(p,t)])));const v=e.transformMat4([],_.center,g);0===e.squaredLength(v)&&e.set(v,0,0,1),e.normalize(v,v),e.scale$2(v,v,e.GLOBE_RADIUS),a.center=e.ecefToLatLng(v);const x=a.getWorldToCameraMatrix(),b=e.invert(new Float64Array(16),x);_=e.Aabb.applyTransform(_,e.multiply([],x,g)),e.transformMat4(v,v,x);const w=.5*(_.max[2]-_.min[2]),E=this._minimumAABBFrustumDistance(a,_),T=e.scale$2([],[0,0,1],w),S=e.add(T,v,T),A=E+(0===a.pitch?0:e.distance(v,S)),P=a.globeCenterInViewSpace,I=e.sub([],v,[P[0],P[1],P[2]]);e.normalize(I,I),e.scale$2(I,I,A);const k=e.add([],v,I);e.transformMat4(k,k,b);const C=e.earthRadius/e.GLOBE_RADIUS,M=e.length(k),z=e.mercatorZfromAltitude(M*C-e.earthRadius,0),D=Math.min(a.zoomFromMercatorZAdjusted(z),s.maxZoom);return D>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:"mercator"}),a.zoom=D,this._cameraForBounds(a,r,n,i,o)):{center:a.center,zoom:D,bearing:i}}queryTerrainElevation(t,r){const n=this.transform.elevation;return n?(r=e.extend({},{exaggerated:!0},r),n.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,r.exaggerated)):null}_cameraForBounds(t,r,n,i,o){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,r,n,i,o);const a=t.clone(),s=this._extendCameraOptions(o),l=a.padding;a.bearing=i;const c=e.LngLat.convert(r),u=e.LngLat.convert(n),h=new e.LngLat(c.lng,u.lat),d=new e.LngLat(u.lng,c.lat),p=a.project(c),f=a.project(u),m=this.queryTerrainElevation(c),g=this.queryTerrainElevation(u),y=this.queryTerrainElevation(h),_=this.queryTerrainElevation(d),v=[[p.x,p.y,Math.min(m||0,g||0,y||0,_||0)],[f.x,f.y,Math.max(m||0,g||0,y||0,_||0)]];let x=e.Aabb.fromPoints(v);const b=a.getWorldToCameraMatrix(),w=e.invert(new Float64Array(16),b);x=e.Aabb.applyTransform(x,b);const E=e.sub([],x.max,x.min),T=l.left||0,S=l.right||0,A=l.bottom||0,P=l.top||0,{left:I,right:k,top:C,bottom:M}=s.padding,z=.5*(T+S),D=.5*(P+A),L=Math.min(a.scaleZoom(a.scale*Math.min((a.width-(T+S+I+k))/E[0],(a.height-(A+P+M+C))/E[1])),s.maxZoom),F=a.scale/a.zoomScale(L);x=new e.Aabb([x.min[0]-(I+z)*F,x.min[1]-(M+D)*F,x.min[2]],[x.max[0]+(k+z)*F,x.max[1]+(C+D)*F,x.max[2]]);const R=.5*E[2],B=this._minimumAABBFrustumDistance(a,x),O=[0,0,1,0];e.transformMat4$1(O,O,b),e.normalize$2(O,O);const N=e.scale$2([],O,B+R),j=e.add([],x.center,N),U=("number"==typeof s.offset.x&&"number"==typeof s.offset.y?new e.pointGeometry(s.offset.x,s.offset.y):e.pointGeometry.convert(s.offset)).rotate(-e.degToRad(i));x.center[0]-=U.x*F,x.center[1]+=U.y*F,e.transformMat4(x.center,x.center,w),e.transformMat4(j,j,w);const V=[x.center[0],x.center[1],j[2]*a.pixelsPerMeter];e.scale$2(V,V,1/a.worldSize);const G=e.lngFromMercatorX(V[0]),H=e.latFromMercatorY(V[1]),q=Math.min(a._zoomFromMercatorZ(V[2]),s.maxZoom),W=new e.LngLat(G,H);return a.mercatorFromTransition&&q<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:"globe"}),a.zoom=q,this._cameraForBounds(a,r,n,i,o)):{center:W,zoom:q,bearing:i}}fitBounds(e,t,r){const n=this.cameraForBounds(e,t);return this._fitInternal(n,t,r)}fitScreenCoordinates(t,r,n,i,o){const a=e.pointGeometry.convert(t),s=e.pointGeometry.convert(r),l=new e.pointGeometry(Math.min(a.x,s.x),Math.min(a.y,s.y)),c=new e.pointGeometry(Math.max(a.x,s.x),Math.max(a.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(a,s))return this;const u=this.transform.pointLocation3D(l),h=this.transform.pointLocation3D(c),d=this.transform.pointLocation3D(new e.pointGeometry(l.x,c.y)),p=this.transform.pointLocation3D(new e.pointGeometry(c.x,l.y)),f=[Math.min(u.lng,h.lng,d.lng,p.lng),Math.min(u.lat,h.lat,d.lat,p.lat)],m=[Math.max(u.lng,h.lng,d.lng,p.lng),Math.max(u.lat,h.lat,d.lat,p.lat)],g=this._cameraForBounds(this.transform,f,m,n,i);return this._fitInternal(g,i,o)}_fitInternal(t,r,n){return t?(delete(r=e.extend(t,r)).padding,r.linear?this.easeTo(r,n):this.flyTo(r,n)):this}jumpTo(t,r){this.stop();const n=t.preloadOnly?this.transform.clone():this.transform;let i=!1,o=!1,a=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(i=!0,n.zoom=+t.zoom),void 0!==t.center&&(n.center=e.LngLat.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(o=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(a=!0,n.pitch=+t.pitch),null==t.padding||n.isPaddingEqual(t.padding)||(n.padding=t.padding),t.preloadOnly?(this._preloadTiles(n),this):(this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r)),i&&this.fire(new e.Event("zoomstart",r)).fire(new e.Event("zoom",r)).fire(new e.Event("zoomend",r)),o&&this.fire(new e.Event("rotatestart",r)).fire(new e.Event("rotate",r)).fire(new e.Event("rotateend",r)),a&&this.fire(new e.Event("pitchstart",r)).fire(new e.Event("pitch",r)).fire(new e.Event("pitchend",r)),this.fire(new e.Event("moveend",r)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(Yi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,r){const n=this.transform;if(!n.projection.supportsFreeCamera)return e.warnOnce(Yi),this;this.stop();const i=n.zoom,o=n.pitch,a=n.bearing;n.setFreeCameraOptions(t);const s=i!==n.zoom,l=o!==n.pitch,c=a!==n.bearing;return this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r)),s&&this.fire(new e.Event("zoomstart",r)).fire(new e.Event("zoom",r)).fire(new e.Event("zoomend",r)),c&&this.fire(new e.Event("rotatestart",r)).fire(new e.Event("rotate",r)).fire(new e.Event("rotateend",r)),l&&this.fire(new e.Event("pitchstart",r)).fire(new e.Event("pitch",r)).fire(new e.Event("pitchend",r)),this.fire(new e.Event("moveend",r)),this}easeTo(t,r){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);const n=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:n.padding,d=e.pointGeometry.convert(t.offset);let p,f,m;if("globe"===n.projection.name){const r=e.MercatorCoordinate.fromLngLat(n.center),i=d.rotate(-n.angle);r.x+=i.x/n.worldSize,r.y+=i.y/n.worldSize;const o=r.toLngLat(),a=e.LngLat.convert(t.center||o);this._normalizeCenter(a),p=n.centerPoint.add(i),f=new e.pointGeometry(r.x,r.y).mult(n.worldSize),m=new e.pointGeometry(e.mercatorXfromLng(a.lng),e.mercatorYfromLat(a.lat)).mult(n.worldSize).sub(f)}else{p=n.centerPoint.add(d);const r=n.pointLocation(p),i=e.LngLat.convert(t.center||r);this._normalizeCenter(i),f=n.project(r),m=n.project(i).sub(f)}const g=n.zoomScale(l-i);let y,_;t.around&&(y=e.LngLat.convert(t.around),_=n.locationPoint(y));const v=this._zooming||l!==i,x=this._rotating||o!==c,b=this._pitching||u!==a,w=!n.isPaddingEqual(h),E=n=>E=>{if(v&&(n.zoom=e.number(i,l,E)),x&&(n.bearing=e.number(o,c,E)),b&&(n.pitch=e.number(a,u,E)),w&&(n.interpolatePadding(s,h,E),p=n.centerPoint.add(d)),y)n.setLocationAtPoint(y,_);else{const e=n.zoomScale(n.zoom-i),t=l>i?Math.min(2,g):Math.max(.5,g),r=Math.pow(t,1-E),o=n.unproject(f.add(m.mult(E*r)).mult(e));n.setLocationAtPoint(n.renderWorldCopies?o.wrap():o,p)}return t.preloadOnly||this._fireMoveEvents(r),n};if(t.preloadOnly){const e=this._emulate(E,t.duration,n);return this._preloadTiles(e),this}const T={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=v,this._rotating=x,this._pitching=b,this._padding=w,this._easeId=t.easeId,this._prepareEase(r,t.noMoveStart,T),this._ease(E(n),(e=>{n.recenterOnTerrain(),this._afterEase(r,e)}),t),this}_prepareEase(t,r,n={}){this._moving=!0,this.transform.cameraElevationReference="sea",r||n.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!n.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!n.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!n.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,r){if(this._easeId&&r&&this._easeId===r)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const n=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,r){if(!t.essential&&e.exported.prefersReducedMotion){const n=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,r)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const n=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,n.minZoom,n.maxZoom):i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h="padding"in t?t.padding:n.padding,d=n.zoomScale(l-i),p=e.pointGeometry.convert(t.offset);let f=n.centerPoint.add(p);const m=n.pointLocation(f),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);const y=n.project(m),_=n.project(g).sub(y);let v=t.curve;const x=Math.max(n.width,n.height),b=x/d,w=_.mag();if("minZoom"in t){const r=e.clamp(Math.min(t.minZoom,i,l),n.minZoom,n.maxZoom),o=x/n.zoomScale(r-i);v=Math.sqrt(o/w*2)}const E=v*v;function T(e){const t=(b*b-x*x+(e?-1:1)*E*E*w*w)/(2*(e?b:x)*E*w);return Math.log(Math.sqrt(t*t+1)-t)}function S(e){return(Math.exp(e)-Math.exp(-e))/2}function A(e){return(Math.exp(e)+Math.exp(-e))/2}const P=T(0);let I=function(e){return A(P)/A(P+v*e)},k=function(e){return x*((A(P)*(S(t=P+v*e)/A(t))-S(P))/E)/w;var t},C=(T(1)-P)/v;if(Math.abs(w)<1e-6||!isFinite(C)){if(Math.abs(x-b)<1e-6)return this.easeTo(t,r);const e=b<x?-1:1;C=Math.abs(Math.log(b/x))/v,k=function(){return 0},I=function(t){return Math.exp(e*v*t)}}t.duration="duration"in t?+t.duration:1e3*C/("screenSpeed"in t?+t.screenSpeed/v:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const M=o!==c,z=u!==a,D=!n.isPaddingEqual(h),L=n=>d=>{const m=d*C,v=1/I(m);n.zoom=1===d?l:i+n.scaleZoom(v),M&&(n.bearing=e.number(o,c,d)),z&&(n.pitch=e.number(a,u,d)),D&&(n.interpolatePadding(s,h,d),f=n.centerPoint.add(p));const x=1===d?g:n.unproject(y.add(_.mult(k(m))).mult(v));return n.setLocationAtPoint(n.renderWorldCopies?x.wrap():x,f),n._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(r),n};if(t.preloadOnly){const e=this._emulate(L,t.duration,n);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=M,this._pitching=z,this._padding=D,this._prepareEase(r,!1),this._ease(L(n),(()=>this._afterEase(r)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,r,n){!1===n.animate||0===n.duration?(t(1),r()):(this._easeStart=e.exported.now(),this._easeOptions=n,this._onEaseFrame=t,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),r=this._onEaseFrame;r&&r(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,r){t=e.wrap(t,-180,180);const n=Math.abs(t-r);return Math.abs(t-360-r)<n&&(t-=360),Math.abs(t+360-r)<n&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const r=e.lng-t.center.lng;e.lng+=r>180?-360:r<-180?360:0}_emulate(e,t,r){const n=Math.ceil(15*t/1e3),i=[],o=e(r.clone());for(let e=0;e<=n;e++){const t=o(e/n);i.push(t.clone())}return i}}class Ji{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o("button","mapboxgl-ctrl-attrib-button",this._container),o("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const r=this._map._getUIString(`AttributionControl.${t}`);e.setAttribute("aria-label",r),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",r)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const n=r.reduce(((e,t,n)=>(t.value&&(e+=`${t.key}=${t.value}${n<r.length-1?"&":""}`),e)),"?");t.href=`${e.config.FEEDBACK_URL}/${n}#${ei(this._map,!0)}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const r in t){const n=t[r];if(n.used){const t=n.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,r)=>{for(let n=r+1;n<e.length;n++)if(e[n].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const r=e.join(" | ");r!==this._attribHTML&&(this._attribHTML=r,e.length?(this._innerContainer.innerHTML=r,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Qi{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=o("div","mapboxgl-ctrl");const t=o("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const r=e[t].getSource();if(r.hasOwnProperty("mapbox_logo")&&!r.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class $i{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,r=t?this._queue.concat(t):this._queue;for(const t of r)if(t.id===e)return void(t.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const r of t)if(!r.cancelled&&(r.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function eo(t,r,n){if(t=new e.LngLat(t.lng,t.lat),r){const i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=360*Math.ceil(Math.abs(t.lng-n.center.lng)/360),s=n.locationPoint(t).distSqr(r),l=r.x<0||r.y<0||r.x>n.width||r.y>n.height;n.locationPoint(i).distSqr(r)<s&&(l||Math.abs(i.lng-n.center.lng)<a)?t=i:n.locationPoint(o).distSqr(r)<s&&(l||Math.abs(o.lng-n.center.lng)<a)&&(t=o)}for(;Math.abs(t.lng-n.center.lng)>180;){const e=n.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=n.width&&e.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}const to={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class ro extends e.Evented{constructor(t,r){if(super(),(t instanceof e.window.HTMLElement||r)&&(t=e.extend({element:t},r)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=o("div");const r=41,n=27,i=a("svg",{display:"block",height:r*this._scale+"px",width:n*this._scale+"px",viewBox:`0 0 ${n} ${r}`},this._element),s=a("radialGradient",{id:"shadowGradient"},a("defs",{},i));a("stop",{offset:"10%","stop-opacity":.4},s),a("stop",{offset:"100%","stop-opacity":.05},s),a("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),a("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),a("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),a("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()}));const n=this._element.classList;for(const e in to)n.remove(`mapboxgl-marker-anchor-${e}`);n.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,r=13.5,n=Math.sqrt(Math.pow(r,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[n,-1*(t-r+n)],"bottom-right":[-n,-1*(t-r+n)],left:[r,-1*(t-r)],right:[-r,-1*(t-r)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,r=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==r&&13!==r||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,r=this._element;this._popup&&(t===r||r.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return!1;const r=e.unproject(t),n=e.getFreeCameraOptions();if(!n.position)return!1;const i=n.position.toLngLat();return i.distanceTo(r)<.9*i.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const r=this._pos;if(!r||r.x<0||r.x>t.transform.width||r.y<0||r.y>t.transform.height)return void this._clearFadeTimer();const n=t.unproject(r);let i;t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?i=0:(i=1-t._queryFogOpacity(n),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(i*=this._occludedOpacity)),this._element.style.opacity=`${i}`,this._element.style.pointerEvents=i>0?"auto":"none",this._popup&&this._popup._setOpacity(i),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${e.x}px,${e.y}px)\n            ${to[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${t.x}px,${t.y}px)\n        `}_calculateXYTransform(){const t=this._pos,r=this._map,n=this.getPitchAlignment();if(!r||!t||"map"!==n)return"";if(!r._showingGlobe()){const e=r.getPitch();return e?`rotateX(${e}deg)`:""}const i=e.radToDeg(e.globeTiltAtLngLat(r.transform,this._lngLat)),o=t.sub(e.globeCenterToScreenPoint(r.transform)),a=Math.abs(o.x)+Math.abs(o.y);if(0===a)return"";const s=i/a;return`rotateX(${-o.y*s}deg) rotateY(${o.x*s}deg)`}_calculateZTransform(){const t=this._pos,r=this._map;if(!r||!t)return"";let n=0;const i=this.getRotationAlignment();if("map"===i)if(r._showingGlobe()){const t=r.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),i=r.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(t);n=e.radToDeg(Math.atan2(i.y,i.x))-90}else n=-r.getBearing();else if("horizon"===i){const i=e.smoothstep(4,6,r.getZoom()),o=e.globeCenterToScreenPoint(r.transform);o.y+=i*r.transform.height;const a=t.sub(o),s=e.radToDeg(Math.atan2(a.y,a.x));n=(s>90?s-270:s+90)*(1-i)}return n+=this._rotation,n?`rotateZ(${n}deg)`:""}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const r=this._map;r&&(r.transform.renderWorldCopies&&(this._lngLat=eo(this._lngLat,this._pos,r.transform)),this._pos=r.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),r._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(r._showingGlobe()||r.getTerrain()||r.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}_onMove(t){const r=this._map;if(!r)return;const n=this._pointerdownPos,i=this._positionDelta;if(n&&i){if(!this._isDragging){const e=this._clickTolerance||r._clickTolerance;if(t.point.dist(n)<e)return;this._isDragging=!0}this._pos=t.point.sub(i),this._lngLat=r.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){const t=this._map,r=this._pos;t&&r&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(r),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const no={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},io=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function oo(t=new e.pointGeometry(0,0),r="bottom"){if("number"==typeof t){const n=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(r){case"top":return new e.pointGeometry(0,t);case"top-left":return new e.pointGeometry(n,n);case"top-right":return new e.pointGeometry(-n,n);case"bottom":return new e.pointGeometry(0,-t);case"bottom-left":return new e.pointGeometry(n,-n);case"bottom-right":return new e.pointGeometry(-n,-n);case"left":return new e.pointGeometry(t,0);case"right":return new e.pointGeometry(-t,0)}return new e.pointGeometry(0,0)}return t instanceof e.pointGeometry||Array.isArray(t)?e.pointGeometry.convert(t):e.pointGeometry.convert(t[r]||[0,0])}class ao{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const r=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-r)+this._end*r}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,r){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+r}}const so={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},lo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function co(e){e.parentNode&&e.parentNode.removeChild(e)}const uo={showCompass:!0,showZoom:!0,visualizePitch:!1};class ho{constructor(t,r,n=!1){this._clickTolerance=10,this.element=r,this.mouseRotate=new wi({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,n&&(this.mousePitch=new Ei({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener("mousedown",this.mousedown),r.addEventListener("touchstart",this.touchstart,{passive:!1}),r.addEventListener("touchmove",this.touchmove),r.addEventListener("touchend",this.touchend),r.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),u()}move(e,t){const r=this.map,n=this.mouseRotate.mousemoveWindow(e,t),i=n&&n.bearingDelta;if(i&&r.setBearing(r.getBearing()+i),this.mousePitch){const n=this.mousePitch.mousemoveWindow(e,t),i=n&&n.pitchDelta;i&&r.setPitch(r.getPitch()+i)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){h(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),f(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,f(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=m(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const po={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},fo={maxWidth:100,unit:"metric"};function mo(e,t,r){const n=go(t),i=n/t,o={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[r];this._map._requestDomTask((()=>{this._container.style.width=e*i+"px",this._container.innerHTML=`${n}&nbsp;${o}`}))}function go(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let r=e/t;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(r),t*r}const yo={version:e.version,supported:r,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Ki{constructor(t){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},lo,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Jn(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new $i,this._domRenderTaskQueue=new $i,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},so,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ao(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Xi(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new $n("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Ji({customAttribution:t.customAttribution})),this._logoControl=new Qi,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t))}))}_getMapId(){return this._mapId}addControl(t,r){if(void 0===r&&(r=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=t.onAdd(this);this._controls.push(t);const i=this._controlPositions[r];return-1!==r.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(t);return r>-1&&this._controls.splice(r,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const r=!this._moving;return r&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),r&&this.fire(new e.Event("moveend",t)),this}getBounds(){return"globe"===this.transform.projection.name&&e.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly when viewing the poles."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((t=>"auto"===t?e.window.navigator.language:t)):t}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const e of this._controls)e._setLanguage&&e._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const t=this.transform,r=t.projection.name;let n;"globe"===r&&t.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(t.setMercatorFromTransition(),n=!0):"mercator"===r&&t.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(t.setProjection({name:"globe"}),n=!0),n&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:"mercator"})}_updateProjection(t){let r;if(r="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),r){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(e,t,r){if("mouseenter"===e||"mouseover"===e){let n=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e))),a=o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];a.length?n||(n=!0,r.call(this,new ci(e,this,i.originalEvent,{features:a}))):n=!1},o=()=>{n=!1};return{layers:new Set(t),listener:r,delegates:{mousemove:i,mouseout:o}}}if("mouseleave"===e||"mouseout"===e){let n=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e)));(o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?n=!0:n&&(n=!1,r.call(this,new ci(e,this,i.originalEvent)))},o=t=>{n&&(n=!1,r.call(this,new ci(e,this,t.originalEvent)))};return{layers:new Set(t),listener:r,delegates:{mousemove:i,mouseout:o}}}{const n=e=>{const n=t.filter((e=>this.getLayer(e))),i=n.length?this.queryRenderedFeatures(e.point,{layers:n}):[];i.length&&(e.features=i,r.call(this,e),delete e.features)};return{layers:new Set(t),listener:r,delegates:{[e]:n}}}}on(e,t,r){if(void 0===r)return super.on(e,t);Array.isArray(t)||(t=[t]);const n=this._createDelegatedListener(e,t,r);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(n);for(const e in n.delegates)this.on(e,n.delegates[e]);return this}once(e,t,r){if(void 0===r)return super.once(e,t);Array.isArray(t)||(t=[t]);const n=this._createDelegatedListener(e,t,r);for(const e in n.delegates)this.once(e,n.delegates[e]);return this}off(e,t,r){if(void 0===r)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const n=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[e]:void 0;return i&&(e=>{for(let i=0;i<e.length;i++){const o=e[i];if(o.listener===r&&n(o.layers,t)){for(const e in o.delegates)this.off(e,o.delegates[e]);return e.splice(i,1),this}}})(i),this}queryRenderedFeatures(t,r){return this.style?(void 0!==r||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(r=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],r=r||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(t,r){return!1!==(r=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&r.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._localFontFamily=r.localFontFamily,this._updateStyle(t,r))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new er(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new er(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,r){if("string"==typeof t){const n=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(n,e.ResourceType.Style);e.getJSON(i,((t,n)=>{t?this.fire(new e.ErrorEvent(t)):n&&this._updateDiff(n,r)}))}else"object"==typeof t&&this._updateDiff(t,r)}_updateDiff(t,r){try{this.style.setState(t)&&this._update(!0)}catch(n){e.warnOnce(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(t,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const r=e[t]._tiles;for(const e in r){const t=r[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,r){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,r)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,r,{pixelRatio:n=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap){const{width:l,height:c,data:u}=e.exported.getImageData(r);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:n,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else if(void 0===r.width||void 0===r.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:c}=r,u=r;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u.data)),pixelRatio:n,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:u}),u.onAdd&&u.onAdd(this,t)}}updateImage(t,r){const n=this.style.getImage(t);if(!n)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap?e.exported.getImageData(r):r,{width:o,height:a}=i;void 0!==o&&void 0!==a?o===n.data.width&&a===n.data.height?(n.data.replace(i.data,!(r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap)),this.style.updateImage(t,n)):this.fire(new e.ErrorEvent(new Error(`The width and height of the updated image (${o}, ${a})\n                must be that same as the previous version of the image\n                (${n.data.width}, ${n.data.height})`))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,r){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,n)=>{r(t,n instanceof e.window.HTMLImageElement?e.exported.getImageData(n):n)}))}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,r){return this.style.setLayerZoomRange(e,t,r),this._update(!0)}setFilter(e,t,r={}){return this.style.setFilter(e,t,r),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,r,n={}){return this.style.setPaintProperty(e,t,r,n),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,r,n={}){return this.style.setLayoutProperty(e,t,r,n),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,r=this._container.getBoundingClientRect().height||300;let n,i,o,a=this._container;for(;a&&(!i||!o);){const t=e.window.getComputedStyle(a).transform;t&&"none"!==t&&(n=t.match(/matrix.*\((.+)\)/)[1].split(", "),n[0]&&"0"!==n[0]&&"1"!==n[0]&&(i=n[0]),n[3]&&"0"!==n[3]&&"1"!==n[3]&&(o=n[3])),a=a.parentElement}this._containerWidth=i?Math.abs(t/i):t,this._containerHeight=o?Math.abs(r/o):r}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=o("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=o("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=o("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const r=this._controlContainer=o("div","mapboxgl-control-container",e),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{n[e]=o("div",`mapboxgl-ctrl-${e}`,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,r){const n=e.exported.devicePixelRatio||1;this._canvas.width=n*Math.ceil(t),this._canvas.height=n*Math.ceil(r),this._canvas.style.width=`${t}px`,this._canvas.style.height=`${r}px`}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_addPopup(e){this._popups.push(e)}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}_setupPainter(){const t=e.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);n?(e.storeAuthState(n,!0),this.painter=new On(n,this.transform),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(n)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let r;const n=this.painter.context.extTimerQuery,i=e.exported.now();if(this.listens("gpu-timing-frame")&&(r=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,r)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();let o=!1;const a=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,r=this.transform.pitch,n=e.exported.now();this.style.zoomHistory.update(t,n);const i=new e.EvaluationParameters(t,{now:n,fadeDuration:a,pitch:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),s=i.crossFadingFactor();1===s&&s===this._crossFadingFactor||(o=!0,this._crossFadingFactor=s),this.style.update(i)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let s=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),s=this._updateAverageElevation(i),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):s=this._updateAverageElevation(i),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),r){const t=e.exported.now()-i;n.endQueryEXT(n.TIME_ELAPSED_EXT,r),setTimeout((()=>{const o=n.getQueryObjectEXT(r,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:o})),e.window.performance.mark("frame-gpu",{startTime:i,detail:{gpuTime:o}})}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const r=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:r}))}),50)}if(this.listens("gpu-timing-deferred-render")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const r=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:r}))}),50)}const l=this._sourcesDirty||this._styleDirty||this._placementDirty||s;if(l||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(s=this._updateAverageElevation(i,!0)),s)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||l||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.painter.transform.projection,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(e,t=!1){const r=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&r(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let n=this.transform.sampleAverageElevation(),i=!1;this.transform.elevation&&(i=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(n)?n=0:this._averageElevationLastSampledAt=e;const o=Math.abs(t-n);if(o>1){if(this._isInitialLoad||i)return this._averageElevation.jumpTo(n),r(n);this._averageElevation.easeTo(n,e,300)}else if(o>1e-4)return this._averageElevation.jumpTo(n),r(n)}return!!this._averageElevation.isEasing(e)&&r(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof Qi&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const r=this.painter.context.gl,n=r.createFramebuffer();function i(e){r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);const t=new Uint8Array(r.drawingBufferWidth*r.drawingBufferHeight*4);return r.readPixels(0,0,r.drawingBufferWidth,r.drawingBufferHeight,r.RGBA,r.UNSIGNED_BYTE,t),t}return r.bindFramebuffer(r.FRAMEBUFFER,n),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}_canvasPixelComparison(e,t,r){let n=r[1]-r[0];const i=e.length/4;for(let o=0;o<t.length;o++){const a=t[o];let s=0;for(let t=0;t<a.length;t+=4)a[t]===e[t]&&a[t+1]===e[t+1]&&a[t+2]===e[t+2]&&a[t+3]===e[t+3]&&(s+=1);n+=(r[o+2]-r[o+1])*(1-s/i)}return n}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),co(this._canvasContainer),co(this._controlContainer),co(this._missingCSSCanary),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)})))}_preloadTiles(t){const r=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(r,((e,r)=>e._preloadTiles(t,r)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}_onVisibilityChange(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}_setCacheLimits(t,r){e.setCacheLimits(t,r)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},uo,t),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>{this._map&&this._map.zoomIn({},{originalEvent:e})})),o("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>{this._map&&this._map.zoomOut({},{originalEvent:e})})),o("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=o("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),r=t===e.getMaxZoom(),n=t===e.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${e.transform.pitch}deg) rotateZ(${e.transform.angle*(180/Math.PI)}deg)`:`rotate(${e.transform.angle*(180/Math.PI)}deg)`;e._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ho(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,t){const r=o("button",e,this._container);return r.type="button",r.addEventListener("click",t),r}_setButtonTitle(e,t){if(!this._map)return;const r=this._map._getUIString(`NavigationControl.${t}`);e.setAttribute("aria-label",r),e.firstElementChild&&e.firstElementChild.setAttribute("title",r)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},po,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Qn(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(e){return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(t){const r=(e=!!this.options.geolocation)=>{this._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>r("denied"!==e.state))).catch((()=>r())):r()}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),r=e.coords;return!!t&&(r.longitude<t.getWest()||r.longitude>t.getEast()||r.latitude<t.getSouth()||r.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const r=new e.LngLat(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy,i=this._map.getBearing(),o=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(n),o,{geolocateSource:!0})}_updateMarker(t){if(t){const r=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map.transform,r=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,n=Math.ceil(2*this._accuracy*r);this._circleElement.style.width=`${n}px`,this._circleElement.style.height=`${n}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=o("button","mapboxgl-ctrl-geolocate",this._container),o("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o("div","mapboxgl-user-location"),this._dotElement.appendChild(o("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new ro({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ro({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t()})).catch(console.error):t()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ji,ScaleControl:class{constructor(t){this.options=e.extend({},fo,t),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch(e){return!1}}()||(this._setScale=mo.bind(this)),e.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const e=this.options.maxWidth||100,t=this._map,r=t._containerHeight/2,n=t._containerWidth/2-e/2,i=t.unproject([n,r]),o=t.unproject([n+e,r]),a=i.distanceTo(o);if("imperial"===this.options.unit){const t=3.2808*a;t>5280?this._setScale(e,t/5280,"mile"):this._setScale(e,t,"foot")}else"nautical"===this.options.unit?this._setScale(e,a/1852,"nautical-mile"):a>=1e3?this._setScale(e,a/1e3,"kilometer"):this._setScale(e,a,"meter")}_setScale(e,t,r){const n=go(t),i=n/t;this._map._requestDomTask((()=>{this._container.style.width=e*i+"px",this._container.innerHTML="nautical-mile"!==r?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:r}).format(n):`${n}&nbsp;nm`}))}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(e){this._language=e,this._update()}setUnit(e){this.options.unit=e,this._update()}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=o("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(no),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const r=this._map;return r&&(r.on("move",this._update),r.off("mousemove",this._onMouseEvent),r._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const r=e.window.document.createDocumentFragment(),n=e.window.document.createElement("body");let i;for(n.innerHTML=t;i=n.firstChild,i;)r.appendChild(i);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=o("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=o("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,r=this._container,n=this._pos;if(!t||!r||!n)return"bottom";const i=r.offsetWidth,o=r.offsetHeight,a=n.x<i/2,s=n.x>t.transform.width-i/2;if(n.y+e<o)return a?"top-left":s?"top-right":"top";if(n.y>t.transform.height-o){if(a)return"bottom-left";if(s)return"bottom-right"}return a?"left":s?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}_update(t){const r=this._map,n=this._content;if(!r||!this._lngLat&&!this._trackPointer||!n)return;let i=this._container;if(i||(i=this._container=o("div","mapboxgl-popup",r.getContainer()),this._tip=o("div","mapboxgl-popup-tip",i),i.appendChild(n)),this.options.maxWidth&&i.style.maxWidth!==this.options.maxWidth&&(i.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=eo(this._lngLat,this._pos,r.transform)),!this._trackPointer||t){const e=this._pos=this._trackPointer&&t?t:r.project(this._lngLat),n=oo(this.options.offset),i=this._anchor=this._getAnchor(n.y),o=oo(this.options.offset,i),a=e.add(o).round();r._requestDomTask((()=>{this._container&&i&&(this._container.style.transform=`${to[i]} translate(${a.x}px,${a.y}px)`)}))}if(!this._marker&&r._showingGlobe()){const t=e.isLngLatBehindGlobe(r.transform,this._lngLat)?0:1;this._setOpacity(t)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(io);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._container&&(this._container.style.opacity=`${e}`),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}},Marker:ro,Style:er,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Gn,Evented:e.Evented,config:e.config,prewarm:function(){Ue().acquire(Oe)},clearPrewarmedResources:function(){const e=je;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Oe),je=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Ne.workerCount},set workerCount(e){Ne.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return yo})),r}()},448:function(e,t,r){"use strict";var n=r(294),i=r(840);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,r,n,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function v(e,t,r,n){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),P=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),z=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function F(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=L&&e[L]||e["@@iterator"])?e:null}var R,B=Object.assign;function O(e){if(void 0===R)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var N=!1;function j(e,t){if(!e||N)return"";N=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),o=n.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{N=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?O(e):""}function U(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return j(e.type,!1);case 11:return j(e.type.render,!1);case 1:return j(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case E:return"Fragment";case w:return"Portal";case S:return"Profiler";case T:return"StrictMode";case k:return"Suspense";case C:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case z:t=e._payload,e=e._init;try{return V(e(t))}catch(e){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=q(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function X(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var r=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function K(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=H(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Q(e,t){J(e,t);var r=H(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&X(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+H(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(o(92));if(te(r)){if(1<r.length)throw Error(o(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:H(r)}}function oe(e,t){var r=H(t.value),n=H(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=me(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ee=null,Te=null;function Se(e){if(e=vi(e)){if("function"!=typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=bi(t),we(e.stateNode,e.type,t))}}function Ae(e){Ee?Te?Te.push(e):Te=[e]:Ee=e}function Pe(){if(Ee){var e=Ee,t=Te;if(Te=Ee=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ie(e,t){return e(t)}function ke(){}var Ce=!1;function Me(e,t,r){if(Ce)return e(t,r);Ce=!0;try{return Ie(e,t,r)}finally{Ce=!1,(null!==Ee||null!==Te)&&(ke(),Pe())}}function ze(e,t){var r=e.stateNode;if(null===r)return null;var n=bi(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(o(231,t,typeof r));return r}var De=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){De=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){De=!1}function Fe(e,t,r,n,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(e){this.onError(e)}}var Re=!1,Be=null,Oe=!1,Ne=null,je={onError:function(e){Re=!0,Be=e}};function Ue(e,t,r,n,i,o,a,s,l){Re=!1,Be=null,Fe.apply(je,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(o(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return He(i),e;if(a===n)return He(i),t;a=a.sibling}throw Error(o(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ze=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Je=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,rt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,it=null,ot=null,at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2,ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&r;if(0!==a){var s=a&~i;0!==s?n=ht(s):0!=(o&=a)&&(n=ht(o))}else 0!=(a=r&~i)?n=ht(a):0!==o&&(n=ht(o));if(0===n)return 0;if(0!==t&&t!==n&&0==(t&i)&&((i=n&-n)>=(o=t&-t)||16===i&&0!=(4194240&o)))return t;if(0!=(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-at(t)),n|=e[r],t&=~i;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0==(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=r}function _t(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-at(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var vt=0;function xt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var bt,wt,Et,Tt,St,At=!1,Pt=[],It=null,kt=null,Ct=null,Mt=new Map,zt=new Map,Dt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zt.delete(t.pointerId)}}function Rt(e,t,r,n,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},null!==t&&null!==(t=vi(t))&&wt(t),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=_i(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ge(r)))return e.blockedOn=t,void St(e.priority,(function(){Et(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=vi(r))&&wt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);xe=n,r.target.dispatchEvent(n),xe=null,t.shift()}return!0}function Nt(e,t,r){Ot(e)&&r.delete(t)}function jt(){At=!1,null!==It&&Ot(It)&&(It=null),null!==kt&&Ot(kt)&&(kt=null),null!==Ct&&Ot(Ct)&&(Ct=null),Mt.forEach(Nt),zt.forEach(Nt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Pt.length){Ut(Pt[0],e);for(var r=1;r<Pt.length;r++){var n=Pt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==It&&Ut(It,e),null!==kt&&Ut(kt,e),null!==Ct&&Ut(Ct,e),Mt.forEach(t),zt.forEach(t),r=0;r<Dt.length;r++)(n=Dt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Dt.length&&null===(r=Dt[0]).blockedOn;)Bt(r),null===r.blockedOn&&Dt.shift()}var Gt=x.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,r,n){var i=vt,o=Gt.transition;Gt.transition=null;try{vt=1,Zt(e,t,r,n)}finally{vt=i,Gt.transition=o}}function Wt(e,t,r,n){var i=vt,o=Gt.transition;Gt.transition=null;try{vt=4,Zt(e,t,r,n)}finally{vt=i,Gt.transition=o}}function Zt(e,t,r,n){if(Ht){var i=Yt(e,t,r,n);if(null===i)Hn(e,t,n,Xt,r),Ft(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return It=Rt(It,e,t,r,n,i),!0;case"dragenter":return kt=Rt(kt,e,t,r,n,i),!0;case"mouseover":return Ct=Rt(Ct,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Mt.set(o,Rt(Mt.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,zt.set(o,Rt(zt.get(o)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Ft(e,n),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var o=vi(i);if(null!==o&&bt(o),null===(o=Yt(e,t,r,n))&&Hn(e,t,n,Xt,r),o===i)break;i=o}null!==i&&n.stopPropagation()}else Hn(e,t,n,null,r)}}var Xt=null;function Yt(e,t,r,n){if(Xt=null,null!==(e=_i(e=be(n))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,$t=null;function er(){if($t)return $t;var e,t,r=Qt,n=r.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ir(e){function t(t,r,n,i,o){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var or,ar,sr,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ir(lr),ur=B({},lr,{view:0,detail:0}),hr=ir(ur),dr=B({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(or=e.screenX-sr.screenX,ar=e.screenY-sr.screenY):ar=or=0,sr=e),or)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),pr=ir(dr),fr=ir(B({},dr,{dataTransfer:0})),mr=ir(B({},ur,{relatedTarget:0})),gr=ir(B({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=B({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_r=ir(yr),vr=ir(B({},lr,{data:0})),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},br={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Er(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function Tr(){return Er}var Sr=B({},ur,{key:function(e){if(e.key){var t=xr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?br[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ar=ir(Sr),Pr=ir(B({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ir=ir(B({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tr})),kr=ir(B({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cr=B({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mr=ir(Cr),zr=[9,13,27,32],Dr=u&&"CompositionEvent"in window,Lr=null;u&&"documentMode"in document&&(Lr=document.documentMode);var Fr=u&&"TextEvent"in window&&!Lr,Rr=u&&(!Dr||Lr&&8<Lr&&11>=Lr),Br=String.fromCharCode(32),Or=!1;function Nr(e,t){switch(e){case"keyup":return-1!==zr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1,Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function Hr(e,t,r,n){Ae(n),0<(t=Wn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var qr=null,Wr=null;function Zr(e){On(e,0)}function Xr(e){if(Z(xi(e)))return e}function Yr(e,t){if("change"===e)return t}var Kr=!1;if(u){var Jr;if(u){var Qr="oninput"in document;if(!Qr){var $r=document.createElement("div");$r.setAttribute("oninput","return;"),Qr="function"==typeof $r.oninput}Jr=Qr}else Jr=!1;Kr=Jr&&(!document.documentMode||9<document.documentMode)}function en(){qr&&(qr.detachEvent("onpropertychange",tn),Wr=qr=null)}function tn(e){if("value"===e.propertyName&&Xr(Wr)){var t=[];Hr(t,Wr,e,be(e)),Me(Zr,t)}}function rn(e,t,r){"focusin"===e?(en(),Wr=r,(qr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xr(Wr)}function on(e,t){if("click"===e)return Xr(t)}function an(e,t){if("input"===e||"change"===e)return Xr(t)}var sn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ln(e,t){if(sn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!h.call(t,i)||!sn(e[i],t[i]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function hn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dn(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=X((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=dn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&hn(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=void 0===n.end?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=un(r,o);var a=un(r,n);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=u&&"documentMode"in document&&11>=document.documentMode,gn=null,yn=null,_n=null,vn=!1;function xn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;vn||null==gn||gn!==X(n)||(n="selectionStart"in(n=gn)&&pn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},_n&&ln(_n,n)||(_n=n,0<(n=Wn(yn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function bn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wn={animationend:bn("Animation","AnimationEnd"),animationiteration:bn("Animation","AnimationIteration"),animationstart:bn("Animation","AnimationStart"),transitionend:bn("Transition","TransitionEnd")},En={},Tn={};function Sn(e){if(En[e])return En[e];if(!wn[e])return e;var t,r=wn[e];for(t in r)if(r.hasOwnProperty(t)&&t in Tn)return En[e]=r[t];return e}u&&(Tn=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var An=Sn("animationend"),Pn=Sn("animationiteration"),In=Sn("animationstart"),kn=Sn("transitionend"),Cn=new Map,Mn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zn(e,t){Cn.set(e,t),l(t,[e])}for(var Dn=0;Dn<Mn.length;Dn++){var Ln=Mn[Dn];zn(Ln.toLowerCase(),"on"+(Ln[0].toUpperCase()+Ln.slice(1)))}zn(An,"onAnimationEnd"),zn(Pn,"onAnimationIteration"),zn(In,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(kn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fn));function Bn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,a,s,l,c){if(Ue.apply(this,arguments),Re){if(!Re)throw Error(o(198));var u=Be;Re=!1,Be=null,Oe||(Oe=!0,Ne=u)}}(n,t,void 0,e),e.currentTarget=null}function On(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Bn(i,s,c),o=l}else for(a=0;a<n.length;a++){if(l=(s=n[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Bn(i,s,c),o=l}}}if(Oe)throw e=Ne,Oe=!1,Ne=null,e}function Nn(e,t){var r=t[mi];void 0===r&&(r=t[mi]=new Set);var n=e+"__bubble";r.has(n)||(Gn(t,e,2,!1),r.add(n))}function jn(e,t,r){var n=0;t&&(n|=4),Gn(r,e,n,t)}var Un="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[Un]){e[Un]=!0,a.forEach((function(t){"selectionchange"!==t&&(Rn.has(t)||jn(t,!1,e),jn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Un]||(t[Un]=!0,jn("selectionchange",!1,t))}}function Gn(e,t,r,n){switch(Kt(t)){case 1:var i=qt;break;case 4:i=Wt;break;default:i=Zt}r=i.bind(null,t,r,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Hn(e,t,r,n,i){var o=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=_i(s)))return;if(5===(l=a.tag)||6===l){n=o=a;continue e}s=s.parentNode}}n=n.return}Me((function(){var n=o,i=be(r),a=[];e:{var s=Cn.get(e);if(void 0!==s){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Ar;break;case"focusin":c="focus",l=mr;break;case"focusout":c="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ir;break;case An:case Pn:case In:l=gr;break;case kn:l=kr;break;case"scroll":l=hr;break;case"wheel":l=Mr;break;case"copy":case"cut":case"paste":l=_r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pr}var u=0!=(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=n;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&null!=(m=ze(f,d))&&u.push(qn(f,m,p))),h)break;f=f.return}0<u.length&&(s=new l(s,c,null,r,i),a.push({event:s,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===xe||!(c=r.relatedTarget||r.fromElement)||!_i(c)&&!c[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?_i(c):null)&&(c!==(h=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=pr,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Pr,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:xi(l),p=null==c?s:xi(c),(s=new u(m,f+"leave",l,r,i)).target=h,s.relatedTarget=p,m=null,_i(i)===n&&((u=new u(d,f+"enter",c,r,i)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Zn(p))f++;for(p=0,m=d;m;m=Zn(m))p++;for(;0<f-p;)u=Zn(u),f--;for(;0<p-f;)d=Zn(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Zn(u),d=Zn(d)}u=null}else u=null;null!==l&&Xn(a,s,l,u,!1),null!==c&&null!==h&&Xn(a,h,c,u,!0)}if("select"===(l=(s=n?xi(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Yr;else if(Gr(s))if(Kr)g=an;else{g=nn;var y=rn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=on);switch(g&&(g=g(e,n))?Hr(a,g,r,i):(y&&y(e,s,n),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=n?xi(n):window,e){case"focusin":(Gr(y)||"true"===y.contentEditable)&&(gn=y,yn=n,_n=null);break;case"focusout":_n=yn=gn=null;break;case"mousedown":vn=!0;break;case"contextmenu":case"mouseup":case"dragend":vn=!1,xn(a,r,i);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":xn(a,r,i)}var _;if(Dr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ur?Nr(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&(Rr&&"ko"!==r.locale&&(Ur||"onCompositionStart"!==v?"onCompositionEnd"===v&&Ur&&(_=er()):(Qt="value"in(Jt=i)?Jt.value:Jt.textContent,Ur=!0)),0<(y=Wn(n,v)).length&&(v=new vr(v,e,null,r,i),a.push({event:v,listeners:y}),(_||null!==(_=jr(r)))&&(v.data=_))),(_=Fr?function(e,t){switch(e){case"compositionend":return jr(t);case"keypress":return 32!==t.which?null:(Or=!0,Br);case"textInput":return(e=t.data)===Br&&Or?null:e;default:return null}}(e,r):function(e,t){if(Ur)return"compositionend"===e||!Dr&&Nr(e,t)?(e=er(),$t=Qt=Jt=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rr&&"ko"!==t.locale?null:t.data}}(e,r))&&0<(n=Wn(n,"onBeforeInput")).length&&(i=new vr("onBeforeInput","beforeinput",null,r,i),a.push({event:i,listeners:n}),i.data=_)}On(a,t)}))}function qn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Wn(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=ze(e,r))&&n.unshift(qn(e,o,i)),null!=(o=ze(e,t))&&n.push(qn(e,o,i))),e=e.return}return n}function Zn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xn(e,t,r,n,i){for(var o=t._reactName,a=[];null!==r&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=ze(r,o))&&a.unshift(qn(r,l,s)):i||null!=(l=ze(r,o))&&a.push(qn(r,l,s))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var Yn=/\r\n?/g,Kn=/\u0000|\uFFFD/g;function Jn(e){return("string"==typeof e?e:""+e).replace(Yn,"\n").replace(Kn,"")}function Qn(e,t,r){if(t=Jn(t),Jn(e)!==t&&r)throw Error(o(425))}function $n(){}var ei=null,ti=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,oi="function"==typeof Promise?Promise:void 0,ai="function"==typeof queueMicrotask?queueMicrotask:void 0!==oi?function(e){return oi.resolve(null).then(e).catch(si)}:ni;function si(e){setTimeout((function(){throw e}))}function li(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void Vt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function _i(e){var t=e[di];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fi]||r[di]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ui(e);null!==e;){if(r=e[di])return r;e=ui(e)}return t}r=(e=r).parentNode}return null}function vi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function bi(e){return e[pi]||null}var wi=[],Ei=-1;function Ti(e){return{current:e}}function Si(e){0>Ei||(e.current=wi[Ei],wi[Ei]=null,Ei--)}function Ai(e,t){Ei++,wi[Ei]=e.current,e.current=t}var Pi={},Ii=Ti(Pi),ki=Ti(!1),Ci=Pi;function Mi(e,t){var r=e.type.contextTypes;if(!r)return Pi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function zi(e){return null!=e.childContextTypes}function Di(){Si(ki),Si(Ii)}function Li(e,t,r){if(Ii.current!==Pi)throw Error(o(168));Ai(Ii,t),Ai(ki,r)}function Fi(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(o(108,G(e)||"Unknown",i));return B({},r,n)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pi,Ci=Ii.current,Ai(Ii,e),Ai(ki,ki.current),!0}function Bi(e,t,r){var n=e.stateNode;if(!n)throw Error(o(169));r?(e=Fi(e,t,Ci),n.__reactInternalMemoizedMergedChildContext=e,Si(ki),Si(Ii),Ai(Ii,e)):Si(ki),Ai(ki,r)}var Oi=null,Ni=!1,ji=!1;function Ui(e){null===Oi?Oi=[e]:Oi.push(e)}function Vi(){if(!ji&&null!==Oi){ji=!0;var e=0,t=vt;try{var r=Oi;for(vt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Oi=null,Ni=!1}catch(t){throw null!==Oi&&(Oi=Oi.slice(e+1)),Ze($e,Vi),t}finally{vt=t,ji=!1}}return null}var Gi=[],Hi=0,qi=null,Wi=0,Zi=[],Xi=0,Yi=null,Ki=1,Ji="";function Qi(e,t){Gi[Hi++]=Wi,Gi[Hi++]=qi,qi=e,Wi=t}function $i(e,t,r){Zi[Xi++]=Ki,Zi[Xi++]=Ji,Zi[Xi++]=Yi,Yi=e;var n=Ki;e=Ji;var i=32-at(n)-1;n&=~(1<<i),r+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Ki=1<<32-at(t)+i|r<<i|n,Ji=o+e}else Ki=1<<o|r<<i|n,Ji=e}function eo(e){null!==e.return&&(Qi(e,1),$i(e,1,0))}function to(e){for(;e===qi;)qi=Gi[--Hi],Gi[Hi]=null,Wi=Gi[--Hi],Gi[Hi]=null;for(;e===Yi;)Yi=Zi[--Xi],Zi[Xi]=null,Ji=Zi[--Xi],Zi[Xi]=null,Ki=Zi[--Xi],Zi[Xi]=null}var ro=null,no=null,io=!1,oo=null;function ao(e,t){var r=Mc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function so(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ro=e,no=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ro=e,no=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Yi?{id:Ki,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Mc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ro=e,no=null,!0);default:return!1}}function lo(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function co(e){if(io){var t=no;if(t){var r=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(r.nextSibling);var n=ro;t&&so(e,t)?ao(n,r):(e.flags=-4097&e.flags|2,io=!1,ro=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,ro=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ro=e}function ho(e){if(e!==ro)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=no)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){no=ci(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}no=null}}else no=ro?ci(e.stateNode.nextSibling):null;return!0}function po(){for(var e=no;e;)e=ci(e.nextSibling)}function fo(){no=ro=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var r in t=B({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var _o=Ti(null),vo=null,xo=null,bo=null;function wo(){bo=xo=vo=null}function Eo(e){var t=_o.current;Si(_o),e._currentValue=t}function To(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function So(e,t){vo=e,bo=xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(bo!==e)if(e={context:e,memoizedValue:t,next:null},null===xo){if(null===vo)throw Error(o(308));xo=e,vo.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return t}var Po=null;function Io(e){null===Po?Po=[e]:Po.push(e)}function ko(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,Io(t)):(r.next=i.next,i.next=r),t.interleaved=r,Co(e,n)}function Co(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Mo=!1;function zo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fo(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!=(2&Il)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Co(e,r)}return null===(i=n.interleaved)?(t.next=t,Io(n)):(t.next=i.next,i.next=t),n.interleaved=t,Co(e,r)}function Ro(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,_t(e,r)}}function Bo(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?i=o=a:o=o.next=a,r=r.next}while(null!==r);null===o?i=o=t:o=o.next=t}else i=o=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Oo(e,t,r,n){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==o){var h=i.baseState;for(a=0,u=c=l=null,s=o;;){var d=s.lane,p=s.eventTime;if((n&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(d=t,p=r,m.tag){case 1:if("function"==typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(d="function"==typeof(f=m.payload)?f.call(p,h,d):f))break e;h=B({},h,d);break e;case 2:Mo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Rl|=a,e.lanes=a,e.memoizedState=h}}function No(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!=typeof i)throw Error(o(191,i));i.call(n)}}}var jo=(new n.Component).refs;function Uo(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:B({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var Vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),i=tc(e),o=Lo(n,i);o.payload=t,null!=r&&(o.callback=r),null!==(t=Fo(e,o,i))&&(rc(t,e,i,n),Ro(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),i=tc(e),o=Lo(n,i);o.tag=1,o.payload=t,null!=r&&(o.callback=r),null!==(t=Fo(e,o,i))&&(rc(t,e,i,n),Ro(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),i=Lo(r,n);i.tag=2,null!=t&&(i.callback=t),null!==(t=Fo(e,i,n))&&(rc(t,e,n,r),Ro(t,e,n))}};function Go(e,t,r,n,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&ln(r,n)&&ln(i,o))}function Ho(e,t,r){var n=!1,i=Pi,o=t.contextType;return"object"==typeof o&&null!==o?o=Ao(o):(i=zi(t)?Ci:Ii.current,o=(n=null!=(n=t.contextTypes))?Mi(e,i):Pi),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function qo(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Wo(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=jo,zo(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=Ao(o):(o=zi(t)?Ci:Ii.current,i.context=Mi(e,o)),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(Uo(e,t,o,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vo.enqueueReplaceState(i,i.state,null),Oo(e,r,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Zo(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,e));var i=n,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===jo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(o(284));if(!r._owner)throw Error(o(290,e))}return e}function Xo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yo(e){return(0,e._init)(e._payload)}function Ko(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Bc(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function c(e,t,r,n){var o=r.type;return o===E?h(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===z&&Yo(o)===t.type)?((n=i(t,r.props)).ref=Zo(e,t,r),n.return=e,n):((n=Lc(r.type,r.key,r.props,null,e.mode,n)).ref=Zo(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Oc(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function h(e,t,r,n,o){return null===t||7!==t.tag?((t=Fc(r,e.mode,n,o)).return=e,t):((t=i(t,r)).return=e,t)}function d(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Bc(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case b:return(r=Lc(t.type,t.key,t.props,null,e.mode,r)).ref=Zo(e,null,t),r.return=e,r;case w:return(t=Oc(t,e.mode,r)).return=e,t;case z:return d(e,(0,t._init)(t._payload),r)}if(te(t)||F(t))return(t=Fc(t,e.mode,r,null)).return=e,t;Xo(e,t)}return null}function p(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==i?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case b:return r.key===i?c(e,t,r,n):null;case w:return r.key===i?u(e,t,r,n):null;case z:return p(e,t,(i=r._init)(r._payload),n)}if(te(r)||F(r))return null!==i?null:h(e,t,r,n,null);Xo(e,r)}return null}function f(e,t,r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case b:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case w:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case z:return f(e,t,r,(0,n._init)(n._payload),i)}if(te(n)||F(n))return h(t,e=e.get(r)||null,n,i,null);Xo(t,n)}return null}function m(i,o,s,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(i,h,s[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=a(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===s.length)return r(i,h),io&&Qi(i,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(o=a(h,o,m),null===u?c=h:u.sibling=h,u=h);return io&&Qi(i,m),c}for(h=n(i,h);m<s.length;m++)null!==(g=f(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Qi(i,m),c}function g(i,s,l,c){var u=F(l);if("function"!=typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=s,g=s=0,y=null,_=l.next();null!==m&&!_.done;g++,_=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=p(i,m,_.value,c);if(null===v){null===m&&(m=y);break}e&&m&&null===v.alternate&&t(i,m),s=a(v,s,g),null===h?u=v:h.sibling=v,h=v,m=y}if(_.done)return r(i,m),io&&Qi(i,g),u;if(null===m){for(;!_.done;g++,_=l.next())null!==(_=d(i,_.value,c))&&(s=a(_,s,g),null===h?u=_:h.sibling=_,h=_);return io&&Qi(i,g),u}for(m=n(i,m);!_.done;g++,_=l.next())null!==(_=f(m,i,g,_.value,c))&&(e&&null!==_.alternate&&m.delete(null===_.key?g:_.key),s=a(_,s,g),null===h?u=_:h.sibling=_,h=_);return e&&m.forEach((function(e){return t(i,e)})),io&&Qi(i,g),u}return function e(n,o,a,l){if("object"==typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case b:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){r(n,u.sibling),(o=i(u,a.props.children)).return=n,n=o;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===z&&Yo(c)===u.type){r(n,u.sibling),(o=i(u,a.props)).ref=Zo(n,u,a),o.return=n,n=o;break e}r(n,u);break}t(n,u),u=u.sibling}a.type===E?((o=Fc(a.props.children,n.mode,l,a.key)).return=n,n=o):((l=Lc(a.type,a.key,a.props,null,n.mode,l)).ref=Zo(n,o,a),l.return=n,n=l)}return s(n);case w:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){r(n,o.sibling),(o=i(o,a.children||[])).return=n,n=o;break e}r(n,o);break}t(n,o),o=o.sibling}(o=Oc(a,n.mode,l)).return=n,n=o}return s(n);case z:return e(n,o,(u=a._init)(a._payload),l)}if(te(a))return m(n,o,a,l);if(F(a))return g(n,o,a,l);Xo(n,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==o&&6===o.tag?(r(n,o.sibling),(o=i(o,a)).return=n,n=o):(r(n,o),(o=Bc(a,n.mode,l)).return=n,n=o),s(n)):r(n,o)}}var Jo=Ko(!0),Qo=Ko(!1),$o={},ea=Ti($o),ta=Ti($o),ra=Ti($o);function na(e){if(e===$o)throw Error(o(174));return e}function ia(e,t){switch(Ai(ra,t),Ai(ta,e),Ai(ea,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(ea),Ai(ea,t)}function oa(){Si(ea),Si(ta),Si(ra)}function aa(e){na(ra.current);var t=na(ea.current),r=le(t,e.type);t!==r&&(Ai(ta,e),Ai(ea,r))}function sa(e){ta.current===e&&(Si(ea),Si(ta))}var la=Ti(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function ha(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var da=x.ReactCurrentDispatcher,pa=x.ReactCurrentBatchConfig,fa=0,ma=null,ga=null,ya=null,_a=!1,va=!1,xa=0,ba=0;function wa(){throw Error(o(321))}function Ea(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function Ta(e,t,r,n,i,a){if(fa=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,da.current=null===e||null===e.memoizedState?ss:ls,e=r(n,i),va){a=0;do{if(va=!1,xa=0,25<=a)throw Error(o(301));a+=1,ya=ga=null,t.updateQueue=null,da.current=cs,e=r(n,i)}while(va)}if(da.current=as,t=null!==ga&&null!==ga.next,fa=0,ya=ga=ma=null,_a=!1,t)throw Error(o(300));return e}function Sa(){var e=0!==xa;return xa=0,e}function Aa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ma.memoizedState=ya=e:ya=ya.next=e,ya}function Pa(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ya?ma.memoizedState:ya.next;if(null!==t)ya=t,ga=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ya?ma.memoizedState=ya=e:ya=ya.next=e}return ya}function Ia(e,t){return"function"==typeof t?t(e):t}function ka(e){var t=Pa(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=ga,i=n.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(null!==i){a=i.next,n=n.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((fa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=n):c=c.next=d,ma.lanes|=h,Rl|=h}u=u.next}while(null!==u&&u!==a);null===c?s=n:c.next=l,sn(n,t.memoizedState)||(xs=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{a=i.lane,ma.lanes|=a,Rl|=a,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ca(e){var t=Pa(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sn(a,t.memoizedState)||(xs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Ma(){}function za(e,t){var r=ma,n=Pa(),i=t(),a=!sn(n.memoizedState,i);if(a&&(n.memoizedState=i,xs=!0),n=n.queue,Ha(Fa.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(r.flags|=2048,Na(9,La.bind(null,r,n,i,t),void 0,null),null===kl)throw Error(o(349));0!=(30&fa)||Da(r,t,i)}return i}function Da(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function La(e,t,r,n){t.value=r,t.getSnapshot=n,Ra(t)&&Ba(e)}function Fa(e,t,r){return r((function(){Ra(t)&&Ba(e)}))}function Ra(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch(e){return!0}}function Ba(e){var t=Co(e,1);null!==t&&rc(t,e,1,-1)}function Oa(e){var t=Aa();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:e},t.queue=e,e=e.dispatch=rs.bind(null,ma,e),[t.memoizedState,e]}function Na(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function ja(){return Pa().memoizedState}function Ua(e,t,r,n){var i=Aa();ma.flags|=e,i.memoizedState=Na(1|t,r,void 0,void 0===n?null:n)}function Va(e,t,r,n){var i=Pa();n=void 0===n?null:n;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==n&&Ea(n,a.deps))return void(i.memoizedState=Na(t,r,o,n))}ma.flags|=e,i.memoizedState=Na(1|t,r,o,n)}function Ga(e,t){return Ua(8390656,8,e,t)}function Ha(e,t){return Va(2048,8,e,t)}function qa(e,t){return Va(4,2,e,t)}function Wa(e,t){return Va(4,4,e,t)}function Za(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xa(e,t,r){return r=null!=r?r.concat([e]):null,Va(4,4,Za.bind(null,t,e),r)}function Ya(){}function Ka(e,t){var r=Pa();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Ea(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ja(e,t){var r=Pa();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Ea(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Qa(e,t,r){return 0==(21&fa)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=r):(sn(r,t)||(r=mt(),ma.lanes|=r,Rl|=r,e.baseState=!0),t)}function $a(e,t){var r=vt;vt=0!==r&&4>r?r:4,e(!0);var n=pa.transition;pa.transition={};try{e(!1),t()}finally{vt=r,pa.transition=n}}function es(){return Pa().memoizedState}function ts(e,t,r){var n=tc(e);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ns(e)?is(t,r):null!==(r=ko(e,t,r,n))&&(rc(r,e,n,ec()),os(r,t,n))}function rs(e,t,r){var n=tc(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ns(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,sn(s,a)){var l=t.interleaved;return null===l?(i.next=i,Io(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(r=ko(e,t,i,n))&&(rc(r,e,n,i=ec()),os(r,t,n))}}function ns(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function is(e,t){va=_a=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function os(e,t,r){if(0!=(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,_t(e,r)}}var as={readContext:Ao,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},ss={readContext:Ao,useCallback:function(e,t){return Aa().memoizedState=[e,void 0===t?null:t],e},useContext:Ao,useEffect:Ga,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Ua(4194308,4,Za.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ua(4,2,e,t)},useMemo:function(e,t){var r=Aa();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Aa();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ts.bind(null,ma,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Aa().memoizedState=e},useState:Oa,useDebugValue:Ya,useDeferredValue:function(e){return Aa().memoizedState=e},useTransition:function(){var e=Oa(!1),t=e[0];return e=$a.bind(null,e[1]),Aa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ma,i=Aa();if(io){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===kl)throw Error(o(349));0!=(30&fa)||Da(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,Ga(Fa.bind(null,n,a,e),[e]),n.flags|=2048,Na(9,La.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Aa(),t=kl.identifierPrefix;if(io){var r=Ji;t=":"+t+"R"+(r=(Ki&~(1<<32-at(Ki)-1)).toString(32)+r),0<(r=xa++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ba++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Ao,useCallback:Ka,useContext:Ao,useEffect:Ha,useImperativeHandle:Xa,useInsertionEffect:qa,useLayoutEffect:Wa,useMemo:Ja,useReducer:ka,useRef:ja,useState:function(){return ka(Ia)},useDebugValue:Ya,useDeferredValue:function(e){return Qa(Pa(),ga.memoizedState,e)},useTransition:function(){return[ka(Ia)[0],Pa().memoizedState]},useMutableSource:Ma,useSyncExternalStore:za,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ao,useCallback:Ka,useContext:Ao,useEffect:Ha,useImperativeHandle:Xa,useInsertionEffect:qa,useLayoutEffect:Wa,useMemo:Ja,useReducer:Ca,useRef:ja,useState:function(){return Ca(Ia)},useDebugValue:Ya,useDeferredValue:function(e){var t=Pa();return null===ga?t.memoizedState=e:Qa(t,ga.memoizedState,e)},useTransition:function(){return[Ca(Ia)[0],Pa().memoizedState]},useMutableSource:Ma,useSyncExternalStore:za,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var r="",n=t;do{r+=U(n),n=n.return}while(n);var i=r}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var ps="function"==typeof WeakMap?WeakMap:Map;function fs(e,t,r){(r=Lo(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hl||(Hl=!0,ql=n),ds(0,t)},r}function ms(e,t,r){(r=Lo(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(r.callback=function(){ds(0,t),"function"!=typeof n&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function gs(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ps;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Sc.bind(null,e,t,r),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _s(e,t,r,n,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Lo(-1,1)).tag=2,Fo(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vs=x.ReactCurrentOwner,xs=!1;function bs(e,t,r,n){t.child=null===e?Qo(t,null,r,n):Jo(t,e.child,r,n)}function ws(e,t,r,n,i){r=r.render;var o=t.ref;return So(t,i),n=Ta(e,t,r,n,o,i),r=Sa(),null===e||xs?(io&&r&&eo(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Es(e,t,r,n,i){if(null===e){var o=r.type;return"function"!=typeof o||zc(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Lc(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ts(e,t,o,n,i))}if(o=e.child,0==(e.lanes&i)){var a=o.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(a,n)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Dc(o,n)).ref=t.ref,e.return=t,t.child=e}function Ts(e,t,r,n,i){if(null!==e){var o=e.memoizedProps;if(ln(o,n)&&e.ref===t.ref){if(xs=!1,t.pendingProps=n=o,0==(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!=(131072&e.flags)&&(xs=!0)}}return Ps(e,t,r,n,i)}function Ss(e,t,r){var n=t.pendingProps,i=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Dl,zl),zl|=r;else{if(0==(1073741824&r))return e=null!==o?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Dl,zl),zl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:r,Ai(Dl,zl),zl|=n}else null!==o?(n=o.baseLanes|r,t.memoizedState=null):n=r,Ai(Dl,zl),zl|=n;return bs(e,t,i,r),t.child}function As(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ps(e,t,r,n,i){var o=zi(r)?Ci:Ii.current;return o=Mi(t,o),So(t,i),r=Ta(e,t,r,n,o,i),n=Sa(),null===e||xs?(io&&n&&eo(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Is(e,t,r,n,i){if(zi(r)){var o=!0;Ri(t)}else o=!1;if(So(t,i),null===t.stateNode)Gs(e,t),Ho(t,r,n),Wo(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=r.contextType;c="object"==typeof c&&null!==c?Ao(c):Mi(t,c=zi(r)?Ci:Ii.current);var u=r.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==n||l!==c)&&qo(t,a,n,c),Mo=!1;var d=t.memoizedState;a.state=d,Oo(t,n,a,i),l=t.memoizedState,s!==n||d!==l||ki.current||Mo?("function"==typeof u&&(Uo(t,r,u,n),l=t.memoizedState),(s=Mo||Go(t,r,s,n,d,l,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Do(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:yo(t.type,s),a.props=c,h=t.pendingProps,d=a.context,l="object"==typeof(l=r.contextType)&&null!==l?Ao(l):Mi(t,l=zi(r)?Ci:Ii.current);var p=r.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||d!==l)&&qo(t,a,n,l),Mo=!1,d=t.memoizedState,a.state=d,Oo(t,n,a,i);var f=t.memoizedState;s!==h||d!==f||ki.current||Mo?("function"==typeof p&&(Uo(t,r,p,n),f=t.memoizedState),(c=Mo||Go(t,r,c,n,d,f,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=l,n=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return ks(e,t,r,n,o,i)}function ks(e,t,r,n,i,o){As(e,t);var a=0!=(128&t.flags);if(!n&&!a)return i&&Bi(t,r,!1),Hs(e,t,o);n=t.stateNode,vs.current=t;var s=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,s,o)):bs(e,t,s,o),t.memoizedState=n.state,i&&Bi(t,r,!0),t.child}function Cs(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),ia(e,t.containerInfo)}function Ms(e,t,r,n,i){return fo(),mo(i),t.flags|=256,bs(e,t,r,n),t.child}var zs,Ds,Ls,Fs={dehydrated:null,treeContext:null,retryLane:0};function Rs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,r){var n,i=t.pendingProps,a=la.current,s=!1,l=0!=(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!=(2&a)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ai(la,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Rc(l,i,0,null),e=Fc(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Rs(r),t.memoizedState=Fs,e):Os(t,l));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,r,n,i,a,s){if(r)return 256&t.flags?(t.flags&=-257,Ns(e,t,s,n=hs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Rc({mode:"visible",children:n.children},i,0,null),(a=Fc(a,i,s,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,0!=(1&t.mode)&&Jo(t,e.child,null,s),t.child.memoizedState=Rs(s),t.memoizedState=Fs,a);if(0==(1&t.mode))return Ns(e,t,s,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var l=n.dgst;return n=l,Ns(e,t,s,n=hs(a=Error(o(419)),n,void 0))}if(l=0!=(s&e.childLanes),xs||l){if(null!==(n=kl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(n.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Co(e,i),rc(n,e,i,-1))}return mc(),Ns(e,t,s,n=hs(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Pc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,no=ci(i.nextSibling),ro=t,io=!0,oo=null,null!==e&&(Zi[Xi++]=Ki,Zi[Xi++]=Ji,Zi[Xi++]=Yi,Ki=e.id,Ji=e.overflow,Yi=t),(t=Os(t,n.children)).flags|=4096,t)}(e,t,l,i,n,a,r);if(s){s=i.fallback,l=t.mode,n=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0==(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==n?s=Dc(n,s):(s=Fc(s,l,r,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Rs(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~r,t.memoizedState=Fs,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Os(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ns(e,t,r,n){return null!==n&&mo(n),Jo(t,e.child,null,r),(e=Os(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),To(e.return,t,r)}function Us(e,t,r,n,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function Vs(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(bs(e,t,n.children,r),0!=(2&(n=la.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,r,t);else if(19===e.tag)js(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ai(la,n),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===ca(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Us(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ca(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Us(t,!0,r,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0==(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=Dc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Dc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function qs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Zs(e,t,r){var n=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return zi(t.type)&&Di(),Ws(t),null;case 3:return n=t.stateNode,oa(),Si(ki),Si(Ii),ha(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ws(t),null;case 5:sa(t);var i=na(ra.current);if(r=t.type,null!==e&&null!=t.stateNode)Ds(e,t,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(o(166));return Ws(t),null}if(e=na(ea.current),ho(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[di]=t,n[pi]=a,e=0!=(1&t.mode),r){case"dialog":Nn("cancel",n),Nn("close",n);break;case"iframe":case"object":case"embed":Nn("load",n);break;case"video":case"audio":for(i=0;i<Fn.length;i++)Nn(Fn[i],n);break;case"source":Nn("error",n);break;case"img":case"image":case"link":Nn("error",n),Nn("load",n);break;case"details":Nn("toggle",n);break;case"input":K(n,a),Nn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Nn("invalid",n);break;case"textarea":ie(n,a),Nn("invalid",n)}for(var l in _e(r,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"==typeof c?n.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qn(n.textContent,c,e),i=["children",c]):"number"==typeof c&&n.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qn(n.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Nn("scroll",n)}switch(r){case"input":W(n),$(n,a,!0);break;case"textarea":W(n),ae(n);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(n.onclick=$n)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[di]=t,e[pi]=n,zs(e,t),t.stateNode=e;e:{switch(l=ve(r,n),r){case"dialog":Nn("cancel",e),Nn("close",e),i=n;break;case"iframe":case"object":case"embed":Nn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Fn.length;i++)Nn(Fn[i],e);i=n;break;case"source":Nn("error",e),i=n;break;case"img":case"image":case"link":Nn("error",e),Nn("load",e),i=n;break;case"details":Nn("toggle",e),i=n;break;case"input":K(e,n),i=Y(e,n),Nn("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=B({},n,{value:void 0}),Nn("invalid",e);break;case"textarea":ie(e,n),i=ne(e,n),Nn("invalid",e)}for(a in _e(r,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"==typeof u?("textarea"!==r||""!==u)&&de(e,u):"number"==typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Nn("scroll",e):null!=u&&v(e,a,u,l))}switch(r){case"input":W(e),$(e,n,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=n.value&&e.setAttribute("value",""+H(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?re(e,!!n.multiple,a,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=$n)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Ls(0,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(o(166));if(r=na(ra.current),na(ea.current),ho(t)){if(n=t.stateNode,r=t.memoizedProps,n[di]=t,(a=n.nodeValue!==r)&&null!==(e=ro))switch(e.tag){case 3:Qn(n.nodeValue,r,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qn(n.nodeValue,r,0!=(1&e.mode))}a&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[di]=t,t.stateNode=n}return Ws(t),null;case 13:if(Si(la),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==no&&0!=(1&t.mode)&&0==(128&t.flags))po(),fo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=t}else fo(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=r,t):((n=null!==n)!=(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&la.current)?0===Ll&&(Ll=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return oa(),null===e&&Vn(t.stateNode.containerInfo),Ws(t),null;case 10:return Eo(t.type._context),Ws(t),null;case 19:if(Si(la),null===(a=t.memoizedState))return Ws(t),null;if(n=0!=(128&t.flags),null===(l=a.rendering))if(n)qs(a,!1);else{if(0!==Ll||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ca(e))){for(t.flags|=128,qs(a,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(a=r).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ai(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Vl&&(t.flags|=128,n=!0,qs(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ca(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),qs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Ws(t),null}else 2*Je()-a.renderingStartTime>Vl&&1073741824!==r&&(t.flags|=128,n=!0,qs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=a.last)?r.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,r=la.current,Ai(la,n?1&r|2:1&r),t):(Ws(t),null);case 22:case 23:return hc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!=(1&t.mode)?0!=(1073741824&zl)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xs(e,t){switch(to(t),t.tag){case 1:return zi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Si(ki),Si(Ii),ha(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Si(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(la),null;case 4:return oa(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}zs=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ds=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,na(ea.current);var o,a=null;switch(r){case"input":i=Y(e,i),n=Y(e,n),a=[];break;case"select":i=B({},i,{value:void 0}),n=B({},n,{value:void 0}),a=[];break;case"textarea":i=ne(e,i),n=ne(e,n),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof n.onClick&&(e.onclick=$n)}for(u in _e(r,n),r=null,i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=i?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Nn("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ls=function(e,t,r,n){r!==n&&(t.flags|=4)};var Ys=!1,Ks=!1,Js="function"==typeof WeakSet?WeakSet:Set,Qs=null;function $s(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(r){Tc(e,t,r)}else r.current=null}function el(e,t,r){try{r()}catch(r){Tc(e,t,r)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,r,o)}i=i.next}while(i!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function il(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[mi],delete t[gi],delete t[yi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=$n));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var ul=null,hl=!1;function dl(e,t,r){for(r=r.child;null!==r;)pl(e,t,r),r=r.sibling}function pl(e,t,r){if(ot&&"function"==typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,r)}catch(e){}switch(r.tag){case 5:Ks||$s(r,t);case 6:var n=ul,i=hl;ul=null,dl(e,t,r),hl=i,null!==(ul=n)&&(hl?(e=ul,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):ul.removeChild(r.stateNode));break;case 18:null!==ul&&(hl?(e=ul,r=r.stateNode,8===e.nodeType?li(e.parentNode,r):1===e.nodeType&&li(e,r),Vt(e)):li(ul,r.stateNode));break;case 4:n=ul,i=hl,ul=r.stateNode.containerInfo,hl=!0,dl(e,t,r),ul=n,hl=i;break;case 0:case 11:case 14:case 15:if(!Ks&&null!==(n=r.updateQueue)&&null!==(n=n.lastEffect)){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!=(2&o)||0!=(4&o))&&el(r,t,a),i=i.next}while(i!==n)}dl(e,t,r);break;case 1:if(!Ks&&($s(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(e){Tc(r,t,e)}dl(e,t,r);break;case 21:dl(e,t,r);break;case 22:1&r.mode?(Ks=(n=Ks)||null!==r.memoizedState,dl(e,t,r),Ks=n):dl(e,t,r);break;default:dl(e,t,r)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Js),t.forEach((function(t){var n=Ic.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function ml(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(a,s,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(e){Tc(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(t){Tc(e,e.return,t)}try{rl(5,e,e.return)}catch(t){Tc(e,e.return,t)}}break;case 1:ml(t,e),yl(e),512&n&&null!==r&&$s(r,r.return);break;case 5:if(ml(t,e),yl(e),512&n&&null!==r&&$s(r,r.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(t){Tc(e,e.return,t)}}if(4&n&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==r?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),ve(l,s);var u=ve(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):v(i,h,d,u)}switch(l){case"input":Q(i,a);break;case"textarea":oe(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?re(i,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?re(i,!!a.multiple,a.defaultValue,!0):re(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(t){Tc(e,e.return,t)}}break;case 6:if(ml(t,e),yl(e),4&n){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(t){Tc(e,e.return,t)}}break;case 3:if(ml(t,e),yl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(t){Tc(e,e.return,t)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Je())),4&n&&fl(e);break;case 22:if(h=null!==r&&null!==r.memoizedState,1&e.mode?(Ks=(u=Ks)||h,ml(t,e),Ks=u):ml(t,e),yl(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!=(1&e.mode))for(Qs=e,h=e.child;null!==h;){for(d=Qs=h;null!==Qs;){switch(f=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:$s(p,p.return);var m=p.stateNode;if("function"==typeof m.componentWillUnmount){n=p,r=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){Tc(n,r,e)}}break;case 5:$s(p,p.return);break;case 22:if(null!==p.memoizedState){bl(d);continue}}null!==f?(f.return=p,Qs=f):bl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=null!=(c=d.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(t){Tc(e,e.return,t)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(t){Tc(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&n&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(al(r)){var n=r;break e}r=r.return}throw Error(o(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(de(i,""),n.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=n.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(t){Tc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,r){Qs=e,vl(e,t,r)}function vl(e,t,r){for(var n=0!=(1&e.mode);null!==Qs;){var i=Qs,o=i.child;if(22===i.tag&&n){var a=null!==i.memoizedState||Ys;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Ys;var c=Ks;if(Ys=a,(Ks=l)&&!c)for(Qs=i;null!==Qs;)l=(a=Qs).child,22===a.tag&&null!==a.memoizedState?wl(i):null!==l?(l.return=a,Qs=l):wl(i);for(;null!==o;)Qs=o,vl(o,t,r),o=o.sibling;Qs=i,Ys=s,Ks=c}xl(e)}else 0!=(8772&i.subtreeFlags)&&null!==o?(o.return=i,Qs=o):xl(e)}}function xl(e){for(;null!==Qs;){var t=Qs;if(0!=(8772&t.flags)){var r=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Ks)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:yo(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&No(t,a,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}No(t,s,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(o(163))}Ks||512&t.flags&&il(t)}catch(e){Tc(t,t.return,e)}}if(t===e){Qs=null;break}if(null!==(r=t.sibling)){r.return=t.return,Qs=r;break}Qs=t.return}}function bl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Qs=r;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(e){Tc(t,r,e)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(e){Tc(t,i,e)}}var o=t.return;try{il(t)}catch(e){Tc(t,o,e)}break;case 5:var a=t.return;try{il(t)}catch(e){Tc(t,a,e)}}}catch(e){Tc(t,t.return,e)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var El,Tl=Math.ceil,Sl=x.ReactCurrentDispatcher,Al=x.ReactCurrentOwner,Pl=x.ReactCurrentBatchConfig,Il=0,kl=null,Cl=null,Ml=0,zl=0,Dl=Ti(0),Ll=0,Fl=null,Rl=0,Bl=0,Ol=0,Nl=null,jl=null,Ul=0,Vl=1/0,Gl=null,Hl=!1,ql=null,Wl=null,Zl=!1,Xl=null,Yl=0,Kl=0,Jl=null,Ql=-1,$l=0;function ec(){return 0!=(6&Il)?Je():-1!==Ql?Ql:Ql=Je()}function tc(e){return 0==(1&e.mode)?1:0!=(2&Il)&&0!==Ml?Ml&-Ml:null!==go.transition?(0===$l&&($l=mt()),$l):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function rc(e,t,r,n){if(50<Kl)throw Kl=0,Jl=null,Error(o(185));yt(e,r,n),0!=(2&Il)&&e===kl||(e===kl&&(0==(2&Il)&&(Bl|=r),4===Ll&&sc(e,Ml)),nc(e,n),1===r&&0===Il&&0==(1&t.mode)&&(Vl=Je()+500,Ni&&Vi()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!=(s&r)&&0==(s&n)||(i[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var n=dt(e,e===kl?Ml:0);if(0===n)null!==r&&Xe(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Xe(r),1===t)0===e.tag?function(e){Ni=!0,Ui(e)}(lc.bind(null,e)):Ui(lc.bind(null,e)),ai((function(){0==(6&Il)&&Vi()})),r=null;else{switch(xt(n)){case 1:r=$e;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=kc(r,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ic(e,t){if(Ql=-1,$l=0,0!=(6&Il))throw Error(o(327));var r=e.callbackNode;if(wc()&&e.callbackNode!==r)return null;var n=dt(e,e===kl?Ml:0);if(0===n)return null;if(0!=(30&n)||0!=(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var i=Il;Il|=2;var a=fc();for(kl===e&&Ml===t||(Gl=null,Vl=Je()+500,dc(e,t));;)try{_c();break}catch(t){pc(e,t)}wo(),Sl.current=a,Il=i,null!==Cl?t=0:(kl=null,Ml=0,t=Ll)}if(0!==t){if(2===t&&0!==(i=ft(e))&&(n=i,t=oc(e,i)),1===t)throw r=Fl,dc(e,0),sc(e,n),nc(e,Je()),r;if(6===t)sc(e,n);else{if(i=e.current.alternate,0==(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!sn(o(),i))return!1}catch(e){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,n))&&0!==(a=ft(e))&&(n=a,t=oc(e,a)),1===t))throw r=Fl,dc(e,0),sc(e,n),nc(e,Je()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(o(345));case 2:case 5:bc(e,jl,Gl);break;case 3:if(sc(e,n),(130023424&n)===n&&10<(t=Ul+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(bc.bind(null,e,jl,Gl),t);break}bc(e,jl,Gl);break;case 4:if(sc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-at(n);a=1<<s,(s=t[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Je()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Tl(n/1960))-n)){e.timeoutHandle=ni(bc.bind(null,e,jl,Gl),n);break}bc(e,jl,Gl);break;default:throw Error(o(329))}}}return nc(e,Je()),e.callbackNode===r?ic.bind(null,e):null}function oc(e,t){var r=Nl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=jl,jl=r,null!==t&&ac(t)),e}function ac(e){null===jl?jl=e:jl.push.apply(jl,e)}function sc(e,t){for(t&=~Ol,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-at(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!=(6&Il))throw Error(o(327));wc();var t=dt(e,0);if(0==(1&t))return nc(e,Je()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var n=ft(e);0!==n&&(t=n,r=oc(e,n))}if(1===r)throw r=Fl,dc(e,0),sc(e,t),nc(e,Je()),r;if(6===r)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,jl,Gl),nc(e,Je()),null}function cc(e,t){var r=Il;Il|=1;try{return e(t)}finally{0===(Il=r)&&(Vl=Je()+500,Ni&&Vi())}}function uc(e){null!==Xl&&0===Xl.tag&&0==(6&Il)&&wc();var t=Il;Il|=1;var r=Pl.transition,n=vt;try{if(Pl.transition=null,vt=1,e)return e()}finally{vt=n,Pl.transition=r,0==(6&(Il=t))&&Vi()}}function hc(){zl=Dl.current,Si(Dl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ii(r)),null!==Cl)for(r=Cl.return;null!==r;){var n=r;switch(to(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Di();break;case 3:oa(),Si(ki),Si(Ii),ha();break;case 5:sa(n);break;case 4:oa();break;case 13:case 19:Si(la);break;case 10:Eo(n.type._context);break;case 22:case 23:hc()}r=r.return}if(kl=e,Cl=e=Dc(e.current,null),Ml=zl=t,Ll=0,Fl=null,Ol=Bl=Rl=0,jl=Nl=null,null!==Po){for(t=0;t<Po.length;t++)if(null!==(n=(r=Po[t]).interleaved)){r.interleaved=null;var i=n.next,o=r.pending;if(null!==o){var a=o.next;o.next=i,n.next=a}r.pending=n}Po=null}return e}function pc(e,t){for(;;){var r=Cl;try{if(wo(),da.current=as,_a){for(var n=ma.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}_a=!1}if(fa=0,ya=ga=ma=null,va=!1,xa=0,Al.current=null,null===r||null===r.return){Ll=1,Fl=t,Cl=null;break}e:{var a=e,s=r.return,l=r,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,h=l,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ys(s);if(null!==f){f.flags&=-257,_s(f,s,l,0,t),1&f.mode&&gs(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0==(1&t)){gs(a,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ys(s);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),_s(y,s,l,0,t),mo(us(c,l));break e}}a=c=us(c,l),4!==Ll&&(Ll=2),null===Nl?Nl=[a]:Nl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bo(a,fs(0,c,t));break e;case 1:l=c;var _=a.type,v=a.stateNode;if(0==(128&a.flags)&&("function"==typeof _.getDerivedStateFromError||null!==v&&"function"==typeof v.componentDidCatch&&(null===Wl||!Wl.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t,Bo(a,ms(a,l,t));break e}}a=a.return}while(null!==a)}xc(r)}catch(e){t=e,Cl===r&&null!==r&&(Cl=r=r.return);continue}break}}function fc(){var e=Sl.current;return Sl.current=as,null===e?as:e}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===kl||0==(268435455&Rl)&&0==(268435455&Bl)||sc(kl,Ml)}function gc(e,t){var r=Il;Il|=2;var n=fc();for(kl===e&&Ml===t||(Gl=null,dc(e,t));;)try{yc();break}catch(t){pc(e,t)}if(wo(),Il=r,Sl.current=n,null!==Cl)throw Error(o(261));return kl=null,Ml=0,Ll}function yc(){for(;null!==Cl;)vc(Cl)}function _c(){for(;null!==Cl&&!Ye();)vc(Cl)}function vc(e){var t=El(e.alternate,e,zl);e.memoizedProps=e.pendingProps,null===t?xc(e):Cl=t,Al.current=null}function xc(e){var t=e;do{var r=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(r=Zs(r,t,zl)))return void(Cl=r)}else{if(null!==(r=Xs(r,t)))return r.flags&=32767,void(Cl=r);if(null===e)return Ll=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Ll&&(Ll=5)}function bc(e,t,r){var n=vt,i=Pl.transition;try{Pl.transition=null,vt=1,function(e,t,r,n){do{wc()}while(null!==Xl);if(0!=(6&Il))throw Error(o(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-at(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}(e,a),e===kl&&(Cl=kl=null,Ml=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||Zl||(Zl=!0,kc(tt,(function(){return wc(),null}))),a=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||a){a=Pl.transition,Pl.transition=null;var s=vt;vt=1;var l=Il;Il|=4,Al.current=null,function(e,t){if(ei=Ht,pn(e=dn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(e){r=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==r||0!==i&&3!==d.nodeType||(l=s+i),d!==a||0!==n&&3!==d.nodeType||(c=s+n),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===r&&++u===i&&(l=s),p===a&&++h===n&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ti={focusedElem:e,selectionRange:r},Ht=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,_=t.stateNode,v=_.getSnapshotBeforeUpdate(t.elementType===t.type?g:yo(t.type,g),y);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(e){Tc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=tl,tl=!1}(e,r),gl(r,e),fn(ti),Ht=!!ei,ti=ei=null,e.current=r,_l(r,e,i),Ke(),Il=l,vt=s,Pl.transition=a}else e.current=r;if(Zl&&(Zl=!1,Xl=e,Yl=i),0===(a=e.pendingLanes)&&(Wl=null),function(e){if(ot&&"function"==typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(r.stateNode),nc(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n((i=t[r]).value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!=(1&Yl)&&0!==e.tag&&wc(),0!=(1&(a=e.pendingLanes))?e===Jl?Kl++:(Kl=0,Jl=e):Kl=0,Vi()}(e,t,r,n)}finally{Pl.transition=i,vt=n}return null}function wc(){if(null!==Xl){var e=xt(Yl),t=Pl.transition,r=vt;try{if(Pl.transition=null,vt=16>e?16:e,null===Xl)var n=!1;else{if(e=Xl,Xl=null,Yl=0,0!=(6&Il))throw Error(o(331));var i=Il;for(Il|=4,Qs=e.current;null!==Qs;){var a=Qs,s=a.child;if(0!=(16&Qs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qs=u;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:rl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Qs=d;else for(;null!==Qs;){var p=(h=Qs).sibling,f=h.return;if(ol(h),h===u){Qs=null;break}if(null!==p){p.return=f,Qs=p;break}Qs=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qs=a}}if(0!=(2064&a.subtreeFlags)&&null!==s)s.return=a,Qs=s;else e:for(;null!==Qs;){if(0!=(2048&(a=Qs).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var _=a.sibling;if(null!==_){_.return=a.return,Qs=_;break e}Qs=a.return}}var v=e.current;for(Qs=v;null!==Qs;){var x=(s=Qs).child;if(0!=(2064&s.subtreeFlags)&&null!==x)x.return=s,Qs=x;else e:for(s=v;null!==Qs;){if(0!=(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(e){Tc(l,l.return,e)}if(l===s){Qs=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Qs=b;break e}Qs=l.return}}if(Il=i,Vi(),ot&&"function"==typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(e){}n=!0}return n}finally{vt=r,Pl.transition=t}}return!1}function Ec(e,t,r){e=Fo(e,t=fs(0,t=us(r,t),1),1),t=ec(),null!==e&&(yt(e,1,t),nc(e,t))}function Tc(e,t,r){if(3===e.tag)Ec(e,e,r);else for(;null!==t;){if(3===t.tag){Ec(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Wl||!Wl.has(n))){t=Fo(t,e=ms(t,e=us(r,e),1),1),e=ec(),null!==t&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,kl===e&&(Ml&r)===r&&(4===Ll||3===Ll&&(130023424&Ml)===Ml&&500>Je()-Ul?dc(e,0):Ol|=r),nc(e,t)}function Ac(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var r=ec();null!==(e=Co(e,t))&&(yt(e,t,r),nc(e,r))}function Pc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Ac(e,r)}function Ic(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(t),Ac(e,r)}function kc(e,t){return Ze(e,t)}function Cc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,r,n){return new Cc(e,t,r,n)}function zc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var r=e.alternate;return null===r?((r=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Lc(e,t,r,n,i,a){var s=2;if(n=e,"function"==typeof e)zc(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case E:return Fc(r.children,i,a,t);case T:s=8,i|=8;break;case S:return(e=Mc(12,r,t,2|i)).elementType=S,e.lanes=a,e;case k:return(e=Mc(13,r,t,i)).elementType=k,e.lanes=a,e;case C:return(e=Mc(19,r,t,i)).elementType=C,e.lanes=a,e;case D:return Rc(r,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case P:s=9;break e;case I:s=11;break e;case M:s=14;break e;case z:s=16,n=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Mc(s,r,t,i)).elementType=e,t.type=n,t.lanes=a,t}function Fc(e,t,r,n){return(e=Mc(7,e,n,t)).lanes=r,e}function Rc(e,t,r,n){return(e=Mc(22,e,n,t)).elementType=D,e.lanes=r,e.stateNode={isHidden:!1},e}function Bc(e,t,r){return(e=Mc(6,e,null,t)).lanes=r,e}function Oc(e,t,r){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nc(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,r,n,i,o,a,s,l){return e=new Nc(e,t,r,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zo(o),e}function Uc(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function Vc(e){if(!e)return Pi;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var r=e.type;if(zi(r))return Fi(e,r,t)}return t}function Gc(e,t,r,n,i,o,a,s,l){return(e=jc(r,n,!0,e,0,o,0,s,l)).context=Vc(null),r=e.current,(o=Lo(n=ec(),i=tc(r))).callback=null!=t?t:null,Fo(r,o,i),e.current.lanes=i,yt(e,i,n),nc(e,n),e}function Hc(e,t,r,n){var i=t.current,o=ec(),a=tc(i);return r=Vc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Lo(o,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Fo(i,t,a))&&(rc(e,i,a,o),Ro(e,i,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Zc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}El=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||ki.current)xs=!0;else{if(0==(e.lanes&r)&&0==(128&t.flags))return xs=!1,function(e,t,r){switch(t.tag){case 3:Cs(t),fo();break;case 5:aa(t);break;case 1:zi(t.type)&&Ri(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ai(_o,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ai(la,1&la.current),t.flags|=128,null):0!=(r&t.child.childLanes)?Bs(e,t,r):(Ai(la,1&la.current),null!==(e=Hs(e,t,r))?e.sibling:null);Ai(la,1&la.current);break;case 19:if(n=0!=(r&t.childLanes),0!=(128&e.flags)){if(n)return Vs(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(la,la.current),n)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,r)}return Hs(e,t,r)}(e,t,r);xs=0!=(131072&e.flags)}else xs=!1,io&&0!=(1048576&t.flags)&&$i(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Gs(e,t),e=t.pendingProps;var i=Mi(t,Ii.current);So(t,r),i=Ta(null,t,n,e,i,r);var a=Sa();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zi(n)?(a=!0,Ri(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,zo(t),i.updater=Vo,t.stateNode=i,i._reactInternals=t,Wo(t,n,e,r),t=ks(null,t,n,!0,a,r)):(t.tag=0,io&&a&&eo(t),bs(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"==typeof e)return zc(e)?1:0;if(null!=e){if((e=e.$$typeof)===I)return 11;if(e===M)return 14}return 2}(n),e=yo(n,e),i){case 0:t=Ps(null,t,n,e,r);break e;case 1:t=Is(null,t,n,e,r);break e;case 11:t=ws(null,t,n,e,r);break e;case 14:t=Es(null,t,n,yo(n.type,e),r);break e}throw Error(o(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Ps(e,t,n,i=t.elementType===n?i:yo(n,i),r);case 1:return n=t.type,i=t.pendingProps,Is(e,t,n,i=t.elementType===n?i:yo(n,i),r);case 3:e:{if(Cs(t),null===e)throw Error(o(387));n=t.pendingProps,i=(a=t.memoizedState).element,Do(e,t),Oo(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ms(e,t,n,r,i=us(Error(o(423)),t));break e}if(n!==i){t=Ms(e,t,n,r,i=us(Error(o(424)),t));break e}for(no=ci(t.stateNode.containerInfo.firstChild),ro=t,io=!0,oo=null,r=Qo(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fo(),n===i){t=Hs(e,t,r);break e}bs(e,t,n,r)}t=t.child}return t;case 5:return aa(t),null===e&&co(t),n=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ri(n,i)?s=null:null!==a&&ri(n,a)&&(t.flags|=32),As(e,t),bs(e,t,s,r),t.child;case 6:return null===e&&co(t),null;case 13:return Bs(e,t,r);case 4:return ia(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Jo(t,null,n,r):bs(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,ws(e,t,n,i=t.elementType===n?i:yo(n,i),r);case 7:return bs(e,t,t.pendingProps,r),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ai(_o,n._currentValue),n._currentValue=s,null!==a)if(sn(a.value,s)){if(a.children===i.children&&!ki.current){t=Hs(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===a.tag){(c=Lo(-1,r&-r)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=r,null!==(c=a.alternate)&&(c.lanes|=r),To(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),To(s,r,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}bs(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,So(t,r),n=n(i=Ao(i)),t.flags|=1,bs(e,t,n,r),t.child;case 14:return i=yo(n=t.type,t.pendingProps),Es(e,t,n,i=yo(n.type,i),r);case 15:return Ts(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:yo(n,i),Gs(e,t),t.tag=1,zi(n)?(e=!0,Ri(t)):e=!1,So(t,r),Ho(t,n,i),Wo(t,n,i,r),ks(null,t,n,!0,e,r);case 19:return Vs(e,t,r);case 22:return Ss(e,t,r)}throw Error(o(156,t.tag))};var Xc="function"==typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function eu(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if("function"==typeof i){var s=i;i=function(){var e=qc(a);s.call(e)}}Hc(t,a,e,i)}else a=function(e,t,r,n,i){if(i){if("function"==typeof n){var o=n;n=function(){var e=qc(a);o.call(e)}}var a=Gc(t,n,e,0,null,!1,0,"",$c);return e._reactRootContainer=a,e[fi]=a.current,Vn(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof n){var s=n;n=function(){var e=qc(l);s.call(e)}}var l=jc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[fi]=l.current,Vn(8===e.nodeType?e.parentNode:e),uc((function(){Hc(t,l,r,n)})),l}(r,t,e,i,n);return qc(a)}Kc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hc(e,t,null,null)},Kc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Hc(null,e,null,null)})),t[fi]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Dt.length&&0!==t&&t<Dt[r].priority;r++);Dt.splice(r,0,e),0===r&&Bt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ht(t.pendingLanes);0!==r&&(_t(t,1|r),nc(t,Je()),0==(6&Il)&&(Vl=Je()+500,Vi()))}break;case 13:uc((function(){var t=Co(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}})),Zc(e,1)}},wt=function(e){if(13===e.tag){var t=Co(e,134217728);null!==t&&rc(t,e,134217728,ec()),Zc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),r=Co(e,t);null!==r&&rc(r,e,t,ec()),Zc(e,t)}},Tt=function(){return vt},St=function(e,t){var r=vt;try{return vt=e,t()}finally{vt=r}},we=function(e,t,r){switch(t){case"input":if(Q(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=bi(n);if(!i)throw Error(o(90));Z(n),Q(n,i)}}}break;case"textarea":oe(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ie=cc,ke=uc;var tu={usingClientEntryPoint:!1,Events:[vi,xi,bi,Ae,Pe,cc]},ru={findFiberByHostInstance:_i,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(nu),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return Uc(e,t,null,r)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var r=!1,n="",i=Xc;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,r,0,n,i),e[fi]=t.current,Vn(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,r){if(!Qc(t))throw Error(o(200));return eu(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Jc(e))throw Error(o(405));var n=null!=r&&r.hydratedSources||null,i=!1,a="",s=Xc;if(null!=r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Gc(t,null,e,1,null!=r?r:null,i,0,a,s),e[fi]=t.current,Vn(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Kc(t)},t.render=function(e,t,r){if(!Qc(t))throw Error(o(200));return eu(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Qc(r))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},745:function(e,t,r){"use strict";var n=r(935);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},935:function(e,t,r){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(448)},431:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(294)),o="id",a=0;function s(e){return a++,"".concat(e||o).concat(a)}var l=function(e,t){for(var r=[],n=0;n<e;n++)r.push(s(t));return r};function c(e){var t=i.default.useRef();return i.default.useEffect((function(){t.current=e})),t.current}t.default=s,t.resetId=function(){a=0},t.setPrefix=function(e){o=e},t.useId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,r=i.default.useRef([]),n=c(e),o=c(t);return e===n&&o===t||(r.current=l(e,t)),r.current}},921:function(e,t){"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,v=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case h:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function w(e){return b(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||b(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return b(e)===d},t.isFragment=function(e){return b(e)===o},t.isLazy=function(e){return b(e)===g},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===a},t.isSuspense=function(e){return b(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===h||e===s||e===a||e===p||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===_||e.$$typeof===v||e.$$typeof===x||e.$$typeof===y)},t.typeOf=b},864:function(e,t,r){"use strict";e.exports=r(921)},251:function(e,t,r){"use strict";var n=r(294),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,o={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},408:function(e,t){"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}function _(){}function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=y.prototype;var x=v.prototype=new _;x.constructor=v,m(x,y.prototype),x.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,E={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,i)&&!T.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:r,type:e,key:a,ref:s,props:o,_owner:E.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var P=/\/+/g;function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function k(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return a=a(l=e),e=""===o?"."+I(l,0):o,b(a)?(i="",null!=e&&(i=e.replace(P,"$&/")+"/"),k(a,t,i,"",(function(e){return e}))):null!=a&&(A(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",b(e))for(var c=0;c<e.length;c++){var u=o+I(s=e[c],c);l+=k(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=k(s=s.value,t,i,u=o+I(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,t,r){if(null==e)return e;var n=[],i=0;return k(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var z={current:null},D={transition:null},L={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};t.Children={map:C,forEach:function(e,t,r){C(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=v,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:r,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return z.current.useCallback(e,t)},t.useContext=function(e){return z.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return z.current.useDeferredValue(e)},t.useEffect=function(e,t){return z.current.useEffect(e,t)},t.useId=function(){return z.current.useId()},t.useImperativeHandle=function(e,t,r){return z.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return z.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return z.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return z.current.useMemo(e,t)},t.useReducer=function(e,t,r){return z.current.useReducer(e,t,r)},t.useRef=function(e){return z.current.useRef(e)},t.useState=function(e){return z.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return z.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return z.current.useTransition()},t.version="18.2.0"},294:function(e,t,r){"use strict";e.exports=r(408)},893:function(e,t,r){"use strict";e.exports=r(251)},53:function(e,t){"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<o(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,a=i>>>1;n<a;){var s=2*(n+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,r))c<i&&0>o(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[s]=r,n=s);else{if(!(c<i&&0>o(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function o(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=n(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function b(e){if(g=!1,x(e),!m)if(null!==n(c))m=!0,D(w);else{var t=n(u);null!==t&&L(b,t.startTime-e)}}function w(e,r){m=!1,g&&(g=!1,_(A),A=-1),f=!0;var o=p;try{for(x(r),d=n(c);null!==d&&(!(d.expirationTime>r)||e&&!k());){var a=d.callback;if("function"==typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=r);r=t.unstable_now(),"function"==typeof s?d.callback=s:d===n(c)&&i(c),x(r)}else i(c);d=n(c)}if(null!==d)var l=!0;else{var h=n(u);null!==h&&L(b,h.startTime-r),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,T=!1,S=null,A=-1,P=5,I=-1;function k(){return!(t.unstable_now()-I<P)}function C(){if(null!==S){var e=t.unstable_now();I=e;var r=!0;try{r=S(!0,e)}finally{r?E():(T=!1,S=null)}}else T=!1}if("function"==typeof v)E=function(){v(C)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,z=M.port2;M.port1.onmessage=C,E=function(){z.postMessage(null)}}else E=function(){y(C,0)};function D(e){S=e,T||(T=!0,E())}function L(e,r){A=y((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,D(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,r(u,e),null===n(c)&&e===n(u)&&(g?(_(A),A=-1):g=!0,L(b,o-a))):(e.sortIndex=s,r(c,e),m||f||(m=!0,D(w))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},840:function(e,t,r){"use strict";e.exports=r(53)},774:function(e){e.exports=function(e,t,r,n){var i=r?r.call(n,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],h=t[c];if(!1===(i=r?r.call(n,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}},788:function(e,t,r){"use strict";r.r(t),r.d(t,{ServerStyleSheet:function(){return je},StyleSheetConsumer:function(){return ie},StyleSheetContext:function(){return ne},StyleSheetManager:function(){return ue},ThemeConsumer:function(){return ze},ThemeContext:function(){return Me},ThemeProvider:function(){return De},__PRIVATE__:function(){return Ge},createGlobalStyle:function(){return Oe},css:function(){return xe},default:function(){return He},isStyledComponent:function(){return x},keyframes:function(){return Ne},useTheme:function(){return Ve},version:function(){return w},withTheme:function(){return Ue}});var n=r(864),i=r(294),o=r(774),a=r.n(o),s=function(e){function t(e,n,l,c,d){for(var p,f,m,g,x,w=0,E=0,T=0,S=0,A=0,z=0,L=m=p=0,R=0,B=0,O=0,N=0,j=l.length,U=j-1,V="",G="",H="",q="";R<j;){if(f=l.charCodeAt(R),R===U&&0!==E+S+T+w&&(0!==E&&(f=47===E?10:47),S=T=w=0,j++,U++),0===E+S+T+w){if(R===U&&(0<B&&(V=V.replace(h,"")),0<V.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:V+=l.charAt(R)}f=59}switch(f){case 123:for(p=(V=V.trim()).charCodeAt(0),m=1,N=++R;R<j;){switch(f=l.charCodeAt(R)){case 123:m++;break;case 125:m--;break;case 47:switch(f=l.charCodeAt(R+1)){case 42:case 47:e:{for(L=R+1;L<U;++L)switch(l.charCodeAt(L)){case 47:if(42===f&&42===l.charCodeAt(L-1)&&R+2!==L){R=L+1;break e}break;case 10:if(47===f){R=L+1;break e}}R=L}}break;case 91:f++;case 40:f++;case 34:case 39:for(;R++<U&&l.charCodeAt(R)!==f;);}if(0===m)break;R++}if(m=l.substring(N,R),0===p&&(p=(V=V.replace(u,"").trim()).charCodeAt(0)),64===p){switch(0<B&&(V=V.replace(h,"")),f=V.charCodeAt(1)){case 100:case 109:case 115:case 45:B=n;break;default:B=M}if(N=(m=t(n,B,m,f,d+1)).length,0<D&&(x=s(3,m,B=r(M,V,O),n,I,P,N,f,d,c),V=B.join(""),void 0!==x&&0===(N=(m=x.trim()).length)&&(f=0,m="")),0<N)switch(f){case 115:V=V.replace(b,a);case 100:case 109:case 45:m=V+"{"+m+"}";break;case 107:m=(V=V.replace(y,"$1 $2"))+"{"+m+"}",m=1===C||2===C&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=V+m,112===c&&(G+=m,m="")}else m=""}else m=t(n,r(n,V,O),m,c,d+1);H+=m,m=O=B=L=p=0,V="",f=l.charCodeAt(++R);break;case 125:case 59:if(1<(N=(V=(0<B?V.replace(h,""):V).trim()).length))switch(0===L&&(p=V.charCodeAt(0),45===p||96<p&&123>p)&&(N=(V=V.replace(" ",":")).length),0<D&&void 0!==(x=s(1,V,n,e,I,P,G.length,c,d,c))&&0===(N=(V=x.trim()).length)&&(V="\0\0"),p=V.charCodeAt(0),f=V.charCodeAt(1),p){case 0:break;case 64:if(105===f||99===f){q+=V+l.charAt(R);break}default:58!==V.charCodeAt(N-1)&&(G+=i(V,p,f,V.charCodeAt(2)))}O=B=L=p=0,V="",f=l.charCodeAt(++R)}}switch(f){case 13:case 10:47===E?E=0:0===1+p&&107!==c&&0<V.length&&(B=1,V+="\0"),0<D*F&&s(0,V,n,e,I,P,G.length,c,d,c),P=1,I++;break;case 59:case 125:if(0===E+S+T+w){P++;break}default:switch(P++,g=l.charAt(R),f){case 9:case 32:if(0===S+w+E)switch(A){case 44:case 58:case 9:case 32:g="";break;default:32!==f&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===S+E+w&&(B=O=1,g="\f"+g);break;case 108:if(0===S+E+w+k&&0<L)switch(R-L){case 2:112===A&&58===l.charCodeAt(R-3)&&(k=A);case 8:111===z&&(k=z)}break;case 58:0===S+E+w&&(L=R);break;case 44:0===E+T+S+w&&(B=1,g+="\r");break;case 34:case 39:0===E&&(S=S===f?0:0===S?f:S);break;case 91:0===S+E+T&&w++;break;case 93:0===S+E+T&&w--;break;case 41:0===S+E+w&&T--;break;case 40:0===S+E+w&&(0===p&&(2*A+3*z==533||(p=1)),T++);break;case 64:0===E+T+S+w+L+m&&(m=1);break;case 42:case 47:if(!(0<S+w+T))switch(E){case 0:switch(2*f+3*l.charCodeAt(R+1)){case 235:E=47;break;case 220:N=R,E=42}break;case 42:47===f&&42===A&&N+2!==R&&(33===l.charCodeAt(N+2)&&(G+=l.substring(N,R+1)),g="",E=0)}}0===E&&(V+=g)}z=A,A=f,R++}if(0<(N=G.length)){if(B=n,0<D&&void 0!==(x=s(2,G,B,e,I,P,N,c,d,c))&&0===(G=x).length)return q+G+H;if(G=B.join(",")+"{"+G+"}",0!=C*k){switch(2!==C||o(G,2)||(k=0),k){case 111:G=G.replace(v,":-moz-$1")+G;break;case 112:G=G.replace(_,"::-webkit-input-$1")+G.replace(_,"::-moz-$1")+G.replace(_,":-ms-input-$1")+G}k=0}}return q+G+H}function r(e,t,r){var i=t.trim().split(m);t=i;var o=i.length,a=e.length;switch(a){case 0:case 1:var s=0;for(e=0===a?"":e[0]+" ";s<o;++s)t[s]=n(e,t[s],r).trim();break;default:var l=s=0;for(t=[];s<o;++s)for(var c=0;c<a;++c)t[l++]=n(e[c]+" ",i[s],r).trim()}return t}function n(e,t,r){var n=t.charCodeAt(0);switch(33>n&&(n=(t=t.trim()).charCodeAt(0)),n){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*r&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,r,n){var a=e+";",s=2*t+3*r+4*n;if(944===s){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===C||2===C&&o(l,1)?"-webkit-"+l+l:l}if(0===C||2===C&&!o(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(A,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return p.test(a)?a.replace(d,":-webkit-")+a.replace(d,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(x,"tb");break;case 232:l=a.replace(x,"tb-rl");break;case 220:l=a.replace(x,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,s=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(E,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(E,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===S.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,r,n).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===r+n&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+a}return a}function o(e,t){var r=e.indexOf(1===t?":":"{"),n=e.substring(0,3!==t?r:10);return r=e.substring(r+1,e.length-1),L(2!==t?n:n.replace(T,"$1"),r,t)}function a(e,t){var r=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return r!==t+";"?r.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,r,n,i,o,a,s,l,u){for(var h,d=0,p=t;d<D;++d)switch(h=z[d].call(c,e,p,r,n,i,o,a,s,l,u)){case void 0:case!1:case!0:case null:break;default:p=h}if(p!==t)return p}function l(e){return void 0!==(e=e.prefix)&&(L=null,e?"function"!=typeof e?C=1:(C=2,L=e):C=0),l}function c(e,r){var n=e;if(33>n.charCodeAt(0)&&(n=n.trim()),n=[n],0<D){var i=s(-1,r,n,n,I,P,0,0,0,0);void 0!==i&&"string"==typeof i&&(r=i)}var o=t(M,n,r,0,0);return 0<D&&void 0!==(i=s(-2,o,n,n,I,P,o.length,0,0,0))&&(o=i),k=0,P=I=1,o}var u=/^\0+/g,h=/[\0\r\f]/g,d=/: */g,p=/zoo|gra/,f=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,_=/::(place)/g,v=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,E=/-self|flex-/g,T=/[^]*?(:[rp][el]a[\w-]+)[^]*/,S=/stretch|:\s*\w+\-(?:conte|avail)/,A=/([^-])(image-set\()/,P=1,I=1,k=0,C=1,M=[],z=[],D=0,L=null,F=0;return c.use=function e(t){switch(t){case void 0:case null:D=z.length=0;break;default:if("function"==typeof t)z[D++]=t;else if("object"==typeof t)for(var r=0,n=t.length;r<n;++r)e(t[r]);else F=0|!!t}return e},c.set=l,void 0!==e&&l(e),c},l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},c=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,u=function(e){var t=Object.create(null);return function(e){return void 0===t[e]&&(t[e]=(r=e,c.test(r)||111===r.charCodeAt(0)&&110===r.charCodeAt(1)&&r.charCodeAt(2)<91)),t[e];var r}}(),h=r(679),d=r.n(h);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var f=function(e,t){for(var r=[e[0]],n=0,i=t.length;n<i;n+=1)r.push(t[n],e[n+1]);return r},m=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,n.typeOf)(e)},g=Object.freeze([]),y=Object.freeze({});function _(e){return"function"==typeof e}function v(e){return e.displayName||e.name||"Component"}function x(e){return e&&"string"==typeof e.styledComponentId}var b="undefined"!=typeof process&&({MAPBOX_TOKEN:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",MAPBOX_STYLE:void 0,WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0}.REACT_APP_SC_ATTR||{MAPBOX_TOKEN:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",MAPBOX_STYLE:void 0,WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0}.SC_ATTR)||"data-styled",w="5.3.6",E="undefined"!=typeof window&&"HTMLElement"in window,T=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={MAPBOX_TOKEN:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",MAPBOX_STYLE:void 0,WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={MAPBOX_TOKEN:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",MAPBOX_STYLE:void 0,WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={MAPBOX_TOKEN:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",MAPBOX_STYLE:void 0,WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{MAPBOX_TOKEN:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",MAPBOX_STYLE:void 0,WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={MAPBOX_TOKEN:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",MAPBOX_STYLE:void 0,WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0}.SC_DISABLE_SPEEDY&&""!=={MAPBOX_TOKEN:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",MAPBOX_STYLE:void 0,WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0}.SC_DISABLE_SPEEDY&&"false"!=={MAPBOX_TOKEN:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",MAPBOX_STYLE:void 0,WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0}.SC_DISABLE_SPEEDY&&{MAPBOX_TOKEN:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",MAPBOX_STYLE:void 0,WEBPACK_BUNDLE:!0,WEBPACK_BUILD:!0}.SC_DISABLE_SPEEDY),S={};function A(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(r.length>0?" Args: "+r.join(", "):""))}var P=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,n=r.length,i=n;e>=i;)(i<<=1)<0&&A(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(r),this.length=i;for(var o=n;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),s=0,l=t.length;s<l;s++)this.tag.insertRule(a,t[s])&&(this.groupSizes[e]++,a++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),n=r+t;this.groupSizes[e]=0;for(var i=r;i<n;i++)this.tag.deleteRule(r)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var r=this.groupSizes[e],n=this.indexOfGroup(e),i=n+r,o=n;o<i;o++)t+=this.tag.getRule(o)+"/*!sc*/\n";return t},e}(),I=new Map,k=new Map,C=1,M=function(e){if(I.has(e))return I.get(e);for(;k.has(C);)C++;var t=C++;return I.set(e,t),k.set(t,e),t},z=function(e){return k.get(e)},D=function(e,t){t>=C&&(C=t+1),I.set(e,t),k.set(t,e)},L="style["+b+'][data-styled-version="5.3.6"]',F=new RegExp("^"+b+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),R=function(e,t,r){for(var n,i=r.split(","),o=0,a=i.length;o<a;o++)(n=i[o])&&e.registerName(t,n)},B=function(e,t){for(var r=(t.textContent||"").split("/*!sc*/\n"),n=[],i=0,o=r.length;i<o;i++){var a=r[i].trim();if(a){var s=a.match(F);if(s){var l=0|parseInt(s[1],10),c=s[2];0!==l&&(D(c,l),R(e,c,s[3]),e.getTag().insertRules(l,n)),n.length=0}else n.push(a)}}},O=function(){return r.nc},N=function(e){var t=document.head,r=e||t,n=document.createElement("style"),i=function(e){for(var t=e.childNodes,r=t.length;r>=0;r--){var n=t[r];if(n&&1===n.nodeType&&n.hasAttribute(b))return n}}(r),o=void 0!==i?i.nextSibling:null;n.setAttribute(b,"active"),n.setAttribute("data-styled-version","5.3.6");var a=O();return a&&n.setAttribute("nonce",a),r.insertBefore(n,o),n},j=function(){function e(e){var t=this.element=N(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,r=0,n=t.length;r<n;r++){var i=t[r];if(i.ownerNode===e)return i}A(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),U=function(){function e(e){var t=this.element=N(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t),n=this.nodes[e];return this.element.insertBefore(r,n||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),V=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),G=E,H={isServer:!E,useCSSOMInjection:!T},q=function(){function e(e,t,r){void 0===e&&(e=y),void 0===t&&(t={}),this.options=p({},H,{},e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&E&&G&&(G=!1,function(e){for(var t=document.querySelectorAll(L),r=0,n=t.length;r<n;r++){var i=t[r];i&&"active"!==i.getAttribute(b)&&(B(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return M(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,r){return void 0===r&&(r=!0),new e(p({},this.options,{},t),this.gs,r&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(r=(t=this.options).isServer,n=t.useCSSOMInjection,i=t.target,e=r?new V(i):n?new j(i):new U(i),new P(e)));var e,t,r,n,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(M(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},t.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(M(e),r)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(M(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),r=t.length,n="",i=0;i<r;i++){var o=z(i);if(void 0!==o){var a=e.names.get(o),s=t.getGroup(i);if(a&&s&&a.size){var l=b+".g"+i+'[id="'+o+'"]',c="";void 0!==a&&a.forEach((function(e){e.length>0&&(c+=e+",")})),n+=""+s+l+'{content:"'+c+'"}/*!sc*/\n'}}}return n}(this)},e}(),W=/(a)(d)/gi,Z=function(e){return String.fromCharCode(e+(e>25?39:97))};function X(e){var t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=Z(t%52)+r;return(Z(t%52)+r).replace(W,"$1-$2")}var Y=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},K=function(e){return Y(5381,e)};function J(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(_(r)&&!x(r))return!1}return!0}var Q=K("5.3.6"),$=function(){function e(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===r||r.isStatic)&&J(e),this.componentId=t,this.baseHash=Y(Q,t),this.baseStyle=r,q.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,r){var n=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(n,this.staticRulesId))i.push(this.staticRulesId);else{var o=_e(this.rules,e,t,r).join(""),a=X(Y(this.baseHash,o)>>>0);if(!t.hasNameForId(n,a)){var s=r(o,"."+a,void 0,n);t.insertRules(n,a,s)}i.push(a),this.staticRulesId=a}else{for(var l=this.rules.length,c=Y(this.baseHash,r.hash),u="",h=0;h<l;h++){var d=this.rules[h];if("string"==typeof d)u+=d;else if(d){var p=_e(d,e,t,r),f=Array.isArray(p)?p.join(""):p;c=Y(c,f+h),u+=f}}if(u){var m=X(c>>>0);if(!t.hasNameForId(n,m)){var g=r(u,"."+m,void 0,n);t.insertRules(n,m,g)}i.push(m)}}return i.join(" ")},e}(),ee=/^\s*\/\/.*$/gm,te=[":","[",".","#"];function re(e){var t,r,n,i,o=void 0===e?y:e,a=o.options,l=void 0===a?y:a,c=o.plugins,u=void 0===c?g:c,h=new s(l),d=[],p=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(r,n,i,o,a,s,l,c,u,h){switch(r){case 1:if(0===u&&64===n.charCodeAt(0))return e(n+";"),"";break;case 2:if(0===c)return n+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+n),"";default:return n+(0===h?"/*|*/":"")}case-2:n.split("/*|*/}").forEach(t)}}}((function(e){d.push(e)})),f=function(e,n,o){return 0===n&&-1!==te.indexOf(o[r.length])||o.match(i)?e:"."+t};function m(e,o,a,s){void 0===s&&(s="&");var l=e.replace(ee,""),c=o&&a?a+" "+o+" { "+l+" }":l;return t=s,r=o,n=new RegExp("\\"+r+"\\b","g"),i=new RegExp("(\\"+r+"\\b){2,}"),h(a||!o?"":o,c)}return h.use([].concat(u,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(r)>0&&(i[0]=i[0].replace(n,f))},p,function(e){if(-2===e){var t=d;return d=[],t}}])),m.hash=u.length?u.reduce((function(e,t){return t.name||A(15),Y(e,t.name)}),5381).toString():"",m}var ne=i.createContext(),ie=ne.Consumer,oe=i.createContext(),ae=(oe.Consumer,new q),se=re();function le(){return(0,i.useContext)(ne)||ae}function ce(){return(0,i.useContext)(oe)||se}function ue(e){var t=(0,i.useState)(e.stylisPlugins),r=t[0],n=t[1],o=le(),s=(0,i.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),l=(0,i.useMemo)((function(){return re({options:{prefix:!e.disableVendorPrefixes},plugins:r})}),[e.disableVendorPrefixes,r]);return(0,i.useEffect)((function(){a()(r,e.stylisPlugins)||n(e.stylisPlugins)}),[e.stylisPlugins]),i.createElement(ne.Provider,{value:s},i.createElement(oe.Provider,{value:l},e.children))}var he=function(){function e(e,t){var r=this;this.inject=function(e,t){void 0===t&&(t=se);var n=r.name+t.hash;e.hasNameForId(r.id,n)||e.insertRules(r.id,n,t(r.rules,n,"@keyframes"))},this.toString=function(){return A(12,String(r.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=se),this.name+e.hash},e}(),de=/([A-Z])/,pe=/([A-Z])/g,fe=/^ms-/,me=function(e){return"-"+e.toLowerCase()};function ge(e){return de.test(e)?e.replace(pe,me).replace(fe,"-ms-"):e}var ye=function(e){return null==e||!1===e||""===e};function _e(e,t,r,n){if(Array.isArray(e)){for(var i,o=[],a=0,s=e.length;a<s;a+=1)""!==(i=_e(e[a],t,r,n))&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));return o}return ye(e)?"":x(e)?"."+e.styledComponentId:_(e)?"function"!=typeof(c=e)||c.prototype&&c.prototype.isReactComponent||!t?e:_e(e(t),t,r,n):e instanceof he?r?(e.inject(r,n),e.getName(n)):e:m(e)?function e(t,r){var n,i,o=[];for(var a in t)t.hasOwnProperty(a)&&!ye(t[a])&&(Array.isArray(t[a])&&t[a].isCss||_(t[a])?o.push(ge(a)+":",t[a],";"):m(t[a])?o.push.apply(o,e(t[a],a)):o.push(ge(a)+": "+(n=a,(null==(i=t[a])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||n in l?String(i).trim():i+"px")+";")));return r?[r+" {"].concat(o,["}"]):o}(e):e.toString();var c}var ve=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function xe(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return _(e)||m(e)?ve(_e(f(g,[e].concat(r)))):0===r.length&&1===e.length&&"string"==typeof e[0]?e:ve(_e(f(e,r)))}new Set;var be=function(e,t,r){return void 0===r&&(r=y),e.theme!==r.theme&&e.theme||t||r.theme},we=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Ee=/(^-|-$)/g;function Te(e){return e.replace(we,"-").replace(Ee,"")}var Se=function(e){return X(K(e)>>>0)};function Ae(e){return"string"==typeof e&&!0}var Pe=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Ie=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function ke(e,t,r){var n=e[r];Pe(t)&&Pe(n)?Ce(n,t):e[r]=t}function Ce(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=0,o=r;i<o.length;i++){var a=o[i];if(Pe(a))for(var s in a)Ie(s)&&ke(e,a[s],s)}return e}var Me=i.createContext(),ze=Me.Consumer;function De(e){var t=(0,i.useContext)(Me),r=(0,i.useMemo)((function(){return function(e,t){return e?_(e)?e(t):Array.isArray(e)||"object"!=typeof e?A(8):t?p({},t,{},e):e:A(14)}(e.theme,t)}),[e.theme,t]);return e.children?i.createElement(Me.Provider,{value:r},e.children):null}var Le={};function Fe(e,t,r){var n=x(e),o=!Ae(e),a=t.attrs,s=void 0===a?g:a,l=t.componentId,c=void 0===l?function(e,t){var r="string"!=typeof e?"sc":Te(e);Le[r]=(Le[r]||0)+1;var n=r+"-"+Se("5.3.6"+r+Le[r]);return t?t+"-"+n:n}(t.displayName,t.parentComponentId):l,h=t.displayName,f=void 0===h?function(e){return Ae(e)?"styled."+e:"Styled("+v(e)+")"}(e):h,m=t.displayName&&t.componentId?Te(t.displayName)+"-"+t.componentId:t.componentId||c,b=n&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,w=t.shouldForwardProp;n&&e.shouldForwardProp&&(w=t.shouldForwardProp?function(r,n,i){return e.shouldForwardProp(r,n,i)&&t.shouldForwardProp(r,n,i)}:e.shouldForwardProp);var E,T=new $(r,m,n?e.componentStyle:void 0),S=T.isStatic&&0===s.length,A=function(e,t){return function(e,t,r,n){var o=e.attrs,a=e.componentStyle,s=e.defaultProps,l=e.foldedComponentIds,c=e.shouldForwardProp,h=e.styledComponentId,d=e.target,f=function(e,t,r){void 0===e&&(e=y);var n=p({},t,{theme:e}),i={};return r.forEach((function(e){var t,r,o,a=e;for(t in _(a)&&(a=a(n)),a)n[t]=i[t]="className"===t?(r=i[t],o=a[t],r&&o?r+" "+o:r||o):a[t]})),[n,i]}(be(t,(0,i.useContext)(Me),s)||y,t,o),m=f[0],g=f[1],v=function(e,t,r,n){var i=le(),o=ce();return t?e.generateAndInjectStyles(y,i,o):e.generateAndInjectStyles(r,i,o)}(a,n,m),x=r,b=g.$as||t.$as||g.as||t.as||d,w=Ae(b),E=g!==t?p({},t,{},g):t,T={};for(var S in E)"$"!==S[0]&&"as"!==S&&("forwardedAs"===S?T.as=E[S]:(c?c(S,u,b):!w||u(S))&&(T[S]=E[S]));return t.style&&g.style!==t.style&&(T.style=p({},t.style,{},g.style)),T.className=Array.prototype.concat(l,h,v!==h?v:null,t.className,g.className).filter(Boolean).join(" "),T.ref=x,(0,i.createElement)(b,T)}(E,e,t,S)};return A.displayName=f,(E=i.forwardRef(A)).attrs=b,E.componentStyle=T,E.displayName=f,E.shouldForwardProp=w,E.foldedComponentIds=n?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):g,E.styledComponentId=m,E.target=n?e.target:e,E.withComponent=function(e){var n=t.componentId,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(t,["componentId"]),o=n&&n+"-"+(Ae(e)?e:Te(v(e)));return Fe(e,p({},i,{attrs:b,componentId:o}),r)},Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=n?Ce({},e.defaultProps,t):t}}),E.toString=function(){return"."+E.styledComponentId},o&&d()(E,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),E}var Re=function(e){return function e(t,r,i){if(void 0===i&&(i=y),!(0,n.isValidElementType)(r))return A(1,String(r));var o=function(){return t(r,i,xe.apply(void 0,arguments))};return o.withConfig=function(n){return e(t,r,p({},i,{},n))},o.attrs=function(n){return e(t,r,p({},i,{attrs:Array.prototype.concat(i.attrs,n).filter(Boolean)}))},o}(Fe,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Re[e]=Re(e)}));var Be=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=J(e),q.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,r,n){var i=n(_e(this.rules,t,r,n).join(""),""),o=this.componentId+e;r.insertRules(o,o,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,r,n){e>2&&q.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,t,r,n)},e}();function Oe(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=xe.apply(void 0,[e].concat(r)),a="sc-global-"+Se(JSON.stringify(o)),s=new Be(o,a);function l(e){var t=le(),r=ce(),n=(0,i.useContext)(Me),o=(0,i.useRef)(t.allocateGSInstance(a)).current;return t.server&&c(o,e,t,n,r),(0,i.useLayoutEffect)((function(){if(!t.server)return c(o,e,t,n,r),function(){return s.removeStyles(o,t)}}),[o,e,t,n,r]),null}function c(e,t,r,n,i){if(s.isStatic)s.renderStyles(e,S,r,i);else{var o=p({},t,{theme:be(t,n,l.defaultProps)});s.renderStyles(e,o,r,i)}}return i.memo(l)}function Ne(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=xe.apply(void 0,[e].concat(r)).join(""),o=Se(i);return new he(o,i)}var je=function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var r=O();return"<style "+[r&&'nonce="'+r+'"',b+'="true"','data-styled-version="5.3.6"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?A(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return A(2);var r=((t={})[b]="",t["data-styled-version"]="5.3.6",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),n=O();return n&&(r.nonce=n),[i.createElement("style",p({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new q({isServer:!0}),this.sealed=!1}var t=e.prototype;return t.collectStyles=function(e){return this.sealed?A(2):i.createElement(ue,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return A(3)},e}(),Ue=function(e){var t=i.forwardRef((function(t,r){var n=(0,i.useContext)(Me),o=e.defaultProps,a=be(t,n,o);return i.createElement(e,p({},t,{theme:a,ref:r}))}));return d()(t,e),t.displayName="WithTheme("+v(e)+")",t},Ve=function(){return(0,i.useContext)(Me)},Ge={StyleSheet:q,masterSheet:ae},He=Re},564:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Link=t.Wrapper=t.ToolBar=t.Li=void 0;const i=n(r(788)),o=(0,i.default)("div")`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  box-sizing: border-box;
  transition: box-shadow 1s cubic-bezier(0.8, 1, 0.2, 1) 3s;
  ${({shadow:e,width:t,color:r,theme:n})=>`\n    width: ${t||"100%"};\n    box-shadow: ${e?"0px 3px 5px -2px rgb(0 0 0 / 20%), 0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%);":"none"};\n    background-color: ${r||n?.primary||"#FFFE"};\n    color: ${n?.accent||"#000"};\n  `}
`;t.Wrapper=o;const a=(0,i.default)("ul")`
  ${({fixed:e,direction:t})=>`\n    position: ${e?"fixed":"relative"};\n    flex-direction: ${t||"row"};\n  `}
  padding: 0px 25px;
  margin: 0;
  list-style-type: none;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  height: 100%;
  min-height: 74px;
  gap: 10px;
  padding-left: 54px;
`;t.ToolBar=a;const s=(0,i.default)("a")`
  display: inline-block;
  text-align: center;
  text-decoration: none;
  text-transform: uppercase;
  color: inherit;
  font-family: Roboto;
  font-weight: 700;
  padding: 0 15px;
  font-size: 1em;
  line-height: 74px;

  ${({active:e,theme:t})=>e?`\n      margin-top: 4px;\n      background: linear-gradient(360deg, #DFE667 -408.97%, rgba(223, 230, 103, 0) 78.21%);\n      border-bottom: 4px solid ${t?.accent||"#000"}\n    `:""}
`;t.Link=s;const l=(0,i.default)("li")`
  display: block;
  height: 100%;
  margin: 0;
  padding: 0;
  cursor: pointer;
  transition: all 0.5s;

  &:hover {
    background-color: rgba(40, 30, 30, 0.1);
  }
`;t.Li=l},418:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(893),o=n(r(294)),a=r(564),s=({children:e,...t})=>(0,i.jsx)(a.Wrapper,{...t,children:(0,i.jsx)(a.ToolBar,{children:o.default.Children.map(e,(e=>{if(e.props)return o.default.cloneElement(e,t)}))?.filter(Boolean)})});s.Item=({children:e,...t})=>(0,i.jsx)(a.Li,{children:(0,i.jsx)(a.Link,{href:"#",...t,children:e})}),t.default=s},795:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(893),o=r(294),a=n(r(788)),s=n(r(449)),l=e=>(0,i.jsx)(p,{...e,children:(0,i.jsxs)(s.default,{areas:[["icon","title","indicator"]],rows:["auto"],columns:["auto","1fr","auto"],gap:"1em",alignItems:"center",children:[(0,i.jsx)(s.default.Panel,{area:"icon",children:(0,i.jsx)(u,{color:e.color})}),(0,i.jsx)(s.default.Panel,{area:"title",justifySelf:"left",children:(0,i.jsx)(h,{color:e.color,children:e.title})}),(0,i.jsx)(s.default.Panel,{area:"indicator",children:(0,i.jsx)(d,{color:e.color,isOpen:e.isOpen,children:""})})]})}),c=a.default.div`
  width: ${({width:e})=>e};
`,u=a.default.div`
  background: ${({color:e})=>e};
  height: calc(1em / 16);
  width: 1em;
  margin: 0 calc(1em * 0.35 / 2);

  ::before {
    content: '';
    display: block;
    background: ${({color:e})=>e};
    height: calc(1em / 16);
    width: 1em;
    transform: translateY(calc(-4 * 1em / 16)) scaleX(1.35);
  }

  ::after {
    content: '';
    display: block;
    background: ${({color:e})=>e};
    height: calc(1em / 16);
    width: 1em;
    transform: translateY(calc(3 * 1em / 16)) scaleX(0.51);
  }
`,h=a.default.div`
  color: ${({color:e})=>e};
`,d=(0,a.default)("div")`
  margin: 0 0.5em;
  font-size: 0.5em;
  color: ${({color:e})=>e};
  transition: transform 0.5s ease;
  transform: scaleX(2) ${({isOpen:e})=>e?"scaleY(-1)":""};
`,p=(0,a.default)("button")`
  width: 100%;
  font: inherit;
  background: ${({background:e})=>e};
  padding: 8px 16px;
  border: 0;

  :hover {
    cursor: pointer;
  }
`,f=a.default.div`
  overflow-y: hidden;
  width: 100%;
  transition: max-height 0.5s ease;
  ${({isOpen:e,maxHeight:t})=>e?`\n    max-height: ${t}px;\n  `:"\n    max-height: 0px;\n  "}
`,m=a.default.div`
  position: relative;
  width: 100%;
`;t.default=({defaultIsOpen:e=!1,title:t="",width:r="100%",color:n="black",background:a="transparent",children:s})=>{const[u,h]=(0,o.useState)(e),d=(0,o.useRef)(null),p=(0,o.useCallback)((()=>{h(!u)}),[u,h]),g=d.current?.clientHeight||1e3;return(0,i.jsxs)(c,{width:r,children:[(0,i.jsx)(l,{title:t,color:n,background:a,isOpen:u,onClick:p}),(0,i.jsx)(f,{isOpen:u,maxHeight:g,children:(0,i.jsx)(m,{ref:d,children:s})})]})}},17:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(795));t.default=i.default},18:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(893),o=n(r(788)),a=n(r(847)),s=Object.assign((e=>{const{children:t,...r}=e;return(0,i.jsx)(c,{...r,children:t})}),{Panel:a.default});s.Panel=a.default;const l=({areas:e,rows:t,columns:r,gap:n,alignItems:i})=>`\n    grid-template-areas: ${e.map((e=>`"${e.join(" ")}"`)).join("\n")};\n    grid-template-rows: ${t.join(" ")};\n    grid-template-columns: ${r.join(" ")};\n    gap: ${n||"0px"};\n    ${i?`align-items: ${i};`:""}\n\n  `,c=(0,o.default)("div")`
  display: grid;
  ${l}
  ${({byWidth:e})=>(e?e.map((({minWidth:e,...t})=>`\n        @media (min-width: ${e}px) {\n          ${l(t)}\n        }\n      `)):[]).join("\n")}
`;t.default=s},847:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(893),o=(0,n(r(788)).default)("div")`
  grid-area: ${({area:e})=>e};
  ${({justifySelf:e})=>e?`justify-self: ${e}`:""};
`;t.default=({children:e,...t})=>(0,i.jsx)(o,{...t,children:e})},449:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(18));t.default=i.default},10:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HX=t.H6=t.H5=t.H4=t.H3=t.H2=t.H1=void 0;const i=r(893),o=n(r(788)),a="\n  font-size: 1em;\n  padding: 0;\n  margin: 0;\n";t.H1=o.default.h1`
  ${a}
`,t.H2=o.default.h2`
  ${a}
`,t.H3=o.default.h3`
  ${a}
`,t.H4=o.default.h4`
  ${a}
`,t.H5=o.default.h5`
  ${a}
`,t.H6=o.default.h6`
  ${a}
`;const s=[t.H1,t.H2,t.H3,t.H4,t.H5,t.H6];t.HX=({children:e,headingLevel:t,...r})=>{const n=s[t-1];return(0,i.jsx)(n,{...r,children:e})}},455:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(893),o=n(r(788)),a=r(431),s=o.default.button`
  border: 0;
  font: inherit;
  text-align: ${({orientation:e})=>e};
  cursor: pointer;

  position: relative;
  width: ${({width:e})=>e};
  height: ${({height:e})=>e};
  padding-left: calc(1em * 41 / (16 * 1.2));
  overflow: hidden;

  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 0.5em;

  background: ${({background:e})=>e};

  border-top-left-radius: ${({orientation:e})=>"left"===e?"0.75em":"0"};
  border-top-right-radius: ${({orientation:e})=>"right"===e?"0.75em":"0"};
  border-bottom-right-radius: ${({orientation:e})=>"right"===e?"0.75em":"0"};
  border-bottom-left-radius: ${({orientation:e})=>"left"===e?"0.75em":"0"};

  > * {
    display: block;
    padding: 0;
    margin: 0;
    width: 90%;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    cursor: pointer;
  }

  > label {
    font-size: 1.2em;
    font-weight: bolder;
  }

  > span {
    font-size: 1em;
  }

  ::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: ${({orientation:e})=>"right"===e?"unset":"0"};
    right: ${({orientation:e})=>"left"===e?"unset":"0"};

    width: 1em;
    background: ${({flashColor:e})=>e};
  }

  :focus-visible {
    outline: 1px ${({flashColor:e})=>e} solid;
  }
`;t.default=({flashColor:e="#e0e0e0",background:t="#f0f0f0",title:r,subtitle:n="",orientation:o="left",width:l="100%",height:c="100%",onClick:u})=>{const[h]=(0,a.useId)();return(0,i.jsxs)(s,{orientation:o,flashColor:e,background:t,width:l,height:c,id:h,onClick:()=>u(r),children:[(0,i.jsx)("label",{htmlFor:h,children:r}),n&&(0,i.jsx)("span",{children:n})]})}},375:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(893),o=r(294),a=n(r(788)),s=n(r(158)),l=n(r(584)),c=(0,a.default)("div")`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;t.default=e=>{const t=(0,o.useRef)(null),r=(0,o.useRef)(null),{cluster:n,clusterOptions:{clusterMaxZoom:a,clusterAreaRadius:u,clusterColor:h,clusterRadius:d,countFont:p,countFontSize:f,countFontColor:m},pointOptions:{pointColor:g,pointRadius:y,onPointClick:_,onClickZoomIn:v}}=(e=>({cluster:e.cluster||!1,clusterOptions:{clusterMaxZoom:e.clusterOptions?.clusterMaxZoom||14,clusterAreaRadius:e.clusterOptions?.clusterAreaRadius||50,clusterColor:e.clusterOptions?.clusterColor||l.default.black,clusterRadius:e.clusterOptions?.clusterRadius||20,countFont:e.clusterOptions?.countFont||["Open Sans Regular"],countFontSize:e.clusterOptions?.countFontSize||14,countFontColor:e.clusterOptions?.countFontColor||l.default.white},pointOptions:{pointColor:e.pointOptions?.pointColor||l.default.black,pointRadius:e.pointOptions?.pointRadius||6,onPointClick:e.pointOptions?.onPointClick||Function(),onClickZoomIn:e.pointOptions?.onClickZoomIn||12}}))(e),x=e.sourceJson,b=e.initialState?.height||"800px",w=e.initialState?.width||"800px";return s.default.accessToken=e.token,(0,o.useEffect)((()=>{if(r.current)return;const n=e.initialState?.long||-3.5,i=e.initialState?.lat||55,o=e.initialState?.zoom||5,a=e.initialState?.style||"mapbox://styles/mapbox/light-v11";return r.current=new s.default.Map({container:t.current,style:a,center:[n,i],zoom:o,attributionControl:!1,testMode:!0}),()=>{r?.current?.remove(),r.current=null}}),[e.initialState?.style,e.initialState?.long,e.initialState?.lat,e.initialState?.zoom,e.initialState?.height,e.initialState?.width]),(0,o.useEffect)((()=>{const e=r.current;e&&x&&e.getSource("source")?.setData(x)}),[x]),(0,o.useEffect)((()=>{const e=r.current;e&&e.on("load",(()=>{e.addSource("source",{type:"geojson",data:x,cluster:n,clusterMaxZoom:a,clusterRadius:u}),e.addLayer({id:"clusters",type:"circle",source:"source",filter:["has","point_count"],paint:{"circle-color":h,"circle-radius":d}}),e.addLayer({id:"cluster-count",type:"symbol",source:"source",filter:["has","point_count"],layout:{"text-field":["get","point_count_abbreviated"],"text-font":p,"text-size":f},paint:{"text-color":m}}),e.addLayer({id:"unclustered-point",type:"circle",source:"source",filter:["!",["has","point_count"]],paint:{"circle-color":g,"circle-radius":y}}),e.on("click","clusters",(t=>{const r=e.queryRenderedFeatures(t.point,{layers:["clusters"]}),n=r[0]?.properties?.cluster_id;e.getSource("source").getClusterExpansionZoom(n,((t,n)=>{t||"Point"===r[0].geometry.type&&e.easeTo({center:r[0].geometry.coordinates,zoom:n})}))})),e.on("click","unclustered-point",(t=>{const r=e.queryRenderedFeatures(t.point);"Point"===r[0].geometry.type&&(_(r[0]),e.easeTo({center:r[0].geometry.coordinates,zoom:Math.max(e.getZoom(),v)}))})),e.on("mouseenter","clusters",(()=>{e.getCanvas().style.cursor="pointer"})),e.on("mouseleave","clusters",(()=>{e.getCanvas().style.cursor=""}))}))})),(0,i.jsx)(c,{ref:t,height:b,width:w})}},812:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(893),o=r(294),a=n(r(788)),s=a.default.form`
  display: flex;
  width: 100%;
  min-width: 250px;
  align-items: center;
  justify-content: space-between;
  border: 1px solid black;
  border-radius: 10px;
  margin: 1em;
  background: ${({color:e})=>e};
  > * {
    margin: 0.5em;
    padding: 0.5em;
  }
`,l=a.default.input`
  flex-grow: 1;
  flex-shrink: 1;
  border: 0;
  font: inherit;

  :focus {
    box-shadow: inset 0 0 0 1px ${({color:e})=>e};
    border-radius: 7px;
    outline: 0;
  }
`,c=a.default.button`
  position: relative;
  font: inherit;
  flex-grow: 0;
  flex-shrink: 0;
  width: 2em;
  height: 2em;
  box-sizing: border-box;
  background: transparent;
  border: 0;

  :focus {
    ::before {
      box-shadow: 0 0 5px 1px ${({color:e})=>e};
    }
    ::after {
      box-shadow: 0 0 5px 1px ${({color:e})=>e};
    }
    outline: 0;
  }

  ::before {
    content: '';
    display: block;
    position: absolute;
    left: 0;
    top: 0;
    width: calc(80% - 2 * 4em / 16);
    height: calc(80% - 2 * 4em / 16);
    border: calc(4em / 16) solid ${({color:e})=>e};
    border-radius: 50%;
  }

  ::after {
    content: '';
    display: block;
    position: absolute;
    right: 0;
    bottom: 0;
    height: calc(4em / 16);
    width calc(1.41 * 100% - 1.41 * 40% - 40%);
    background: ${({color:e})=>e};
    transform: rotateZ(40deg);
    transform-origin: bottom right
  }

  :hover {
    cursor: pointer;
  }
`;t.default=({placeholder:e,color:t="black",background:r="transparent",debounce:n=250,onSubmit:a})=>{const[u,h]=(0,o.useState)(null),[d,p]=(0,o.useState)(!0),f=(0,o.useRef)(null),m=(0,o.useCallback)((e=>{const t=e.target;h(t.value||null),p(!1)}),[h,p]),g=(0,o.useCallback)((e=>{null!==e&&(e.preventDefault(),f.current?.blur()),d||(a(u),p(!0))}),[u,d,p,a]);return(0,o.useEffect)((()=>{const e=setTimeout((()=>{g(null)}),n);return()=>clearTimeout(e)}),[n,u,g]),(0,i.jsxs)(s,{color:r,onSubmit:g,children:[(0,i.jsx)(l,{placeholder:e,type:"search",name:"search",color:t,onChange:m}),(0,i.jsx)(c,{color:t,ref:f})]})}},425:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(893),o=r(431),a=n(r(788)),s=r(332),l=a.default.section`
  background: ${({background:e})=>e};
  padding: ${({padding:e})=>e};
  width: ${({width:e})=>e};
  height: ${({height:e})=>e};
`,c=(0,a.default)(s.HX)`
  font-size: ${({size:e})=>e};
  margin: 0;
  padding: 0;
  margin-bottom: ${({gap:e})=>e};
`;t.default=({title:e,children:t,headingLevel:r,headingGap:n="0.5em",headingSize:a="1.2em",background:s="#f0f0f0",padding:u="1em",width:h="100ch",height:d="auto"})=>{const[p]=(0,o.useId)();return(0,i.jsxs)(l,{"aria-labelledby":p,background:s,padding:u,width:h,height:d,children:[(0,i.jsx)(c,{headingLevel:r,size:a,gap:n,children:e}),t]})}},799:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(893);t.default=e=>(0,n.jsx)("div",{children:e.text})},584:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={white:"#FFFFFF",black:"#000000",grey:"#D1D1D1",errorRed:"#e83f36",hoverGrey:"#c3c3c3",green:"#27847A"}},332:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Section=t.Map=t.AppBar=t.ListCard=t.Search=t.Drawer=t.Grid=t.TestComponent=void 0;var a=r(799);Object.defineProperty(t,"TestComponent",{enumerable:!0,get:function(){return o(a).default}});var s=r(449);Object.defineProperty(t,"Grid",{enumerable:!0,get:function(){return o(s).default}});var l=r(17);Object.defineProperty(t,"Drawer",{enumerable:!0,get:function(){return o(l).default}});var c=r(812);Object.defineProperty(t,"Search",{enumerable:!0,get:function(){return o(c).default}});var u=r(455);Object.defineProperty(t,"ListCard",{enumerable:!0,get:function(){return o(u).default}});var h=r(418);Object.defineProperty(t,"AppBar",{enumerable:!0,get:function(){return o(h).default}});var d=r(375);Object.defineProperty(t,"Map",{enumerable:!0,get:function(){return o(d).default}}),i(r(10),t);var p=r(425);Object.defineProperty(t,"Section",{enumerable:!0,get:function(){return o(p).default}})}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e].call(o.exports,o,o.exports,i),o.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},i.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var o=Object.create(null);i.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},i.d(o,a),o},i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e}(),i.nc=void 0,function(){"use strict";var e,t=i(294),r=i.t(t,2),n=i(745);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const a="popstate";function s(e,t){if(!1===e||null==e)throw new Error(t)}function l(e){return{usr:e.state,key:e.key}}function c(e,t,r,n){return void 0===r&&(r=null),o({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?h(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function h(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function d(e){let t="undefined"!=typeof window&&void 0!==window.location&&"null"!==window.location.origin?window.location.origin:window.location.href,r="string"==typeof e?e:u(e);return s(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}var p;function f(e,t,r){void 0===r&&(r="/");let n=E(("string"==typeof t?h(t):t).pathname||"/",r);if(null==n)return null;let i=m(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]))?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let e=0;null==o&&e<i.length;++e)o=x(i[e],w(n));return o}function m(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(s(a.relativePath.startsWith(n),'Absolute route path "'+a.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(n.length));let l=S([n,a.relativePath]),c=r.concat(a);e.children&&e.children.length>0&&(s(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),m(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:v(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let r of g(e.path))i(e,t,r);else i(e,t)})),t}function g(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===n.length)return i?[o,""]:[o];let a=g(n.join("/")),s=[];return s.push(...a.map((e=>""===e?o:[o,e].join("/")))),i&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));const y=/^:\w+$/,_=e=>"*"===e;function v(e,t){let r=e.split("/"),n=r.length;return r.some(_)&&(n+=-2),t&&(n+=2),r.filter((e=>!_(e))).reduce(((e,t)=>e+(y.test(t)?3:""===t?1:10)),n)}function x(e,t){let{routesMeta:r}=e,n={},i="/",o=[];for(let e=0;e<r.length;++e){let a=r[e],s=e===r.length-1,l="/"===i?t:t.slice(i.length)||"/",c=b({path:a.relativePath,caseSensitive:a.caseSensitive,end:s},l);if(!c)return null;Object.assign(n,c.params);let u=a.route;o.push({params:n,pathname:S([i,c.pathname]),pathnameBase:A(S([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=S([i,c.pathnameBase]))}return o}function b(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!0),T("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((e,t)=>(n.push(t),"/([^\\/]+)")));return e.endsWith("*")?(n.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce(((e,t,r)=>{if("*"===t){let e=s[r]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(r){return T(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+r+")."),e}}(s[r]||"",t),e}),{}),pathname:o,pathnameBase:a,pattern:e}}function w(e){try{return decodeURI(e)}catch(t){return T(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function E(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function T(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}const S=e=>e.join("/").replace(/\/\/+/g,"/"),A=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");class P extends Error{}class I{constructor(e,t,r,n){void 0===n&&(n=!1),this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function k(e){return e instanceof I}const C=["post","put","patch","delete"],M=(new Set(C),["get",...C]);function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z.apply(this,arguments)}new Set(M),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement;"function"==typeof Object.is&&Object.is;const{useState:D,useEffect:L,useLayoutEffect:F,useDebugValue:R}=r;"undefined"==typeof window||void 0===window.document||window.document.createElement,r.useSyncExternalStore;const B=t.createContext(null),O=t.createContext(null),N=t.createContext(null),j=t.createContext(null),U=t.createContext(null),V=t.createContext({outlet:null,matches:[]}),G=t.createContext(null);function H(){return null!=t.useContext(U)}function q(){let e=function(){var e;let r=t.useContext(G),n=function(e){let r=t.useContext(N);return r||s(!1),r}(Y.UseRouteError),i=t.useContext(V),o=i.matches[i.matches.length-1];return r||(i||s(!1),!o.route.id&&s(!1),null==(e=n.errors)?void 0:e[o.route.id])}(),r=k(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unhandled Thrown Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),n?t.createElement("pre",{style:o},n):null,t.createElement("p",null," Hey developer "),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own",t.createElement("code",{style:a},"errorElement")," props on",t.createElement("code",{style:a},"<Route>")))}class W extends t.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?t.createElement(G.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function Z(e){let{routeContext:r,match:n,children:i}=e,o=t.useContext(B);return o&&n.route.errorElement&&(o._deepestRenderedBoundaryId=n.route.id),t.createElement(V.Provider,{value:r},i)}var X,Y,K,J,Q;function $(e){s(!1)}function ee(r){let{basename:n="/",children:i=null,location:o,navigationType:a=e.Pop,navigator:l,static:c=!1}=r;H()&&s(!1);let u=n.replace(/^\/*/,"/"),d=t.useMemo((()=>({basename:u,navigator:l,static:c})),[u,l,c]);"string"==typeof o&&(o=h(o));let{pathname:p="/",search:f="",hash:m="",state:g=null,key:y="default"}=o,_=t.useMemo((()=>{let e=E(p,u);return null==e?null:{pathname:e,search:f,hash:m,state:g,key:y}}),[u,p,f,m,g,y]);return null==_?null:t.createElement(j.Provider,{value:d},t.createElement(U.Provider,{children:i,value:{location:_,navigationType:a}}))}function te(r){let{children:n,location:i}=r,o=t.useContext(O);return function(r,n){H()||s(!1);let{navigator:i}=t.useContext(j),o=t.useContext(N),{matches:a}=t.useContext(V),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,p=(H()||s(!1),t.useContext(U).location);if(n){var m;let e="string"==typeof n?h(n):n;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||s(!1),d=e}else d=p;let g=d.pathname||"/",y=f(r,{pathname:"/"===u?g:g.slice(u.length)||"/"}),_=function(e,r,n){if(void 0===r&&(r=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}let i=e,o=null==n?void 0:n.errors;if(null!=o){let e=i.findIndex((e=>e.route.id&&(null==o?void 0:o[e.route.id])));e>=0||s(!1),i=i.slice(0,Math.min(i.length,e+1))}return i.reduceRight(((e,a,s)=>{let l=a.route.id?null==o?void 0:o[a.route.id]:null,c=n?a.route.errorElement||t.createElement(q,null):null,u=()=>t.createElement(Z,{match:a,routeContext:{outlet:e,matches:r.concat(i.slice(0,s+1))}},l?c:void 0!==a.route.element?a.route.element:e);return n&&(a.route.errorElement||0===s)?t.createElement(W,{location:n.location,component:c,error:l,children:u()}):u()}),null)}(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:S([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:S([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,o||void 0);return n&&_?t.createElement(U.Provider,{value:{location:z({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:e.Pop}},_):_}(o&&!n?o.router.routes:ne(n),i)}!function(e){e.UseRevalidator="useRevalidator"}(X||(X={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Y||(Y={})),function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(K||(K={})),new Promise((()=>{}));class re extends t.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){console.error("<Await> caught the following error during render",e,t)}render(){let{children:e,errorElement:t,resolve:r}=this.props,n=null,i=K.pending;if(r instanceof Promise)if(this.state.error){K.error;let e=this.state.error;Promise.reject().catch((()=>{})),Object.defineProperty(n,"_tracked",{get:()=>!0}),Object.defineProperty(n,"_error",{get:()=>e})}else r._tracked?void 0!==n._error?K.error:void 0!==n._data?K.success:K.pending:(K.pending,Object.defineProperty(r,"_tracked",{get:()=>!0}),r.then((e=>Object.defineProperty(r,"_data",{get:()=>e})),(e=>Object.defineProperty(r,"_error",{get:()=>e}))));else K.success,Promise.resolve(),Object.defineProperty(n,"_tracked",{get:()=>!0}),Object.defineProperty(n,"_data",{get:()=>r});if(i===K.error&&n._error instanceof AbortedDeferredError)throw neverSettledPromise;if(i===K.error&&!t)throw n._error;if(i===K.error)return React.createElement(AwaitContext.Provider,{value:n,children:t});if(i===K.success)return React.createElement(AwaitContext.Provider,{value:n,children:e});throw n}}function ne(e,r){void 0===r&&(r=[]);let n=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;if(e.type===t.Fragment)return void n.push.apply(n,ne(e.props.children,r));e.type!==$&&s(!1),e.props.index&&e.props.children&&s(!1);let o=[...r,i],a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(a.children=ne(e.props.children,o)),n.push(a)})),n}function ie(r){let{basename:n,children:i,window:o}=r,s=t.useRef();var h;null==s.current&&(s.current=(void 0===(h={window:o,v5Compat:!0})&&(h={}),function(t,r,n,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,h=o.history,p=e.Pop,f=null;function m(){p=e.Pop,f&&f({action:p,location:g.location})}let g={get action(){return p},get location(){return t(o,h)},listen(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(a,m),f=e,()=>{o.removeEventListener(a,m),f=null}},createHref(e){return r(o,e)},encodeLocation(e){let t=d("string"==typeof e?e:u(e));return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,r){p=e.Push;let i=c(g.location,t,r);n&&n(i,t);let a=l(i),u=g.createHref(i);try{h.pushState(a,"",u)}catch(e){o.location.assign(u)}s&&f&&f({action:p,location:g.location})},replace:function(t,r){p=e.Replace;let i=c(g.location,t,r);n&&n(i,t);let o=l(i),a=g.createHref(i);h.replaceState(o,"",a),s&&f&&f({action:p,location:g.location})},go(e){return h.go(e)}};return g}((function(e,t){let{pathname:r,search:n,hash:i}=e.location;return c("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:u(t)}),null,h)));let p=s.current,[f,m]=t.useState({action:p.action,location:p.location});return t.useLayoutEffect((()=>p.listen(m)),[p]),t.createElement(ee,{basename:n,children:i,location:f.location,navigationType:f.action,navigator:p})}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(J||(J={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Q||(Q={}));var oe=i(788),ae=i(332),se=i.p+"a870f4534b6062ab0928.png",le=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.23644,54.57304]},"properties":{"Name":"Tees Valley Hydrogen Transport Hub","Link":"https://www.gov.uk/government/publications/tees-valley-multi-modal-hydrogen-transport-hub","Part of larger programme?":"Yes","Larger Programme Name":"Office for Zero Emission Vehicles\' Hydrogen for Transport Programme (HTP) ","Project Type":"R&D facility","Scope/Goal":"The purpose of the Hydrogen Transport Hub was to deliver evidence to support the use of hydrogen for transport, informing the Department for Transport\'s (DfT)\'s long term strategy. In October 2022, the Government announced a new 20 million competition (the Hydrogen Transport Hub competition) for the hub. The previous competition saw over 2.6 million awarded to various winners to develop 21 vehicles. That included Toyota, which provided hydrogen vehicles for local police forces.","Funding":"3m","Type of Hydrogen":"Electrolytic","Region (?)":"North East (England)","Name of Lead Partner":"Tees Valley Combined Authority","Address of Lead Partner":"47 Rothwell Crescent, Stockton-On-Tees, TS19 9AN, UNITED KINGDOM   ","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Tees Valley Hydrogen Transport Hub","Address of Main Physical Facility":"Tees Valley","Timeline (Project Maturity)":"2020-2025","Key Partners":"Materials Processing Institute, Northern Gas Networks ","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.07132,53.578133]},"properties":{"Name":"Project Oyster","Link":"https://oysterh2.eu/","Part of larger programme?":"Yes","Larger Programme Name":"Fuel Cells and Hydrogen Joint Undertaking (FCH2-JU) (now Clean Hydrogen Partnership) - Horizon 2020","Project Type":"Feasibility study","Scope/Goal":"The Oyster project will lead to the development of a combined wind turbine and electrolyser system designed for operation in marine environments, to advance the technology needed for future offshore hydrogen production. Electrolyser specialists ITM Power will work with offshore wind developer rsted and wind turbine manufacturer Siemens Gamesa Renewable Energy to develop and test a MW-scale fully marinised electrolyser, in a shoreside pilot trial. The project will be coordinated by Element Energy. The first phase includes an R&D phase, a pilot demonstration, and planning and design for roll-out.","Funding":"5m","Type of Hydrogen":"Electrolytic","Region (?)":"Yorkshire and The Humber","Name of Lead Partner":"Element Energy","Address of Lead Partner":"Sheraton House. Castle Park. Cambridge. CB3 OAX","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"East Coast O&M Hub","Address of Main Physical Facility":"Dong Energy, East Side Road, Royal Dock, Grimsby, North Lincolnshire, DN31 3NB","Timeline (Project Maturity)":"2021-2024","Key Partners":"ITM Power, rsted, Siemens, Gamesa Renewable, and Element Energy","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.2502445,53.6333774]},"properties":{"Name":"Gigastack","Link":"https://gigastack.co.uk/ ","Part of larger programme?":"Yes","Larger Programme Name":"Low Carbon Hydrogen Supply Competition","Project Type":"Feasibility study","Scope/Goal":"Gigastack is a multiphase programme to prove economically viable renewable hydrogen at scale and demonstrate the full decarbonisation potential of offshore wind in the UKs largest industrial cluster by: developing electrolyser technology to produce renewable hydrogen at large-scale; coupling a large offshore wind farm with a large carbon emitting industrial zone in the UK; and decarbonising large industrial clusters.","Funding":"9.3m (phase two)","Type of Hydrogen":"Electrolytic","Region (?)":"Yorkshire and The Humber","Name of Lead Partner":"Phillips 66 Limited","Address of Lead Partner":"Humber Refinery, Eastfield Rd, South Killingholme, Immingham DN40 3DW, United Kingdom","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Hornsea Project","Address of Main Physical Facility":"89 km (55.3 miles) off the Yorkshire coast","Timeline (Project Maturity)":"2019 - 2025","Key Partners":"Orsted, ITM Power, Element Energy","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.255333,53.653999]},"properties":{"Name":"Project Mayflower","Link":"https://www.uniper.energy/projects-and-cases/port-immingham-decarbonisation-project","Part of larger programme?":"Yes","Larger Programme Name":"Clean Maritime Demonstration Competition","Project Type":"Feasibility study","Scope/Goal":"The project aims to develop a scalable decarbonisation solution within the port, which, if successful, would be replicable in other ports. The ambition is to develop c. 20MW green hydrogen production for use at the port as a direct replacement to diesel and heavy fuel oil, or for the production of clean shipping fuels. Unipers Killingholme site could be one of the locations for an electrolyser, powered by renewable energy, to produce hydrogen for the port.","Funding":"140,000","Type of Hydrogen":"Electrolytic","Region (?)":"Yorkshire and The Humber","Name of Lead Partner":"Uniper","Address of Lead Partner":"Compton House, 2300 The Crescent Birmingham Business Park, Solihull B37 7YE, United Kingdom","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Port of Immingham","Address of Main Physical Facility":"Immingham DN40 3LU","Timeline (Project Maturity)":"2021-2025: Front-end engineering design study (FEED) srage","Key Partners":"Siemens Energy, Toyota Tsusho, and Associated British Ports (ABP)","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.23644,54.57304]},"properties":{"Name":"Teesside Hydrogen Vehicle Ecosystem","Link":"https://www.trl.co.uk/projects/teesside-hydrogen-vehicle-ecosystem","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"R&D facility","Scope/Goal":"The Teesside Hydrogen Vehicle Ecosystem seeks to scale hydrogen supply infrastructure in order to achieve sufficient economies of scale to make the production and supply of hydrogen and vehicle support infrastructure affordable. The project\'s solution is to test the feasibility of a complementary multimodal approach, introducing a range of hydrogen heavy- and light-duty vehicles across the Tees Valley region, centred around the Tees Valley Airport.","Funding":"380,286","Type of Hydrogen":"Electrolytic","Region (?)":"Yorkshire and The Humber","Name of Lead Partner":"Toyota","Address of Lead Partner":"Great Burgh, Epsom KT18 5UX","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Tees Valley Airport","Address of Main Physical Facility":"Tees Valley, Darlington DL2 1LU","Timeline (Project Maturity)":"Aug 21 - Mar 22","Key Partners":"Element Energy Limited","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-3.4088,55.9421]},"properties":{"Name":"H100 Fife","Link":"https://www.h100fife.co.uk/","Part of larger programme?":"Yes","Larger Programme Name":"SGN Network Innovation Competition","Project Type":"Feasibility study","Scope/Goal":"The project is developing an electrolytic hydrogen production and distribution network in Buckhaven and Denbeath that will bring renewable hydrogen into homes in 2024, providing zero-carbon fuel for heating and cooking. In the projects first phase, the network will heat around 300 local homes using clean gas produced by a dedicated electrolysis plant, powered by anearby offshorewind turbine.","Funding":"18m","Type of Hydrogen":"Electrolytic","Region (?)":"Scotland","Name of Lead Partner":"Scotland Gas Network","Address of Lead Partner":"5 Lonehead Drive Newbridge Edinburgh Scotland EH28 8TG","Physical facility? Yes/No":"No","Name of Main Physical Facility":"N/A","Address of Main Physical Facility":"N/A","Timeline (Project Maturity)":"2022-2027","Key Partners":"Energy Networks Association (ENA), National Grid, Cadent, Northern Gas Networks and Wales & West Utilities","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-3.53379,50.735833]},"properties":{"Name":"Renewable energy education facility (REEF)","Link":"https://www.exeter.ac.uk/about/vision/capitalstrategy/featuredprojects/research/reef/","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"R&D facility","Scope/Goal":"The Renewable Energy Engineering Facility (REEF) has been developed to enhance teaching facilities for the application of engineering principles to clean energy technologies.\\nThe building has been designed to allow students to directly experience and practice a number of clean energy technologies, including measuring wind speed and energy, measuring bio-diesel efficiency and understanding the electrical output of a solar panel under actual sunlight.","Funding":"1.77m","Type of Hydrogen":"Solar, bio-diesel","Region (?)":"South West (England)","Name of Lead Partner":"University of Exeter","Address of Lead Partner":"Stocker Rd, Exeter EX4 4PY","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"REEF","Address of Main Physical Facility":"Stocker Rd, Exeter EX4 4PY","Timeline (Project Maturity)":"Finished","Key Partners":"University of Exeter","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-3.53379,50.735833]},"properties":{"Name":"Cornwall & Isles of Scilly Marine Hydrogen-Electric Propulsion Centre of Excellence","Link":"https://www.cornwallmarinehydrogencentre.com/","Part of larger programme?":"Yes","Larger Programme Name":"European Regional Development Fund","Project Type":"Testing & certification","Scope/Goal":"Research and development of maritime hydrogen systems - The centre offers expertise and testing of hydrogen marine equipment, allowing for the development of reliable and high quality products through a affordable and efficient pathway. Used for refuelling equipment, storage, air cleaning, batteries, fuel cells, motors and drive trains, control systems, training","Funding":"624 000","Type of Hydrogen":"","Region (?)":"South West (England)","Name of Lead Partner":"University of Exeter","Address of Lead Partner":"Stocker Rd, Exeter EX4 4PY","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"REEF","Address of Main Physical Facility":"Stocker Rd, Exeter EX4 4PY","Timeline (Project Maturity)":"Finished","Key Partners":"Pure Energy Professionals (PEP), University of Exeter","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-5.947099,54.626358]},"properties":{"Name":"Northern Ireland Water Hydrogen Project","Link":"https://www.niwater.com/climatechange/hydrogen-economy/","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"Testing & certification","Scope/Goal":"NI Water undertakes an innovative Oxygen and Hydrogen Demonstrator Project that will deploy a state-of-the-art, 1 Megawatt (MW) electrolyser at a major Wastewater Treatment Works. his will be the first in the UK and Ireland to demonstrate how electrolysis can help to increase processing capacity, reduce carbon emissions and improve flexibility in the electricity grid.","Funding":"5m","Type of Hydrogen":"Wastewater treatment works","Region (?)":"Northern Ireland","Name of Lead Partner":"Northen Ireland Water","Address of Lead Partner":"29A Seagoe Office, Portadown, Craigavon BT63 5QE","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Northern Ireland Water Treatment Plant","Address of Main Physical Facility":"Westland House, 40 Old Westland Rd, Belfast BT14 6TE","Timeline (Project Maturity)":"2021-","Key Partners":"Department for the Economy (DfE), Clean Power Hydrogen","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-5.9366,54.5999]},"properties":{"Name":"GenComm project","Link":"https://docs.google.com/spreadsheets/d/1ruCBorq-YC7lhd2CcM1v6i3dA6TTwR2ANjFwjVDYE-w/edit#gid=352547876","Part of larger programme?":"Yes","Larger Programme Name":"European Regional Development Fund","Project Type":"Feasibility study","Scope/Goal":"GENerating energy secure COMMunities through Smart Renewable Hydrogen. GENCOMM will address the energy sustainability challenges of NWE communities through the implementation of smart hydrogen-based energy matrixes. GENCOMM aims to technically and financially validate the renewable H2 value chain that leads NWE communities into sustainable, local and autonomous energy matrixes. ","Funding":" 9.39m","Type of Hydrogen":"Biogas, solar, wind","Region (?)":"North West (England)","Name of Lead Partner":"Belfast Metropolitan College","Address of Lead Partner":"125153 Millfield, Belfast BT1 1HS","Physical facility? Yes/No":"No","Name of Main Physical Facility":"N/A","Address of Main Physical Facility":"N/A","Timeline (Project Maturity)":"2017-2020","Key Partners":"Viridian Energy Supply Limited, Hy Energy, Pure Energy Centre","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-3.301831,58.963461]},"properties":{"Name":"European Marine Energy Centre","Link":"https://www.emec.org.uk/","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"R&D facility","Scope/Goal":"The European Marine Energy Centre Ltd is a UKAS accredited test and research center focusing on wave and tidal power development based in the Orkney Islands, UK. 65 million portfolio of renewable hydrogen projects that is still growing. The centre has multiple hydrogen-related projects.","Funding":" 39m","Type of Hydrogen":"Wave and tidal energy, wind","Region (?)":"Scotland","Name of Lead Partner":"Energy of Orkney","Address of Lead Partner":"73 Victoria St, Stromness KW16 3BT, Scotland\\n","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"EMEC","Address of Main Physical Facility":"The Charles Clouston Building ORIC, Back Rd, Stromness KW16 3AW","Timeline (Project Maturity)":"Finished","Key Partners":"Energy of Orkney, Highlands and Islands Entreprise, the Scottish Government, Orkney Islands Council, The Carbon Trust","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-2.0947,57.1481]},"properties":{"Name":"Aberdeen Hydrogen Hub (phase 1)","Link":"https://www.aberdeencity.gov.uk/services/environment/h2-aberdeen#:~:text=H2%20Aberdeen%20is%20an%20initiative,hydrogen%20technologies%20in%20the%20city.","Part of larger programme?":"Yes","Larger Programme Name":" Energy Transition Fund","Project Type":"Feasibility study","Scope/Goal":"Aberdeen has a vision to be a world leading hydrogen city and develop Scotlands first commercially scalable, investable, hydrogen production and distribution facility, making use of the regions renewable resources to provide a truly green fuel supply. By kick starting the growth of the hydrogen sector initially for transport, the Hub would scale over time to provide hydrogen for heat, industry and export.  ","Funding":"25m","Type of Hydrogen":"Electrolysis","Region (?)":"Scotland","Name of Lead Partner":"Aberdeen City Council ","Address of Lead Partner":"Marischal College Broad Street, Aberdeen, AB10 1AQ","Physical facility? Yes/No":"No","Name of Main Physical Facility":"N/A","Address of Main Physical Facility":"N/A","Timeline (Project Maturity)":"2021-2024","Key Partners":"Aberdeen City Council, Opportunity North East and Scottish Enterprise","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-3.3014,58.9634]},"properties":{"Name":"BIG HIT (Building Innovative Green Hydrogen Systems in Isolated Territories)","Link":"https://www.bighit.eu/","Part of larger programme?":"Yes","Larger Programme Name":"Surf\'n\'Turf / Fuel Cells and Hydrogen Joint Undertaking (FCHJU)","Project Type":"Feasibility study","Scope/Goal":"Six-year, Orkney based demonstration project which aims to create an integrated low carbon and localised energy system establishing a replicable model of hydrogen production, storage, distribution and use for heat, power and transport. Funded by the Fuel Cells and Hydrogen Joint Undertaking, the project builds on Orkneys SurfnTurf project  an innovative community renewable energy project using wind and tidal energy to produce hydrogen.","Funding":" 7 748 848","Type of Hydrogen":"Fuel cells, bioenergy","Region (?)":"Scotland","Name of Lead Partner":"EMEC","Address of Lead Partner":"The European Marine Energy Centre Limited, The Charles Clouston Building, ORIC, Back Road, Stromness, Orkney, KW16 3AW","Physical facility? Yes/No":"No","Name of Main Physical Facility":"N/A","Address of Main Physical Facility":"N/A","Timeline (Project Maturity)":"2016-2022","Key Partners":"Foundation for the Development of New Hydrogen Technologies in Aragon, Calvera, Community Energy Scotland, DTU, EMEC, Giacomini, ITM Power, Ministry for Transport and Infrastructure, Orkney Island Council, Shapinsay Development Trus, SHFCA, Symbio FCell","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-3.301831,58.963461]},"properties":{"Name":"Surf\'n\'Turf","Link":"https://www.surfnturf.org.uk/","Part of larger programme?":"Yes","Larger Programme Name":"Fuel Cell and Hydrogen Joint Undertaking","Project Type":"Innovation programme","Scope/Goal":"An innovative community project in Orkney that uses surplus electricity generated from renewable energy to split water, making hydrogen gas as a fuel.","Funding":"1.46m","Type of Hydrogen":"Wind and tidal","Region (?)":"Scotland","Name of Lead Partner":"Community Energy Scotland","Address of Lead Partner":"6 Bridge Street, Kirkwall, Orkney. KW15 1HR","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"EMEC","Address of Main Physical Facility":"The Charles Clouston Building ORIC, Back Rd, Stromness KW16 3AW","Timeline (Project Maturity)":"2015  2017","Key Partners":"Local Energy Scotland, Scottish Government\'s Local Energy Challenge Fund, Community Energy Scotland, EMEC, Orkney Islands Council, Eday Renewable Energy and ITM Power.","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-2.7307,53.4416]},"properties":{"Name":"EcoLowNOx","Link":"https://www.glass-futures.org/our-innovation","Part of larger programme?":"Yes","Larger Programme Name":"ISCF Transforming foundation industries: Building a resilient recovery","Project Type":"R&D facility","Scope/Goal":"This cross-sector project, bringing together glass and steel, two high energy-consuming sectors, will develop a new combustion technology for high-temperature furnaces that can reduce nitrogen oxide (NOx) emissions and improve furnace thermal efficiency.","Funding":"7.1m","Type of Hydrogen":"Industrial fuel switching","Region (?)":"South East (England)","Name of Lead Partner":"Glass Future","Address of Lead Partner":"St Helens Linkway, St Helens, Merseyside, WA9 5DT, England","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"N/A","Address of Main Physical Facility":"N/A","Timeline (Project Maturity)":"2022-","Key Partners":"Glass Futures, Tata Steel, Liberty Speciality Steels, and the University of South Wales","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.406348,53.419493]},"properties":{"Name":"Blackburn Meadows","Link":"https://www.eonenergy.com/About-eon/media-centre/green-hydrogen-potential-sheffields-steelmakers/","Part of larger programme?":"Yes","Larger Programme Name":"Net Zero Innovation Portfolio (NZIP)","Project Type":"Feasibility study","Scope/Goal":"E.ON and a consortium of industry partners, academics and local authorities is launching a new study to assess the feasibility of green hydrogen as a planet-friendly fuel for steelmakers","Funding":"400,000","Type of Hydrogen":"Biomass","Region (?)":"Yorkshire and The Humber","Name of Lead Partner":"E.ON","Address of Lead Partner":"12 A631, Tinsley, Sheffield S9 1HF","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"E.ONs Blackburn Meadows renewable energy park","Address of Main Physical Facility":"12 A631, Tinsley, Sheffield S9 1HF","Timeline (Project Maturity)":"Finished","Key Partners":"Blackburn Meadows, E.ON, Sheffield University, IKEA, Ice Sheffield, Sheffield Arena and Forgemasters\' Steel Works","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-2.0947,57.1481]},"properties":{"Name":"HyTrEc2  Interreg North Sea Region ","Link":"https://northsearegion.eu/hytrec2/","Part of larger programme?":"Yes","Larger Programme Name":"Interreg VB North Sea Region Programme","Project Type":"Feasibility study","Scope/Goal":"The HyTrEc2 project brings together eight organisations with an interest or experience in H2 to collaborate on the development of a strategy and initiatives across the NSR. This will support the further use of Hydrogen Fuel Cell Electric Vehicles (FCEVs) in the NSR.\\n\\nPartners from the UK, Germany, The Netherlands, Sweden and Norway are working together to support the use of Hydrogen in the transport and energy sectors in the North Sea Region (NSR).","Funding":"5,2m","Type of Hydrogen":"Wind","Region (?)":"Scotland","Name of Lead Partner":"Aberdeen City Council ","Address of Lead Partner":"Marischal College Broad Street, Aberdeen, AB10 1AQ","Physical facility? Yes/No":"No","Name of Main Physical Facility":"N/A","Address of Main Physical Facility":"N/A","Timeline (Project Maturity)":"Finished","Key Partners":"Centre of Excellence for Low Carbon and Fuel Technologies, Research Institutes of Sweden, The Arctic University of Norway (UiT), atene Kom, Provincie Drenthe, Gremeente Groningen","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-2.0947,57.1481]},"properties":{"Name":"Hector  Interreg North West Europe","Link":"https://www.nweurope.eu/projects/project-search/hector-hydrogen-waste-collection-vehicles-in-north-west-europe/","Part of larger programme?":"Yes","Larger Programme Name":"European Regional Development Fund","Project Type":"Feasibility study","Scope/Goal":"The HECTOR project  Hydrogen Waste Collection Vehicles in North West Europe  will deploy and test 7 fuel cell garbage trucks, in 7 pilot sites across the north west Europe area. The aim of the HECTOR Project is to demonstrate that fuel cell garbage trucks provide an effective solution to reduce emissions from road transport in the North West Europe area.","Funding":"9.28m","Type of Hydrogen":"Fuel cells","Region (?)":"Scotland","Name of Lead Partner":"Aberdeen City Council \\n","Address of Lead Partner":"Marischal College Broad Street, Aberdeen, AB10 1AQ","Physical facility? Yes/No":"No","Name of Main Physical Facility":"N/A","Address of Main Physical Facility":"N/A","Timeline (Project Maturity)":"2019-2023\\n","Key Partners":"Aberdeen City Council\\nMunicipality of Groningen\\nPreZero Disposal, Recycle and Dual System","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":"Amy Perry\\t\\naperry@aberdeencity.gov.uk"}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-2.0947,57.1481]},"properties":{"Name":"JIVE  Fuel Cell & Hydrogen Joint Undertaking","Link":"https://www.fuelcellbuses.eu/projects/jive","Part of larger programme?":"Yes","Larger Programme Name":"European Union Horizon 2020","Project Type":"Feasibility study","Scope/Goal":"The JIVE (Joint Initiative for hydrogen Vehicles across Europe) project seeks to deploy 139 new zero emission fuel cell buses and associated refuelling infrastructure across five countries. The overall objective of the JIVE initiatives are to advance the commercialisation of fuel cell buses through large-scale deployment of vehicles and infrastructure so that by the end of the project, fuel cell buses are commercially viable for bus operators to include in their fleets without subsidy, and that local and national governments feel empowered to regulate for zero emission propulsion for their public transport systems.","Funding":"32m","Type of Hydrogen":"Fuel cells, wind","Region (?)":"Scotland, West Midlands, London","Name of Lead Partner":"Aberdeen City Council \\n","Address of Lead Partner":"Marischal College Broad Street, Aberdeen, AB10 1AQ","Physical facility? Yes/No":"No","Name of Main Physical Facility":"N/A","Address of Main Physical Facility":"N/A","Timeline (Project Maturity)":"2017-2023","Key Partners":"Aberdeen City Council, Birmingham City Council, Dundee City Council, Energy Engineers, Element Energy, Hydrogen Europe","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.48853,53.381363]},"properties":{"Name":"Translational Energy Research Centre (TERC)","Link":"https://terc.ac.uk/equipment/hydrogen-equipment/","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"Feasibility study","Scope/Goal":"The Translational Energy Research Centre is one of the largest and best-equipped zero-carbon energy, hydrogen, bioenergy, CCUS and sustainable aviation fuels research and development facilities in Europe. Based at the University of Sheffield and forming part of its Energy Institute, they are finding and testing practical solutions to critical energy challenges. ","Funding":"17m","Type of Hydrogen":"Other","Region (?)":"Scotland","Name of Lead Partner":"The University of Sheffield","Address of Lead Partner":"Sheffield Business Park, Europa Avenue, S9 1ZA","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"TERC","Address of Main Physical Facility":"Sheffield S10 2TN","Timeline (Project Maturity)":"Finished","Key Partners":"BEIS, European Regional Development Fund","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.1262,51.5075]},"properties":{"Name":"Project Union (National Grid Gas) ","Link":"https://www.nationalgrid.com/gas-transmission/future-of-gas/hydrogen","Part of larger programme?":"Yes","Larger Programme Name":"National Grid","Project Type":"Innovation programme","Scope/Goal":"Project Union is a National Grid Gas Transmission project, exploring the potential to repurpose sections of the NTS to develop a hydrogen backbone network. Project Union will connect hydrogen production, storage and demand to enable netzero and empower a UK hydrogen economy.Through the phased repurposing of existing assets alongside new ones, a hydrogen backbone of around 2,000km will be created, representing around 25% of the UKs current natural gas transmission pipelines.","Funding":"1.1m","Type of Hydrogen":"Natural gas, electrolysis","Region (?)":"North East (England)","Name of Lead Partner":"National Grid ","Address of Lead Partner":"1-3 Strand, London WC2N 5EH","Physical facility? Yes/No":"No","Name of Main Physical Facility":"N/A","Address of Main Physical Facility":"N/A","Timeline (Project Maturity)":"2021 -2030s","Key Partners":"BEIS\\nNational Grid Gas","FIELD19":"Construction of the test facility began in 2021 -2030s","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.23644,54.57304]},"properties":{"Name":"H2NorthEast","Link":"https://www.kellasmidstream.com/assets-and-projects/hydrogen","Part of larger programme?":"Yes","Larger Programme Name":"CCS Infrastructure Fund (CIF)","Project Type":"Feasibility study","Scope/Goal":"H2NorthEast would be the first low carbon blue hydrogen production facility on Teesside and have an asset life of around 25 years. Phase 1 of the project will deliver 355MW of low carbon hydrogen to local industry by 2027 with plans to scale up to over 1GW by 2030.","Funding":"N/A","Type of Hydrogen":"CCUS","Region (?)":"North East (England)","Name of Lead Partner":"Kellas Midstream","Address of Lead Partner":"The Silver Fin Building, 455 Union St, Aberdeen AB11 6DB","Physical facility? Yes/No":"No","Name of Main Physical Facility":"Low carbon CCUS-enabled hydrogen production facility","Address of Main Physical Facility":"Teesside","Timeline (Project Maturity)":"2021-2027","Key Partners":"Kellas Midstream, Northern Endurance Partnership, CATS","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.23644,54.57304]},"properties":{"Name":"BP H2 Teesside","Link":"https://www.bp.com/en_gb/united-kingdom/home/where-we-operate/reimagining-teesside/Spotlight-on-bp-teesside-projects.html","Part of larger programme?":"Yes","Larger Programme Name":"BP Hydrogen ; Net Zero Hydrogen Fund (NZHF)","Project Type":"Innovation programme","Scope/Goal":"H2Teesside is bps world-scale hydrogen project that aims to produce 1GW of CCUS-enabled blue hydrogen and start-up in 2027. It will capture and send for storage up to 2 million tonnes of carbon dioxide (CO2) per year via the Northern Endurance Partnership (NEP)","Funding":"N/A","Type of Hydrogen":"CCUS, Water electrolysis","Region (?)":"North East (England)","Name of Lead Partner":"BP","Address of Lead Partner":"High St, Ormesby, Middlesbrough TS7 9AE","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"H2Teesside","Address of Main Physical Facility":"Teesside","Timeline (Project Maturity)":"2025-2030","Key Partners":"BP","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-5.037405,51.710198]},"properties":{"Name":"Milford Haven Energy Kingdom","Link":"https://www.pembrokeshire.gov.uk/mh2-energy-kingdom","Part of larger programme?":"Yes","Larger Programme Name":"Prospering from the Energy Revolution (PfER) programme, as part of Innovate UK\'s Industrial Strategy Challenge Fund (ISCF)","Project Type":"Feasibility study","Scope/Goal":"Milford Haven: Energy Kingdom (MH:EK) is exploring the role of hydrogen in a decarbonised energy future. The project is primarily delivering a Front End Engineering Design (FEED) study for what could be the first of many Smart Local Energy Systems. The project demonstrates the practical application of hydrogen technology by testing the feasibility of two hydrogen powered Rasa cars built by Welsh company Riversimple. The cars operate as fleet cars around the Haven, using the green hydrogen electrolyser and refuelling facility installed on Mackerel Quay on the Port estate. The second demonstrator is a hydrogen-ready smart hybrid heating system that has also been installed and is being tested in an operational Port building. This heating system combines a hydrogen boiler with a heat pump and smart controls to deliver low carbon heating at the lowest possible cost.","Funding":"4.5m","Type of Hydrogen":"","Region (?)":"Wales","Name of Lead Partner":"Pembrokeshire County Council","Address of Lead Partner":"County Hall, Haverfordwest SA61 1TP, United Kingdom","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Mackerel Quay, Port of Milford Haven","Address of Main Physical Facility":"SA73 3BN","Timeline (Project Maturity)":"2020-2022\\n","Key Partners":"Port of Milford Haven, Offshore Renewable Energy Catapult, Energy Systems Catapult, Riversimple, ARUP, Wales & West Utilities, Pembrokeshire County Council","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-2.841482,53.271558]},"properties":{"Name":"Protos Park plastic to Hydrogen","Link":"https://www.protos.co.uk/news/plans-for-uk-first-plastics-to-hydrogen-facility-at-protos-approved/","Part of larger programme?":"No ","Larger Programme Name":"N/A","Project Type":"R&D facility","Scope/Goal":" The Protos Parks aim to treat up to 35 tonnes of unrecyclable plastics a day and using it to create a local source of hydrogen. This hydrogen could be used as a clean fuel for buses, Heavy Goods Vehicles (HGVs) and cars, helping to reduce air pollution and improve air quality on local roads.Hydrogen refuelling station: taking hydrogen from the consented plastic to hydrogen facility to supply up to 1000kg of hydrogen per day to vehicles, sufficient to fuel approximately 20 HGVs from outside Protos and a similar number of internal HGV movements that will be servicing operations within Protos. ","Funding":"7m","Type of Hydrogen":"Waste, Electrolytic","Region (?)":"North West (England)","Name of Lead Partner":"Protos ","Address of Lead Partner":"Grinsome Road, Chester CH2 4RB","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Protos Park plastic to Hydrogen","Address of Main Physical Facility":"Grinsome Road, Chester CH2 4RB","Timeline (Project Maturity)":"","Key Partners":"N/A","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.461394,52.553451]},"properties":{"Name":"MIRA Technology Park","Link":"https://hydrogen-central.com/5m-ev-hydrogen-vehicle-testing-facility-gets-ahead-mira-technology-park/","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"R&D facility","Scope/Goal":"The Technology Park contains 40 major test facilities developing technology in electric and hydrogen propulsion, autonomy and cybersecurity with over 106 kilometres of test tracks and test beds making it a unique world-class facility and a global attraction for companies to the UK. The synergy between the industry cluster and facilities at the existing MIRA Technology Park provides an opportunity for companies at the forefront of new low carbon and autonomous technologies to capitalise on this centre of technological development.","Funding":"5,000,000","Type of Hydrogen":"Electrolytic","Region (?)":"North West (England)","Name of Lead Partner":"MIRA Technology Park","Address of Lead Partner":"MIRA Technology Park, MIRA Technology Institute, 1 Eastern Avenue, Nuneaton CV10 0UX","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"MIRA Technology Park","Address of Main Physical Facility":"MIRA Technology Park, MIRA Technology Institute, 1 Eastern Avenue, Nuneaton CV10 0UX","Timeline (Project Maturity)":"2022  2024","Key Partners":"Leicester and Leicestershire Enterprise Partnership (LLEP), Hinckley and Bosworth Borough Council (HBBC) ","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-2.9938,53.4]},"properties":{"Name":"North West hydrogen buses","Link":"https://www.nwhydrogenalliance.co.uk/news-stories/blog-deploying-hydrogen-as-a-transport-fuel-in-the-north-west-mark-griffin-at-boc/","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"Innovation programme","Scope/Goal":"Hydrogen is produced at the station via electrolysis of water utilising electricity generated from renewable sources. It is then stored as a compressed gas until being dispensed into vehicles, much like refuelling a petrol or diesel vehicle.","Funding":"30m","Type of Hydrogen":"Electrolytic","Region (?)":"North West (England)","Name of Lead Partner":"BOC Ltd","Address of Lead Partner":"1 Devonshire Square, London EC2M 4WD","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Liverpool City Region","Address of Main Physical Facility":"Liverpool City Region","Timeline (Project Maturity)":"2015- present ","Key Partners":"Liverpool City Region Combined Authority, Arcola Energy","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-2.3021,51.7455]},"properties":{"Name":"Hynet North West","Link":"https://hynet.co.uk/","Part of larger programme?":"Yes","Larger Programme Name":"Hynet","Project Type":"Feasibility study","Scope/Goal":"The HyNet Low Carbon Hydrogen Project comprises the development and deployment of a 100kNm3/hr hydrogen production and supply facility to be sited at Essar Oils Stanlow refinery utilising Johnson Mattheys Low Carbon Hydrogen (LCH) technology which includes carbon capture.","Funding":"72 million","Type of Hydrogen":"Electrolytic,CCUS","Region (?)":"North West (England)","Name of Lead Partner":"HyNet","Address of Lead Partner":"38f Swan House, Bonds Mill, Bristol Road, Stonehouse, Gloucestershire, England, GL10 3RF","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"No","Address of Main Physical Facility":"N/A","Timeline (Project Maturity)":"early proposals from 26 January 2022 to 11 March 2022","Key Partners":"Essar Local Enterprise Partnerships (LEPs).... ","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.238056,50.831111]},"properties":{"Name":"Shoreham Port Green hydrogen (H2 Green)","Link":"https://www.shoreham-port.co.uk/need-to-know/news/shoreham-port-local-fuels-ricardo-and-h2-green-move-forward-with-green-hydrogen-hub-collaboration-2079/","Part of larger programme?":"Yes","Larger Programme Name":"H2 Green","Project Type":"R&D facility","Scope/Goal":"The hub will provide clean fuel for locally based fleets and be a catalyst for the decarbonisation of transport across the region. Shoreham Port have brought together H2 Green who will be producing the hydrogen, Local Fuels who will bring their fuelling infrastructure and distribution expertise and Ricardo, who will impart their world leading engineering experience and pioneering leadership in hydrogen conversions.","Funding":"","Type of Hydrogen":"Electrolytic","Region (?)":"South East (England)","Name of Lead Partner":"Shoreham Port ","Address of Lead Partner":"Nautilus House, 90-100 Albion St, Brighton BN42 4ED","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"renewable green energy hub","Address of Main Physical Facility":"Shoreham Port","Timeline (Project Maturity)":"investment decision in the second half of 2022","Key Partners":"Local Fuels, Ricardo and H2 Green","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.3336105,53.7376523]},"properties":{"Name":"Humber Industrial Cluster Plan","Link":"https://www.humberindustrialclusterplan.org/","Part of larger programme?":"Yes","Larger Programme Name":"Industrial Cluster Plan","Project Type":"R&D facility","Scope/Goal":"The Humber Local Enterprise Partnership and membership organisation CATCH will work with industrial partners across the Humber to develop the Humber Cluster Plan (HCP) that will enable the Humber industrial cluster -- the UK\'s largest by carbon emissions -- to achieve net zero by 2040.","Funding":"1,657,844","Type of Hydrogen":"Electrolytic,CCUS","Region (?)":"Yorkshire and The Humber","Name of Lead Partner":"Hull and East Yorkshire LEP","Address of Lead Partner":"Wykeland House, 47 Queen St, Hull HU1 1UU","Physical facility? Yes/No":"No","Name of Main Physical Facility":"","Address of Main Physical Facility":"","Timeline (Project Maturity)":"","Key Partners":"","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-2.864968,54.074166]},"properties":{"Name":"Bay Hydrogen Hub  Hydrogen4Hanson","Link":"https://www.hanson.co.uk/en/news-and-events/funding-secured-to-investigate-fuel-at-asphalt-sites","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"Innovation programme","Scope/Goal":"The Bay Hydrogen Hub  Hydrogen4Hanson project is a key stepping-stone towards the decarbonisation of the asphalt and cement industry, developing nuclear hydrogen production and investigating technologies to deliver hydrogen to dispersed industrial sites. Our consortium vision is to demonstrate solid oxide electrolysis (SOEC)","Funding":"400,000","Type of Hydrogen":"Nuclear","Region (?)":"","Name of Lead Partner":"North West (England)","Address of Lead Partner":"14 Castle Hill, Maidenhead SL6 4JJ","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"EDFs Heysham nuclear power station","Address of Main Physical Facility":"Morecambe","Timeline (Project Maturity)":"2023-25","Key Partners":"National Nuclear Laboratory (NNL), Hynamics, CERES Power, EDF R&D and EDF Generation","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.159505,54.580028]},"properties":{"Name":"OISH  Hydrogen from steelmaking waste as green fuel for steel production (IHA 2A)","Link":"https://nanomox.net/oish-project","Part of larger programme?":"Yes","Larger Programme Name":"IHA Stream 2A","Project Type":"Feasibility study","Scope/Goal":"A feasibility study for the integration of a new metal-rich waste treatment process with the use of the co-produced hydrogen in steel manufacturing at the same site. Nanomox Oxidative Ionothermal Synthesis (OIS) uses green catalytic solvents at low temperatures to complete the direct oxidation of metals, offering enormous energy efficiency improvements over existing technologies. This patent pending process can treat metal-containing wastes, prevent landfills, reduce reliance on energy intensive pyrometallurgical processes and co-produce significant volumes of hydrogen during operation. Wastes from the steelmaking process will be converted into saleable materials for industrial use (for example, zinc oxide) while the hydrogen produced is used as fuel on plant. Zinc/iron rich sludge is a legacy issue in the UK with approximately 6.7 million tonnes currently stockpiled, while 90,000 tonnes continue to be produced annually.","Funding":"173141.59","Type of Hydrogen":"Waste, Electrolytic","Region (?)":"Yorkshire and The Humber","Name of Lead Partner":"Nanomox Ltd","Address of Lead Partner":"21 Albemarle Street, London, W1S 4EW","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Materials Processing Institute","Address of Main Physical Facility":"Eston Road, Middlesbrough, Cleveland TS6 6US","Timeline (Project Maturity)":"2022-2023","Key Partners":"Nanomox Ltd","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.838192,57.570622]},"properties":{"Name":"Acorn CCS (aka Scottish Cluster)","Link":"https://theacornproject.uk/","Part of larger programme?":"Yes","Larger Programme Name":"Cluster sequencing for carbon capture, usage and storage (CCUS) deployment: Phase-1","Project Type":"Feasibility study","Scope/Goal":"The Acorn project focuses on three developments: Acorn Carbon Capture; Acorn Hydrogen; and Acorn Transport & Storage. Acorn Carbon Capture is a carbon capture plant that will support the decarbonisation of two St. Fergus Gas Terminals. Acorn Hydrogen is located adjacent to the St. Fergus gas terminal and aims to turn North Sea natural gas into clean-burning hydrogen, while capturing the CO2 emissions from that process. Acorn Transport & Storage is a system using pipelines, ships and other containers to move CO2 emissions from projects in the UK and abroad (including Acorn\'s) to permanent storage 2.5km (1.5miles) under the North Sea. \\n\\nThe Scottish Cluster is a reserve cluster, meaning it met the eligibility criteria and performed to a good standard against the evaluation criteria. As such, if government chooses to discontinue engagement with a cluster in Track-1 (HyNet and East Coast Clusters), it will engage with this reserve cluster instead.","Funding":"https://www.gov.uk/government/publications/cluster-sequencing-for-carbon-capture-usage-and-storage-ccus-deployment-phase-1-expressions-of-interest/october-2021-update-track-1-clusters-confirmed","Type of Hydrogen":"CCUS","Region (?)":"Scotland","Name of Lead Partner":"Pale Blue Dot Energy (Storegga)","Address of Lead Partner":"Storegga, Brathens Eco-Business Park Hill of Brathens Glassel, Banchory AB31 4BW","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"St Fergus Gas Terminal","Address of Main Physical Facility":"St Fergus, AB42 3EP","Timeline (Project Maturity)":"Track-2 enabling 10Mtpa capacity operational by 2030","Key Partners":"Shell, Harbour Energy and North Sea Midstream Partners ","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-3.824355,51.627141]},"properties":{"Name":"Hydrogen Research and Demonstration Centre","Link":"http://www.h2wales.org.uk/pages/hydrogen-centre/hydrogen-centre.html","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"R&D facility","Scope/Goal":"Part of the Baglan Energy Park at Neath Port Talbot, it is the focal point for a series of collaborative projects between the University of South Wales and other academic and industrial partners. The Centre focuses on experimental development of renewable hydrogen production and novel hydrogen energy storage, as well as further research and development of hydrogen vehicles, fuel cell applications and hydrogen energy systems. The Centre is the focal point for a series of collaborative projects between the University of South Wales and other academic and industrial partners.","Funding":"2.2 million","Type of Hydrogen":"Electrolytic","Region (?)":"Wales","Name of Lead Partner":"University of South Wales","Address of Lead Partner":"Lodge Rd, Caerleon, Newport NP18 3QT","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Baglan Energy Park","Address of Main Physical Facility":"Phase 2, Briton Ferry, Neath SA11 2HZ","Timeline (Project Maturity)":"Completed","Key Partners":"University of South Wales, European Regional Development Fund, Neath Port Talbot Council, Welsh Government","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-4.623448,53.297841]},"properties":{"Name":"Holyhead Hydrogen Hub","Link":"https://www.mentermon.com/en/priosectau/hwb-hydrogen/","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"Testing & certification","Scope/Goal":"Work on the Holyhead Hydrogen Hub started in 2019 with a feasibility study which explored the opportunites to produce and use hydrogen on Ynys Mn.The upcoming demonstration hydrogen production plant and fuelling hub for HGVs to serve freight traffic at Holyhead and port-side vehicles, which could be operational by 2025.","Funding":"5.5 million","Type of Hydrogen":"Electrolytic","Region (?)":"Wales","Name of Lead Partner":"Menter Mn","Address of Lead Partner":"Llangefni LL77 7LR","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Plot C7 Parc Cybi, Holyhead","Address of Main Physical Facility":"LL65 2YQ","Timeline (Project Maturity)":"Hub operational by 2025","Key Partners":"Ynys Mn County Council, the North Wales Economic Ambition Board, the Welsh Government, UK Government","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.435713,50.909704]},"properties":{"Name":"Southampton Water","Link":"https://sgn.co.uk/about-us/future-of-gas/southampton-water","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"Feasibility study","Scope/Goal":"Southampton Water project will scope the sites suitability as a centre of excellence for hydrogen production and distribution, carbon capture, utilisation and storage (CCUS), and other green technologies. \\nIts ultimate aim is to support and facilitate the decarbonisation of local industry and transport, laying the groundwork for the full decarbonisation of our network in the south of England.","Funding":"5.6 million","Type of Hydrogen":"CCUS","Region (?)":"South East (England)","Name of Lead Partner":"Port of Southampton","Address of Lead Partner":"Port of Southampton","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":" Port of Southampton       ","Address of Main Physical Facility":" Port of Southampton","Timeline (Project Maturity)":"Business model agreed (2022) - Planning application (2022/23)","Key Partners":"Macquaries Green Investment Group (GIG) and SGN","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-3.879748,55.642496]},"properties":{"Name":"Hy2Go","Link":"https://hy2go.uk/","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"R&D facility","Scope/Goal":"The plant will be one of the first green hydrogen production facilities in the UK and, adopting a 9MW electrolyser, will be fully self-sufficient in terms of energy provided by environmentally sustainable sources.The 51-acre plant, at Lesmahagow in Lanarkshire, will have its own wind turbines and solar panels which will feed a 9MW hydrogen electrolyser, with the capacity to increase the electrolyser size to 20MW in a second-phase expansion.","Funding":"23m","Type of Hydrogen":"Electrolytic","Region (?)":"Scotland","Name of Lead Partner":"Hy2Go ","Address of Lead Partner":"M74 Eco Park, Carlisle Road\\nLesmahagow ML11 0GU\\nScotland","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"The Hy2Go park ","Address of Main Physical Facility":"M74 Eco Park, Carlisle Road\\nLesmahagow ML11 0GU\\nScotland","Timeline (Project Maturity)":"","Key Partners":"Ryse Hydrogen","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[1.9728,57.2224]},"properties":{"Name":"Vattenfall HT1","Link":"https://group.vattenfall.com/uk/newsroom/pressreleases/2022/aberdeen-hydrogen","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"R&D facility","Scope/Goal":"The project will test the full integration of a hydrogen electrolyser with an offshore wind turbine for the first time, and examine its real-time response to a variable power source. It will also look at how fossil-free hydrogen can be produced safely at low cost, and what needs to be done to speed up the regulatory process and enable large-scale commercial production.","Funding":"9.3m","Type of Hydrogen":"Electrolytic, wind","Region (?)":"Scotland","Name of Lead Partner":"Vattenfall","Address of Lead Partner":"70 St Mary Axe, London EC3A 8BE","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"European Offshore Wind Deployment Centre","Address of Main Physical Facility":"Aberdeen Bay off the coast of Aberdeen","Timeline (Project Maturity)":"2025-","Key Partners":"-0.131","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.088419,50.811556]},"properties":{"Name":"Clean Tyne Shipping Corridor","Link":"https://cp.catapult.org.uk/news/port-zero-and-green-shipping-corridor-studies-green-lit/","Part of larger programme?":"Yes","Larger Programme Name":"Clean Maritime Demonstation Competition phase 2 (CMDC 2)","Project Type":"Feasibility study","Scope/Goal":"Feasibility study investigating the potential of establishing a green shipping corridor from the UK north-east shore with the vision to join up with the Europe Green Shipping network and\\ncoordinate decarbonisation efforts and accelerate uptake through diffusion. The consortium will produce the following key collaborative deliverables:\\n Green Corridor Gap Analysis: Identify barriers to implementing a corridor,\\nincluding the regulatory landscape, renewable energy supply, vessel technology,\\nshoreside infrastructure, and information sharing.\\n Implementation Roadmap: To achieve zero-emission operations, stakeholders\\nshould use lifecycle emissions assessment tools and analyses that incorporate\\ninternationally accepted methodologies. The project will deliver an implementation\\nroadmap based on an established strategic business case and prioritised actions\\nwhich will be used to create a proposal and outline design for a deployment\\ndemonstrator by 2025.\\n Demonstration Plan: Produce a detailed costed plan for selected green corridor\\nroute(s).","Funding":"518,363 total\\n398,217 from IUK","Type of Hydrogen":"Other","Region (?)":"North East (England)","Name of Lead Partner":"Port of Tyne","Address of Lead Partner":"Maritime House, Tyne Dock, South Shields NE34 9PT","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Portsmouth International Port","Address of Main Physical Facility":"George Byng Way, Portsmouth PO2 8SP","Timeline (Project Maturity)":"01-01-23 to 31-08-23","Key Partners":"Port of Tyne, Newcastle University, EDF Energy R&D, Arup, Lloyds Register, Connected Places Catapult, North of Tyne CA","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.088419,50.811556]},"properties":{"Name":"SHAPE UK (Shipping, Hydrogen and Port Ecosystems UK)","Link":"https://portsmouth-port.co.uk/about-us/sustainability/shape-shipping-hydrogen-port-ecosystems-uk/#:~:text=The%20port%20aims%20to%20have,zero%20emission%20shipping%20by%202050.","Part of larger programme?":"Yes","Larger Programme Name":"IUK funded as part of the Clean Maritime Demonstation Competition phase 1 (CMDC 1)","Project Type":"Feasibility study","Scope/Goal":"A study investigating the potential for hydrogen to decarbonise port operations at Portsmouth International Port. A hydrogen electrolyser was installed at the port which produced green hydrogen to power a vessel retrofitted with a diesel/hydrogen hybrid engine. \\n\\nA digital twin of the port was created using live data to monitor energy flows and air quality. ","Funding":"1.5m total\\n1.2m from IUK","Type of Hydrogen":"Electrolytic","Region (?)":"South East (England)","Name of Lead Partner":"Portsmouth University\\n","Address of Lead Partner":"University House, Winston Churchill Ave, Portsmouth PO1 2UP","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Portsmouth International Port","Address of Main Physical Facility":"George Byng Way, Portsmouth PO2 8SP","Timeline (Project Maturity)":"01-09-21 to 31-03-22","Key Partners":"Portsmouth International Port, B4T, IOTICS, Connected Places Catapult","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.131,51.4988]},"properties":{"Name":"Industrial Hydrogen Accelerator Programme","Link":"https://www.gov.uk/government/publications/industrial-hydrogen-accelerator-programme-successful-projects?utm_medium=email&utm_campaign=govuk-notifications-topic&utm_source=eb1092a3-a63c-466c-9479-04b8b388e9cd&utm_content=immediately","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"Innovation programme","Scope/Goal":"The Industrial Hydrogen Accelerator (IHA) competition supports projects generating evidence on end-to-end industrial fuel switching to hydrogen. It will cover the full technology chain, from hydrogen generation and delivery infrastructure through to industrial end-use, including the integration of the components in a single project.","Funding":"26m","Type of Hydrogen":"Electrolytic, biofuels, other","Region (?)":"UK wide","Name of Lead Partner":"Department for Business, Energy & Industrial Strategy (BEIS)","Address of Lead Partner":"1 Victoria St, London, SW1H 0ET","Physical facility? Yes/No":"No","Name of Main Physical Facility":"N/A","Address of Main Physical Facility":"N/A","Timeline (Project Maturity)":"2022-","Key Partners":"BEIS","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.2553,53.654]},"properties":{"Name":"Humber H2 Hub ","Link":"https://www.uniper.energy/projects-and-cases/humber-hub","Part of larger programme?":"Yes","Larger Programme Name":"East Coast Cluster","Project Type":"R&D facility","Scope/Goal":"The planned development will include blue hydrogen production capability with a capacity of up to 720 megawatts (MW), using gas reformation technology with carbon capture and storage (CCS). It will feed in to the East Coast Cluster, selected as one of two carbon capture and storage clusters to be taken forward by the Government, through the proposed Zero Carbon Humber onshore pipeline.","Funding":"N/A","Type of Hydrogen":"CCUS","Region (?)":"Yorkshire and The Humber","Name of Lead Partner":"Uniper","Address of Lead Partner":"2300 The Crescent, Birmingham B37 7YE","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Unipers Killingholme site","Address of Main Physical Facility":"Chase Hill Road, Immingham DN403LU","Timeline (Project Maturity)":"2023-2027","Key Partners":"Uniper, Shell","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-0.1262,51.5075]},"properties":{"Name":"Humber Low Carbon Pipelines","Link":"https://www.nationalgrid.com/our-businesses/national-grid-ventures/humber-low-carbon-pipelines","Part of larger programme?":"Yes","Larger Programme Name":"East Coast Cluster","Project Type":"Testing & certification","Scope/Goal":"National Grid Ventures, part of National Grid plc,will transport both low carbon hydrogen and carbon emissions captured locally for safe storage. Also, it intends to create an onshore network of underground pipelines for the Humber region to transport captured carbon dioxide (CO2) and hydrogen.","Funding":"N/A","Type of Hydrogen":"CCUS","Region (?)":"Yorkshire and The Humber","Name of Lead Partner":"National Grid ","Address of Lead Partner":"1-3 Strand, London WC2N 5EH","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"TBD","Address of Main Physical Facility":"TBD","Timeline (Project Maturity)":"Mid-2020s-2026","Key Partners":"BEIS, Northern Endurance Partnership, National Grid , Uniper","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-4.2694,55.8632]},"properties":{"Name":"Whitelee (Scottish Power)","Link":"https://www.scottishpowerrenewables.com/pages/whitelee.aspx","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"Testing & certification","Scope/Goal":"This Facility will use electrolysis to create hydrogen using water and will allow it to produce up to 10 tonnes of Green Hydrogen per day. We anticipate that this hydrogen will be used to fuel public transport and heavy freight vehicles as diesel engines are phased out over the next few years.","Funding":"9.4 million","Type of Hydrogen":"Electrolytic","Region (?)":"Scotland","Name of Lead Partner":"Scottish Power Renewables","Address of Lead Partner":"320 St Vincent St Glasgow G2 5AD","Physical facility? Yes/No":"No","Name of Main Physical Facility":"N/A","Address of Main Physical Facility":"N/A","Timeline (Project Maturity)":"2022-","Key Partners":"Scottish Power Renewables","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-3.2012,55.9458]},"properties":{"Name":"Salamander (ERM)","Link":"https://www.erm.com/news/opportunity-for-the-worlds-first-combined-floating-wind-and-green-hydrogen-project-off-the-east-coast-of-scotland/","Part of larger programme?":"No","Larger Programme Name":"N/A","Project Type":"Innovation programme","Scope/Goal":"The 200 MW Salamander floating wind project, developed by Simply Blue Energy in partnership with Subsea 7, has signed a memorandum of understanding with ERM for the potential use of the ERM Dolphyn hydrogen technology. The project is also working closely with Scotland Gas Networks (SGN) to potentially integrate with and connect into future 100 % hydrogen infrastructure or as a blend with existing gas infrastructure, which SGN are aiming to develop through their decarbonisation roadmap.","Funding":"150m","Type of Hydrogen":"Electrolytic","Region (?)":"Scotland","Name of Lead Partner":"ERM","Address of Lead Partner":"102 West Port, Edinburgh EH3 9DN, United Kingdom","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"ERMs Dolphyn electrolysis","Address of Main Physical Facility":"102 West Port, Edinburgh EH3 9DN, United Kingdom","Timeline (Project Maturity)":"2021-2026","Key Partners":"ERM, Simply Blue Energy, Subsea7 , Scotland Gas Networks (SGN)","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-2.9938,58.9869]},"properties":{"Name":"HySeas","Link":"https://news.st-andrews.ac.uk/archive/ferguson-marine-to-develop-renewables-powered-hydrogen-ferry-hyseas-iii/","Part of larger programme?":"No","Larger Programme Name":"No","Project Type":"Feasibility study","Scope/Goal":"Port Glasgow-based Ferguson Marine Engineering Limited has successfully led a European consortium in a bid for EU funding support to pave the way for the building and launch of the worlds first sea-going car and passenger ferry fuelled by hydrogen. The vessels fuel will be produced from renewable electricity marking a paradigm shift towards entirely emissions-free marine transport.","Funding":" 12.6m","Type of Hydrogen":"Electrolytic","Region (?)":"Scotland","Name of Lead Partner":"Ferguson Marine and the University of St Andrews","Address of Lead Partner":"Castle Rd, Port Glasgow PA14 5NG, UK ; St Andrews KY16 9AJ, UK","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":"Kirkwall Ferry","Address of Main Physical Facility":"Kirkwall KW15 1HU","Timeline (Project Maturity)":"2013- present ","Key Partners":"Orkney Islands Council, Kongsberg Maritime (Norway), Ballard Power Systems Europe (Denmark), McPhy (France); DLR (the German aerospace agency) and Interferry (Belgium/US)","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-1.778,52.1233]},"properties":{"Name":"The hydroFLEX train - University of Birmingham","Link":"https://www.birmingham.ac.uk/news/2020/hydroflex-secures-funding-for-hydrogen-powered-train-design","Part of larger programme?":"Yes ","Larger Programme Name":"UKRRIN ","Project Type":"Feasibility study","Scope/Goal":"In just three years the team (with funding from Innovate UK) have developed and proved the detailed design of a fully functional hybrid hydrogen fuel cell system and battery system on board the train. They were able also to design the architecture of the power control system which operates the fuel cell and energy storage system in an optimal manner. More recently the team have worked to modify the design of the hydrogen powerpack enabling it to be fully integrated into the train system","Funding":"400,000 FOAK funding","Type of Hydrogen":"Electrolytic","Region (?)":"North West (England)","Name of Lead Partner":"The Birmingham Centre for Railway Research and Education (BCRRE)","Address of Lead Partner":"Birmingham University, 12 Edgbaston Park Rd, Birmingham B15 2TT","Physical facility? Yes/No":"Yes","Name of Main Physical Facility":" Rail Live","Address of Main Physical Facility":"Station Rd, Stratford-upon-Avon CV37 8PL","Timeline (Project Maturity)":"2018-present ","Key Partners":"Porterbrook","FIELD19":"","FIELD20":"","FIELD21":"","FIELD22":"","FIELD23":""}}]}');function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}var ue,he,de,pe,fe=["features"];function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ye(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ce(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ce(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ve(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var xe,be=oe.default.div(ue||(ue=ve(["\n  height: 100%;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-image: url(",");\n  margin-left: 20px;\n"])),se),we=oe.default.div(he||(he=ve(["\n  display: grid;\n  height: 100%;\n  align-content: start;\n  gap: 5px;\n  font-size: 1em;\n  overflow: scroll;\n  padding: 5px 0 0 5px;\n"]))),Ee=oe.default.div(de||(de=ve(["\n  display: flex;\n  justify-content: center;\n  font-size: 1rem;\n  background: #216968;\n"]))),Te=(0,oe.default)(ae.Grid)(pe||(pe=ve(["\n  height: 100vh;\n  width: 100vw;\n  overflow: hidden; //TODO fix map overflow\n"])));function Se(){var e,r,n=(e=(0,t.useState)(null),r=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,r)||function(e,t){if(e){if("string"==typeof e)return _e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_e(e,t):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],o=n[1],a=(0,t.useMemo)((function(){if(null===i)return le;var e=le.features;return ge(ge({},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(le,fe)),{},{features:e.filter((function(e){var t=e.properties;return Object.values(t).some((function(e){return-1!=="".concat(e).toLowerCase().indexOf(i)}))}))})}),[i]);return t.createElement(Te,{areas:[["home","header"],["search","main"],["filters","main"],["projects","main"]],columns:["minmax(min-content, 1fr)","3fr"],rows:["80px","min-content","min-content","minmax(0, 1fr)"]},t.createElement(ae.Grid.Panel,{area:"home"},t.createElement(be,null)),t.createElement(ae.Grid.Panel,{area:"header"},t.createElement(ae.AppBar,{shadow:!1,theme:{primary:"#27847A",accent:"#FFF"}},t.createElement(ae.AppBar.Item,null,"WHAT WE DO"),t.createElement(ae.AppBar.Item,{active:!0},"MAPS"),t.createElement(ae.AppBar.Item,null,"CONTACT US"))),t.createElement(ae.Grid.Panel,{area:"search"},t.createElement(Ee,null,t.createElement(ae.Search,{placeholder:"Search",color:"#216968",background:"white",onSubmit:function(e){return o(null===e?e:e.toLowerCase())}}))),t.createElement(ae.Grid.Panel,{area:"filters"},t.createElement(ae.Drawer,{title:"FILTERS",color:"white",background:"#27847A"})),t.createElement(ae.Grid.Panel,{area:"projects"},t.createElement(we,null,a.features.map((function(e,r){return t.createElement(ae.ListCard,{key:r,title:"".concat(e.properties.Name),subtitle:"".concat(e.properties["Name of Lead Partner"]),orientation:"left",background:"#DCE5E7",height:"5em",width:"100%",flashColor:(n=e.properties["Project Type"],null!==(i={"Feasability Study":"#27847A","Funding/Competition":"#80CC72","Testing & certification":"#B6EFA0","Innovation programme":"#DFE667","R&D facility":"#C8B88A","Government strategy":"#F1DDDF"}[n])&&void 0!==i?i:"#27847A"),onClick:function(){}});var n,i})))),t.createElement(ae.Grid.Panel,{area:"main"},t.createElement(ae.Map,{token:"pk.eyJ1Ijoiam9uYXRoYW5ncmF5IiwiYSI6ImNsYjZydG1nbDAza2szbm1jdjh1eTdsdWYifQ.qwe6dqrATeAfcus-3ggQcw",sourceJson:a,initialState:{height:"100%",width:"100%",zoom:5.5,style:void 0},cluster:!0,clusterOptions:{clusterColor:"#216968",clusterRadius:14},pointOptions:{pointColor:"#216968",pointRadius:5,onPointClick:function(){}}})))}function Ae(){return t.createElement(ie,null,t.createElement(te,null,t.createElement($,{exec:!0,path:"/",element:t.createElement(Se,null)})))}function Pe(){return t.createElement(Ae,null)}var Ie,ke,Ce=(0,oe.createGlobalStyle)(xe||(Ie=["\n    @font-face {\n        font-family: 'Roboto';\n        src: local('Roboto'), local('Roboto'),\n        url(",") format('woff');\n        font-style: normal;\n    }\n"],ke||(ke=Ie.slice(0)),xe=Object.freeze(Object.defineProperties(Ie,{raw:{value:Object.freeze(ke)}}))),"data:font/woff;base64,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");n.createRoot(document.getElementById("root")).render(t.createElement(t.StrictMode,null,t.createElement(Ce,null),t.createElement(Pe,null)))}()}();
//# sourceMappingURL=bundle.c148a94d051dd3f06185.js.map